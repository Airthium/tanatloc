(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1566],{34151:function(e,l,t){"use strict";t.d(l,{E:function(){return i},j:function(){return a}});let a=[{label:"Density",symbol:"Rho",units:[{label:"\\(kg.m^{-3}\\)"}],unit:{label:"\\(kg.m^{-3}\\)"}},{label:"Young's modulus",symbol:"E",units:[{label:"\\(Pa\\)"}],unit:{label:"\\(Pa\\)"}},{label:"Poisson's ratio",symbol:"Nu"},{label:"Thermal conductivity",symbol:"Lambda",units:[{label:"\\(W.m^{-1}.K^{-1}\\)"}],unit:{label:"\\(W.m^{-1}.K^{-1}\\)"}},{label:"Heat capacity",symbol:"Cp",units:[{label:"\\(J.K^{-1}.kg^{-1}\\)"}],unit:{label:"\\(J.K^{-1}.kg^{-1}\\)"}},{label:"Dynamic viscosity",symbol:"Mu",units:[{label:"\\(Pa.s\\)"}],unit:{label:"\\(Pa.s\\)"}}],i={metal:{label:"Metal",children:[{key:"steel",label:"Generic Steel",children:[{label:"Density",symbol:"Rho",value:"7850"},{label:"Young's modulus",symbol:"E",value:"2.1e11"},{label:"Poisson's ratio",symbol:"Nu",value:"0.3"},{label:"Thermal conductivity",symbol:"Lambda",value:"15"},{label:"Heat capacity",symbol:"Cp",value:"502"}]},{key:"S235JR+AR",label:"Steel (S235JR+AR)",children:[{label:"Density",symbol:"Rho",value:"7850"},{label:"Young's modulus",symbol:"E",value:"2.1e11"},{label:"Poisson's ratio",symbol:"Nu",value:"0.27"},{label:"Thermal conductivity",symbol:"Lambda",value:"15"},{label:"Heat capacity",symbol:"Cp",value:"502"}]},{key:"304",label:"Stainless Steel 304",children:[{label:"Density",symbol:"Rho",value:"8000"},{label:"Young's modulus",symbol:"E",value:"193e9"},{label:"Poisson's ratio",symbol:"Nu",value:"0.29"},{label:"Thermal conductivity",symbol:"Lambda",value:"16.2"},{label:"Heat capacity",symbol:"Cp",value:"500"},{label:"Yield strength",symbol:"SigmaY",value:"215e6"}]},{key:"316L",label:"Stainless Steel 316L",children:[{label:"Density",symbol:"Rho",value:"7990"},{label:"Young's modulus",symbol:"E",value:"193e9"},{label:"Poisson's ratio",symbol:"Nu",value:"0.25"},{label:"Thermal conductivity",symbol:"Lambda",value:"16.2"},{label:"Heat capacity",symbol:"Cp",value:"500"},{label:"Yield strength",symbol:"SigmaY",value:"290e6"}]},{key:"6082-O",label:"Aluminium 6082-O",children:[{label:"Density",symbol:"Rho",value:"2700"},{label:"Young's modulus",symbol:"E",value:"69e9"},{label:"Poisson's ratio",symbol:"Nu",value:"0.33"},{label:"Thermal conductivity",symbol:"Lambda",value:"170"},{label:"Heat capacity",symbol:"Cp",value:"960"},{label:"Yield strength",symbol:"SigmaY",value:"60e6"}]},{key:"7075-O",label:"Aluminium 7075-O",children:[{label:"Density",symbol:"Rho",value:"2810"},{label:"Young's modulus",symbol:"E",value:"71.7e9"},{label:"Poisson's ratio",symbol:"Nu",value:"0.33"},{label:"Thermal conductivity",symbol:"Lambda",value:"173"},{label:"Heat capacity",symbol:"Cp",value:"960"},{label:"Yield strength",symbol:"SigmaY",value:"110e6"}]},{key:"2017A",label:"Aluminium 2017A",children:[{label:"Density",symbol:"Rho",value:"2790"},{label:"Young's modulus",symbol:"E",value:"72.5e9"},{label:"Poisson's ratio",symbol:"Nu",value:"0.33"},{label:"Thermal conductivity",symbol:"Lambda",value:"134"},{label:"Heat capacity",symbol:"Cp",value:"873"},{label:"Yield strength",symbol:"SigmaY",value:"275e6"}]}]},polymer:{label:"Polymer",children:[{key:"PMMA",label:"PMMA",children:[{label:"Density",symbol:"Rho",value:"1180"},{label:"Young's modulus",symbol:"E",value:"2.9e9"},{label:"Poisson's ratio",symbol:"Nu",value:"0.36"},{label:"Thermal conductivity",symbol:"Lambda",value:"0.193"},{label:"Heat capacity",symbol:"Cp",value:"1480"},{label:"Yield strength",symbol:"SigmaY",value:"69e6"}]}]},fluid:{label:"Fluid",children:[{key:"water",label:"Water",children:[{label:"Density",symbol:"Rho",value:"1e3"},{label:"Dynamic viscosity",symbol:"Mu",value:"1e-3"},{label:"Thermal conductivity",symbol:"Lambda",value:"0.6"},{label:"Heat capacity",symbol:"Cp",value:"4185"}]}]},contact:{label:"Contact",children:[{key:"fundation",label:"Fundation",children:[]}]}}},62086:function(e,l,t){"use strict";t.d(l,{Z:function(){return i}});var a=t(16647),i={load:async(e,l)=>(await (0,a.R)("/api/result",{method:"POST",headers:{Accept:"application/json"},body:JSON.stringify({simulation:e,result:l})})).json(),download:async(e,l)=>(0,a.R)("/api/result/download",{method:"POST",body:JSON.stringify({simulation:e,result:l})}),archive:async e=>(0,a.R)("/api/result/archive",{method:"POST",body:JSON.stringify({simulation:e})})}},31566:function(e,l,t){"use strict";t.d(l,{ZP:function(){return tN}});var a=t(85893),i=t(67294),n=t(16655),s=t(40750),o=t(90941),u=t(9496),r=t(81384),d=t(24120),c=t(72518),m=t(60052),h=t(68245),v=t(82492),y=t.n(v),p=t(97992),x=t(49),b=t(8670),f=t(25946),g=t(75525),j=t(91125),C=t(52843),Z=t(20659),k=t(85027),w=t(10601),S=t(91951),E=t(11892),T=t(62481),N=t(90578),P=t(53533),M=t(68296),O=t(58650),A=t.n(O);let L={copy:"Unable to copy simulation"},I=async(e,l,t)=>{let a=await k.Z.copy(l);await t.addOneSimulation(a),await t.mutateProject({id:e.id,simulations:[...e.simulations,a.id]})};var R=e=>{let{project:l,simulation:t,swr:n}=e,[o,u]=(0,i.useState)(!1),{dispatch:r}=(0,i.useContext)(p.uj),d=(0,i.useCallback)(()=>{(0,f.u)(async()=>{u(!0);try{await I(l,t,n)}catch(e){r((0,x.iT)({title:L.copy,err:e}))}finally{u(!1)}})},[l,t,n,r]);return(0,a.jsx)(s.Z,{title:"Copy simulation",children:(0,a.jsx)(P.ZP,{className:A().noBorder,loading:o,icon:(0,a.jsx)(M.Z,{}),onClick:d})})},U=t(79505),_=t(59935),Y=t(34883);let z={update:"Unable to update simulation"},F=async(e,l,t)=>{await k.Z.update({id:e.id},[{key:"name",value:l.name}]),await t.mutateOneSimulation({id:e.id,name:l.name})};var B=e=>{let{simulation:l,swr:t}=e,n=(0,i.useRef)(null),[s,o]=(0,i.useState)(!1),[u,r]=(0,i.useState)(!1),{dispatch:d}=(0,i.useContext)(p.uj);(0,i.useEffect)(()=>{n.current&&n.current.focus()});let c=(0,i.useCallback)(async e=>{r(!0);try{await F(l,e,t),r(!1),o(!1)}catch(e){throw d((0,x.iT)({title:z.update,err:e})),r(!1),e}},[l,t,d]),m=(0,i.useCallback)(()=>o(!0),[]),h=(0,i.useCallback)(()=>o(!1),[]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j.w6,{onEdit:m}),(0,a.jsx)(Y.ZP,{title:"Edit the simulation's name",visible:s,initialValues:{name:l.name},onCancel:h,onOk:c,loading:u,children:(0,a.jsx)(U.Z.Item,{name:"name",label:"Name:",rules:[{required:!0,message:"Name is required"}],children:(0,a.jsx)(_.Z,{ref:n})})})]})};let V={del:"Unable to delete simulation"},H=async(e,l,t)=>{await k.Z.del(l);let a=e.simulations.filter(e=>e!==l.id);await t.mutateProject({id:e.id,simulations:a}),await t.delOneSimulation({id:l.id})};var W=e=>{let{project:l,simulation:t,swr:n}=e,[s,u]=(0,i.useState)(!1),{dispatch:r}=(0,i.useContext)(p.uj),d=(0,i.useCallback)(async()=>{u(!0);try{await H(l,t,n)}catch(e){throw r((0,x.iT)({title:V.del,err:e})),e}finally{u(!1)}},[l,t,n,r]);return(0,a.jsx)(j.m1,{loading:s,text:(0,a.jsxs)(a.Fragment,{children:["Are you sure you want to delete the simulation"," ",(0,a.jsx)(o.Z.Text,{strong:!0,children:t.name}),"?"]}),onDelete:d})},D=t(47510),G=t(42989),K=t(7304),q=t(77742),J=t(36814),$=t(6796),Q=t(12003),X=t(68130),ee=e=>{let{dimension:l,initialValue:t,additionalKeywords:n,unit:u,units:r,onChange:d,onUnitChange:c}=e,[m,h]=(0,i.useState)(!1),[v,y]=(0,i.useState)(t),[p,x]=(0,i.useState)(),b=(0,i.useMemo)(()=>[{title:"Label",dataIndex:"label",key:"label"},{title:"Keyword",dataIndex:"value",key:"value"}],[]),f=(0,i.useCallback)(()=>h(!0),[]),j=(0,i.useCallback)(()=>h(!1),[]),C=(0,i.useCallback)(e=>{let t=e.target.value;try{x(void 0),(0,X.Q)(t,{additionalKeywords:null==n?void 0:n.map(e=>{if(2!==l||!e.only3D)return e.value}).filter(e=>e)})}catch(e){x(e.message)}y(t)},[l,n]),Z=(0,i.useCallback)(e=>{let l=e.target.value,t=null==r?void 0:r.find(e=>e.label===l);null==c||c(t)},[r,c]),k=(0,i.useCallback)(async()=>{d({target:{value:v}})},[v,d]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.Z,{title:"Complex formula",children:(0,a.jsx)(Q.Z,{onClick:f})}),(0,a.jsxs)(Y.ZP,{title:"Formula",visible:m,initialValues:{formula:t},onOk:k,onCancel:j,children:[(0,a.jsx)(U.Z.Item,{extra:(0,a.jsx)("span",{style:{color:"red"},children:p}),style:{marginBottom:0},children:(0,a.jsx)(_.Z.TextArea,{value:v,onChange:C,style:p?{borderColor:"red"}:{}})}),r?(0,a.jsx)(U.Z.Item,{children:(0,a.jsx)(J.ZP.Group,{value:null==u?void 0:u.label,onChange:Z,children:null==r?void 0:r.map(e=>(0,a.jsx)(J.ZP.Button,{value:e.label,children:(0,a.jsx)(g.Z.Inline,{text:e.label})},e.label))})}):null,n?(0,a.jsx)(U.Z.Item,{children:(0,a.jsx)(D.Z,{items:[{key:"additional",label:"Additional keywords",children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Z.Text,{children:"Additional keywods are model-specific keywords, in addition to FreeFEM keywords."}),(0,a.jsx)($.Z,{pagination:!1,columns:b,dataSource:n.map(e=>({key:e.label,...e})).filter(e=>!(2===l&&e.only3D))})]})}]})}):null]})]})},el=t(42606),et=t.n(el),ea=e=>{let{label:l,noLarge:t,className:s,dimension:o,defaultValue:u,defaultChecked:r,additionalKeywords:d,units:c,unit:m,onValueChange:h,onCheckedChange:v,onUnitChange:y}=e,[p,x]=(0,i.useState)(String(null!=u?u:0)),[b,f]=(0,i.useState)(!!r),[j,C]=(0,i.useState)(void 0!==r&&!r),[Z,k]=(0,i.useState)(0),[w,S]=(0,i.useState)(!1);(0,i.useEffect)(()=>{x(String(null!=u?u:0))},[u]),(0,i.useEffect)(()=>{f(!!r)},[r]);let E=(0,i.useCallback)(e=>{let l=e.target.checked;f(l),null==v||v(l),C(!l)},[v]),N=(0,i.useCallback)(e=>{Z&&clearTimeout(Z),k(+setTimeout(()=>{h(e),S(!1)},500))},[Z,h]),P=(0,i.useCallback)(e=>{let l=e.target.value;x(l),S(!0),N(l)},[N]),M=(0,i.useCallback)(e=>{let l=null==c?void 0:c.find(l=>l.label===e);null==y||y(l)},[c,y]),O=(0,i.useMemo)(()=>m?c&&c.length>1?(0,a.jsx)(n.Z,{className:et().select,options:c.map(e=>({value:e.label,label:(0,a.jsx)(g.Z.Inline,{text:e.label})})),onChange:M,value:null==m?void 0:m.label}):(0,a.jsx)(g.Z.Inline,{text:m.label}):null,[m,c,M]),L=(0,i.useMemo)(()=>(0,a.jsx)(K.Z,{spin:!0,className:A().textOrange}),[]),I=(0,i.useMemo)(()=>t?(0,a.jsx)(q.Z,{className:A().textGreen}):(0,a.jsx)(ee,{dimension:o,initialValue:p,additionalKeywords:d,unit:m,units:c,onChange:P,onUnitChange:y}),[t,o,p,d,m,c,P,y]);return(0,a.jsx)(T.Z,{className:"".concat(A().fullWidth," ").concat(et().formula," ").concat(s),style:et(),align:"start",children:(0,a.jsx)(U.Z,{layout:"vertical",children:(0,a.jsx)(U.Z.Item,{label:(0,a.jsxs)(a.Fragment,{children:[void 0!==r&&(0,a.jsx)(G.Z,{checked:b,onChange:E,style:{marginRight:"5px"}}),l]}),children:(0,a.jsx)(_.Z,{className:et().input,disabled:j,value:p,onChange:P,addonBefore:w?L:I,addonAfter:O})})})})};let ei={manual:{type:"manual",value:1,unit:{label:"m"}},auto:{type:"auto",value:"normal"},factor:{type:"factor",value:1}},en={update:"Unable to update simulation"},es=async(e,l,t,a)=>{let i=Z.Z.deepCopy(e);i.scheme.configuration.geometry.children[l].meshParameters=t;let n={...i.scheme.configuration.geometry,done:!0};await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","geometry"],value:n}]),await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","run"],value:{...i.scheme.configuration.run,done:!1}}]),await a.mutateOneSimulation(i)};var eo=e=>{let{simulation:l,index:t,swr:s}=e,[o,u]=(0,i.useState)(ei.auto),{dispatch:r}=(0,i.useContext)(p.uj);(0,i.useEffect)(()=>{let e=l.scheme.configuration.geometry.children[t].meshParameters;e&&u(e)},[l,t]);let d=(0,i.useCallback)(e=>{(0,f.u)(async()=>{try{let a=ei[e];await es(l,t,a,s),u(a)}catch(e){r((0,x.iT)({title:en.update,err:e}))}})},[l,t,s,r]),c=(0,i.useCallback)(e=>{(0,f.u)(async()=>{try{let a={...o,value:e};await es(l,t,a,s),u(a)}catch(e){r((0,x.iT)({title:en.update,err:e}))}})},[l,t,s,o,r]),m=(0,i.useCallback)(e=>{(0,f.u)(async()=>{try{let a={...o,unit:e};await es(l,t,a,s),u(a)}catch(e){r((0,x.iT)({title:en.update,err:e}))}})},[l,t,s,o,r]);return(0,a.jsx)(D.Z,{items:[{key:"meshRefinement",label:"Mesh refinement",children:(0,a.jsxs)(S.Z,{size:"small",children:[(0,a.jsx)(U.Z,{layout:"vertical",children:(0,a.jsx)(U.Z.Item,{label:"Type",children:(0,a.jsx)(n.Z,{className:A().fullWidth,options:Object.keys(ei).map(e=>({label:e.charAt(0).toUpperCase()+e.slice(1),value:e})),value:o.type,onChange:d})})}),"auto"===o.type&&(0,a.jsx)(U.Z,{layout:"vertical",children:(0,a.jsx)(U.Z.Item,{label:"Size",children:(0,a.jsx)(n.Z,{className:A().fullWidth,options:[{label:"Very fine",value:"veryfine"},{label:"Fine",value:"fine"},{label:"Normal",value:"normal"},{label:"Coarse",value:"coarse"},{label:"Very coarse",value:"verycoarse"}],value:o.value,onChange:c})})}),"manual"===o.type&&(0,a.jsx)(ea,{label:"Size",noLarge:!0,defaultValue:o.value,units:[{label:"m"},{label:"mm",multiplicator:1e3}],unit:o.unit,onValueChange:c,onUnitChange:m}),"factor"===o.type&&(0,a.jsx)(ea,{label:"Size",noLarge:!0,defaultValue:o.value,onValueChange:c})]})}]})};let eu={update:"Unable to update simulation"},er=async(e,l,t,a)=>{var i,n;let s=Z.Z.deepCopy(e);s.scheme.configuration.geometry.children[t].value=l.id;let o={...s.scheme.configuration,dimension:null!==(i=l.summary.dimension)&&void 0!==i?i:3,geometry:{...s.scheme.configuration.geometry,done:!0},run:{...s.scheme.configuration.run,done:!1}},u=s.scheme.configuration.geometry.children.map(e=>e.value);console.log(u);let r=e.scheme.configuration.boundaryConditions,d=!1;for(let e of Object.keys(r))if("index"!==e&&"title"!==e&&"done"!==e){for(let l of null!==(n=r[e].values)&&void 0!==n?n:[])if(u.forEach(e=>{e===l.geometry&&(d=!0)}),!d)break}s.scheme.configuration.boundaryConditions.done=d,await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration"],value:o}]),await a.mutateOneSimulation(s)},ed=e=>{let{geometries:l,simulation:t,child:s,index:u,setGeometries:r,swr:d}=e,{dispatch:c}=(0,i.useContext)(p.uj),m=(0,i.useMemo)(()=>s.value,[s.value]),h=(0,i.useMemo)(()=>!!l.find(e=>e.id===m),[l,m]),v=(0,i.useMemo)(()=>s.noMeshable,[s.noMeshable]),y=(0,i.useCallback)(e=>{(0,f.u)(async()=>{try{let a=l.find(l=>l.id===e);await er(t,a,u,d),r([a])}catch(e){c((0,x.iT)({title:eu.update,err:e}))}})},[l,t,u,r,d,c]);return(0,i.useEffect)(()=>{l.length&&!m&&y(l[0].id)},[l,m,y]),(0,a.jsxs)(S.Z,{size:"small",title:s.label,children:[(0,a.jsxs)(U.Z,{layout:"vertical",children:[h?[]:[(0,a.jsx)(o.Z.Text,{strong:!0,type:"danger",children:"Geometry does not exists anymore"},"error")],(0,a.jsx)(U.Z.Item,{children:(0,a.jsx)(n.Z,{placeholder:"Select a simulation domain",options:l.map(e=>({value:e.id,label:e.name})),value:h?m:void 0,onChange:y})})]}),v?null:(0,a.jsx)(eo,{simulation:{id:t.id,scheme:t.scheme},index:u,swr:{mutateOneSimulation:d.mutateOneSimulation}})]})};var ec=t(2634),em=t(99832),eh=t(47682),ev=t(40900);let ey={update:"Unable to delete material"},ep=async(e,l,t)=>{try{let a=Z.Z.deepCopy(e),i=a.scheme.configuration.materials;i.values=[...i.values.slice(0,l),...i.values.slice(l+1)];let n={...i,done:!!i.values.length};await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","materials"],value:n}]),await t.mutateOneSimulation(a)}catch(e){throw e}};var ex=e=>{let{simulation:l,index:t,swr:n}=e,[s,u]=(0,i.useState)(!1),{dispatch:r}=(0,i.useContext)(p.uj),{dispatch:d}=(0,i.useContext)(eh.ZB),c=(0,i.useMemo)(()=>l.scheme.configuration.materials,[l]),m=(0,i.useMemo)(()=>c.values[t],[c,t]),h=(0,i.useMemo)(()=>m.selected,[m.selected]),v=(0,i.useCallback)(async()=>{u(!0);try{await ep(l,t,n),d((0,ev.Ys)(h))}catch(e){throw r((0,x.iT)({title:ey.update,err:e})),e}finally{u(!1)}},[l,t,n,h,d,r]);return(0,a.jsx)(j.m1,{loading:s,text:(0,a.jsxs)(a.Fragment,{children:["Are you sure you want to delete the material"," ",(0,a.jsx)(o.Z.Text,{strong:!0,children:m.material.label})]}),onDelete:v})},eb=t(43829),ef=t.n(eb);let eg=e=>{let{geometries:l,simulation:t,material:n,index:s,swr:u,_onEdit:r}=e,d=(0,i.useRef)(!1),{dispatch:c}=(0,i.useContext)(eh.ZB),m=(0,i.useMemo)(()=>l.find(e=>e.id===n.geometry),[l,n]),h=(0,i.useMemo)(()=>n.selected,[n.selected]),v=(0,i.useMemo)(()=>(null==m?void 0:m.summary.dimension)===2?"faces":"solids",[m]),y=(0,i.useCallback)(()=>{c((0,ev.wp)()),c((0,ev.Cw)(v)),c((0,ev.rx)(null==m?void 0:m.summary.uuid)),c((0,ev.Ys)(h))},[m,h,v,c]),p=(0,i.useCallback)(()=>{d.current||c((0,ev.h$)())},[c]),x=(0,i.useCallback)(()=>{d.current=!0,r(s),setTimeout(()=>d.current=!1,1e3)},[s,r]);return(0,a.jsxs)(S.Z,{className:"".concat(A().textAlignCenter," ").concat(ef().listItem),hoverable:!0,onMouseMove:y,onMouseLeave:p,actions:[(0,a.jsx)(j.w6,{onEdit:x},"edit"),(0,a.jsx)(ex,{index:s,simulation:t,swr:u},"delete")],children:[m?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o.Z.Text,{type:"danger",strong:!0,children:[(0,a.jsx)(em.Z,{})," Geometry not found"]}),(0,a.jsx)("br",{})]}),(0,a.jsx)(o.Z.Text,{strong:!0,className:A().textAlignCenter,children:n.material.label})]})};var ej=e=>{var l;let{geometries:t,simulation:n,swr:s,onEdit:o}=e;return null===(l=(0,i.useMemo)(()=>n.scheme.configuration.materials,[n]).values)||void 0===l?void 0:l.map((e,l)=>(0,a.jsx)(eg,{geometries:t,simulation:n,material:e,index:l,swr:s,_onEdit:o},e.uuid)).filter(e=>e)},eC=t(89235),eZ=t(33202),ek=t(89146),ew=t(29373),eS=t(19874),eE=t(437),eT=t(22789),eN=t(50279),eP=t(52866);let eM=(e,l)=>{let t=[...e],a=t.findIndex(e=>e.uuid===l.uuid);return -1===a?t.push(l):t=[...t.slice(0,a),...t.slice(a+1)],t},eO=(e,l)=>[...e,...l].reduce((e,l)=>(e.find(e=>e.uuid===l.uuid)||e.push(l),e),[]),eA=(e,l)=>{let t=[...e];return l.forEach(e=>{let l=t.findIndex(l=>l.uuid===e.uuid);-1!==l&&(t=[...t.slice(0,l),...t.slice(l+1)])}),t},eL=(e,l)=>{let t=[...e];return l.forEach(e=>{let l=t.findIndex(l=>l.uuid===e.uuid);-1===l?t.push(e):t=[...t.slice(0,l),...t.slice(l+1)]}),t},eI=e=>{let{color:l,setFilter:t}=e,n=(0,i.useCallback)(()=>{t(l)},[l,t]);return(0,a.jsx)(s.Z,{title:"Color",children:(0,a.jsx)(P.ZP,{style:{backgroundColor:Z.Z.rgbToHex(l)},icon:(0,a.jsx)(eS.Z,{}),onClick:n})})},eR=e=>{let{colors:l,setFilter:t}=e,n=(0,i.useCallback)(()=>{t(void 0)},[t]);return l.length>1&&(0,a.jsxs)(T.Z,{direction:"horizontal",wrap:!0,children:[(0,a.jsx)(s.Z,{title:"Reset",children:(0,a.jsx)(P.ZP,{icon:(0,a.jsx)(eZ.Z,{}),onClick:n})}),l.map(e=>(0,a.jsx)(eI,{color:e,setFilter:t},JSON.stringify(e)))]})},eU=e=>{let{element:l,alreadySelected:t,filter:n,search:s,context:o}=e,u=(0,i.useMemo)(()=>{var e,t,a;return(!n||n.r===(null===(e=l.color)||void 0===e?void 0:e.r)&&n.g===(null===(t=l.color)||void 0===t?void 0:t.g)&&n.b===(null===(a=l.color)||void 0===a?void 0:a.b))&&(!s||!l.name||!!l.name.includes(s))},[l,n,s]),r=(0,i.useMemo)(()=>{var e;return o.selected.find(e=>e.uuid===l.uuid)?"#EE9817":(null===(e=o.highlighted)||void 0===e?void 0:e.uuid)===l.uuid?"#FAD114":"transparent"},[l,o]),d=(0,i.useMemo)(()=>{var e;return o.selected.find(e=>e.uuid===l.uuid)?"rgba(238, 152, 23, 0.3)":(null===(e=o.highlighted)||void 0===e?void 0:e.uuid)===l.uuid?"rgba(250, 209, 20, 0.3)":"transparent"},[l,o]),c=(0,i.useCallback)(e=>{o.dispatch((0,ev.CH)(e))},[o]),m=(0,i.useCallback)(()=>{o.dispatch((0,ev.CH)())},[o]),h=(0,i.useCallback)(e=>{let l=eM(o.selected,e);o.dispatch((0,ev.Ys)(l))},[o]),v=(0,i.useCallback)(()=>c({uuid:l.uuid,label:l.label}),[l,c]),y=(0,i.useCallback)(()=>h({uuid:l.uuid,label:l.label}),[l,h]);return u?(0,a.jsx)(S.Z,{style:{marginBottom:"10px"},styles:{body:{position:"relative",padding:"10px 10px 10px 40px",borderWidth:"2px",borderStyle:"solid",borderColor:r,backgroundColor:d}},onMouseEnter:v,onMouseLeave:m,onClick:y,children:(0,a.jsxs)(T.Z,{direction:"vertical",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{style:{position:"absolute",left:"-2px",top:"-2px",bottom:"-2px",width:"30px",backgroundColor:Z.Z.rgbToRgba(l.color,1)}}),l.name]}),null==t?void 0:t.map(e=>{if(e.selected.find(e=>e.uuid===l.uuid))return(0,a.jsx)(ew.Z,{color:Z.Z.stringToColor(e.label),children:e.label},l.uuid+e.label)})]})}):null};var e_=e=>{var l;let{geometry:t,alreadySelected:n,updateSelected:u}=e,[r,d]=(0,i.useState)(),[c,m]=(0,i.useState)(),{type:h,highlighted:v,selected:y,dispatch:p}=(0,i.useContext)(eh.ZB);(0,b.Z)(()=>u(y),[y],[u]);let x=(0,i.useMemo)(()=>{var e;let l=[];return h&&(null===(e=t.summary[h])||void 0===e||e.forEach(e=>{e.color&&!l.find(l=>l.r===e.color.r&&l.g===e.color.g&&l.b===e.color.b)&&l.push(e.color)})),l},[t,h]),f=(0,i.useCallback)(()=>{var e,l;let a=eO(y,null!==(l=null===(e=t.summary[h])||void 0===e?void 0:e.map(e=>{var l,t,a;if(!r||r&&r.r===(null===(l=e.color)||void 0===l?void 0:l.r)&&r.g===(null===(t=e.color)||void 0===t?void 0:t.g)&&r.b===(null===(a=e.color)||void 0===a?void 0:a.b))return{uuid:e.uuid,label:e.label}}).filter(e=>e))&&void 0!==l?l:[]);p((0,ev.Ys)(a))},[t,h,y,r,p]),g=(0,i.useCallback)(()=>{var e,l;let a=eA(y,null!==(l=null===(e=t.summary[h])||void 0===e?void 0:e.map(e=>{var l,t,a;if(!r||r&&r.r===(null===(l=e.color)||void 0===l?void 0:l.r)&&r.g===(null===(t=e.color)||void 0===t?void 0:t.g)&&r.b===(null===(a=e.color)||void 0===a?void 0:a.b))return{uuid:e.uuid,label:e.label}}).filter(e=>e))&&void 0!==l?l:[]);p((0,ev.Ys)(a))},[t,h,y,r,p]),j=(0,i.useCallback)(()=>{var e,l;let a=eL(y,null!==(l=null===(e=t.summary[h])||void 0===e?void 0:e.map(e=>{var l,t,a;if(!r||r&&r.r===(null===(l=e.color)||void 0===l?void 0:l.r)&&r.g===(null===(t=e.color)||void 0===t?void 0:t.g)&&r.b===(null===(a=e.color)||void 0===a?void 0:a.b))return{uuid:e.uuid,label:e.label}}).filter(e=>e))&&void 0!==l?l:[]);p((0,ev.Ys)(a))},[t,h,y,r,p]),C=(0,i.useCallback)(e=>{m(e.target.value)},[]);return(0,a.jsxs)(S.Z,{size:"small",className:A().noBorderBottom,children:[(0,a.jsxs)(T.Z,{direction:"vertical",className:A().fullWidth,children:[(0,a.jsx)(o.Z.Text,{strong:!0,children:"Filters"}),(0,a.jsxs)(T.Z,{direction:"horizontal",wrap:!0,children:[(0,a.jsx)(eR,{colors:x,setFilter:d}),(0,a.jsx)(s.Z,{title:"Select all",children:(0,a.jsx)(P.ZP,{icon:(0,a.jsx)(eE.Z,{}),onClick:f})}),(0,a.jsx)(s.Z,{title:"Unselect all",children:(0,a.jsx)(P.ZP,{icon:(0,a.jsx)(eT.Z,{}),onClick:g})}),(0,a.jsx)(s.Z,{title:"Swap",children:(0,a.jsx)(P.ZP,{icon:(0,a.jsx)(eN.Z,{}),onClick:j})})]}),(0,a.jsx)(_.Z,{placeholder:"Search",value:c,onChange:C,suffix:(0,a.jsx)(eP.Z,{className:A().textLight})})]}),(0,a.jsx)("div",{className:A().fullWidth,style:{marginTop:"20px"},children:h?null===(l=t.summary[h])||void 0===l?void 0:l.map(e=>(0,a.jsx)(eU,{element:e,alreadySelected:n,filter:r,search:c,context:{selected:y,highlighted:v,dispatch:p}},e.uuid)):null})]})},eY=t(81156),ez=t(30759),eF=t(34151),eB=e=>{let{onSelect:l}=e,[t,n]=(0,i.useState)(),[s,o]=(0,i.useState)(),[d,m]=(0,i.useState)(),[h,v]=(0,i.useState)(),y=(0,i.useMemo)(()=>Object.keys(eF.E),[]),p=(0,i.useCallback)(()=>n(!0),[]),x=(0,i.useCallback)(()=>n(!1),[]),b=(0,i.useCallback)(e=>{let{key:l}=e,t=eF.E[l];o({key:l,children:t.children}),m(void 0),v(void 0)},[]),f=(0,i.useCallback)(e=>{let{key:l}=e,t=eF.E[s.key].children.find(e=>e.key===l);m({key:l}),v(t)},[s]),g=(0,i.useCallback)(()=>{l(h),n(!1)},[h,l]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(P.ZP,{icon:(0,a.jsx)(ez.Z,{}),onClick:p,className:A().fullWidth,children:"Pick a material"}),(0,a.jsx)(u.Z,{open:t,title:"Material database",onCancel:x,onOk:g,okText:"Choose",okButtonProps:{disabled:!h},width:"80%",children:(0,a.jsx)(r.Z,{children:(0,a.jsx)(r.Z.Content,{children:(0,a.jsxs)(T.Z,{className:A().fullWidth,style:{alignItems:"stretch",gap:"20px"},children:[(0,a.jsx)(c.Z,{mode:"inline",items:y.map(e=>({key:e,label:eF.E[e].label})),onClick:b}),(0,a.jsx)(c.Z,{mode:"inline",items:null==s?void 0:s.children.map(e=>({key:e.key,label:e.label})),selectedKeys:(null==d?void 0:d.key)?[null==d?void 0:d.key]:[],onClick:f}),h&&(0,a.jsx)(eY.Z,{itemLayout:"vertical",style:{paddingLeft:"20px"},children:h.children.map(e=>(0,a.jsxs)(eY.Z.Item,{children:[e.label,": ",e.symbol," = ",e.value]},e.label))})]})})})})]})},eV=t(57632);let eH={material:"You need to define a material",selected:"You need to select a solid",update:"Unable to add material"},eW=async(e,l,t)=>{var a;let i=Z.Z.deepCopy(l);i.uuid=(0,eV.Z)();let n=Z.Z.deepCopy(e),s=n.scheme.configuration.materials;s.values=[...null!==(a=s.values)&&void 0!==a?a:[],i];let o={...s,done:!0};await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","materials"],value:o}]),await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","run"],value:{...n.scheme.configuration.run,done:!1}}]),await t.mutateOneSimulation(n)};var eD=e=>{let{simulation:l,material:t,swr:n,onError:s,onClose:o}=e,[u,r]=(0,i.useState)(!1),{dispatch:d}=(0,i.useContext)(p.uj),c=(0,i.useCallback)(()=>{(0,f.u)(async()=>{r(!0);try{var e;if(!t.material){s(eH.material),r(!1);return}if(!(null===(e=t.selected)||void 0===e?void 0:e.length)){s(eH.selected),r(!1);return}s(),await eW(l,t,n),r(!1),o()}catch(e){d((0,x.iT)({title:eH.update,err:e})),r(!1)}})},[l,t,n,s,o,d]);return(0,a.jsx)(j.HS,{loading:u,needMargin:!0,onAdd:c,children:"Add"})};let eG={uuid:"UUID not defined on material",material:"You need to define a material",selected:"You need to select a solid",update:"Unable to edit material"},eK=async(e,l,t)=>{let a=Z.Z.deepCopy(e),i=a.scheme.configuration.materials,n=i.values.findIndex(e=>e.uuid===l.uuid);i.values=[...i.values.slice(0,n),l,...i.values.slice(n+1)];let s={...i};await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","materials"],value:s}]),await t.mutateOneSimulation(a)};var eq=e=>{let{simulation:l,material:t,swr:n,onError:s,onClose:o}=e,[u,r]=(0,i.useState)(!1),{dispatch:d}=(0,i.useContext)(p.uj),c=(0,i.useCallback)(()=>{(0,f.u)(async()=>{r(!0);try{var e;if(!t.uuid){s(eG.uuid),r(!1);return}if(!t.material){s(eG.material),r(!1);return}if(!(null===(e=t.selected)||void 0===e?void 0:e.length)){s(eG.selected),r(!1);return}s(),await eK(l,t,n),r(!1),o()}catch(e){d((0,x.iT)({title:eG.update,err:e})),r(!1)}})},[l,t,n,s,o,d]);return(0,a.jsx)(j.w6,{loading:u,primary:!0,needMargin:!0,onEdit:c,children:"Edit"})},eJ=t(17683),e$=t.n(eJ);let eQ=e=>{let{simulation:l,dimension:t,material:n,child:s,index:o,_onMaterialChange:u,_onUnitChange:r}=e,d=(0,i.useMemo)(()=>l.scheme.variables,[l.scheme.variables]),c=(0,i.useMemo)(()=>null==n?void 0:n.value,[n]),m=(0,i.useMemo)(()=>null==n?void 0:n.unit,[n]),h=(0,i.useCallback)(e=>{u(s,o,e)},[s,o,u]),v=(0,i.useCallback)(e=>{r(o,e)},[o,r]);return(0,a.jsx)(ea,{dimension:t,label:s.name,defaultValue:null!=c?c:String(s.default),additionalKeywords:d,units:s.units,unit:null!=m?m:s.unit,onValueChange:h,onUnitChange:v})};var eX=e=>{var l,t;let{geometries:n,simulation:s,value:u,swr:r,onClose:c}=e,[m,h]=(0,i.useState)(),[v,y]=(0,i.useState)(),[p,x]=(0,i.useState)(),[b,f]=(0,i.useState)(),[g,C]=(0,i.useState)(),[Z,k]=(0,i.useState)(),{dispatch:w}=(0,i.useContext)(eh.ZB),E=(0,i.useMemo)(()=>s.scheme.configuration.materials,[s]),N=(0,i.useMemo)(()=>{var e,l;return null!==(l=null===(e=E.values)||void 0===e?void 0:e.map(e=>{if(e.uuid!==m)return{label:e.material.label,selected:e.selected}}).filter(e=>e))&&void 0!==l?l:[]},[E,m]),M=(0,i.useCallback)(e=>{y(e)},[]),O=(0,i.useCallback)((e,l,t)=>{y({label:"Custom",children:[...v.children.slice(0,l),{...null==v?void 0:v.children[l],label:e.label,symbol:e.name,value:t},...v.children.slice(l+1)]})},[v]),L=(0,i.useCallback)((e,l)=>{y({...v,children:[...v.children.slice(0,e),{...v.children[e],unit:l},...v.children.slice(e+1)]})},[v]),I=(0,i.useCallback)(e=>{C(e)},[]),R=(0,i.useCallback)(e=>{let l=n.find(l=>l.id===e);x(l);let t=l.summary.dimension;f(t),w((0,ev.wp)()),w((0,ev.Cw)(2===t?"faces":"solids")),w((0,ev.rx)(l.summary.uuid))},[n,w]),U=(0,i.useCallback)(()=>{c(),w((0,ev.h$)())},[c,w]);return(0,i.useEffect)(()=>{var e;m||h(null!==(e=null==u?void 0:u.uuid)&&void 0!==e?e:"add")},[u,m]),(0,i.useEffect)(()=>{var e;p||R(null!==(e=null==u?void 0:u.geometry)&&void 0!==e?e:n[0].id)},[n,u,p,R]),(0,i.useEffect)(()=>{var e;v||y(null!==(e=null==u?void 0:u.material)&&void 0!==e?e:{label:"Default",children:E.children.map(e=>({label:e.label,symbol:e.name,value:e.default}))})},[u,E,v]),(0,a.jsx)(eC.Z,{className:e$().subPanel,title:"Material",placement:"left",closable:!1,open:!0,mask:!1,maskClosable:!1,width:300,extra:(0,a.jsx)(P.ZP,{type:"text",icon:(0,a.jsx)(eZ.Z,{}),onClick:U}),footer:(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end"},children:[(0,a.jsx)(j.Lw,{onCancel:U}),u?(0,a.jsx)(eq,{material:{uuid:m,material:v,geometry:null==p?void 0:p.id,selected:g},simulation:s,swr:r,onError:k,onClose:U}):(0,a.jsx)(eD,{material:{uuid:m,material:v,geometry:null==p?void 0:p.id,selected:g},simulation:s,swr:r,onError:k,onClose:U})]}),children:(0,a.jsxs)(T.Z,{direction:"vertical",className:A().fullWidth,children:[(0,a.jsx)(S.Z,{size:"small",children:(0,a.jsxs)(T.Z,{direction:"vertical",className:A().fullWidth,children:[(0,a.jsx)(eB,{onSelect:M}),(0,a.jsxs)(o.Z.Text,{children:["Material: ",null!==(t=null==v?void 0:v.label)&&void 0!==t?t:"default"]}),null==E?void 0:null===(l=E.children)||void 0===l?void 0:l.map((e,l)=>{var t;let i=null==v?void 0:null===(t=v.children)||void 0===t?void 0:t.find(l=>l.symbol===e.name);return(0,a.jsx)(eQ,{simulation:s,dimension:b,material:i,child:e,index:l,_onMaterialChange:O,_onUnitChange:L},e.name)})]})}),(0,a.jsx)(d.Z,{items:n.map(e=>({key:e.id,label:e.name,children:(0,a.jsx)(e_,{geometry:e,alreadySelected:N,updateSelected:I})})),activeKey:null==p?void 0:p.id,onChange:R}),Z&&(0,a.jsxs)(o.Z.Text,{children:[(0,a.jsx)(ek.Z,{style:{color:"red"}})," ",Z]})]})})};let e0={update:"Unable to update simulation"},e1=(e,l,t,i,n)=>{var s,o;return(0,a.jsx)(ea,{dimension:2,label:null!==(s=t.label2D)&&void 0!==s?s:t.label,defaultValue:null!==(o=t.value)&&void 0!==o?o:t.default,additionalKeywords:l,onValueChange:i,onUnitChange:n,units:t.units,unit:t.unit},e)},e2=(e,l,t)=>{var i,s,o,u;return(0,a.jsx)(U.Z,{layout:"vertical",children:(0,a.jsx)(U.Z.Item,{label:null!==(s=l.label2D)&&void 0!==s?s:l.label,children:(0,a.jsx)(n.Z,{options:null===(i=l.options)||void 0===i?void 0:i.map(e=>{var l;return{label:e.label,value:null!==(l=e.value2D)&&void 0!==l?l:e.value}}),defaultValue:null!==(u=null!==(o=l.value)&&void 0!==o?o:l.default2D)&&void 0!==u?u:l.default,onChange:t})})},e)},e6=(e,l,t)=>{var i,n;return(0,a.jsx)(U.Z,{layout:"horizontal",children:(0,a.jsx)(U.Z.Item,{label:null!==(i=l.label2D)&&void 0!==i?i:l.label,children:(0,a.jsx)(G.Z,{defaultChecked:null!==(n=l.value)&&void 0!==n?n:l.default,onChange:t})})},e)},e3=(e,l,t,i,n)=>{var s;return(0,a.jsx)(ea,{dimension:3,label:t.label,defaultValue:null!==(s=t.value)&&void 0!==s?s:t.default,additionalKeywords:l,units:t.units,unit:t.unit,onValueChange:i,onUnitChange:n},e)},e5=(e,l,t)=>{var i;return(0,a.jsx)(U.Z,{layout:"vertical",children:(0,a.jsx)(U.Z.Item,{label:l.label,children:(0,a.jsx)(n.Z,{options:l.options,defaultValue:null!==(i=l.value)&&void 0!==i?i:l.default,onChange:t})})},e)},e9=(e,l,t)=>{var i;return(0,a.jsx)(U.Z,{layout:"horizontal",children:(0,a.jsx)(U.Z.Item,{label:l.label,children:(0,a.jsx)(G.Z,{defaultChecked:null!==(i=l.value)&&void 0!==i?i:l.default,onChange:t})})},e)},e4=(e,l,t)=>{var i;return(0,a.jsx)(U.Z,{layout:"vertical",children:(0,a.jsx)(U.Z.Item,{label:l.label,children:(0,a.jsx)(J.ZP.Group,{options:l.options,defaultValue:null!==(i=l.value)&&void 0!==i?i:l.default,onChange:t})})},e)},e7=async(e,l)=>{let t=Z.Z.deepCopy(e),a={...t.scheme.configuration.parameters,done:!0};await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","parameters"],value:a}]),await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","run"],value:{...t.scheme.configuration.run,done:!1}}]),await l.mutateOneSimulation(t)},e8=async(e,l,t,a,i)=>{let n=Z.Z.deepCopy(e),s=n.scheme.configuration.parameters;s[l].children[t].value=a;let o={...s};await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","parameters"],value:o}]),await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","run"],value:{...n.scheme.configuration.run,done:!1}}]),await i.mutateOneSimulation(n)},le=async(e,l,t,a,i)=>{let n=Z.Z.deepCopy(e),s=n.scheme.configuration.parameters;s[l].children[t].unit=a;let o={...s};await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","parameters"],value:o}]),await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","run"],value:{...n.scheme.configuration.run,done:!1}}]),await i.mutateOneSimulation(n)},ll=e=>{let{variables:l,child:t,pkey:a,index:i,onChange:n,onChangeEvent:s,onUnitChange:o}=e;if(t.only3D);else if("formula"===t.htmlEntity)return e1(a+"&"+i,l,t,n,o);else if("select"===t.htmlEntity)return e2(a+"&"+i,t,n);else if("checkbox"===t.htmlEntity)return e6(a+"&"+i,t,s);return null},lt=e=>{let{variables:l,child:t,pkey:a,index:i,onChange:n,onChangeEvent:s,onUnitChange:o}=e;return"formula"===t.htmlEntity?e3(a+"&"+i,l,t,n,o):"select"===t.htmlEntity?e5(a+"&"+i,t,n):"checkbox"===t.htmlEntity?e9(a+"&"+i,t,s):"radio"===t.htmlEntity?e4(a+"&"+i,t,s):null},la=e=>{let{simulation:l,dimension:t,child:n,pkey:s,index:o,swr:u}=e,{dispatch:r}=(0,i.useContext)(p.uj),d=(0,i.useMemo)(()=>l.scheme.variables,[l]),c=(0,i.useCallback)(e=>{(0,f.u)(async()=>{try{await e8(l,s,o,e,u)}catch(e){r((0,x.iT)({title:e0.update,err:e}))}})},[l,s,o,u,r]),m=(0,i.useCallback)(e=>{(0,f.u)(async()=>{try{await le(l,s,o,e,u)}catch(e){r((0,x.iT)({title:e0.update,err:e}))}})},[l,s,o,u,r]),h=(0,i.useCallback)(e=>{(0,f.u)(async()=>{try{await e8(l,s,o,e.target.checked,u)}catch(e){r((0,x.iT)({title:e0.update,err:e}))}})},[l,s,o,u,r]);return n.hidden?null:2===t?(0,a.jsx)(ll,{variables:d,child:n,pkey:s,index:o,onChange:c,onChangeEvent:h,onUnitChange:m}):(0,a.jsx)(lt,{variables:d,child:n,pkey:s,index:o,onChange:c,onChangeEvent:h,onUnitChange:m})},li=e=>{let{simulation:l,dimension:t,pkey:n,parameter:s,swr:o}=e,u=(0,i.useMemo)(()=>s.children.map((e,i)=>(0,a.jsx)(la,{simulation:l,dimension:t,child:e,pkey:n,index:i,swr:o},n+"&"+e.label)),[l,t,n,s,o]);return(0,a.jsx)(S.Z,{size:"small",title:null==s?void 0:s.label,children:(0,a.jsx)(T.Z,{direction:"vertical",children:u})},n)},ln=(e,l)=>{let t=[];t=Array.isArray(l.pattern)?l.pattern.map(e=>new RegExp(e)):[new RegExp(l.pattern)];let a=[],i=[];return e.forEach(e=>{0===t.map(l=>l.test(e.fileName)).reduce((e,l)=>+e+ +l,0)?i.push(e):a.push(e)}),{notFilteredFiles:i,filteredFiles:a}},ls=(e,l)=>{let t=[];t=Array.isArray(l.prefixPattern)?l.prefixPattern.map(e=>new RegExp(e)):[new RegExp(l.prefixPattern)];let a=[];return a=Array.isArray(l.suffixPattern)?l.suffixPattern.map(e=>new RegExp(e)):[new RegExp(l.suffixPattern)],e.map(e=>{let l=e.fileName;return t.forEach(e=>l=l.replace(e,"")),a.forEach(e=>l=l.replace(e,"")),{...e,number:+l}})},lo=(e,l)=>{let t=l.multiplicator;if(t){var a;let l=t.reduce((e,l)=>e[l],e);return null!==(a=l.value)&&void 0!==a?a:l.default}},lu={update:"Unable to update simulation"},lr=async(e,l,t)=>{let a=Z.Z.deepCopy(e),i=a.scheme.configuration.initialization;i.value={type:l},await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","initialization"],value:i}]),await t.mutateOneSimulation(a)},ld=async(e,l,t,a)=>{var i;let n=await lv(e,t),s=Z.Z.deepCopy(l),o=s.scheme.configuration.initialization;o.value={...o.value,simulation:t,result:null==n?void 0:null===(i=n[0])||void 0===i?void 0:i.value},await k.Z.update({id:l.id},[{key:"scheme",type:"json",method:"set",path:["configuration","initialization"],value:o}]),await a.mutateOneSimulation(s)},lc=async(e,l,t,a)=>{let i=Z.Z.deepCopy(e),n=i.scheme.configuration.initialization;n.value={...n.value,number:+l,result:t.file},await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","initialization"],value:n}]),await a.mutateOneSimulation(i)},lm=async(e,l,t,a)=>{let i=Z.Z.deepCopy(e),n=i.scheme.configuration.initialization;n.value.values||(n.value.values=[]),n.value.values[l]=t,await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","initialization"],value:n}]),await a.mutateOneSimulation(i)},lh=(e,l)=>{let{filteredFiles:t,notFilteredFiles:a}=ln(e,l);return{filteredFiles:ls(t,l).map(e=>{let t=[];t=Array.isArray(l.suffixPattern)?l.suffixPattern.map(e=>new RegExp(e)):[new RegExp(l.suffixPattern)];let a=e.fileName;return t.forEach(e=>a=a.replace(e,"")),{number:e.number,fileName:a}}).filter((e,l,t)=>t.findIndex(l=>l.number===e.number)===l).sort((e,l)=>e.number-l.number),notFilteredFiles:a}},lv=async(e,l)=>{var t;let a=await k.Z.tasks({id:l}),i=e.find(e=>e.id===l).scheme.configuration,n=null==i?void 0:null===(t=i.run)||void 0===t?void 0:t.resultsFilter,s=[];return a.forEach(e=>{if(e.file&&"result"===e.file.type&&s.push({label:e.file.fileName,value:e.file.fileName,file:e.file.fileName}),e.files){if(n){let{filteredFiles:l,notFilteredFiles:t}=lh(e.files,n),a=lo(i,n),o=l.map((e,l)=>({label:String(Math.round(1e15*(a?e.number*a:l))/1e15),value:e.fileName,file:e.fileName}));s.push(...t.map(e=>({label:e.fileName,value:e.fileName,file:e.fileName})).filter(e=>e)),s.push(...o)}else e.files.forEach(e=>{"result"===e.type&&s.push({label:e.fileName,value:e.fileName,file:e.fileName})})}}),s},ly=e=>{let{simulation:l,child:t,index:n,value:s,swr:o,dispatch:u}=e,r=(0,i.useCallback)(e=>{(0,f.u)(async()=>{try{await lm(l,n,e,o)}catch(e){u((0,x.iT)({title:lu.update,err:e}))}})},[l,n,o,u]);return(0,a.jsx)(ea,{label:t.label,defaultValue:(null!=s?s:t.default).toString(),units:t.units,unit:t.unit,onValueChange:r})},lp={update:"Unable to delete boundary condition"},lx=async(e,l,t,a)=>{let i=Z.Z.deepCopy(e),n=i.scheme.configuration.boundaryConditions,s=n[l];s.values=[...s.values.slice(0,t),...s.values.slice(t+1)];let o=!1;Object.keys(n).forEach(e=>{var l;"index"!==e&&"title"!==e&&"done"!==e&&(null===(l=n[e].values)||void 0===l?void 0:l.length)&&(o=!0)});let u={...n,done:o};await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","boundaryConditions"],value:u}]),await a.mutateOneSimulation(i)};var lb=e=>{let{type:l,index:t,simulation:n,swr:s}=e,[u,r]=(0,i.useState)(!1),{dispatch:d}=(0,i.useContext)(eh.ZB),{dispatch:c}=(0,i.useContext)(p.uj),m=(0,i.useMemo)(()=>n.scheme.configuration.boundaryConditions,[n]),h=(0,i.useMemo)(()=>m[l],[m,l]),v=(0,i.useMemo)(()=>h.values[t],[h,t]),y=(0,i.useCallback)(async()=>{r(!0);try{await lx(n,l,t,s),d((0,ev.Ys)(v.selected))}catch(e){throw c((0,x.iT)({title:lp.update,err:e})),e}finally{r(!1)}},[n,l,t,s,v,d,c]);return(0,a.jsx)(j.m1,{loading:u,onDelete:y,text:(0,a.jsxs)(a.Fragment,{children:["Are you sure you want to delete the condition"," ",(0,a.jsx)(o.Z.Text,{strong:!0,children:null==v?void 0:v.name}),"?"]})})};let lf=e=>{let{geometries:l,simulation:t,boundaryCondition:n,index:s,type:u,swr:r,_onEdit:d}=e,c=(0,i.useRef)(!1),{dispatch:m}=(0,i.useContext)(eh.ZB),h=(0,i.useMemo)(()=>l.find(e=>e.id===n.geometry),[l,n]),v=(0,i.useMemo)(()=>n.selected,[n.selected]),y=(0,i.useMemo)(()=>(null==h?void 0:h.summary.dimension)===2?"edges":"faces",[h]),p=(0,i.useCallback)(()=>{m((0,ev.wp)()),m((0,ev.Cw)(y)),m((0,ev.rx)(null==h?void 0:h.summary.uuid)),m((0,ev.Ys)(v))},[h,v,y,m]),x=(0,i.useCallback)(()=>{c.current||m((0,ev.h$)())},[m]),b=(0,i.useCallback)(()=>{c.current=!0,d(u,s),setTimeout(()=>c.current=!1,1e3)},[s,u,d]);return(0,a.jsxs)(S.Z,{className:"".concat(A().textAlignCenter," ").concat(ef().listItem),hoverable:!0,onMouseMove:p,onMouseLeave:x,actions:[(0,a.jsx)(j.w6,{onEdit:b},"edit"),(0,a.jsx)(lb,{simulation:t,type:u,index:s,swr:r},"delete")],children:[h?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o.Z.Text,{type:"danger",strong:!0,children:[(0,a.jsx)(em.Z,{})," Geometry not found"]}),(0,a.jsx)("br",{})]}),(0,a.jsx)(o.Z.Text,{strong:!0,className:A().textAlignCenter,children:n.name})," ",(0,a.jsxs)(o.Z.Text,{children:["(",n.type.label,")"]})]})};var lg=e=>{let{geometries:l,simulation:t,swr:n,onEdit:s}=e,o=(0,i.useMemo)(()=>t.scheme.configuration.boundaryConditions,[t]);return(0,a.jsx)(a.Fragment,{children:Object.keys(o).map(e=>{var i;if("index"!==e&&"title"!==e&&"done"!==e)return null===(i=o[e].values)||void 0===i?void 0:i.map((i,o)=>(0,a.jsx)(lf,{geometries:l,simulation:t,boundaryCondition:i,index:o,type:e,swr:n,_onEdit:s},i.uuid))}).filter(e=>e)})};let lj={name:"You need to define a name",type:"You need to select a type",selected:"You need to select a face",update:"Unable to add boundary condition"},lC=async(e,l,t)=>{var a;let i={...l},n=i.type.key;i.uuid=(0,eV.Z)();let s=Z.Z.deepCopy(e),o=s.scheme.configuration.boundaryConditions,u=o[n];u.values=[...null!==(a=u.values)&&void 0!==a?a:[],i];let r={...o,done:!0};await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","boundaryConditions"],value:r}]),await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","run"],value:{...s.scheme.configuration.run,done:!1}}]),await t.mutateOneSimulation(s)};var lZ=e=>{let{simulation:l,boundaryCondition:t,swr:n,onError:s,onClose:o}=e,[u,r]=(0,i.useState)(!1),{dispatch:d}=(0,i.useContext)(p.uj),c=(0,i.useCallback)(()=>{(0,f.u)(async()=>{r(!0);try{var e,a;if(!t.name){s(lj.name),r(!1);return}if(!(null===(e=t.type)||void 0===e?void 0:e.key)){s(lj.type),r(!1);return}if(!(null===(a=t.selected)||void 0===a?void 0:a.length)){s(lj.selected),r(!1);return}s(),await lC(l,t,n),r(!1),o()}catch(e){d((0,x.iT)({title:lj.update,err:e})),r(!1)}})},[l,t,n,s,o,d]);return(0,a.jsx)(j.HS,{loading:u,onAdd:c,needMargin:!0,children:"Add"})};let lk={name:"You need to define a name",type:"You need to select a type",selected:"You need to select a face",update:"Unable to edit boundary condition"},lw=async(e,l,t,a)=>{let i=Z.Z.deepCopy(e),n=i.scheme.configuration.boundaryConditions,s=l.type.key,o=t.type.key;if(o!==s){let e=n[o],l=e.values.findIndex(e=>e.uuid===t.uuid);e.values=[...e.values.slice(0,l),...e.values.slice(l+1)]}if(o!==s){var u;let e=n[s];e.values=[...null!==(u=e.values)&&void 0!==u?u:[],l]}else{let e=n[s],t=e.values.findIndex(e=>e.uuid===l.uuid);e.values=[...e.values.slice(0,t),l,...e.values.slice(t+1)]}let r={...n};await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","boundaryConditions"],value:r}]),await a.mutateOneSimulation(i)};var lS=e=>{let{simulation:l,boundaryCondition:t,oldBoundaryCondition:n,swr:s,onError:o,onClose:u}=e,[r,d]=(0,i.useState)(!1),{dispatch:c}=(0,i.useContext)(p.uj),m=(0,i.useCallback)(()=>{(0,f.u)(async()=>{d(!0);try{var e,a;if(!t.name){o(lk.name),d(!1);return}if(!(null===(e=t.type)||void 0===e?void 0:e.key)){o(lk.type),d(!1);return}if(!(null===(a=t.selected)||void 0===a?void 0:a.length)){o(lk.selected),d(!1);return}o(),await lw(l,t,n,s),d(!1),u()}catch(e){c((0,x.iT)({title:lk.update,err:e})),d(!1)}})},[l,t,n,s,o,u,c]);return(0,a.jsx)(j.w6,{loading:r,onEdit:m,primary:!0,needMargin:!0,children:"Edit"})};let lE=e=>{let{simulation:l,dimension:t,values:n,child:s,index:o,_onValueChange:u,_onCheckedChange:r,_onUnitChange:d}=e,c=(0,i.useMemo)(()=>l.scheme.variables,[l.scheme.variables]),m=(0,i.useMemo)(()=>n[o].value,[n,o]),h=(0,i.useMemo)(()=>n.length>1?n[o].checked:void 0,[n,o]),v=(0,i.useMemo)(()=>{var e;return null!==(e=n[o].unit)&&void 0!==e?e:s.unit},[n,o,s]),y=(0,i.useCallback)(e=>u(o,e),[o,u]),p=(0,i.useCallback)(e=>r(o,e),[o,r]),x=(0,i.useCallback)(e=>d(o,e),[o,d]);return(0,a.jsx)(ea,{dimension:t,label:s.label,defaultValue:null!=m?m:String(s.default),defaultChecked:h,additionalKeywords:c,units:s.units,unit:v,onValueChange:y,onCheckedChange:p,onUnitChange:x})};var lT=e=>{let{geometries:l,simulation:t,value:n,swr:s,onClose:u}=e,[r,c]=(0,i.useState)(),[m,h]=(0,i.useState)(),[v,y]=(0,i.useState)(),[p,x]=(0,i.useState)(),[b,f]=(0,i.useState)(),[g,C]=(0,i.useState)(),[Z,k]=(0,i.useState)(),[w,E]=(0,i.useState)(),{dispatch:N}=(0,i.useContext)(eh.ZB),M=(0,i.useMemo)(()=>t.scheme.configuration.boundaryConditions,[t]),O=(0,i.useMemo)(()=>Object.keys(M).map(e=>{var l;if("index"===e||"title"===e||"done"===e)return;let t=M[e];return null==t?void 0:null===(l=t.values)||void 0===l?void 0:l.map(e=>{if(e.uuid!==r)return{label:e.name,selected:e.selected}}).filter(e=>e)}).flat().filter(e=>e),[M,r]),L=(0,i.useMemo)(()=>Object.keys(M).map(e=>{if("index"===e||"title"===e||"done"===e)return;let l=M[e];return{key:e,label:l.label}}).filter(e=>e),[M]),I=(0,i.useCallback)(e=>{h(e.target.value)},[]),R=(0,i.useCallback)(e=>{var l;let t=e.target.value;y(L.find(e=>e.key===t));let a=null===(l=M[t].children)||void 0===l?void 0:l.map(e=>({checked:!0,value:e.default}));k(null!=a?a:[])},[M,L]),Y=(0,i.useCallback)((e,l)=>{k([...Z.slice(0,e),{...Z[e],value:l},...Z.slice(e+1)])},[Z]),z=(0,i.useCallback)((e,l)=>{k([...Z.slice(0,e),{...Z[e],checked:l},...Z.slice(e+1)])},[Z]),F=(0,i.useCallback)((e,l)=>{k([...Z.slice(0,e),{...Z[e],unit:l},...Z.slice(e+1)])},[Z]),B=(0,i.useCallback)(e=>{C(e)},[]),V=(0,i.useCallback)(e=>{let t=l.find(l=>l.id===e);x(t);let a=t.summary.dimension;f(a),N((0,ev.wp)()),N((0,ev.Cw)(2===a?"edges":"faces")),N((0,ev.rx)(t.summary.uuid))},[l,N]),H=(0,i.useCallback)(()=>{u(),N((0,ev.h$)())},[u,N]),W=(0,i.useMemo)(()=>{if(!v)return;let e=M[v.key].children;if(e)return(0,a.jsx)(S.Z,{children:e.map((e,l)=>{if(2!==b||!e.only3D)return(0,a.jsx)(lE,{simulation:t,dimension:b,values:Z,child:e,index:l,_onValueChange:Y,_onCheckedChange:z,_onUnitChange:F},e.label)})})},[t,M,v,b,Z,Y,z,F]),D=(0,i.useMemo)(()=>{let e=0;return Object.keys(M).forEach(l=>{var t,a;if("index"===l||"title"===l||"done"===l)return;let i=M[l];e+=null!==(a=null===(t=i.values)||void 0===t?void 0:t.length)&&void 0!==a?a:0}),e},[M]);return(0,i.useEffect)(()=>{var e;r||c(null!==(e=null==n?void 0:n.uuid)&&void 0!==e?e:"add")},[n,r]),(0,i.useEffect)(()=>{m||((null==n?void 0:n.name)?h(n.name):h("Boundary condition "+(D+1)))},[n,m,D]),(0,i.useEffect)(()=>{var e;p||V(null!==(e=null==n?void 0:n.geometry)&&void 0!==e?e:l[0].id)},[l,n,p,V]),(0,i.useEffect)(()=>{v||y(null==n?void 0:n.type)},[n,v]),(0,i.useEffect)(()=>{var e;Z||k(null!==(e=null==n?void 0:n.values)&&void 0!==e?e:[])},[n,Z]),(0,a.jsx)(eC.Z,{className:e$().subPanel,title:"Boundary condition",placement:"left",closable:!1,open:!0,mask:!1,maskClosable:!1,width:300,extra:(0,a.jsx)(P.ZP,{type:"text",icon:(0,a.jsx)(eZ.Z,{}),onClick:H}),footer:(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end"},children:[(0,a.jsx)(j.Lw,{onCancel:H}),n?(0,a.jsx)(lS,{boundaryCondition:{uuid:r,name:m,type:v,geometry:null==p?void 0:p.id,selected:g,values:Z},oldBoundaryCondition:n,simulation:t,swr:s,onError:E,onClose:u}):(0,a.jsx)(lZ,{boundaryCondition:{uuid:r,name:m,type:v,geometry:null==p?void 0:p.id,selected:g,values:Z},simulation:t,swr:s,onError:E,onClose:u})]}),children:(0,a.jsxs)(T.Z,{direction:"vertical",className:A().fullWidth,children:[(0,a.jsx)(S.Z,{size:"small",children:(0,a.jsx)(U.Z,{layout:"vertical",children:(0,a.jsx)(U.Z.Item,{label:(0,a.jsx)(o.Z.Text,{strong:!0,children:"Boundary condition name"}),children:(0,a.jsx)(_.Z,{value:null!=m?m:"",onChange:I,maxLength:50})})})}),(0,a.jsx)(S.Z,{size:"small",children:(0,a.jsx)(U.Z,{layout:"vertical",children:(0,a.jsx)(U.Z.Item,{label:(0,a.jsx)(o.Z.Text,{strong:!0,children:"Boundary condition type"}),children:(0,a.jsx)(J.ZP.Group,{optionType:"button",buttonStyle:"solid",value:null==v?void 0:v.key,onChange:R,style:{justifyContent:"center"},children:null==L?void 0:L.map(e=>(0,a.jsx)(J.ZP.Button,{value:e.key,children:e.label},e.key))})})})}),W,(0,a.jsx)(d.Z,{items:l.map(e=>({key:e.id,label:e.name,children:(0,a.jsx)(e_,{geometry:e,alreadySelected:O,updateSelected:B})})),activeKey:null==p?void 0:p.id,onChange:V}),w&&(0,a.jsxs)(o.Z.Text,{children:[(0,a.jsx)(ek.Z,{style:{color:"red"}})," ",w]})]})})},lN=t(12609),lP=t(95118),lM=t(70170),lO=t(36484),lA=t(44422);let lL={name:"You need to define a name",point:"You need to select a point",formula:"You need to define a formula",update:"Unable to update simulation"},lI=async(e,l,t)=>{let a=Z.Z.deepCopy(e),i=a.scheme.configuration.run,n=l.index;delete l.index,i.sensors[n]=l,await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","run"],value:i}]),await t.mutateOneSimulation(a)};var lR=e=>{let{simulation:l,sensor:t,onError:n,onClose:s,swr:o}=e,[u,r]=(0,i.useState)(),{dispatch:d}=(0,i.useContext)(p.uj),c=(0,i.useCallback)(()=>{(0,f.u)(async()=>{r(!0);try{if(!t.name){n(lL.name),r(!1);return}if(!t.point){n(lL.point),r(!1);return}if(!t.formula){n(lL.formula),r(!1);return}n(),await lI(l,t,o),r(!1),s()}catch(e){d((0,x.iT)({title:lL.update,err:e})),r(!1)}})},[l,t,n,s,o,d]);return(0,a.jsx)(j.w6,{loading:u,primary:!0,needMargin:!0,onEdit:c,children:"Edit"})};let lU={name:"You need to define a name",point:"You need to select a point",formula:"You need to define a formula",update:"Unable to update simulation"},l_=async(e,l,t)=>{var a;let i=Z.Z.deepCopy(e),n=i.scheme.configuration.run,s={...n,sensors:[...null!==(a=n.sensors)&&void 0!==a?a:[],l]};await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","run"],value:s}]),await t.mutateOneSimulation(i)};var lY=e=>{let{simulation:l,sensor:t,onError:n,onClose:s,swr:o}=e,[u,r]=(0,i.useState)(),{dispatch:d}=(0,i.useContext)(p.uj),c=(0,i.useCallback)(()=>{(0,f.u)(async()=>{r(!0);try{if(!t.name){n(lU.name),r(!1);return}if(!t.point){n(lU.point),r(!1);return}if(!t.formula){n(lU.formula),r(!1);return}n(),await l_(l,t,o),r(!1),s()}catch(e){d((0,x.iT)({title:lU.update,err:e})),r(!1)}})},[l,t,n,s,o,d]);return(0,a.jsx)(j.HS,{loading:u,needMargin:!0,onAdd:c,children:"Add"})},lz=e=>{var l,t,n;let{visible:u,geometries:r,simulation:c,sensor:m,onClose:h,swr:v}=e,[y,p]=(0,i.useState)(),[x,f]=(0,i.useState)(),[g,C]=(0,i.useState)(),[Z,k]=(0,i.useState)(),w=(0,i.useMemo)(()=>c.scheme.configuration.dimension,[c]),E=(0,i.useMemo)(()=>c.scheme.variables,[c]),{point:N,dispatch:M}=(0,i.useContext)(eh.ZB);(0,b.Z)(()=>{var e;M((0,ev.rx)(null===(e=r[0])||void 0===e?void 0:e.summary.uuid)),C(null==m?void 0:m.geometry)},[r,m],[M]),(0,b.Z)(()=>{M((0,ev.Cw)("point"))},[M]),(0,b.Z)(()=>{if(!m){let e=c.scheme.configuration.run;f(l=>({...l,name:"Sensor "+(e.sensors?e.sensors.length+1:1)}))}},[c,m]),(0,b.Z)(()=>{m&&(f(m),M((0,ev.N7)({x:m.point.x,y:m.point.y,z:m.point.z})))},[m],[M]),(0,b.Z)(()=>{N&&f(e=>({...e,point:N}))},[N]);let O=(0,i.useCallback)(()=>{p(!1),M((0,ev.h$)()),window.removeEventListener("click",O)},[M]),L=(0,i.useCallback)(()=>{y?O():(p(!0),M((0,ev.wp)()),setTimeout(()=>window.addEventListener("click",O),50))},[y,O,M]),I=(0,i.useCallback)(e=>{C(e);let l=r.find(l=>l.id===e);M((0,ev.rx)(l.summary.uuid)),f(l=>({...l,geometry:e}))},[r,M]),R=(0,i.useCallback)((e,l,t)=>{M((0,ev.N7)({x:e,y:l,z:t}))},[M]),U=(0,i.useCallback)(e=>{f(l=>({...l,formula:e}))},[]),Y=(0,i.useCallback)(()=>{f(void 0),k(void 0),M((0,ev.N7)()),M((0,ev.h$)()),h()},[M,h]),z=(0,i.useCallback)(e=>{f(l=>({...l,name:e.target.value}))},[]),F=(0,i.useCallback)(e=>{var l,t;return R(+e,null!==(l=null==N?void 0:N.y)&&void 0!==l?l:0,null!==(t=null==N?void 0:N.z)&&void 0!==t?t:0)},[N,R]),B=(0,i.useCallback)(e=>{var l,t;return R(null!==(l=null==N?void 0:N.x)&&void 0!==l?l:0,+e,null!==(t=null==N?void 0:N.z)&&void 0!==t?t:0)},[N,R]),V=(0,i.useCallback)(e=>{var l,t;return R(null!==(l=null==N?void 0:N.x)&&void 0!==l?l:0,null!==(t=null==N?void 0:N.y)&&void 0!==t?t:0,+e)},[N,R]);return(0,a.jsx)(eC.Z,{title:"Sensor",placement:"left",closable:!1,open:u,mask:!1,maskClosable:!1,width:300,extra:(0,a.jsx)(P.ZP,{type:"text",icon:(0,a.jsx)(eZ.Z,{}),onClick:Y}),footer:(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end"},children:[(0,a.jsx)(j.Lw,{onCancel:Y}),m?(0,a.jsx)(lR,{simulation:c,sensor:{...m,...x},onError:k,onClose:Y,swr:v}):(0,a.jsx)(lY,{simulation:c,sensor:x,onError:k,onClose:Y,swr:v})]}),children:(0,a.jsxs)(T.Z,{direction:"vertical",className:A().fullWidth,children:[(0,a.jsxs)(S.Z,{size:"small",children:[(0,a.jsx)(o.Z.Text,{children:"Name"}),(0,a.jsx)(_.Z,{value:null==x?void 0:x.name,onChange:z})]}),(0,a.jsxs)(S.Z,{size:"small",children:[(0,a.jsx)(d.Z,{items:r.map(e=>({key:e.id,label:e.name})),activeKey:g,onChange:I}),(0,a.jsxs)(T.Z,{direction:"vertical",className:A().fullWidth,children:[(0,a.jsxs)(T.Z,{className:A().fullWidth,style:{justifyContent:"space-between"},children:[(0,a.jsx)(o.Z.Text,{children:"Point selection"}),(0,a.jsx)(s.Z,{title:"Pin in the geometry",children:(0,a.jsx)(P.ZP,{size:"small",type:y?"primary":"default",icon:(0,a.jsx)(lA.Z,{}),onClick:L})})]}),(0,a.jsx)(ea,{label:"X",noLarge:!0,defaultValue:null==x?void 0:null===(l=x.point)||void 0===l?void 0:l.x,onValueChange:F}),(0,a.jsx)(ea,{label:"Y",noLarge:!0,defaultValue:null==x?void 0:null===(t=x.point)||void 0===t?void 0:t.y,onValueChange:B}),(0,a.jsx)(ea,{label:"Z",noLarge:!0,defaultValue:null==x?void 0:null===(n=x.point)||void 0===n?void 0:n.z,onValueChange:V})]})]}),(0,a.jsx)(S.Z,{size:"small",className:A().noBorderBottom,children:(0,a.jsx)(ea,{label:"Formula",dimension:w,defaultValue:null==x?void 0:x.formula,additionalKeywords:E,onValueChange:U})}),Z&&(0,a.jsxs)(o.Z.Text,{children:[(0,a.jsx)(ek.Z,{style:{color:"red"}})," ",Z]})]})})};let lF={update:"Unable to update simulation"},lB=async(e,l,t)=>{let a=Z.Z.deepCopy(e),i=a.scheme.configuration.run;i.sensors=[...i.sensors.slice(0,l),...i.sensors.slice(l+1)],await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","run"],value:i}]),await t.mutateOneSimulation(a)};var lV=e=>{let{simulation:l,index:t,swr:n}=e,[s,u]=(0,i.useState)(),{dispatch:r}=(0,i.useContext)(eh.ZB),{dispatch:d}=(0,i.useContext)(p.uj),c=(0,i.useMemo)(()=>l.scheme.configuration.run,[l]),m=(0,i.useMemo)(()=>c.sensors[t],[t,c]),h=(0,i.useCallback)(async()=>{u(!0);try{await lB(l,t,n),r((0,ev.N7)())}catch(e){d((0,x.iT)({title:lF.update,err:e}))}finally{u(!1)}},[l,t,n,r,d]);return(0,a.jsx)(j.m1,{loading:s,text:(0,a.jsxs)(a.Fragment,{children:["Are you sure you want to delete the sensor"," ",(0,a.jsx)(o.Z.Text,{strong:!0,children:m.name})]}),onDelete:h})};let lH=e=>{let{simulation:l,sensor:t,index:n,_onEdit:s,swr:u}=e,{dispatch:r}=(0,i.useContext)(eh.ZB),d=(0,i.useCallback)(()=>{r((0,ev.wp)()),r((0,ev.N7)(t.point))},[t,r]),c=(0,i.useCallback)(()=>{r((0,ev.h$)()),r((0,ev.N7)())},[r]),m=(0,i.useCallback)(()=>s({...t,index:n}),[t,n,s]);return(0,a.jsx)(S.Z,{className:"".concat(A().textAlignCenter," ").concat(ef().listItem),hoverable:!0,onMouseEnter:d,onMouseLeave:c,actions:[(0,a.jsx)(j.w6,{onEdit:m},"edit"),(0,a.jsx)(lV,{simulation:l,index:n,swr:u},"delete")],children:(0,a.jsx)(o.Z.Text,{strong:!0,className:A().textAlignCenter,children:t.name})})};var lW=e=>{var l;let{simulation:t,onEdit:n,swr:s}=e,o=(0,i.useMemo)(()=>t.scheme.configuration.run,[t]);return(0,a.jsx)(a.Fragment,{children:null===(l=o.sensors)||void 0===l?void 0:l.map((e,l)=>(0,a.jsx)(lH,{simulation:t,sensor:e,index:l,_onEdit:n,swr:s},e.name))})},lD=e=>{let{geometries:l,simulation:t,setVisible:n,setResults:s,setPostprocessing:o,swr:u}=e,[r,d]=(0,i.useState)(),[c,m]=(0,i.useState)(),h=(0,i.useCallback)(()=>{s([]),o(void 0),m(void 0),n(!1),d(!0)},[n,s,o]),v=(0,i.useCallback)(e=>{s([]),o(void 0),m(e),n(!1),d(!0)},[n,s,o]),y=(0,i.useCallback)(()=>{m(void 0),n(!0),d(!1)},[n]);return(0,a.jsxs)(S.Z,{size:"small",title:"Sensors",children:[(0,a.jsx)(lz,{visible:r,geometries:l,simulation:t,sensor:c,onClose:y,swr:u}),(0,a.jsxs)(T.Z,{direction:"vertical",className:A().fullWidth,children:[(0,a.jsx)(P.ZP,{className:A().fullWidth,disabled:!1,type:"primary",icon:(0,a.jsx)(lO.Z,{}),onClick:h,children:"Add a sensor"}),(0,a.jsx)(lW,{simulation:t,onEdit:v,swr:u})]})]})},lG=t(5152),lK=t.n(lG),lq=t(11163),lJ=t(58121),l$=t(54086),lQ=t(62663);let lX={plugins:"Plugins error",pluginsLoad:"Unable to load plugins",extra:"Unable to execute extra action"},l0=async(e,l)=>await lQ.Z.extra(e,l),l1=e=>{let{plugin:l,parallel:n,onOk:s,setVisible:o}=e,u=lK()(()=>t(64546)("./".concat(l.key,"/src/components"))),r=(0,i.useCallback)(e=>{(0,f.u)(async()=>{y()(l,e),await s(l),o(!1)})},[l,s,o]);return(0,a.jsx)(S.Z,{title:l.configuration.name.value,children:(0,a.jsx)(u,{data:l.data,parallel:n,onSelect:r})},l.uuid)},l2=e=>{let{pluginsList:l,plugins:t,parallel:n,onOk:s,setVisible:o}=e;return(0,i.useMemo)(()=>t.length,[t])?(0,a.jsx)(T.Z,{direction:"vertical",children:t.map(e=>l.find(l=>l.key===e.key)?(0,a.jsx)(l1,{plugin:e,parallel:n,onOk:s,setVisible:o},e.uuid):null)}):null};var l6=e=>{var l;let{disabled:t,parallel:n,cloudServer:r,onOk:d}=e,[c,m]=(0,i.useState)(!1),[h,v]=(0,i.useState)([]),{dispatch:y}=(0,i.useContext)(p.uj),b=(0,lq.useRouter)(),[g,{errorPlugins:C}]=lQ.Z.usePlugins();(0,i.useEffect)(()=>{C&&y((0,x.iT)({title:lX.plugins,err:C}))},[C,y]),(0,i.useEffect)(()=>{(0,f.u)(async()=>{try{let e=(await w.Z.list()).filter(e=>"HPC"===e.category);v(e)}catch(e){y((0,x.iT)({title:lX.pluginsLoad,err:e}))}})},[y]);let Z=(0,i.useCallback)(()=>m(!0),[]),k=(0,i.useCallback)(()=>m(!1),[]),E=(0,i.useCallback)(()=>{(0,f.u)(async()=>{await b.push({pathname:"/dashboard",query:{page:"account",tab:"hpc"}})})},[b]),N=(0,i.useCallback)(e=>{(0,f.u)(async()=>{try{await l0(r,e)}catch(e){y((0,x.iT)({title:lX.extra,err:e}))}})},[r,y]),M=(0,i.useMemo)(()=>{let e=null==r?void 0:r.extra;if(!e)return(0,a.jsx)(a.Fragment,{});let l=Object.keys(e).map(l=>{let t=e[l],i="cloud-download"===t.icon?(0,a.jsx)(lJ.Z,{}):null;if("button"===t.type)return(0,a.jsx)(s.Z,{title:t.label,children:(0,a.jsx)(P.ZP,{icon:i,onClick:()=>N(t.action)})},t.action)});return(0,a.jsxs)("div",{children:["Custom plugin actions:",(0,a.jsx)("br",{}),l]})},[null==r?void 0:r.extra,N]);return(0,a.jsxs)(S.Z,{size:"small",title:"Computational resource",children:[(0,a.jsx)(u.Z,{open:c,title:"Computational resource",okButtonProps:{disabled:!0,style:{display:"none"}},onCancel:k,style:{width:"unset"},children:(0,a.jsxs)(T.Z,{direction:"vertical",children:[(0,a.jsxs)(o.Z.Text,{children:["Your computational resource does not appear in this list? Create one in your"," ",(0,a.jsx)(j.Qj,{onClick:E,children:"account settings"})]}),(0,a.jsx)(l2,{pluginsList:h,plugins:g,parallel:n,onOk:d,setVisible:m})]})}),(0,a.jsxs)(T.Z,{direction:"vertical",className:A().fullWidth,children:[r&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o.Z.Text,{children:[(0,a.jsx)("span",{className:A().textLight,children:"Plugin:"})," ",r.name]}),(0,a.jsxs)(o.Z.Text,{children:[(0,a.jsx)("span",{className:A().textLight,children:"Name:"})," ",r.configuration.name.value]}),Object.keys(null!==(l=r.inUseConfiguration)&&void 0!==l?l:{}).map(e=>{let l=r.inUseConfiguration[e];if(l.parallelOnly&&!n)return;let t=l.value;return"boolean"==typeof t&&(t=t?"yes":"no"),(0,a.jsxs)(o.Z.Text,{children:[(0,a.jsxs)("span",{className:A().textLight,children:[l.label,":"]})," ",t]},e)})]}),(0,a.jsx)(P.ZP,{className:A().fullWidth,disabled:t,type:r?"link":"primary",icon:(0,a.jsx)(l$.Z,{}),onClick:Z,children:r?"Modify the resource":"Select a resource"}),M]})]})},l3=t(72124),l5=t(47311),l9=t(48764).lW;let l4={log:"Unable to get system log"},l7=async(e,l)=>{let t=await k.Z.log({id:e.id},l.systemLog),i=l9.from(t.log).toString();u.Z.info({title:"System log",width:"unset",content:(0,a.jsx)("div",{style:{maxHeight:"70vh",overflow:"auto"},children:(0,a.jsx)("pre",{children:(0,a.jsx)("code",{children:(0,l5.ZP)(i.replace(/\n\n/g,"\n").replace(/\n/g,"<br />"))})})})})},l8=e=>{var l,t,n,s;let{simulation:u,step:r,loading:d,setLoading:c}=e,{dispatch:m}=(0,i.useContext)(p.uj),h=(0,i.useCallback)(()=>{(0,f.u)(async()=>{c(!0);try{await l7(u,r)}catch(e){m((0,x.iT)({title:l4.log,err:e}))}finally{c(!1)}})},[u,r,c,m]),v=(0,i.useMemo)(()=>{let e=[];return r.warning&&e.push({key:"warnings",className:ef().warning,label:(0,a.jsx)(o.Z.Text,{type:"warning",children:"Warnings"}),children:(0,l5.ZP)(r.warning.replace(/\n\n/g,"\n").replace(/\n/g,"<br />"))}),r.error&&e.push({key:"errors",className:ef().error,label:(0,a.jsx)(o.Z.Text,{type:"danger",children:"Errors"}),children:(0,l5.ZP)(r.error.replace(/\n\n/g,"\n").replace(/\n/g,"<br />"))}),e},[r]);return(0,a.jsxs)(a.Fragment,{children:[r.systemLog&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(P.ZP,{loading:d,onClick:h,children:"Complete log"}),(0,a.jsx)("br",{})]}),r.link&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("a",{href:"https://"+r.link.href,target:"_blank",rel:"noreferrer",children:(0,a.jsx)(P.ZP,{type:"primary",children:r.link.label})}),(0,a.jsx)("br",{})]}),(0,a.jsx)(D.Z,{ghost:!0,items:v}),(0,l5.ZP)(null!==(n=null===(l=r.pluginLog)||void 0===l?void 0:l.replace(/\n\n/g,"\n").replace(/\n/g,"<br />").replace(/Warning:/g,'<span style="color: orange; font-weight: bold;">Info: </span>').replace(/Error:/g,'<span style="color: red; font-weight: bold;">Error:</span>'))&&void 0!==n?n:""),(0,l5.ZP)(null!==(s=null===(t=r.log)||void 0===t?void 0:t.replace(/^PERCENT.*\n?/gm,"").replace(/Info\s*:/g,'<span style="color: blue; font-weight: bold;">Info: </span>').replace(/Error:/g,'<span style="color: red; font-weight: bold;">Error:</span>').replace(/\n\n/g,"\n").replace(/\n/g,"<br />"))&&void 0!==s?s:"")]})};var te=e=>{let{simulation:l,steps:t}=e,[n,o]=(0,i.useState)(!1),[u,r]=(0,i.useState)(!1),c=(0,i.useCallback)(()=>o(!0),[]),m=(0,i.useCallback)(()=>o(!1),[]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eC.Z,{title:"Log",open:n,onClose:m,width:"50%",children:(0,a.jsx)(d.Z,{items:null==t?void 0:t.map((e,t)=>({key:""+t,label:e.label,children:(0,a.jsx)(l8,{simulation:l,step:e,loading:u,setLoading:r})}))})}),(0,a.jsx)(s.Z,{title:"Log",children:(0,a.jsx)(P.ZP,{disabled:!(null==t?void 0:t.length),icon:(0,a.jsx)(l3.Z,{}),onClick:c})})]})},tl=t(50464),tt=t(98372),ta=t(80140),ti=t(62086);let tn={download:"Unable to download file"},ts=async(e,l)=>{let t=await ti.Z.download({id:e.id},{originPath:l.originPath,fileName:l.fileName}),a=await t.blob(),i=window.URL.createObjectURL(new Blob([a])),n=document.createElement("a");n.href=i,n.setAttribute("download",l.name+"."+l.fileName.split(".").pop()),n.click()};var to=e=>{let{simulation:l,file:t}=e,[n,o]=(0,i.useState)(!1),{dispatch:u}=(0,i.useContext)(p.uj),r=(0,i.useCallback)(()=>{(0,f.u)(async()=>{o(!0);try{await ts(l,t)}catch(e){u((0,x.iT)({title:tn.download,err:e}))}finally{o(!1)}})},[l,t,u]);return(0,a.jsx)(s.Z,{title:"Download",children:(0,a.jsx)(P.ZP,{loading:n,icon:(0,a.jsx)(ta.Z,{}),onClick:r})})};let tu={archive:"Unable to download archive"},tr=async e=>{let l=await ti.Z.archive({id:e.id}),t=await l.blob(),a=window.URL.createObjectURL(new Blob([t])),i=document.createElement("a");i.href=a,i.setAttribute("download",e.scheme.name+".zip"),i.click()};var td=e=>{let{simulation:l}=e,[t,n]=(0,i.useState)(!1),{dispatch:s}=(0,i.useContext)(p.uj),o=(0,i.useCallback)(()=>{(0,f.u)(async()=>{n(!0);try{await tr(l)}catch(e){s((0,x.iT)({title:tu.archive,err:e}))}finally{n(!1)}})},[l,s]);return(0,a.jsx)(j.o6,{loading:t,onDownload:o})};let tc=e=>{var l;let{simulation:t,results:n,file:s,setResults:o}=e,u=(0,i.useCallback)(()=>{let e=n.findIndex(e=>e.fileName===s.fileName&&e.name===s.name);if(-1===e){let e=s.geometry;o([...n.filter(l=>l.geometry!==e),s])}else o([...n.slice(0,e),...n.slice(e+1)])},[n,s,o]),r=(0,i.useMemo)(()=>n.find(e=>e.fileName===s.fileName&&e.name===s.name),[n,s]);return(0,a.jsxs)(T.Z,{style:{alignItems:"center"},children:[(0,a.jsx)(P.ZP,{icon:r?(0,a.jsx)(tl.Z,{style:{color:"#fad114"}}):(0,a.jsx)(tt.Z,{}),onClick:u}),(0,a.jsx)(to,{simulation:{id:t.id},file:{name:s.name,fileName:s.fileName,originPath:s.originPath}}),null===(l=s.name)||void 0===l?void 0:l.replaceAll("_"," ")]})};var tm=e=>{let{simulation:l,results:t,setResults:s}=e,[o,u]=(0,i.useState)(),{singleFiles:r,filteredFiles:d}=(0,i.useMemo)(()=>{var e;let t;if(!l.tasks)return{singleFiles:[],filteredFiles:void 0};let a=l.scheme.configuration,i=[],n=null==a?void 0:null===(e=a.run)||void 0===e?void 0:e.resultsFilter;for(let e of l.tasks)if(e.file&&i.push(e.file),e.files){if(n){let{filteredFiles:l,notFilteredFiles:s}=ln(e.files,n),o=ls(l,n),u=o.map(e=>e.number).filter((e,l,t)=>t.indexOf(e)===l).sort((e,l)=>e-l),r=lo(a,n),d=u.map((e,l)=>({label:Math.round(1e15*(r?e*r:l))/1e15,value:e}));i.push(...s),t={filtered:!0,name:n.name,files:o,options:d}}else i.push(...e.files)}return{singleFiles:i,filteredFiles:t}},[l]);(0,b.Z)(()=>{!o&&d&&u(null==d?void 0:d.options[0].value)},[d,o]);let c=(0,i.useCallback)(e=>{s(d.files.filter(l=>l.number===e&&t.find(e=>e.name===l.name))),u(e)},[t,d,s]);return r.length||d?(0,a.jsx)(S.Z,{size:"small",title:"Results",extra:(0,a.jsx)(td,{simulation:l&&{id:l.id,scheme:l.scheme}}),children:(0,a.jsxs)(T.Z,{direction:"vertical",className:A().fullWidth,children:[null==r?void 0:r.map(e=>(0,a.jsx)(tc,{simulation:l,results:t,file:e,setResults:s},e.name)),d&&(0,a.jsxs)(a.Fragment,{children:[d.name,(0,a.jsx)(n.Z,{className:A().fullWidth,options:d.options,value:o,onChange:c}),d.files.map(e=>{if(e.number===o)return(0,a.jsx)(tc,{simulation:l,results:t,file:e,setResults:s},e.name)})]})]})}):(0,a.jsx)(S.Z,{size:"small",children:"No results yet"})};let th={run:"Unable to run simulation",stop:"Unable to stop simulation",update:"Unable to update simulation"},tv=async(e,l,t)=>{let a=Z.Z.deepCopy(e),i=e.scheme.configuration;i.run.cloudServer=l,a.scheme.configuration=i,await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","run"],value:i.run}]),await t.mutateOneSimulation(a),await t.mutateSimulation(a)},ty=async(e,l)=>await k.Z.run({id:e.id},l),tp=async e=>await k.Z.stop({id:e.id});var tx=[{key:"warpByVector",label:"Warp by vector",parameters:[{key:"Vectors",label:"Vectors",rules:[{required:!0,message:"Vectors is required"}]},{key:"ScaleFactor",label:"Scale factor",default:"1",rules:[{required:!0,message:"Scale factor is required"}]}]},{key:"contour",label:"Contour",parameters:[{key:"ContourBy",label:"Contour by",rules:[{required:!0,message:"ContourBy by is required"}]},{key:"isosurface",label:"Isosurface",default:"0",rules:[{required:!0,message:"Isosurface is required"}]}]},{key:"streamTracer",label:"Stream tracer",parameters:[{key:"Vectors",label:"Vectors",rules:[{required:!0,message:"Vectors is required"}]}]}],tb=t(16647);let tf=async(e,l,t,a)=>(await (0,tb.R)("/api/postprocessing",{method:"POST",headers:{Accept:"application/json"},body:JSON.stringify({simulation:e,result:l,filter:t,parameters:a})})).json(),tg={run:"Unable to run filter"},tj=async(e,l,t,a)=>await tf(e,l,t,a),tC=e=>{let{simulation:l,postprocessing:t,result:n,setResult:s}=e,o=(0,i.useCallback)(()=>s((null==t?void 0:t.fileName)===n.fileName&&(null==t?void 0:t.name)===n.name?void 0:{type:"postprocessing",...n}),[t,n,s]);return(0,a.jsxs)(T.Z,{children:[(0,a.jsx)(P.ZP,{icon:(null==t?void 0:t.fileName)===n.fileName&&(null==t?void 0:t.name)===n.name?(0,a.jsx)(tl.Z,{className:A().primaryColor}):(0,a.jsx)(tt.Z,{}),onClick:o}),(0,a.jsx)(to,{simulation:{id:l.id},file:{name:n.name,fileName:n.fileName,originPath:n.originPath}}),n.name]},n.glb)},tZ=e=>{let{simulation:l,postprocessing:t,results:n,setResult:s}=e;return(0,i.useMemo)(()=>n.length,[n])?(0,a.jsx)(T.Z,{direction:"vertical",className:A().fullWidth,children:n.map(e=>(0,a.jsx)(tC,{simulation:l,postprocessing:t,result:e,setResult:s},e.glb))}):(0,a.jsx)(a.Fragment,{children:"No results"})},tk={plugins:"Unable to load plugins",update:"Unable to update simulation"},tw=async e=>{let l=await w.Z.list();return tS(e,C.Z,l)},tS=(e,l,t)=>{let a=l;return t.forEach(l=>{var t;(null===(t=e.authorizedplugins)||void 0===t?void 0:t.includes(l.key))&&"Model"===l.category&&(a=[...a,...l.models])}),a},tE=(e,l)=>null==l||!l.length||(Array.isArray(e)?l.filter(l=>e.includes(l)).length==l.length:!!(1===l.length&&l.includes(e))),tT=async(e,l,t)=>{let a=l.find(l=>{var t;return l.algorithm===(null==e?void 0:null===(t=e.scheme)||void 0===t?void 0:t.algorithm)}),i=Z.Z.deepCopy(e);y()(i.scheme,a),await k.Z.update({id:e.id},[{key:"scheme",value:i.scheme}]),await t.mutateOneSimulation(i)};var tN={Selector:e=>{let{visible:l,user:t,title:m,okText:h,onOk:v,onCancel:y,onDelete:C}=e,[k,w]=(0,i.useState)(),[S,E]=(0,i.useState)(),[T,N]=(0,i.useState)(!1),[P,M]=(0,i.useState)([]),[O,L]=(0,i.useState)([]),{dispatch:I}=(0,i.useContext)(p.uj);(0,b.Z)(()=>{(0,f.u)(async()=>{try{let e=await tw(t);M(e)}catch(e){I((0,x.iT)({title:tk.plugins,err:e})),M([])}})},[t],[I]);let R=(0,i.useMemo)(()=>P.map(e=>e.category).flat().filter((e,l,t)=>t.indexOf(e)===l).map(e=>({key:e,value:e})),[P]),U=(0,i.useCallback)(e=>{let{key:l}=e;w(l),E({model:P.find(e=>e.algorithm===l)})},[P]),_=(0,i.useCallback)(e=>{let{key:l}=e,a=l.split("&").pop();w(a);let i=t.usermodels.find(e=>e.model.algorithm===a);E(Z.Z.deepCopy(i))},[t]),Y=(0,i.useCallback)(()=>{(0,f.u)(async()=>{if(N(!0),S)try{await v(S)}catch(e){}N(!1),E(void 0),w(void 0)})},[S,v]),z=(0,i.useCallback)(()=>{E(void 0),w(void 0),y()},[y]),F=(0,i.useMemo)(()=>{let e=[{key:"category",disabled:!0,label:(0,a.jsx)(n.Z,{mode:"multiple",className:A().fullWidth,options:R,allowClear:!0,suffixIcon:null,placeholder:"Category filter",onChange:L,value:O,style:{textOverflow:"ellipsis"}})}];return P.forEach(l=>{tE(l.category,O)&&e.push({key:l.algorithm,label:l.name})}),e},[P,R,O]),B=(0,i.useMemo)(()=>{let e=[{key:"category",disabled:!0,label:(0,a.jsx)(n.Z,{mode:"multiple",className:A().fullWidth,options:R,allowClear:!0,suffixIcon:null,placeholder:"Category filter",onChange:L,value:O})}];return t.usermodels.forEach((l,i)=>{tE(l.model.category,O)&&e.push({key:l.id+"&"+l.model.algorithm,label:(0,a.jsxs)(a.Fragment,{children:[C?(0,a.jsx)(j.m1,{onDelete:async()=>C(i)}):null,(0,a.jsx)(s.Z,{title:l.model.name,children:(0,a.jsx)(o.Z.Text,{ellipsis:!0,children:l.model.name})}),l.owners.find(e=>e.id===t.id)?null:(0,a.jsx)("div",{className:"shared",children:Z.Z.userToAvatar(l.owners[0])})]})})}),e},[t,R,O,C]);return(0,a.jsx)(u.Z,{open:l,title:null!=m?m:"Create simulation",okText:null!=h?h:"Create",okButtonProps:{loading:T},onOk:Y,onCancel:z,width:"80%",children:(0,a.jsxs)(r.Z,{className:ef().selectorContent,children:[(0,a.jsx)(r.Z.Sider,{theme:"light",width:300,className:ef().selectorSider,children:(0,a.jsx)(d.Z,{defaultActiveKey:"tanatloc",items:[{key:"tanatloc",label:"Tanatloc algorithm",children:(0,a.jsx)(c.Z,{selectedKeys:k?[k]:void 0,mode:"inline",items:F,onClick:U})},{key:"personal",label:"User algorithm",children:(0,a.jsx)(c.Z,{selectedKeys:k?[k]:void 0,mode:"inline",className:ef().userMenu,items:B,onClick:_})}]})}),(0,a.jsx)(r.Z.Content,{className:ef().selector,children:(0,a.jsx)(g.Z.Html,{html:null==S?void 0:S.model.description})})]})})},Updater:e=>{let{user:l,simulation:t,swr:a}=e,[n,s]=(0,i.useState)([]),{dispatch:o}=(0,i.useContext)(p.uj);return(0,b.Z)(()=>{(0,f.u)(async()=>{try{let e=await tw(l);s(e)}catch(e){o((0,x.iT)({title:tk.plugins,err:e})),s([])}})},[l],[o]),(0,b.Z)(()=>{let e=n.find(e=>{var l;return e.algorithm===(null==t?void 0:null===(l=t.scheme)||void 0===l?void 0:l.algorithm)});if(e&&(null==t?void 0:t.scheme)){let l=(0,m.Z)(t.scheme,e,{excludedKeys:["value","unit"]}),i=(0,h.Z)(t.scheme,e,{excludedKeys:["value","unit"]});(Object.keys(l).length||Object.keys(i).length)&&(u.Z.info({title:"Update",content:"Your model need an update, please wait.",closable:!1,okButtonProps:{hidden:!0}}),tT(t,n,a).catch(e=>{o((0,x.iT)({title:tk.update,err:e}))}).finally(()=>u.Z.destroyAll()))}},[t,n,a]),null},About:e=>{let{project:l,simulation:t,swr:i}=e;return l&&t?(0,a.jsx)(r.Z,{children:(0,a.jsx)(r.Z.Content,{children:(0,a.jsx)(S.Z,{size:"small",title:(0,a.jsx)(o.Z.Title,{level:5,ellipsis:!0,children:t.name}),actions:[(0,a.jsx)(R,{project:{id:l.id,simulations:l.simulations},simulation:t,swr:{mutateProject:i.mutateProject,addOneSimulation:i.addOneSimulation}},"copy"),(0,a.jsx)(B,{simulation:{id:t.id,name:t.name},swr:{mutateOneSimulation:i.mutateOneSimulation}},"edit"),(0,a.jsx)(W,{project:{id:l.id,simulations:l.simulations},simulation:{id:t.id,name:t.name},swr:{mutateProject:i.mutateProject,delOneSimulation:i.delOneSimulation}},"delete")],children:(0,a.jsxs)(T.Z,{direction:"vertical",className:A().fullWidth,children:[t.scheme.userModelId&&(0,a.jsx)(N.Z,{message:"User algorithm",type:"info",showIcon:!0}),(0,a.jsxs)(o.Z.Text,{children:[(0,a.jsx)("span",{className:A().textLight,children:"Category:"})," ",t.scheme.category]}),(0,a.jsxs)(o.Z.Text,{children:[(0,a.jsx)("span",{className:A().textLight,children:"Algorithm:"})," ",t.scheme.algorithm]}),(0,a.jsxs)(o.Z.Text,{children:[(0,a.jsx)("span",{className:A().textLight,children:"Code:"})," ",t.scheme.code]}),(0,a.jsxs)(o.Z.Text,{children:[(0,a.jsx)("span",{className:A().textLight,children:"Version:"})," ",t.scheme.version]}),(0,a.jsx)("div",{className:"".concat(A().fullWidth," ").concat(A().scroll),children:(0,a.jsx)(g.Z.Html,{html:t.scheme.description})})]})})})}):(0,a.jsx)(S.Z,{children:(0,a.jsx)(E.Z,{})})},Geometry:e=>{let{geometries:l,simulation:t,setGeometries:n,swr:s}=e,u=(0,i.useMemo)(()=>t.scheme.configuration.geometry.children,[t.scheme.configuration.geometry.children]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(S.Z,{size:"small",children:(0,a.jsx)(o.Z.Text,{children:"When changing the simulation domain, you might lose your topological entity assignments"})}),u.map((e,i)=>(0,a.jsx)(ed,{geometries:l,simulation:t,child:e,index:i,setGeometries:n,swr:s},e.label))]})},Materials:e=>{let{geometries:l,simulation:t,swr:n,setVisible:s}=e,[o,u]=(0,i.useState)(),[d,c]=(0,i.useState)(!1),m=(0,i.useMemo)(()=>t.scheme.configuration.materials,[t]),h=(0,i.useMemo)(()=>l.reduce((e,l)=>(e.find(e=>e.id===l.id)||e.push(l),e),[]),[l]),v=(0,i.useCallback)(()=>{u(void 0),c(!0),s(!1)},[s]),y=(0,i.useCallback)(e=>{u(m.values[e]),c(!0),s(!1)},[m,s]),p=(0,i.useCallback)(()=>{c(!1),u(void 0),s(!0)},[s]);return h.length?(0,a.jsx)(r.Z,{children:(0,a.jsx)(r.Z.Content,{children:(0,a.jsxs)(S.Z,{size:"small",children:[(0,a.jsx)(j.HS,{onAdd:v,fullWidth:!0,children:"Add material"}),(0,a.jsx)(ej,{geometries:h,simulation:t,swr:n,onEdit:y}),d?(0,a.jsx)(eX,{geometries:h,simulation:t,value:o,swr:n,onClose:p}):null]})})}):(0,a.jsx)(ec.Z.Simple,{})},Parameters:e=>{let{simulation:l,swr:t}=e,{dispatch:n}=(0,i.useContext)(p.uj),s=(0,i.useMemo)(()=>null==l?void 0:l.scheme.configuration.parameters,[l]),o=(0,i.useMemo)(()=>null==l?void 0:l.scheme.configuration.dimension,[l]);(0,i.useEffect)(()=>{(0,f.u)(async()=>{try{(null==s?void 0:s.done)||await e7(l,t)}catch(e){n((0,x.iT)({title:e0.update,err:e}))}})},[l,s,t,n]);let u=(0,i.useMemo)(()=>Object.keys(s).map(e=>{if("index"===e||"title"===e||"done"===e)return null;let i=s[e];return i.advanced||i.hidden?null:(0,a.jsx)(li,{simulation:l,dimension:o,pkey:e,parameter:i,swr:t},e)}).filter(e=>e),[l,o,s,t]),d=(0,i.useMemo)(()=>Object.keys(s).map(e=>{if("index"===e||"title"===e||"done"===e)return null;let i=s[e];return!i.advanced||i.hidden?null:(0,a.jsx)(li,{simulation:l,dimension:o,pkey:e,parameter:i,swr:t},e)}).filter(e=>e),[l,o,s,t]);return(0,a.jsx)(r.Z,{children:(0,a.jsx)(r.Z.Content,{children:(0,a.jsxs)(T.Z,{direction:"vertical",children:[u,d.length?(0,a.jsx)(D.Z,{items:[{key:"advanced",label:"Advanced",children:(0,a.jsx)(T.Z,{direction:"vertical",children:d})}]}):null]})})})},Initialization:e=>{let{simulations:l,simulation:t,swr:s}=e,[u,d]=(0,i.useState)(!1),[c,m]=(0,i.useState)(),[h,v]=(0,i.useState)(),[y,g]=(0,i.useState)(),{dispatch:j}=(0,i.useContext)(p.uj),C=(0,i.useMemo)(()=>null==t?void 0:t.scheme.configuration.initialization,[t]),Z=(0,i.useMemo)(()=>null==t?void 0:t.scheme.configuration.dimension,[t]),k=(0,i.useCallback)(e=>{v(l.find(l=>l.id===e))},[l]);(0,b.Z)(()=>{var e,l;!c&&C.value&&m(C.value.type),!h&&(null===(e=C.value)||void 0===e?void 0:e.simulation)&&k(null===(l=C.value)||void 0===l?void 0:l.simulation)},[C,c,h],[k]),(0,b.Z)(()=>{(0,f.u)(async()=>{h&&g(await lv(l,h.id))})},[l,h]);let w=(0,i.useMemo)(()=>{let e=[{label:"None",value:"none"}];return C.coupling&&e.push({label:C.coupling.label,value:"coupling"}),C.direct&&e.push({label:C.direct.label,value:"direct"}),e},[C]),N=C.value,P=(0,i.useCallback)(e=>{(0,f.u)(async()=>{d(!0);try{await ld(l,t,e,s),k(e)}catch(e){j((0,x.iT)({title:lu.update,err:e}))}finally{d(!1)}})},[l,t,s,k,j]),M=(0,i.useCallback)((e,l)=>{(0,f.u)(async()=>{try{await lc(t,e,l,s)}catch(e){j((0,x.iT)({title:lu.update,err:e}))}})},[t,s,j]),O=(0,i.useCallback)((e,l)=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Z.Text,{children:"If you use coupling, the selected simulation mesh will be used, at least for the first iteration."}),(0,a.jsxs)(T.Z,{direction:"vertical",className:A().fullWidth,style:{marginTop:"10px"},children:[(0,a.jsx)(n.Z,{className:A().fullWidth,options:e,placeholder:"Select a simulation",value:null==N?void 0:N.simulation,onChange:P}),u&&(0,a.jsx)(E.Z,{}),(null==y?void 0:y.length)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o.Z.Text,{children:[null==l?void 0:l.name,":"]},"simulation"),(0,a.jsx)(n.Z,{className:A().fullWidth,options:y,placeholder:"Select a "+l.name,value:null==N?void 0:N.result,onChange:M})]}):(0,a.jsx)(o.Z.Text,{type:"danger",children:"No results, please select an other simulation."})]})]}),[N,y,u,P,M]),L=(0,i.useCallback)(e=>(0,a.jsx)(T.Z,{direction:"vertical",className:A().fullWidth,children:e.children.map((e,l)=>{var i;if(2!==Z||!e.only3D)return(0,a.jsx)(ly,{simulation:t,child:e,index:l,value:null==N?void 0:null===(i=N.values)||void 0===i?void 0:i[l],swr:s,dispatch:j},e.label)})}),[N,Z,t,s,j]),I=(0,i.useMemo)(()=>{let e={none:(0,a.jsx)("div",{})},i=C.coupling;if(null==i?void 0:i.compatibility){let a=l.map(e=>{let l=e.id===t.id||!i.compatibility.find(l=>l.algorithm===e.scheme.algorithm);return{label:e.name,value:e.id,disabled:l}}),n=i.compatibility.find(e=>{var l;return e.algorithm===(null==h?void 0:null===(l=h.scheme)||void 0===l?void 0:l.algorithm)}),s=null==n?void 0:n.filter;e.coupling=O(a,s)}let n=C.direct;return(null==n?void 0:n.children)&&(e.direct=L(n)),e},[l,t,h,C,O,L]),R=(0,i.useCallback)(e=>{(0,f.u)(async()=>{try{await lr(t,e,s),m(e)}catch(e){j((0,x.iT)({title:lu.update,err:e}))}})},[t,s,j]);return(0,a.jsx)(r.Z,{children:(0,a.jsx)(r.Z.Content,{children:(0,a.jsxs)(S.Z,{size:"small",children:[(0,a.jsx)(n.Z,{className:A().fullWidth,style:{marginTop:"10px"},defaultValue:"none",value:c,options:w,onChange:R}),I[null!=c?c:"none"]]})})})},BoundaryConditions:e=>{let{simulation:l,geometries:t,swr:n,setVisible:s}=e,[o,u]=(0,i.useState)(),[d,c]=(0,i.useState)(!1),m=(0,i.useMemo)(()=>l.scheme.configuration.boundaryConditions,[l]),h=(0,i.useMemo)(()=>t.reduce((e,l)=>(e.find(e=>e.id===l.id)||e.push(l),e),[]),[t]),v=(0,i.useCallback)(()=>{u(void 0),c(!0),s(!1)},[s]),y=(0,i.useCallback)((e,l)=>{u(m[e].values[l]),c(!0),s(!1)},[m,s]),p=(0,i.useCallback)(()=>{c(!1),u(void 0),s(!0)},[s]);return h.length?(0,a.jsx)(r.Z,{children:(0,a.jsx)(r.Z.Content,{children:(0,a.jsxs)(S.Z,{size:"small",children:[(0,a.jsx)(j.HS,{onAdd:v,fullWidth:!0,children:"Add boundary condition"}),(0,a.jsx)(lg,{geometries:h,simulation:l,swr:n,onEdit:y}),d?(0,a.jsx)(lT,{geometries:h,simulation:l,value:o,swr:n,onClose:p}):null]})})}):(0,a.jsx)(ec.Z.Simple,{})},Run:e=>{var l;let{geometries:t,simulation:n,results:s,setResults:o,setPostprocessing:u,setVisible:d,swr:c}=e,[m,h]=(0,i.useState)(!1),[v,y]=(0,i.useState)(!1),{dispatch:b}=(0,i.useContext)(p.uj),[g,{mutateSimulation:j}]=k.Z.useSimulation(n.id,2e3),C=(0,i.useMemo)(()=>n.scheme.configuration,[n]),Z=(0,i.useMemo)(()=>{if("0"!==g.id)return g.scheme.configuration},[g]),w=(0,i.useMemo)(()=>{if(!C)return!0;let e=!1;return Object.keys(C).forEach(l=>{"dimension"===l||"run"===l||C[l].done||(e=!0)}),C.run.cloudServer||(e=!1),e},[C]),N=(0,i.useMemo)(()=>{if(!C)return!1;let e=C.geometry,l=!0;return e.children.forEach(e=>{e.mesh||(l=!1)}),!!l},[C]),{steps:M,percent:O}=(0,i.useMemo)(()=>{var e;let l;if("0"===g.id)return{steps:[],percent:void 0};let t=[];return null==g||null===(e=g.tasks)||void 0===e||e.forEach((e,a)=>{if(e){if(a===g.tasks.length-1){var i,n;let t=(null!==(n=null===(i=e.log)||void 0===i?void 0:i.split("\n"))&&void 0!==n?n:[]).filter(e=>e.startsWith("PERCENT:")).filter(e=>e),a=null==t?void 0:t.pop(),s=a?parseFloat(a.replace("PERCENT: ","").replace("%","")):0;s&&(l=s)}t[e.index]={index:e.index,label:e.label,status:e.status,log:e.log,pluginLog:e.pluginLog,warning:e.warning,error:e.error,systemLog:e.systemLog,link:e.link}}}),{steps:t,percent:l}},[g]);(0,i.useEffect)(()=>{var e,l;if("0"===g.id){h(!1);return}(null==g?void 0:null===(e=g.tasks)||void 0===e?void 0:e.find(e=>(null==e?void 0:e.status)==="error"))?h(!1):(null==g?void 0:null===(l=g.tasks)||void 0===l?void 0:l.find(e=>e&&"finish"!==e.status))?h(!0):h(!1)},[g]);let L=(0,i.useCallback)(async e=>{try{await tv(n,e,{...c,mutateSimulation:j})}catch(e){b((0,x.iT)({title:th.update,err:e}))}},[n,c,j,b]),I=(0,i.useCallback)(e=>y(e.target.checked),[]),R=(0,i.useCallback)(()=>{(0,f.u)(async()=>{h(!0);try{await ty(n,v)}catch(e){b((0,x.iT)({title:th.run,err:e})),h(!1)}})},[n,v,b]),U=(0,i.useCallback)(()=>{(0,f.u)(async()=>{try{await tp(n),h(!1)}catch(e){b((0,x.iT)({title:th.stop,err:e}))}})},[n,b]);return n&&g&&(null==g?void 0:g.id)!=="0"?(0,a.jsx)(r.Z,{children:(0,a.jsx)(r.Z.Content,{children:(0,a.jsxs)(T.Z,{direction:"vertical",className:A().fullWidth,children:[(0,a.jsx)(lD,{geometries:t,simulation:n,setVisible:d,setResults:o,setPostprocessing:u,swr:{mutateOneSimulation:c.mutateOneSimulation}}),(0,a.jsx)(l6,{disabled:m,parallel:n.scheme.parallel,cloudServer:null==Z?void 0:null===(l=Z.run)||void 0===l?void 0:l.cloudServer,onOk:L}),(0,a.jsx)(S.Z,{size:"small",title:"Run",children:(0,a.jsxs)(T.Z,{direction:"vertical",className:A().fullWidth,size:20,children:[N?(0,a.jsx)(G.Z,{checked:v,onChange:I,children:"Keep mesh(es)?"}):null,(0,a.jsxs)("div",{className:A().fullWidth,style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,a.jsxs)(T.Z,{children:[(0,a.jsx)(P.ZP,{disabled:w,type:"primary",icon:(0,a.jsx)(lP.Z,{}),loading:m,onClick:R,children:"Run"}),(0,a.jsx)(P.ZP,{disabled:!m,danger:!0,icon:(0,a.jsx)(lM.Z,{}),shape:"circle",onClick:U})]}),(0,a.jsx)(te,{simulation:{id:n.id},steps:M})]}),(0,a.jsx)(lN.Z,{direction:"vertical",current:M.length-1,percent:O,items:M.map((e,l)=>({key:l,title:e.label,description:"("+(l+1)+"/"+M.length+")",status:e.status}))})]})}),(0,a.jsx)(tm,{simulation:g&&{id:g.id,scheme:g.scheme,tasks:g.tasks},results:s,setResults:o})]})})}):(0,a.jsx)(r.Z,{children:(0,a.jsx)(r.Z.Content,{children:(0,a.jsx)(S.Z,{size:"small",children:(0,a.jsx)(E.Z,{})})})})},Postprocessing:e=>{let{simulation:l,results:t,postprocessing:s,setResult:o}=e,[u,r]=(0,i.useState)(),[d,c]=(0,i.useState)(),[m,h]=(0,i.useState)(),{postProcessing:v,dispatch:y}=(0,i.useContext)(eh.ZB),{dispatch:b}=(0,i.useContext)(p.uj),g=(0,i.useMemo)(()=>t[0],[t]);(0,i.useEffect)(()=>{l||(r(void 0),h(void 0))},[l]);let j=(0,i.useMemo)(()=>null==l?void 0:l.scheme.configuration.run.postprocessing,[l]),C=(0,i.useMemo)(()=>tx.map(e=>{if(null==j?void 0:j.find(l=>l.key===e.key))return{label:e.label,value:e.key}}).filter(e=>e),[j]),Z=(0,i.useMemo)(()=>{if(!j||!u)return;let e=tx.find(e=>e.key===u),l=j.find(e=>e.key===u);if(null==e?void 0:e.parameters)return e.parameters.map((e,t)=>{var i;let s=null==l?void 0:null===(i=l.parameters)||void 0===i?void 0:i.find(l=>l.key===e.key);return(null==s?void 0:s.value)?(0,a.jsx)(U.Z.Item,{label:e.label,name:["parameters",t],initialValue:s.value,rules:e.rules,children:(0,a.jsx)(_.Z,{disabled:!0})},e.key):(null==s?void 0:s.options)?(0,a.jsx)(U.Z.Item,{label:e.label,name:["parameters",t],rules:e.rules,children:(0,a.jsx)(n.Z,{options:s.options.map(e=>({label:e,value:e}))})},e.key):(0,a.jsx)(U.Z.Item,{label:e.label,name:["parameters",t],rules:e.rules,initialValue:e.default,children:(0,a.jsx)(_.Z,{})},e.key)})},[j,u]),k=(0,i.useCallback)(()=>y((0,ev.Ud)(!1)),[y]),w=(0,i.useCallback)(e=>{(0,f.u)(async()=>{c(!0);try{var t;let a=await tj(l,g,u,null!==(t=e.parameters)&&void 0!==t?t:[]);h({filter:u,results:a})}catch(e){b((0,x.iT)({title:tg.run,err:e}))}c(!1)})},[l,g,u,b]);return((0,i.useEffect)(()=>{1!==t.length&&v&&k()},[t,v,k]),l&&1===t.length&&j&&C.length)?(0,a.jsxs)(eC.Z,{title:"Post-processing",closable:!0,onClose:k,open:v,mask:!1,maskClosable:!1,children:[(0,a.jsx)(U.Z,{children:(0,a.jsx)(U.Z.Item,{name:"filter",label:"Filter",children:(0,a.jsx)(n.Z,{placeholder:"Select a filter",options:C,onChange:r})})}),(0,a.jsxs)(U.Z,{layout:"vertical",style:{margin:"24px 0"},onFinish:w,children:[Z,(0,a.jsx)(U.Z.Item,{children:(0,a.jsx)(P.ZP,{type:"primary",loading:d,htmlType:"submit",icon:(0,a.jsx)(lP.Z,{}),children:"Run"})})]}),m&&(0,a.jsx)(S.Z,{size:"small",title:"Post-processing",extra:m.filter,children:(0,a.jsx)(tZ,{simulation:l,postprocessing:s,results:m.results,setResult:o})})]}):null}}},40900:function(e,l,t){"use strict";t.d(l,{CH:function(){return u},Cw:function(){return s},N7:function(){return d},Ud:function(){return m},Ys:function(){return r},a_:function(){return c},h$:function(){return n},rx:function(){return o},wp:function(){return i}});var a=t(47682);let i=()=>({type:a.Hp.ENABLE}),n=()=>({type:a.Hp.DISABLE}),s=e=>({type:a.Hp.SETTYPE,value:e}),o=e=>({type:a.Hp.SETPART,value:e}),u=e=>({type:a.Hp.HIGHLIGHT,value:e}),r=e=>({type:a.Hp.SELECT,value:e}),d=e=>({type:a.Hp.SETPOINT,value:e}),c=e=>({type:a.Hp.SETDATA,value:e}),m=e=>({type:a.Hp.SETPOSTPROCESSING,value:e})},47682:function(e,l,t){"use strict";t.d(l,{Hp:function(){return s},ZB:function(){return o}});var a=t(85893),i=t(67294);let n={enabled:!1,type:void 0,part:void 0,highlighted:void 0,selected:[],point:void 0,data:void 0,postProcessing:void 0,dispatch:()=>void 0},s={ENABLE:"ENABLE",DISABLE:"DISABLE",CLEAR:"CLEAR",SETTYPE:"SETTYPE",SETPART:"SETPART",HIGHLIGHT:"HIGHLIGHT",SELECT:"SELECT",SETPOINT:"SETPOINT",SETDATA:"SETDATA",SETPOSTPROCESSING:"SETPOSTPROCESSING"},o=(0,i.createContext)(n),u=(e,l)=>{switch(l.type){case s.ENABLE:return{...e,enabled:!0};case s.DISABLE:return{...e,enabled:!1,highlighted:void 0,selected:[]};case s.CLEAR:return{...n};case s.SETTYPE:return{...e,type:l.value};case s.SETPART:return{...e,part:l.value};case s.HIGHLIGHT:return{...e,highlighted:l.value};case s.SELECT:return{...e,selected:l.value};case s.SETPOINT:return{...e,point:l.value};case s.SETDATA:return{...e,data:l.value};case s.SETPOSTPROCESSING:return{...e,postProcessing:l.value};default:return e}};l.ZP=e=>{let{children:l}=e,[t,s]=(0,i.useReducer)(u,n),r=(0,i.useMemo)(()=>({...t,dispatch:s}),[t]);return(0,a.jsx)(o.Provider,{value:r,children:l})}},42606:function(e){e.exports={formula:"formula_formula__5J08n",select:"formula_select__yg4qe"}},17683:function(e){e.exports={panel:"panel_panel__0UqOC",subPanel:"panel_subPanel__xW1ud"}},43829:function(e){e.exports={userMenu:"simulation_userMenu__B0_qd",selectorContent:"simulation_selectorContent__NJ9PO",selectorSider:"simulation_selectorSider__gozkv",selector:"simulation_selector__y2Udd",geometriesList:"simulation_geometriesList__Lzj7P",waring:"simulation_waring___VG9C",error:"simulation_error__E54cQ",listItem:"simulation_listItem__PQKrU"}},64546:function(e,l,t){var a={"./local/src/components":[25803,9888,5803]};function i(e){if(!t.o(a,e))return Promise.resolve().then(function(){var l=Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l});var l=a[e],i=l[0];return Promise.all(l.slice(1).map(t.e)).then(function(){return t(i)})}i.keys=function(){return Object.keys(a)},i.id=64546,e.exports=i}}]);