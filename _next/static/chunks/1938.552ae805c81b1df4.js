"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1938],{61938:function(t,e,a){a.r(e),a.d(e,{default:function(){return N},errors:function(){return z},exportCSV:function(){return R},onCheck:function(){return D}});var n=a(14288),l=a(67294),o=a(26713),i=a(32808),r=a(97183),d=a(83062),c=a(71577),s=a(85265),u=a(71648),h=a(80391),m=a(56299),f=a(18870),p=a(9253),x=a(51584),b=a(14195),v=a(3023),y=a(75358),k=a(14888),Z=a(44141),g=a(96486),C=a(12271),w=a(64376),S=a(23853),E=a(86159),M=a(70917);let B={data:(0,M.iv)({position:"absolute",zIndex:100,right:50,bottom:25,backgroundColor:"rgba(255, 255, 255, 0)"}),button:(0,M.iv)({width:"40px !important",height:"40px",border:"1px solid #5E14FA",borderRadius:20,marginBottom:-20}),container:(0,M.iv)({display:"flex",height:"100%",padding:"10px",justifyContent:"space-between"}),tableContainer:(0,M.iv)({display:"flex",height:"100%",width:"49%",overflow:"auto","& .column":{".ant-checkbox":{display:"none"}},".selected":{backgroundColor:E.Rl.colorPrimary+"55",svg:{color:E.Rl.colorPrimary}}})},z={download:"Unable to download CSV"},D=(t,e,a)=>{let n=t.target.checked,l=[...a];return l[e]=n,l},R=function(t,e,a,n){let l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:";",o="";o="x"+l+a.join(l)+"\n",e.forEach(t=>{o+=t.x,null==n||n.forEach(e=>{void 0!==t[e]&&(o+=l+t[e])}),o+="\n"});let i=t.name+".csv",r=new File([o],i,{type:"text/csv"}),d=window.URL.createObjectURL(r),c=document.createElement("a");c.href=d,c.setAttribute("download",i),c.click(),c.remove()},I=t=>{let{simulation:e}=t,[a,E]=(0,l.useState)(!1),[M,I]=(0,l.useState)(),[N,X]=(0,l.useState)(),[_,j]=(0,l.useState)(),[F,K]=(0,l.useState)(),[U,V]=(0,l.useState)(),[A,L]=(0,l.useState)([!0]),[P,q]=(0,l.useState)(),[O,T]=(0,l.useState)(!1),[W]=S.Z.useSimulation(null==e?void 0:e.id);return((0,l.useEffect)(()=>{let t=null==W?void 0:W.tasks;if(!t){I(void 0),j(void 0),K(void 0);return}let e=t.map(t=>t.datas).filter(t=>t).flatMap(t=>t);if(!e.length||!e[0].names){j(void 0),K(void 0);return}e.sort((t,e)=>t.x-e.x);let a=e[0].title,n=e.map(t=>t.names).flatMap(t=>t).filter((t,e,a)=>a.findIndex(e=>e===t)===e),l=n.map(t=>(0,g.camelCase)(t)),o=[];e.forEach((t,e)=>{t.names.forEach((a,n)=>{let l=o.find(e=>e.x===t.x);l?l[(0,g.camelCase)(a)]=t.ys[n]:o.push({key:e,x:t.x,[(0,g.camelCase)(a)]:t.ys[n]})})}),X(a),I(o),j(n),K(l)},[W]),(0,l.useEffect)(()=>{if(!M||!_||!F){V(void 0);return}let t=_.map((t,e)=>({align:"center",className:"column"+(A[e]?" selected":""),title:(0,n.BX)(o.Z,{children:[t,(0,n.tZ)(i.Z,{"data-testid":"table-checkbox",checked:A[e],onChange:t=>L(D(t,e,A)),children:(0,n.tZ)(m.Z,{style:{fontSize:20}})})]}),dataIndex:F[e],key:F[e]}));t.unshift({title:N,dataIndex:"x",key:"x",fixed:"left"}),V(t)},[N,M,_,F,A]),(0,l.useEffect)(()=>{if(!M||!_||!F){q(void 0);return}let t=[],e=A.map((e,a)=>{if(!e)return;let l=F[a],o=_[a];return t.push(l),(0,n.tZ)(f.x,{name:o,type:"monotone",dataKey:l,stroke:w.Z.stringToColor(l),strokeWidth:2},a)}).filter(t=>t),a=M.map(e=>{let a={x:e.x};return t.forEach(t=>{e[t]&&(a[t]=e[t])}),a}).filter(t=>t),l=Math.min(...t.flatMap(t=>a.map(e=>e[t]))),o=Math.max(...t.flatMap(t=>a.map(e=>e[t]))),i=o-l;q({data:a,min:l,max:o,domainMin:l-.1*i,domainMax:o+.1*i,lines:e})},[M,_,F,A]),e&&M&&_&&F)?(0,n.tZ)(r.Z,{css:B.data,children:(0,n.BX)(r.Z.Content,{children:[(0,n.tZ)(d.Z,{title:"Data visualization",children:(0,n.tZ)(c.Z,{type:"primary",icon:(0,n.tZ)(m.Z,{}),onClick:()=>E(!0),css:B.button})}),(0,n.tZ)(s.Z,{title:"Data visualization",placement:"bottom",closable:!0,onClose:()=>E(!1),open:a,mask:!1,maskClosable:!1,height:"50vh",bodyStyle:{height:"100%",overflow:"hidden"},extra:(0,n.tZ)(u.Z.Button,{loading:O,disabled:!M,menu:{items:[{label:"Default separator: semicolon",key:"semicolon",disabled:!0},{label:"Separator: tab",key:"tab",onClick(){T(!0);try{R(e,M,_,F,"	")}catch(t){(0,C.lt)(z.download,t)}finally{T(!1)}}},{label:"Separator: comma",key:",",onClick(){T(!0);try{R(e,M,_,F,",")}catch(t){(0,C.lt)(z.download,t)}finally{T(!1)}}}]},onClick(){T(!0);try{R(e,M,_,F)}catch(t){(0,C.lt)(z.download,t)}finally{T(!1)}},children:"Export CSV"}),children:(0,n.BX)("div",{css:B.container,children:[(0,n.tZ)("div",{css:B.tableContainer,children:(0,n.tZ)(h.Z,{size:"small",sticky:!0,pagination:!1,dataSource:M,columns:U,scroll:{x:"calc(60vw)"}})}),(0,n.tZ)(p.h,{width:"49%",height:"100%",children:(0,n.BX)(x.w,{data:null==P?void 0:P.data,margin:{top:0,right:40,left:40,bottom:0},children:[(0,n.tZ)(b.q,{strokeDasharray:"3 3"}),(0,n.tZ)(v.K,{dataKey:"x"}),(0,n.tZ)(y.B,{domain:P?[P.domainMin,P.domainMax]:[-1,1],tickFormatter:t=>Number(t).toExponential(3)}),(0,n.tZ)(k.u,{}),(0,n.tZ)(Z.D,{}),null==P?void 0:P.lines]})})]})})]})}):null};var N=I}}]);