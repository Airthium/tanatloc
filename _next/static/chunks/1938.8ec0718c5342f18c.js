"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1938],{61938:function(t,e,a){a.r(e),a.d(e,{_exportCSV:function(){return D},_onCheck:function(){return z},default:function(){return I},errors:function(){return _}});var l=a(14288),n=a(67294),o=a(26713),i=a(32808),r=a(97183),c=a(83062),d=a(71577),s=a(85265),u=a(71648),h=a(42893),m=a(56299),f=a(18870),p=a(9253),b=a(51584),k=a(14195),x=a(3023),v=a(75358),y=a(14888),Z=a(44141),C=a(96486),g=a(12271),w=a(64376),S=a(23853),E=a(86159),M=a(70917);let B={data:(0,M.iv)({position:"absolute",zIndex:100,right:50,bottom:25,backgroundColor:"rgba(255, 255, 255, 0)"}),button:(0,M.iv)({width:"40px !important",height:"40px",border:"1px solid #5E14FA",borderRadius:20,marginBottom:-20}),container:(0,M.iv)({display:"flex",height:"100%",padding:"10px",justifyContent:"space-between"}),tableContainer:(0,M.iv)({display:"flex",height:"100%",width:"49%",overflow:"auto","& .column":{".ant-checkbox":{display:"none"}},".selected":{backgroundColor:E.Rl.colorPrimary+"55",svg:{color:E.Rl.colorPrimary}}})},_={download:"Unable to download CSV"},z=(t,e,a)=>{let l=t.target.checked,n=[...a];return n[e]=l,n},D=function(t,e,a,l){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:";",o="";o="x"+n+a.join(n)+"\n",e.forEach(t=>{o+=t.x,null==l||l.forEach(e=>{void 0!==t[e]&&(o+=n+t[e])}),o+="\n"});let i=t.name+".csv",r=new File([o],i,{type:"text/csv"}),c=window.URL.createObjectURL(r),d=document.createElement("a");d.href=c,d.setAttribute("download",i),d.click(),d.remove()},R=t=>{let{simulation:e}=t,[a,E]=(0,n.useState)(!1),[M,R]=(0,n.useState)(),[I,N]=(0,n.useState)(),[X,j]=(0,n.useState)(),[F,K]=(0,n.useState)(),[U,V]=(0,n.useState)(),[A,L]=(0,n.useState)([!0]),[P,q]=(0,n.useState)(),[G,O]=(0,n.useState)(!1),[W]=S.Z.useSimulation(null==e?void 0:e.id);(0,n.useEffect)(()=>{let t=null==W?void 0:W.tasks;if(!t){R(void 0),j(void 0),K(void 0);return}let e=t.map(t=>t.datas).filter(t=>t).flatMap(t=>t);if(!e.length||!e[0].names){j(void 0),K(void 0);return}e.sort((t,e)=>t.x-e.x);let a=e[0].title,l=e.map(t=>t.names).flatMap(t=>t).filter((t,e,a)=>a.findIndex(e=>e===t)===e),n=l.map(t=>(0,C.camelCase)(t)),o=[];e.forEach((t,e)=>{t.names.forEach((a,l)=>{let n=o.find(e=>e.x===t.x);n?n[(0,C.camelCase)(a)]=t.ys[l]:o.push({key:e,x:t.x,[(0,C.camelCase)(a)]:t.ys[l]})})}),N(a),R(o),j(l),K(n)},[W]),(0,n.useEffect)(()=>{if(!M||!X||!F){V(void 0);return}let t=X.map((t,e)=>({align:"center",className:"column"+(A[e]?" selected":""),title:(0,l.BX)(o.Z,{children:[t,(0,l.tZ)(i.Z,{"data-testid":"table-checkbox",checked:A[e],onChange:t=>L(z(t,e,A)),children:(0,l.tZ)(m.Z,{style:{fontSize:20}})})]}),dataIndex:F[e],key:F[e]}));t.unshift({title:I,dataIndex:"x",key:"x",fixed:"left"}),V(t)},[I,M,X,F,A]),(0,n.useEffect)(()=>{if(!M||!X||!F){q(void 0);return}let t=[],e=w.Z.colorGenerator(A.length),a=A.map((a,n)=>{if(!a)return;let o=F[n],i=X[n],r=e[n];return t.push(o),(0,l.tZ)(f.x,{name:i,type:"monotone",dataKey:o,stroke:r,strokeWidth:2},n)}).filter(t=>t),n=M.map(e=>{let a={x:e.x};return t.forEach(t=>{e[t]&&(a[t]=e[t])}),a}).filter(t=>t),o=Math.min(...t.flatMap(t=>n.map(e=>e[t]))),i=Math.max(...t.flatMap(t=>n.map(e=>e[t]))),r=i-o;q({data:n,min:o,max:i,domainMin:o-.1*r,domainMax:i+.1*r,lines:a})},[M,X,F,A]);let H=(0,n.useCallback)(()=>E(!0),[]),J=(0,n.useCallback)(()=>E(!1),[]),Q=(0,n.useCallback)(()=>{O(!0);try{D(e,M,X,F,"	")}catch(t){(0,g.lt)(_.download,t)}finally{O(!1)}},[e,M,X,F]),T=(0,n.useCallback)(()=>{O(!0);try{D(e,M,X,F,",")}catch(t){(0,g.lt)(_.download,t)}finally{O(!1)}},[e,M,X,F]),Y=(0,n.useCallback)(()=>{O(!0);try{D(e,M,X,F)}catch(t){(0,g.lt)(_.download,t)}finally{O(!1)}},[e,M,X,F]),$=(0,n.useCallback)(t=>Number(t).toExponential(3),[]);return e&&M&&X&&F?(0,l.tZ)(r.Z,{css:B.data,children:(0,l.BX)(r.Z.Content,{children:[(0,l.tZ)(c.Z,{title:"Data visualization",children:(0,l.tZ)(d.Z,{type:"primary",icon:(0,l.tZ)(m.Z,{}),onClick:H,css:B.button})}),(0,l.tZ)(s.Z,{title:"Data visualization",placement:"bottom",closable:!0,onClose:J,open:a,mask:!1,maskClosable:!1,height:"50vh",bodyStyle:{height:"100%",overflow:"hidden"},extra:(0,l.tZ)(u.Z.Button,{loading:G,disabled:!M,menu:{items:[{label:"Default separator: semicolon",key:"semicolon",disabled:!0},{label:"Separator: tab",key:"tab",onClick:Q},{label:"Separator: comma",key:",",onClick:T}]},onClick:Y,children:"Export CSV"}),children:(0,l.BX)("div",{css:B.container,children:[(0,l.tZ)("div",{css:B.tableContainer,children:(0,l.tZ)(h.Z,{size:"small",sticky:!0,pagination:!1,dataSource:M,columns:U,scroll:{x:"calc(60vw)"}})}),(0,l.tZ)(p.h,{width:"49%",height:"100%",children:(0,l.BX)(b.w,{data:null==P?void 0:P.data,margin:{top:0,right:40,left:40,bottom:0},children:[(0,l.tZ)(k.q,{strokeDasharray:"3 3"}),(0,l.tZ)(x.K,{dataKey:"x"}),(0,l.tZ)(v.B,{domain:P?[P.domainMin,P.domainMax]:[-1,1],tickFormatter:$}),(0,l.tZ)(y.u,{}),(0,l.tZ)(Z.D,{}),null==P?void 0:P.lines]})})]})})]})}):null};var I=R}}]);