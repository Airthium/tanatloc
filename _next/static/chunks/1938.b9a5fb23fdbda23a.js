"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1938],{61938:function(t,e,a){a.r(e),a.d(e,{default:function(){return N},errors:function(){return z},exportCSV:function(){return R},onCheck:function(){return D}});var n=a(14288),o=a(67294),l=a(26713),i=a(32808),r=a(97183),d=a(83062),c=a(71577),s=a(85265),u=a(71648),h=a(80391),m=a(56299),f=a(18870),p=a(9253),x=a(51584),b=a(14195),v=a(3023),y=a(75358),k=a(14888),Z=a(44141),g=a(96486),C=a(12271),w=a(64376),S=a(23853),E=a(86159),M=a(70917);let B={data:(0,M.iv)({position:"absolute",zIndex:100,right:50,bottom:25,backgroundColor:"rgba(255, 255, 255, 0)"}),button:(0,M.iv)({width:"40px !important",height:"40px",border:"1px solid #5E14FA",borderRadius:20,marginBottom:-20}),container:(0,M.iv)({display:"flex",height:"100%",padding:"10px",justifyContent:"space-between"}),tableContainer:(0,M.iv)({display:"flex",height:"100%",width:"49%",overflow:"auto","& .column":{".ant-checkbox":{display:"none"}},".selected":{backgroundColor:E.Rl.colorPrimary+"55",svg:{color:E.Rl.colorPrimary}}})},z={download:"Unable to download CSV"},D=(t,e,a)=>{let n=t.target.checked,o=[...a];return o[e]=n,o},R=function(t,e,a,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:";",l="";l="x"+o+a.join(o)+"\n",e.forEach(t=>{l+=t.x,null==n||n.forEach(e=>{void 0!==t[e]&&(l+=o+t[e])}),l+="\n"});let i=t.name+".csv",r=new File([l],i,{type:"text/csv"}),d=window.URL.createObjectURL(r),c=document.createElement("a");c.href=d,c.setAttribute("download",i),c.click(),c.remove()},I=t=>{let{simulation:e}=t,[a,E]=(0,o.useState)(!1),[M,I]=(0,o.useState)(),[N,X]=(0,o.useState)(),[_,j]=(0,o.useState)(),[F,K]=(0,o.useState)(),[U,V]=(0,o.useState)([!0]),[A,L]=(0,o.useState)(),[P,q]=(0,o.useState)(!1),[O]=S.Z.useSimulation(null==e?void 0:e.id);return((0,o.useEffect)(()=>{let t=null==O?void 0:O.tasks;if(!t){I(void 0),X(void 0),j(void 0);return}let e=t.map(t=>t.datas).filter(t=>t).flatMap(t=>t);if(!e.length||!e[0].names){X(void 0),j(void 0);return}e.sort((t,e)=>t.x-e.x);let a=e.map(t=>t.names).flatMap(t=>t).filter((t,e,a)=>a.findIndex(e=>e===t)===e),n=a.map(t=>(0,g.camelCase)(t)),o=[];e.forEach((t,e)=>{t.names.forEach((a,n)=>{let l=o.find(e=>e.x===t.x);l?l[(0,g.camelCase)(a)]=t.ys[n]:o.push({key:e,x:t.x,[(0,g.camelCase)(a)]:t.ys[n]})})}),I(o),X(a),j(n)},[O]),(0,o.useEffect)(()=>{if(!M||!N||!_){K(void 0);return}let t=N.map((t,e)=>({align:"center",className:"column"+(U[e]?" selected":""),title:(0,n.BX)(l.Z,{children:[t,(0,n.tZ)(i.Z,{"data-testid":"table-checkbox",checked:U[e],onChange:t=>V(D(t,e,U)),children:(0,n.tZ)(m.Z,{style:{fontSize:20}})})]}),dataIndex:_[e],key:_[e]}));t.unshift({title:"",dataIndex:"x",key:"x",fixed:"left"}),K(t)},[M,N,_,U]),(0,o.useEffect)(()=>{if(!M||!N||!_){L(void 0);return}let t=[],e=U.map((e,a)=>{if(!e)return;let o=_[a],l=N[a];return t.push(o),(0,n.tZ)(f.x,{name:l,type:"monotone",dataKey:o,stroke:w.Z.stringToColor(o),strokeWidth:2},a)}).filter(t=>t),a=M.map(e=>{let a={x:e.x};return t.forEach(t=>{e[t]&&(a[t]=e[t])}),a}).filter(t=>t),o=Math.min(...t.flatMap(t=>a.map(e=>e[t]))),l=Math.max(...t.flatMap(t=>a.map(e=>e[t]))),i=l-o;L({data:a,min:o,max:l,domainMin:o-.1*i,domainMax:l+.1*i,lines:e})},[M,N,_,U]),e&&M&&N&&_)?(0,n.tZ)(r.Z,{css:B.data,children:(0,n.BX)(r.Z.Content,{children:[(0,n.tZ)(d.Z,{title:"Data visualization",children:(0,n.tZ)(c.Z,{type:"primary",icon:(0,n.tZ)(m.Z,{}),onClick:()=>E(!0),css:B.button})}),(0,n.tZ)(s.Z,{title:"Data visualization",placement:"bottom",closable:!0,onClose:()=>E(!1),open:a,mask:!1,maskClosable:!1,height:"50vh",bodyStyle:{height:"100%",overflow:"hidden"},extra:(0,n.tZ)(u.Z.Button,{loading:P,disabled:!M,menu:{items:[{label:"Default separator: semicolon",key:"semicolon",disabled:!0},{label:"Separator: tab",key:"tab",onClick(){q(!0);try{R(e,M,N,_,"	")}catch(t){(0,C.lt)(z.download,t)}finally{q(!1)}}},{label:"Separator: comma",key:",",onClick(){q(!0);try{R(e,M,N,_,",")}catch(t){(0,C.lt)(z.download,t)}finally{q(!1)}}}]},onClick(){q(!0);try{R(e,M,N,_)}catch(t){(0,C.lt)(z.download,t)}finally{q(!1)}},children:"Export CSV"}),children:(0,n.BX)("div",{css:B.container,children:[(0,n.tZ)("div",{css:B.tableContainer,children:(0,n.tZ)(h.Z,{size:"small",sticky:!0,pagination:!1,dataSource:M,columns:F,scroll:{x:"calc(60vw)"}})}),(0,n.tZ)(p.h,{width:"49%",height:"100%",children:(0,n.BX)(x.w,{data:null==A?void 0:A.data,margin:{top:0,right:40,left:40,bottom:0},children:[(0,n.tZ)(b.q,{strokeDasharray:"3 3"}),(0,n.tZ)(v.K,{dataKey:"x"}),(0,n.tZ)(y.B,{domain:A?[A.domainMin,A.domainMax]:[-1,1],tickFormatter:t=>Number(t).toExponential(3)}),(0,n.tZ)(k.u,{}),(0,n.tZ)(Z.D,{}),null==A?void 0:A.lines]})})]})})]})}):null};var N=I}}]);