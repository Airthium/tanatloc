(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2423],{52423:function(e,t,a){"use strict";a.r(t),a.d(t,{_exportCSV:function(){return Z},errors:function(){return S}});var n=a(85893),l=a(67294),i=a(62481),o=a(42989),r=a(89235),s=a(99664),d=a(6796),c=a(17131),u=a(47730),m=a(48933),x=a(2305),h=a(34304),f=a(74206),y=a(42154),b=a(34283),k=a(96910),p=a(33447),j=a(97992),C=a(49),_=a(47682),v=a(40900),g=a(20659),w=a(85027),M=a(30444),N=a.n(M);let S={download:"Unable to download CSV"},Z=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:";",n="";n="x"+a+t.yNames.join(a)+"\n",t.points.forEach(e=>{n+=e.x,t.yNames.forEach(t=>{n+=a+e[t]}),n+="\n"});let l=e+".csv",i=new File([n],l,{type:"text/csv"}),o=window.URL.createObjectURL(i),r=document.createElement("a");r.href=o,r.setAttribute("download",l),r.click(),r.remove()},E=e=>{let{name:t,index:a,selection:r,setSelection:s}=e,d=(0,l.useCallback)(e=>{let t=e.target.checked,n=[...r];n[a]=t,s(n)},[a,r,s]);return(0,n.jsxs)(i.Z,{className:N().tableHead,children:[t,(0,n.jsx)(o.Z,{"data-testid":"table-checkbox",checked:r[a],onChange:d,children:(0,n.jsx)(u.Z,{style:{fontSize:20}})})]})};t.default=e=>{let{simulation:t}=e,[a,i]=(0,l.useState)([!0]),[o,u]=(0,l.useState)(!1),{data:M,dispatch:D}=(0,l.useContext)(_.ZB),{dispatch:T}=(0,l.useContext)(j.uj),[q]=w.Z.useSimulation(null==t?void 0:t.id),z=(0,l.useMemo)(()=>{if("0"===q.id)return;let e=q.tasks;if(!e.length)return;let t=e.map(e=>e.datas).filter(e=>e).flat();if(!t.length)return;t.sort((e,t)=>e.x-t.x);let a=t[0].title,n=[];t.forEach(e=>n=[...new Set([...n,...e.names])]);let l=t.map(e=>{let t={x:e.x};for(let a of n){let n=e.names.indexOf(a);t[a]=-1===n?0:e.ys[n]}return t});return{xName:a,yNames:n,points:l}},[q]),B=(0,l.useMemo)(()=>{if(!z)return;let e=z.yNames.map((e,t)=>({key:e,dataIndex:e,title:(0,n.jsx)(E,{name:e,index:t,selection:a,setSelection:i}),align:"center"}));return e.unshift({key:"x",dataIndex:"x",title:z.xName,align:"center",fixed:"left"}),e},[z,a,i]),H=(0,l.useMemo)(()=>{if(!z)return;let e=g.Z.colorGenerator(a.length),t=a.map((t,a)=>{if(!t)return;let l=z.yNames[a],i=e[a];return(0,n.jsx)(m.x,{name:l,type:"monotone",dataKey:l,stroke:i,strokeWidth:2},l)}).filter(e=>e),l=z.points.map(e=>e.x),i=a.map((e,t)=>{if(!e)return;let a=z.yNames[t];return z.points.map(e=>e[a])}).filter(e=>e).flat(),o=Math.min(...i),r=Math.max(...i),s=r-o;return{xMin:Math.min(...l),xMax:Math.max(...l),yMin:o-.1*s,yMax:r+.1*s,lines:t}},[z,a]),I=(0,l.useCallback)(()=>D((0,v.a_)(!1)),[D]),K=(0,l.useCallback)(()=>{u(!0);try{Z(null==t?void 0:t.name,z,"	")}catch(e){T((0,C.iT)({title:S.download,err:e}))}finally{u(!1)}},[t,z,T]),L=(0,l.useCallback)(()=>{u(!0);try{Z(null==t?void 0:t.name,z,",")}catch(e){T((0,C.iT)({title:S.download,err:e}))}finally{u(!1)}},[t,z,T]),O=(0,l.useCallback)(()=>{u(!0);try{Z(null==t?void 0:t.name,z)}catch(e){T((0,C.iT)({title:S.download,err:e}))}finally{u(!1)}},[null==t?void 0:t.name,z,T]),U=(0,l.useCallback)(e=>Number(e).toExponential(3),[]);return t&&z&&B?(0,n.jsx)(r.Z,{title:"Data visualization",placement:"bottom",closable:!0,onClose:I,open:M,mask:!1,maskClosable:!1,height:"50vh",styles:{body:{height:"100%",overflow:"hidden"}},extra:(0,n.jsx)(s.Z.Button,{loading:o,menu:{items:[{label:"Default separator: semicolon",key:"semicolon",disabled:!0},{label:"Separator: tab",key:"tab",onClick:K},{label:"Separator: comma",key:",",onClick:L}]},onClick:O,children:"Export CSV"}),children:(0,n.jsxs)("div",{className:N().container,children:[(0,n.jsx)("div",{className:N().tableContainer,children:(0,n.jsx)(d.Z,{size:"small",sticky:!0,pagination:!1,dataSource:z.points,columns:B,scroll:{x:(B.length-1)*200}})}),(0,n.jsx)(x.h,{width:"49%",height:"100%",children:(null==H?void 0:H.lines.length)?(0,n.jsxs)(h.w,{data:z.points,margin:{top:0,right:40,left:40,bottom:0},children:[(0,n.jsx)(f.q,{strokeDasharray:"3 3"}),(0,n.jsx)(y.K,{dataKey:"x",domain:[H.xMin,H.xMax]}),(0,n.jsx)(b.B,{domain:[H.yMin,H.yMax],tickFormatter:U}),(0,n.jsx)(k.u,{}),(0,n.jsx)(p.D,{}),H.lines]}):(0,n.jsx)(c.Z,{description:"No data to display"})})]})}):null}},30444:function(e){e.exports={variables:'"@/styles/variables.css"',colorPrimary:"#fad114",colorPrimary55:"#fad11455",data:"data_data__6TY8E",button:"data_button__WZosy",container:"data_container__qk8DL",tableContainer:"data_tableContainer__jfr5q",tableHead:"data_tableHead__OyI2w"}}}]);