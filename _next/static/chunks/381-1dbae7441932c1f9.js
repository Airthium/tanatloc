"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[381],{87492:function(e,n,r){r.d(n,{R:function(){return f},_:function(){return h}});var t=r(47568),s=r(26042),i=r(69396),o=r(20414),a=r(59134),l=r.n(a),c=r(83454),u=c.env.PORT?parseInt(c.env.PORT):3e3,d=l()()?"http://localhost:"+u:"",h=function(){var e=(0,t.Z)((function(e,n){var r,t,i,a,l,c;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return t={},i={},[4,fetch(d+e,(0,s.Z)((t.method=n?"POST":"GET",t.headers={accept:"application/json","Content-Type":"application/json"},t),n&&(i.body=n,i)))];case 1:return r=o.sent(),a=r.headers.get("Content-Type"),r.ok?[3,4]:(l=new Error("An error occured while fetching data."),(c=null===a||void 0===a?void 0:a.includes("application/json"))?[4,r.json()]:[3,3]);case 2:c=o.sent(),o.label=3;case 3:throw l.info=c,l.status=r.status,l;case 4:return[2,r.json()]}}))}));return function(n,r){return e.apply(this,arguments)}}(),f=function(){var e=(0,t.Z)((function(e,n){var r,t,a,l,c,u;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return t={},a={},[4,fetch(d+e,(0,i.Z)((0,s.Z)(t,n),(a.method=n&&n.method||"GET",a.headers=(0,i.Z)((0,s.Z)({},n&&n.headers),{"Content-Type":"application/json"}),a)))];case 1:return r=o.sent(),l=r.headers.get("Content-Type"),r.ok?[3,4]:(c=new Error("An error occured while fetching data."),(u=null===l||void 0===l?void 0:l.includes("application/json"))?[4,r.json()]:[3,3]);case 2:u=o.sent(),o.label=3;case 3:throw c.info=u,c.status=r.status,c;case 4:return[2,r]}}))}));return function(n,r){return e.apply(this,arguments)}}()},67169:function(e,n,r){r.d(n,{Z:function(){return x}});var t=r(26042),s=r(8100),i=r(67294),o=r(87492),a=r(69396),l=r(29815),c=r(47568),u=r(20414),d=function(){var e=(0,c.Z)((function(e){var n;return(0,u.__generator)(this,(function(r){switch(r.label){case 0:return n={},[4,(0,o.R)("/api/user",(n.method="POST",n.headers={Accept:"application/json"},n.body=JSON.stringify(e),n))];case 1:return[2,r.sent().json()]}}))}));return function(n){return e.apply(this,arguments)}}(),h=function(){var e=(0,c.Z)((function(e){var n;return(0,u.__generator)(this,(function(r){switch(r.label){case 0:return n={},[4,(0,o.R)("/api/user",(n.method="PUT",n.body=JSON.stringify(e),n))];case 1:return r.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),f=function(){var e=(0,c.Z)((function(e,n){var r;return(0,u.__generator)(this,(function(t){switch(t.label){case 0:return r={},[4,(0,o.R)("/api/user/"+e,(r.method="PUT",r.body=JSON.stringify(n),r))];case 1:return t.sent(),[2]}}))}));return function(n,r){return e.apply(this,arguments)}}(),p=function(){var e=(0,c.Z)((function(){var e;return(0,u.__generator)(this,(function(n){switch(n.label){case 0:return e={},[4,(0,o.R)("/api/user",(e.method="DELETE",e))];case 1:return n.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),v=function(){var e=(0,c.Z)((function(e){var n;return(0,u.__generator)(this,(function(r){switch(r.label){case 0:return n={},[4,(0,o.R)("/api/user/"+e,(n.method="DELETE",n))];case 1:return r.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),g=function(){var e=(0,c.Z)((function(e){var n;return(0,u.__generator)(this,(function(r){switch(r.label){case 0:return n={},[4,(0,o.R)("/api/user/check",(n.method="POST",n.headers={Accept:"application/json"},n.body=JSON.stringify(e),n))];case 1:return[2,r.sent().json()]}}))}));return function(n){return e.apply(this,arguments)}}(),Z={useUser:function(){var e=(0,s.ZP)("/api/user",o._),n=e.data,r=e.error,a=e.mutate,l=!n,c=null===n||void 0===n?void 0:n.user,u=(0,i.useCallback)((function(e){a({user:(0,t.Z)({},c,e)})}),[c,a]),d=(0,i.useCallback)((function(){a({user:void 0})}),[a]);return[c,{mutateUser:u,clearUser:d,errorUser:401===(null===r||void 0===r?void 0:r.status)?void 0:r,loadingUser:401!==(null===r||void 0===r?void 0:r.status)&&l}]},useUsers:function(){var e=(0,s.ZP)("/api/users",o._),n=e.data,r=e.error,c=e.mutate,u=!n,d=(null===n||void 0===n?void 0:n.users)||[],h=(0,i.useCallback)((function(e){var n=(0,l.Z)(d).concat([(0,a.Z)((0,t.Z)({},e),{authorizedplugins:[]})]);c({users:n})}),[d,c]),f=(0,i.useCallback)((function(e){var n=d.filter((function(n){return n.id!==e.id}));c({users:n})}),[d,c]),p=(0,i.useCallback)((function(e){var n=d.map((function(n){return n.id===e.id&&(n=(0,t.Z)({},n,e)),n}));c({users:n})}),[d,c]);return[d,{addOneUser:h,delOneUser:f,mutateOneUser:p,errorUsers:r,loadingUsers:u}]},add:d,update:h,updateById:f,del:p,delById:v,check:g},x=Z},32834:function(e,n,r){r.d(n,{AN:function(){return Z},ZP:function(){return j}});var t=r(47568),s=r(26042),i=r(69396),o=r(828),a=r(20414),l=r(85893),c=r(67294),u=r(81579),d=r(67040),h=r(6880),f=r(96844),p=r(26713),v=r(40262),g="Dialog validation error",Z=function(e){var n=e.visible,r=e.loading,s=e.title,i=e.children,o=e.onCancel,c=e.onOk;return(0,l.jsx)(d.Z,{className:"Dialog",title:(0,l.jsx)(h.Z.Text,{ellipsis:{tooltip:!0},children:s}),okText:"Delete",closable:!1,maskClosable:!1,open:n,cancelButtonProps:{disabled:r},onCancel:function(){return o()},onOk:(0,t.Z)((function(){var e;return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,c()];case 1:return n.sent(),[3,3];case 2:return e=n.sent(),(0,f.lt)(g,e,!1),[3,3];case 3:return[2]}}))})),okButtonProps:{danger:!0,loading:r},children:(0,l.jsxs)(p.Z,{align:"start",children:[(0,l.jsx)(v.Z,{twoToneColor:"#ff4d4f"}),(0,l.jsx)("span",{style:{wordBreak:"break-word"},children:i})]})})},x="Dialog validation error",j=function(e){var n=e.visible,r=e.loading,p=e.title,v=e.initialValues,g=e.cancelButtonText,Z=e.cancelButtonProps,j=e.okButtonProps,m=e.okButtonText,y=e.children,b=e.onCancel,k=e.onOk,T=(0,o.Z)(u.Z.useForm(),1)[0];return(0,c.useEffect)((function(){n&&v&&T.setFieldsValue(v)}),[n,v,T]),(0,l.jsx)(d.Z,{className:"Dialog",title:(0,l.jsx)(h.Z.Text,{ellipsis:{tooltip:!0},children:p}),open:n,closable:!1,maskClosable:!1,onCancel:b&&function(){T.resetFields(),b()},cancelButtonProps:(0,i.Z)((0,s.Z)({},Z),{disabled:r,style:{display:b?"inline-block":"none"}}),cancelText:g,onOk:k&&(0,t.Z)((function(){var e,n;return(0,a.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,T.validateFields()];case 1:return e=r.sent(),[4,k(e)];case 2:return r.sent(),T.resetFields(),[3,4];case 3:return n=r.sent(),(0,f.lt)(x,n,!1),[3,4];case 4:return[2]}}))})),okText:m,okButtonProps:(0,i.Z)((0,s.Z)({},j),{loading:r,style:{display:k?"inline-block":"none"}}),children:(0,l.jsx)(u.Z,{form:T,layout:"vertical",initialValues:v,children:y})})}},96844:function(e,n,r){r.d(n,{lt:function(){return Z},Xq:function(){return m},Ur:function(){return s}});var t=r(13448),s=function(e,n){t.Z.success({message:e,description:n,duration:10})},i=r(85893),o=r(6880),a=r(54907),l=r(26713),c=r(71577),u=r(79074),d=r(60274);u.S1({dsn:"https://3bb27cb32e55433696022ba93cb32430@o394613.ingest.sentry.io/5428383"});var h,f,p=d,v=[],g=function(){h&&(t.Z.close(h),h=void 0),v.forEach((function(e){return t.Z.close(e)})),v.length=0,t.Z.close(f),f=void 0},Z=function(e,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if("Failed to fetch"!==(null===n||void 0===n?void 0:n.message)){if(r){var s,u,d="error_"+v.length;v.push(d),t.Z.error({key:d,message:e,description:n&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Z.Text,{code:!0,children:n.message}),(n.status||n.info)&&(0,i.jsx)(a.Z,{children:(0,i.jsx)(a.Z.Panel,{header:"More information",children:(0,i.jsxs)(l.Z,{direction:"vertical",children:[n.status&&(0,i.jsxs)(o.Z.Text,{children:["Status: ",n.status]}),(null===(s=n.info)||void 0===s?void 0:s.message)&&(0,i.jsxs)(o.Z.Text,{children:["Description: ",null===(u=n.info)||void 0===u?void 0:u.message]})]})},"information")})]}),duration:0})}if(n&&console.error(n),n&&p.captureException(n),v.length>1&&!f){var Z="close_all";t.Z.info({key:Z,message:(0,i.jsx)(c.Z,{type:"primary",onClick:g,children:"Close all"}),description:"Close all error notifications",duration:0,placement:"top"}),f=Z}}else if(!h){var x="server_error";v.push(x),t.Z.error({key:x,message:"Server error",description:"Server is disconnected, please check your internet connection.",duration:0,onClose:function(){h=void 0}}),h=x}},x=r(81579),j=r(14670),m=function(e){var n,r,t=e.error;return t?(0,i.jsx)(x.Z.Item,{children:(0,i.jsx)(j.Z,{message:t.render||t.title,type:t.type,showIcon:!0,description:t.err&&(0,i.jsxs)(i.Fragment,{children:[t.err.message&&(0,i.jsxs)(o.Z.Text,{type:"danger",children:["Message: ",(0,i.jsx)("code",{children:t.err.message})]}),t.err.status&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("br",{}),(0,i.jsxs)(o.Z.Text,{type:"danger",children:["Status: ",(0,i.jsx)("code",{children:t.err.status})]})]}),(null===(n=t.err.info)||void 0===n?void 0:n.message)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("br",{}),(0,i.jsxs)(o.Z.Text,{type:"danger",children:["Information: ",(0,i.jsx)("code",{children:null===(r=t.err.info)||void 0===r?void 0:r.message})]})]})]})})}):null}},75107:function(e,n,r){var t=r(85893),s=r(28058),i=r(26713),o=r(81474),a=r(11382),l=r(97183),c=r(6880),u=function(e){var n=e.text,r=e.status,u=e.errors;return(0,t.jsxs)(l.Z,{className:"tanatloc-gradient",children:[(0,t.jsx)("div",{className:"logo",children:(0,t.jsx)("img",{src:"/images/logo.svg",alt:"Tanatloc"})}),(0,t.jsxs)(o.Z,{className:"Loading",bodyStyle:(null===r||void 0===r?void 0:r.length)||(null===u||void 0===u?void 0:u.length)?void 0:{padding:0},title:(0,t.jsx)(i.Z,{children:(null===u||void 0===u?void 0:u.length)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.Z,{style:{fontSize:"32px",color:"red"}}),(0,t.jsx)(c.Z.Title,{level:3,className:"no-margin",children:"An error occurs"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.Z,{size:"large"}),null!==n&&void 0!==n?n:"Loading, please wait..."]})}),children:[(null===u||void 0===u?void 0:u.length)?(0,t.jsxs)("div",{className:"Loading-errors",children:["Errors:",u.map((function(e,n){var r=null;return e.includes("docker: command not found")||e.includes("Is the docker daemon running")?r=(0,t.jsxs)(o.Z,{children:["There is an error with your Docker installation.",(0,t.jsx)("br",{}),"Please verify Docker is correctly installed and running."]}):(e.includes("EHOSTUNREACH")||e.includes("ENETUNREACH")||e.includes("ETIMEOUT"))&&(r=(0,t.jsxs)(o.Z,{children:["There is an error with your PostgreSQL installation.",(0,t.jsx)("br",{}),'Please verify postgres Docker container "tanatloc-postgres" is correctly installed and running.']})),(0,t.jsxs)("div",{children:[e,r]},n)})),(0,t.jsx)(c.Z.Title,{level:5,style:{color:"red"},children:"Please restart the application"})]}):null,(null===r||void 0===r?void 0:r.length)?(0,t.jsxs)("div",{className:"Loading-status",children:["Tasks:",r.map((function(e,n){return(0,t.jsx)("div",{children:e},n)}))]}):null]})]})};u.Simple=function(){return(0,t.jsx)(i.Z,{style:{height:"100%",width:"100%",justifyContent:"center",alignItems:"center"},children:(0,t.jsx)(o.Z,{children:(0,t.jsxs)(i.Z,{children:[(0,t.jsx)(a.Z,{}),"Loading, please wait..."]})})})},n.Z=u}}]);