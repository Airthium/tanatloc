"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3998],{4123:(e,t,n)=>{n.d(t,{A:()=>r});function r(){return function(e){function t(e,t){for(var n,r,i,o,a,s=/([MLQCZ])([^MLQCZ]*)/g;n=s.exec(e);){var l=n[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(e){return parseFloat(e)});switch(n[1]){case"M":o=r=l[0],a=i=l[1];break;case"L":(l[0]!==o||l[1]!==a)&&t("L",o,a,o=l[0],a=l[1]);break;case"Q":t("Q",o,a,o=l[2],a=l[3],l[0],l[1]);break;case"C":t("C",o,a,o=l[4],a=l[5],l[0],l[1],l[2],l[3]);break;case"Z":(o!==r||a!==i)&&t("L",o,a,r,i)}}}function n(e,n,r){void 0===r&&(r=16);var i={x:0,y:0};t(e,function(e,t,o,a,s,l,c,u,d){switch(e){case"L":n(t,o,a,s);break;case"Q":for(var h=t,f=o,p=1;p<r;p++)!function(e,t,n,r,i,o,a,s){var l=1-a;s.x=l*l*e+2*l*a*n+a*a*i,s.y=l*l*t+2*l*a*r+a*a*o}(t,o,l,c,a,s,p/(r-1),i),n(h,f,i.x,i.y),h=i.x,f=i.y;break;case"C":for(var m=t,g=o,v=1;v<r;v++)!function(e,t,n,r,i,o,a,s,l,c){var u=1-l;c.x=u*u*u*e+3*u*u*l*n+3*u*l*l*i+l*l*l*a,c.y=u*u*u*t+3*u*u*l*r+3*u*l*l*o+l*l*l*s}(t,o,l,c,u,d,a,s,v/(r-1),i),n(m,g,i.x,i.y),m=i.x,g=i.y}})}var r="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",i=new WeakMap,o={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function a(e,t){var n=e.getContext?e.getContext("webgl",o):e,r=i.get(n);if(!r){var a="undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext,s={},l={},c={},u=-1,d=[];function h(e){var t=s[e];if(!t&&!(t=s[e]=n.getExtension(e)))throw Error(e+" not supported");return t}function f(e,t){var r=n.createShader(t);return n.shaderSource(r,e),n.compileShader(r),r}function p(){s={},l={},c={},u=-1,d.length=0}n.canvas.addEventListener("webglcontextlost",function(e){p(),e.preventDefault()},!1),i.set(n,r={gl:n,isWebGL2:a,getExtension:h,withProgram:function(e,t,r,i){if(!l[e]){var o={},s={},c=n.createProgram();n.attachShader(c,f(t,n.VERTEX_SHADER)),n.attachShader(c,f(r,n.FRAGMENT_SHADER)),n.linkProgram(c),l[e]={program:c,transaction:function(e){n.useProgram(c),e({setUniform:function(e,t){for(var r=[],i=arguments.length-2;i-- >0;)r[i]=arguments[i+2];var o=s[t]||(s[t]=n.getUniformLocation(c,t));n["uniform"+e].apply(n,[o].concat(r))},setAttribute:function(e,t,r,i,s){var l=o[e];l||(l=o[e]={buf:n.createBuffer(),loc:n.getAttribLocation(c,e),data:null}),n.bindBuffer(n.ARRAY_BUFFER,l.buf),n.vertexAttribPointer(l.loc,t,n.FLOAT,!1,0,0),n.enableVertexAttribArray(l.loc),a?n.vertexAttribDivisor(l.loc,i):h("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(l.loc,i),s!==l.data&&(n.bufferData(n.ARRAY_BUFFER,s,r),l.data=s)}})}}}l[e].transaction(i)},withTexture:function(e,t){u++;try{n.activeTexture(n.TEXTURE0+u);var r=c[e];r||(r=c[e]=n.createTexture(),n.bindTexture(n.TEXTURE_2D,r),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST)),n.bindTexture(n.TEXTURE_2D,r),t(r,u)}finally{u--}},withTextureFramebuffer:function(e,t,r){var i=n.createFramebuffer();d.push(i),n.bindFramebuffer(n.FRAMEBUFFER,i),n.activeTexture(n.TEXTURE0+t),n.bindTexture(n.TEXTURE_2D,e),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0);try{r(i)}finally{n.deleteFramebuffer(i),n.bindFramebuffer(n.FRAMEBUFFER,d[--d.length-1]||null)}},handleContextLoss:p})}t(r)}function s(e,t,n,i,o,s,l,c){void 0===l&&(l=15),void 0===c&&(c=null),a(e,function(e){var a=e.gl,u=e.withProgram;(0,e.withTexture)("copy",function(e,d){a.texImage2D(a.TEXTURE_2D,0,a.RGBA,o,s,0,a.RGBA,a.UNSIGNED_BYTE,t),u("copy",r,"precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",function(e){var t=e.setUniform;(0,e.setAttribute)("aUV",2,a.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),t("1i","image",d),a.bindFramebuffer(a.FRAMEBUFFER,c||null),a.disable(a.BLEND),a.colorMask(8&l,4&l,2&l,1&l),a.viewport(n,i,o,s),a.scissor(n,i,o,s),a.drawArrays(a.TRIANGLES,0,3)})})})}var l=Object.freeze({__proto__:null,withWebGLContext:a,renderImageData:s,resizeWebGLCanvasWithoutClearing:function(e,t,n){var r=e.width,i=e.height;a(e,function(o){var a=o.gl,l=new Uint8Array(r*i*4);a.readPixels(0,0,r,i,a.RGBA,a.UNSIGNED_BYTE,l),e.width=t,e.height=n,s(a,l,0,0,r,i)})}});function c(e,t,r,i,o,a){void 0===a&&(a=1);var s=new Uint8Array(e*t),l=i[2]-i[0],c=i[3]-i[1],u=[];n(r,function(e,t,n,r){u.push({x1:e,y1:t,x2:n,y2:r,minX:Math.min(e,n),minY:Math.min(t,r),maxX:Math.max(e,n),maxY:Math.max(t,r)})}),u.sort(function(e,t){return e.maxX-t.maxX});for(var d=0;d<e;d++)for(var h=0;h<t;h++){var f=function(e,t){for(var n=1/0,r=1/0,i=u.length;i--;){var o=u[i];if(o.maxX+r<=e)break;if(e+r>o.minX&&t-r<o.maxY&&t+r>o.minY){var a=function(e,t,n,r,i,o){var a=i-n,s=o-r,l=a*a+s*s,c=l?Math.max(0,Math.min(1,((e-n)*a+(t-r)*s)/l)):0,u=e-(n+c*a),d=t-(r+c*s);return u*u+d*d}(e,t,o.x1,o.y1,o.x2,o.y2);a<n&&(r=Math.sqrt(n=a))}}return function(e,t){for(var n=0,r=u.length;r--;){var i=u[r];if(i.maxX<=e)break;i.y1>t!=i.y2>t&&e<(i.x2-i.x1)*(t-i.y1)/(i.y2-i.y1)+i.x1&&(n+=i.y1<i.y2?1:-1)}return 0!==n}(e,t)&&(r=-r),r}(i[0]+l*(d+.5)/e,i[1]+c*(h+.5)/t),p=Math.pow(1-Math.abs(f)/o,a)/2;f<0&&(p=1-p),p=Math.max(0,Math.min(255,Math.round(255*p))),s[h*e+d]=p}return s}function u(e,t,n,r,i,o,a,s,l,c){void 0===o&&(o=1),void 0===s&&(s=0),void 0===l&&(l=0),void 0===c&&(c=0),d(e,t,n,r,i,o,a,null,s,l,c)}function d(e,t,n,r,i,o,a,l,u,d,h){void 0===o&&(o=1),void 0===u&&(u=0),void 0===d&&(d=0),void 0===h&&(h=0);for(var f=c(e,t,n,r,i,o),p=new Uint8Array(4*f.length),m=0;m<f.length;m++)p[4*m+h]=f[m];s(a,p,u,d,e,t,1<<3-h,l)}var h=Object.freeze({__proto__:null,generate:c,generateIntoCanvas:u,generateIntoFramebuffer:d}),f=new Float32Array([0,0,2,0,0,2]),p=null,m=!1,g={},v=new WeakMap;function b(e){if(!m&&!E(e))throw Error("WebGL generation not supported")}function y(e,t,n,r,i,o,s){if(void 0===o&&(o=1),void 0===s&&(s=null),!s&&!(s=p)){var l="function"==typeof OffscreenCanvas?new OffscreenCanvas(1,1):"undefined"!=typeof document?document.createElement("canvas"):null;if(!l)throw Error("OffscreenCanvas or DOM canvas not supported");s=p=l.getContext("webgl",{depth:!1})}b(s);var c=new Uint8Array(e*t*4);a(s,function(a){var s=a.gl,l=a.withTexture,u=a.withTextureFramebuffer;l("readable",function(a,l){s.texImage2D(s.TEXTURE_2D,0,s.RGBA,e,t,0,s.RGBA,s.UNSIGNED_BYTE,null),u(a,l,function(a){w(e,t,n,r,i,o,s,a,0,0,0),s.readPixels(0,0,e,t,s.RGBA,s.UNSIGNED_BYTE,c)})})});for(var u=new Uint8Array(e*t),d=0,h=0;d<c.length;d+=4)u[h++]=c[d];return u}function x(e,t,n,r,i,o,a,s,l,c){void 0===o&&(o=1),void 0===s&&(s=0),void 0===l&&(l=0),void 0===c&&(c=0),w(e,t,n,r,i,o,a,null,s,l,c)}function w(e,t,i,o,s,l,c,u,d,h,p){void 0===l&&(l=1),void 0===d&&(d=0),void 0===h&&(h=0),void 0===p&&(p=0),b(c);var m=[];n(i,function(e,t,n,r){m.push(e,t,n,r)}),m=new Float32Array(m),a(c,function(n){var i=n.gl,a=n.isWebGL2,c=n.getExtension,g=n.withProgram,v=n.withTexture,b=n.withTextureFramebuffer,y=n.handleContextLoss;if(v("rawDistances",function(n,v){(e!==n._lastWidth||t!==n._lastHeight)&&i.texImage2D(i.TEXTURE_2D,0,i.RGBA,n._lastWidth=e,n._lastHeight=t,0,i.RGBA,i.UNSIGNED_BYTE,null),g("main","precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}","precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",function(r){var u=r.setAttribute,d=r.setUniform,h=!a&&c("ANGLE_instanced_arrays"),p=!a&&c("EXT_blend_minmax");u("aUV",2,i.STATIC_DRAW,0,f),u("aLineSegment",4,i.DYNAMIC_DRAW,1,m),d.apply(void 0,["4f","uGlyphBounds"].concat(o)),d("1f","uMaxDistance",s),d("1f","uExponent",l),b(n,v,function(n){i.enable(i.BLEND),i.colorMask(!0,!0,!0,!0),i.viewport(0,0,e,t),i.scissor(0,0,e,t),i.blendFunc(i.ONE,i.ONE),i.blendEquationSeparate(i.FUNC_ADD,a?i.MAX:p.MAX_EXT),i.clear(i.COLOR_BUFFER_BIT),a?i.drawArraysInstanced(i.TRIANGLES,0,3,m.length/4):h.drawArraysInstancedANGLE(i.TRIANGLES,0,3,m.length/4)})}),g("post",r,"precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",function(n){n.setAttribute("aUV",2,i.STATIC_DRAW,0,f),n.setUniform("1i","tex",v),i.bindFramebuffer(i.FRAMEBUFFER,u),i.disable(i.BLEND),i.colorMask(0===p,1===p,2===p,3===p),i.viewport(d,h,e,t),i.scissor(d,h,e,t),i.drawArrays(i.TRIANGLES,0,3)})}),i.isContextLost())throw y(),Error("webgl context lost")})}function E(e){var t=e&&e!==p?e.canvas||e:g,n=v.get(t);if(void 0===n){m=!0;var r=null;try{var i=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],o=y(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,e);(n=o&&i.length===o.length&&o.every(function(e,t){return e===i[t]}))||(r="bad trial run results",console.info(i,o))}catch(e){n=!1,r=e.message}r&&console.warn("WebGL SDF generation not supported:",r),m=!1,v.set(t,n)}return n}var A=Object.freeze({__proto__:null,generate:y,generateIntoCanvas:x,generateIntoFramebuffer:w,isSupported:E});return e.forEachPathCommand=t,e.generate=function(e,t,n,r,i,o){void 0===i&&(i=Math.max(r[2]-r[0],r[3]-r[1])/2),void 0===o&&(o=1);try{return y.apply(A,arguments)}catch(e){return console.info("WebGL SDF generation failed, falling back to JS",e),c.apply(h,arguments)}},e.generateIntoCanvas=function(e,t,n,r,i,o,a,s,l,c){void 0===i&&(i=Math.max(r[2]-r[0],r[3]-r[1])/2),void 0===o&&(o=1),void 0===s&&(s=0),void 0===l&&(l=0),void 0===c&&(c=0);try{return x.apply(A,arguments)}catch(e){return console.info("WebGL SDF generation failed, falling back to JS",e),u.apply(h,arguments)}},e.javascript=h,e.pathToLineSegments=n,e.webgl=A,e.webglUtils=l,Object.defineProperty(e,"__esModule",{value:!0}),e}({})}},5511:(e,t,n)=>{n.d(t,{Do:()=>o,Fh:()=>f});var r=n(14796),i=n(66691);let o=/\bvoid\s+main\s*\(\s*\)\s*{/g;function a(e){return e.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,function(e,t){let n=r.ShaderChunk[t];return n?a(n):e})}let s=[];for(let e=0;e<256;e++)s[e]=(e<16?"0":"")+e.toString(16);let l=Object.assign||function(){let e=arguments[0];for(let t=1,n=arguments.length;t<n;t++){let n=arguments[t];if(n)for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},c=Date.now(),u=new WeakMap,d=new Map,h=1e10;function f(e,t){let n=function(e){let t=JSON.stringify(e,m),n=v.get(t);return null==n&&v.set(t,n=++g),n}(t),r=u.get(e);if(r||u.set(e,r=Object.create(null)),r[n])return new r[n];let o=`_onBeforeCompile${n}`,b=function(r,i){e.onBeforeCompile.call(this,r,i);let s=this.customProgramCacheKey()+"|"+r.vertexShader+"|"+r.fragmentShader,u=d[s];if(!u){let e=function(e,{vertexShader:t,fragmentShader:n},r,i){let{vertexDefs:o,vertexMainIntro:s,vertexMainOutro:l,vertexTransform:c,fragmentDefs:u,fragmentMainIntro:d,fragmentMainOutro:h,fragmentColorTransform:f,customRewriter:m,timeUniform:g}=r;if(o=o||"",s=s||"",l=l||"",u=u||"",d=d||"",h=h||"",(c||m)&&(t=a(t)),(f||m)&&(n=a(n=n.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,"\n//!BEGIN_POST_CHUNK $1\n$&\n//!END_POST_CHUNK\n"))),m){let e=m({vertexShader:t,fragmentShader:n});t=e.vertexShader,n=e.fragmentShader}if(f){let e=[];n=n.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,t=>(e.push(t),"")),h=`${f}
${e.join("\n")}
${h}`}if(g){let e=`
uniform float ${g};
`;o=e+o,u=e+u}return c&&(t=`vec3 troika_position_${i};
vec3 troika_normal_${i};
vec2 troika_uv_${i};
${t}
`,o=`${o}
void troikaVertexTransform${i}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${c}
}
`,s=`
troika_position_${i} = vec3(position);
troika_normal_${i} = vec3(normal);
troika_uv_${i} = vec2(uv);
troikaVertexTransform${i}(troika_position_${i}, troika_normal_${i}, troika_uv_${i});
${s}
`,t=t.replace(/\b(position|normal|uv)\b/g,(e,t,n,r)=>/\battribute\s+vec[23]\s+$/.test(r.substr(0,n))?t:`troika_${t}_${i}`),e.map&&e.map.channel>0||(t=t.replace(/\bMAP_UV\b/g,`troika_uv_${i}`))),{vertexShader:t=p(t,i,o,s,l),fragmentShader:n=p(n,i,u,d,h)}}(this,r,t,n);u=d[s]=e}r.vertexShader=u.vertexShader,r.fragmentShader=u.fragmentShader,l(r.uniforms,this.uniforms),t.timeUniform&&(r.uniforms[t.timeUniform]={get value(){return Date.now()-c}}),this[o]&&this[o](r)},y=function(){return x(t.chained?e:e.clone())},x=function(r){let i=Object.create(r,w);return Object.defineProperty(i,"baseMaterial",{value:e}),Object.defineProperty(i,"id",{value:h++}),i.uuid=function(){let e=0xffffffff*Math.random()|0,t=0xffffffff*Math.random()|0,n=0xffffffff*Math.random()|0,r=0xffffffff*Math.random()|0;return(s[255&e]+s[e>>8&255]+s[e>>16&255]+s[e>>24&255]+"-"+s[255&t]+s[t>>8&255]+"-"+s[t>>16&15|64]+s[t>>24&255]+"-"+s[63&n|128]+s[n>>8&255]+"-"+s[n>>16&255]+s[n>>24&255]+s[255&r]+s[r>>8&255]+s[r>>16&255]+s[r>>24&255]).toUpperCase()}(),i.uniforms=l({},r.uniforms,t.uniforms),i.defines=l({},r.defines,t.defines),i.defines[`TROIKA_DERIVED_MATERIAL_${n}`]="",i.extensions=l({},r.extensions,t.extensions),i._listeners=void 0,i},w={constructor:{value:y},isDerivedMaterial:{value:!0},type:{get:()=>e.type,set:t=>{e.type=t}},isDerivedFrom:{writable:!0,configurable:!0,value:function(e){let t=this.baseMaterial;return e===t||t.isDerivedMaterial&&t.isDerivedFrom(e)||!1}},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return e.customProgramCacheKey()+"|"+n}},onBeforeCompile:{get:()=>b,set(e){this[o]=e}},copy:{writable:!0,configurable:!0,value:function(t){return e.copy.call(this,t),e.isShaderMaterial||e.isDerivedMaterial||(l(this.extensions,t.extensions),l(this.defines,t.defines),l(this.uniforms,i.LlO.clone(t.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){return x(new e.constructor).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let n=this._depthMaterial;return n||((n=this._depthMaterial=f(e.isDerivedMaterial?e.getDepthMaterial():new i.CSG({depthPacking:i.N5j}),t)).defines.IS_DEPTH_MATERIAL="",n.uniforms=this.uniforms),n}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let n=this._distanceMaterial;return n||((n=this._distanceMaterial=f(e.isDerivedMaterial?e.getDistanceMaterial():new i.aVO,t)).defines.IS_DISTANCE_MATERIAL="",n.uniforms=this.uniforms),n}},dispose:{writable:!0,configurable:!0,value(){let{_depthMaterial:t,_distanceMaterial:n}=this;t&&t.dispose(),n&&n.dispose(),e.dispose.call(this)}}};return r[n]=y,new y}function p(e,t,n,r,i){return(r||i||n)&&(e=e.replace(o,`
${n}
void troikaOrigMain${t}() {`)+`
void main() {
  ${r}
  troikaOrigMain${t}();
  ${i}
}`),e}function m(e,t){return"uniforms"===e?void 0:"function"==typeof t?t.toString():t}let g=0,v=new Map,b=`
uniform vec3 pointA;
uniform vec3 controlA;
uniform vec3 controlB;
uniform vec3 pointB;
uniform float radius;
varying float bezierT;

vec3 cubicBezier(vec3 p1, vec3 c1, vec3 c2, vec3 p2, float t) {
  float t2 = 1.0 - t;
  float b0 = t2 * t2 * t2;
  float b1 = 3.0 * t * t2 * t2;
  float b2 = 3.0 * t * t * t2;
  float b3 = t * t * t;
  return b0 * p1 + b1 * c1 + b2 * c2 + b3 * p2;
}

vec3 cubicBezierDerivative(vec3 p1, vec3 c1, vec3 c2, vec3 p2, float t) {
  float t2 = 1.0 - t;
  return -3.0 * p1 * t2 * t2 +
    c1 * (3.0 * t2 * t2 - 6.0 * t2 * t) +
    c2 * (6.0 * t2 * t - 3.0 * t * t) +
    3.0 * p2 * t * t;
}
`,y=`
float t = position.y;
bezierT = t;
vec3 bezierCenterPos = cubicBezier(pointA, controlA, controlB, pointB, t);
vec3 bezierDir = normalize(cubicBezierDerivative(pointA, controlA, controlB, pointB, t));

// Make "sideways" always perpendicular to the camera ray; this ensures that any twists
// in the cylinder occur where you won't see them: 
vec3 viewDirection = normalMatrix * vec3(0.0, 0.0, 1.0);
if (bezierDir == viewDirection) {
  bezierDir = normalize(cubicBezierDerivative(pointA, controlA, controlB, pointB, t == 1.0 ? t - 0.0001 : t + 0.0001));
}
vec3 sideways = normalize(cross(bezierDir, viewDirection));
vec3 upish = normalize(cross(sideways, bezierDir));

// Build a matrix for transforming this disc in the cylinder:
mat4 discTx;
discTx[0].xyz = sideways * radius;
discTx[1].xyz = bezierDir * radius;
discTx[2].xyz = upish * radius;
discTx[3].xyz = bezierCenterPos;
discTx[3][3] = 1.0;

// Apply transform, ignoring original y
position = (discTx * vec4(position.x, 0.0, position.z, 1.0)).xyz;
normal = normalize(mat3(discTx) * normal);
`,x=`
uniform vec3 dashing;
varying float bezierT;
`,w=`
if (dashing.x + dashing.y > 0.0) {
  float dashFrac = mod(bezierT - dashing.z, dashing.x + dashing.y);
  if (dashFrac > dashing.x) {
    discard;
  }
}
`,E=null,A=new i._4j({color:0xffffff,side:i.$EB});class S extends i.eaF{static getGeometry(){return E||(E=new i.Ho_(1,1,1,6,64).translate(0,.5,0))}constructor(){super(S.getGeometry(),A),this.pointA=new i.Pq0,this.controlA=new i.Pq0,this.controlB=new i.Pq0,this.pointB=new i.Pq0,this.radius=.01,this.dashArray=new i.I9Y,this.dashOffset=0,this.frustumCulled=!1}get material(){let e=this._derivedMaterial,t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=A.clone());return e&&e.baseMaterial===t||(e=this._derivedMaterial=f(t,{chained:!0,uniforms:{pointA:{value:new i.Pq0},controlA:{value:new i.Pq0},controlB:{value:new i.Pq0},pointB:{value:new i.Pq0},radius:{value:.01},dashing:{value:new i.Pq0}},vertexDefs:b,vertexTransform:y,fragmentDefs:x,fragmentMainIntro:w}),t.addEventListener("dispose",function n(){t.removeEventListener("dispose",n),e.dispose()})),e}set material(e){this._baseMaterial=e}get customDepthMaterial(){return this.material.getDepthMaterial()}set customDepthMaterial(e){}get customDistanceMaterial(){return this.material.getDistanceMaterial()}set customDistanceMaterial(e){}onBeforeRender(){let{uniforms:e}=this.material,{pointA:t,controlA:n,controlB:r,pointB:i,radius:o,dashArray:a,dashOffset:s}=this;e.pointA.value.copy(t),e.controlA.value.copy(n),e.controlB.value.copy(r),e.pointB.value.copy(i),e.radius.value=o,e.dashing.value.set(a.x,a.y,s||0)}raycast(){}}},40667:(e,t,n)=>{e.exports=n(32795)},45712:(e,t,n)=>{e.exports=n(58214)},45919:(e,t)=>{function n(e,t){var n=e.length;for(e.push(t);0<n;){var r=n-1>>>1,i=e[r];if(0<o(i,t))e[r]=t,e[n]=i,n=r;else break}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else if(c<i&&0>o(u,n))e[r]=u,e[c]=n,r=c;else break}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var a,s=performance;t.unstable_now=function(){return s.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var u=[],d=[],h=1,f=null,p=3,m=!1,g=!1,v=!1,b="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,x="undefined"!=typeof setImmediate?setImmediate:null;function w(e){for(var t=r(d);null!==t;){if(null===t.callback)i(d);else if(t.startTime<=e)i(d),t.sortIndex=t.expirationTime,n(u,t);else break;t=r(d)}}function E(e){if(v=!1,w(e),!g)if(null!==r(u))g=!0,P();else{var t=r(d);null!==t&&O(E,t.startTime-e)}}var A=!1,S=-1,j=5,C=-1;function M(){return!(t.unstable_now()-C<j)}function k(){if(A){var e=t.unstable_now();C=e;var n=!0;try{e:{g=!1,v&&(v=!1,y(S),S=-1),m=!0;var o=p;try{t:{for(w(e),f=r(u);null!==f&&!(f.expirationTime>e&&M());){var s=f.callback;if("function"==typeof s){f.callback=null,p=f.priorityLevel;var l=s(f.expirationTime<=e);if(e=t.unstable_now(),"function"==typeof l){f.callback=l,w(e),n=!0;break t}f===r(u)&&i(u),w(e)}else i(u);f=r(u)}if(null!==f)n=!0;else{var c=r(d);null!==c&&O(E,c.startTime-e),n=!1}}break e}finally{f=null,p=o,m=!1}}}finally{n?a():A=!1}}}if("function"==typeof x)a=function(){x(k)};else if("undefined"!=typeof MessageChannel){var T=new MessageChannel,_=T.port2;T.port1.onmessage=k,a=function(){_.postMessage(null)}}else a=function(){b(k,0)};function P(){A||(A=!0,a())}function O(e,n){S=b(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,P())},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch(o="object"==typeof o&&null!==o&&"number"==typeof(o=o.delay)&&0<o?a+o:a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=0x3fffffff;break;case 4:s=1e4;break;default:s=5e3}return s=o+s,e={id:h++,callback:i,priorityLevel:e,startTime:o,expirationTime:s,sortIndex:-1},o>a?(e.sortIndex=o,n(d,e),null===r(u)&&e===r(d)&&(v?(y(S),S=-1):v=!0,O(E,o-a))):(e.sortIndex=s,n(u,e),g||m||(g=!0,P())),e},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},56368:(e,t,n)=>{n.d(t,{A:()=>p});var r=n(14232),i=n(15039),o=n.n(i),a=n(55522),s=n(22608),l=n(72824),c=n(78495),u=n(17471);let d=e=>{let{componentCls:t,sizePaddingEdgeHorizontal:n,colorSplit:r,lineWidth:i,textPaddingInline:o,orientationMargin:a,verticalMarginInline:c}=e;return{[t]:Object.assign(Object.assign({},(0,l.dF)(e)),{borderBlockStart:"".concat((0,s.zA)(i)," solid ").concat(r),"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",marginInline:c,marginBlock:0,verticalAlign:"middle",borderTop:0,borderInlineStart:"".concat((0,s.zA)(i)," solid ").concat(r)},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:"".concat((0,s.zA)(e.dividerHorizontalGutterMargin)," 0")},["&-horizontal".concat(t,"-with-text")]:{display:"flex",alignItems:"center",margin:"".concat((0,s.zA)(e.dividerHorizontalWithTextGutterMargin)," 0"),color:e.colorTextHeading,fontWeight:500,fontSize:e.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:"0 ".concat(r),"&::before, &::after":{position:"relative",width:"50%",borderBlockStart:"".concat((0,s.zA)(i)," solid transparent"),borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}},["&-horizontal".concat(t,"-with-text-start")]:{"&::before":{width:"calc(".concat(a," * 100%)")},"&::after":{width:"calc(100% - ".concat(a," * 100%)")}},["&-horizontal".concat(t,"-with-text-end")]:{"&::before":{width:"calc(100% - ".concat(a," * 100%)")},"&::after":{width:"calc(".concat(a," * 100%)")}},["".concat(t,"-inner-text")]:{display:"inline-block",paddingBlock:0,paddingInline:o},"&-dashed":{background:"none",borderColor:r,borderStyle:"dashed",borderWidth:"".concat((0,s.zA)(i)," 0 0")},["&-horizontal".concat(t,"-with-text").concat(t,"-dashed")]:{"&::before, &::after":{borderStyle:"dashed none none"}},["&-vertical".concat(t,"-dashed")]:{borderInlineStartWidth:i,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},"&-dotted":{background:"none",borderColor:r,borderStyle:"dotted",borderWidth:"".concat((0,s.zA)(i)," 0 0")},["&-horizontal".concat(t,"-with-text").concat(t,"-dotted")]:{"&::before, &::after":{borderStyle:"dotted none none"}},["&-vertical".concat(t,"-dotted")]:{borderInlineStartWidth:i,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},["&-plain".concat(t,"-with-text")]:{color:e.colorText,fontWeight:"normal",fontSize:e.fontSize},["&-horizontal".concat(t,"-with-text-start").concat(t,"-no-default-orientation-margin-start")]:{"&::before":{width:0},"&::after":{width:"100%"},["".concat(t,"-inner-text")]:{paddingInlineStart:n}},["&-horizontal".concat(t,"-with-text-end").concat(t,"-no-default-orientation-margin-end")]:{"&::before":{width:"100%"},"&::after":{width:0},["".concat(t,"-inner-text")]:{paddingInlineEnd:n}}})}},h=(0,c.OF)("Divider",e=>[d((0,u.oX)(e,{dividerHorizontalWithTextGutterMargin:e.margin,dividerHorizontalGutterMargin:e.marginLG,sizePaddingEdgeHorizontal:0}))],e=>({textPaddingInline:"1em",orientationMargin:.05,verticalMarginInline:e.marginXS}),{unitless:{orientationMargin:!0}});var f=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};let p=e=>{let{getPrefixCls:t,direction:n,className:i,style:s}=(0,a.TP)("divider"),{prefixCls:l,type:c="horizontal",orientation:u="center",orientationMargin:d,className:p,rootClassName:m,children:g,dashed:v,variant:b="solid",plain:y,style:x}=e,w=f(e,["prefixCls","type","orientation","orientationMargin","className","rootClassName","children","dashed","variant","plain","style"]),E=t("divider",l),[A,S,j]=h(E),C=!!g,M=r.useMemo(()=>"left"===u?"rtl"===n?"end":"start":"right"===u?"rtl"===n?"start":"end":u,[n,u]),k="start"===M&&null!=d,T="end"===M&&null!=d,_=o()(E,i,S,j,"".concat(E,"-").concat(c),{["".concat(E,"-with-text")]:C,["".concat(E,"-with-text-").concat(M)]:C,["".concat(E,"-dashed")]:!!v,["".concat(E,"-").concat(b)]:"solid"!==b,["".concat(E,"-plain")]:!!y,["".concat(E,"-rtl")]:"rtl"===n,["".concat(E,"-no-default-orientation-margin-start")]:k,["".concat(E,"-no-default-orientation-margin-end")]:T},p,m),P=r.useMemo(()=>"number"==typeof d?d:/^\d+$/.test(d)?Number(d):d,[d]);return A(r.createElement("div",Object.assign({className:_,style:Object.assign(Object.assign({},s),x)},w,{role:"separator"}),g&&"vertical"!==c&&r.createElement("span",{className:"".concat(E,"-inner-text"),style:{marginInlineStart:k?P:void 0,marginInlineEnd:T?P:void 0}},g)))}},57097:(e,t,n)=>{n.d(t,{A:()=>r});let r=function(){return function(e){var t,n,r,i,o={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},a={},s={};a.L=1,s[1]="L",Object.keys(o).forEach(function(e,t){a[e]=1<<t+1,s[a[e]]=e}),Object.freeze(a);var l=a.LRI|a.RLI|a.FSI,c=a.L|a.R|a.AL,u=a.B|a.S|a.WS|a.ON|a.FSI|a.LRI|a.RLI|a.PDI,d=a.BN|a.RLE|a.LRE|a.RLO|a.LRO|a.PDF,h=a.S|a.WS|a.B|l|a.PDI|d,f=null;function p(e){if(!f){f=new Map;var t=function(e){if(o.hasOwnProperty(e)){var t=0;o[e].split(",").forEach(function(n){var r=n.split("+"),i=r[0],o=r[1];i=parseInt(i,36),o=o?parseInt(o,36):0,f.set(t+=i,a[e]);for(var s=0;s<o;s++)f.set(++t,a[e])})}};for(var n in o)t(n)}return f.get(e.codePointAt(0))||a.L}var m={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function g(e,t){var n,r=0,i=new Map,o=t&&new Map;return e.split(",").forEach(function e(a){if(-1!==a.indexOf("+"))for(var s=+a;s--;)e(n);else{n=a;var l=a.split(">"),c=l[0],u=l[1];c=String.fromCodePoint(r+=parseInt(c,36)),u=String.fromCodePoint(r+=parseInt(u,36)),i.set(c,u),t&&o.set(u,c)}}),{map:i,reverseMap:o}}function v(){if(!t){var e=g(m.pairs,!0),i=e.map,o=e.reverseMap;t=i,n=o,r=g(m.canonical,!1).map}}function b(e){return v(),t.get(e)||null}function y(e){return v(),n.get(e)||null}function x(e){return v(),r.get(e)||null}var w=a.L,E=a.R,A=a.EN,S=a.ES,j=a.ET,C=a.AN,M=a.CS,k=a.B,T=a.S,_=a.ON,P=a.BN,O=a.NSM,R=a.AL,L=a.LRO,I=a.RLO,D=a.LRE,z=a.RLE,N=a.PDF,H=a.LRI,B=a.RLI,F=a.FSI,U=a.PDI;function q(e){if(!i){var t=g("14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",!0),n=t.map;t.reverseMap.forEach(function(e,t){n.set(t,e)}),i=n}return i.get(e)||null}function G(e,t,n,r){var i=e.length;n=Math.max(0,null==n?0:+n),r=Math.min(i-1,null==r?i-1:+r);var o=[];return t.paragraphs.forEach(function(i){var a=Math.max(n,i.start),s=Math.min(r,i.end);if(a<s){for(var l=t.levels.slice(a,s+1),c=s;c>=a&&p(e[c])&h;c--)l[c]=i.level;for(var u=i.level,d=1/0,f=0;f<l.length;f++){var m=l[f];m>u&&(u=m),m<d&&(d=1|m)}for(var g=u;g>=d;g--)for(var v=0;v<l.length;v++)if(l[v]>=g){for(var b=v;v+1<l.length&&l[v+1]>=g;)v++;v>b&&o.push([b+a,v+a])}}}),o}function V(e,t,n,r){for(var i=G(e,t,n,r),o=[],a=0;a<e.length;a++)o[a]=a;return i.forEach(function(e){for(var t=e[0],n=e[1],r=o.slice(t,n+1),i=r.length;i--;)o[n-i]=r[i]}),o}return e.closingToOpeningBracket=y,e.getBidiCharType=p,e.getBidiCharTypeName=function(e){return s[p(e)]},e.getCanonicalBracket=x,e.getEmbeddingLevels=function(e,t){for(var n=new Uint32Array(e.length),r=0;r<e.length;r++)n[r]=p(e[r]);var i=new Map;function o(e,t){var r=n[e];n[e]=t,i.set(r,i.get(r)-1),r&u&&i.set(u,i.get(u)-1),i.set(t,(i.get(t)||0)+1),t&u&&i.set(u,(i.get(u)||0)+1)}for(var a=new Uint8Array(e.length),s=new Map,f=[],m=null,g=0;g<e.length;g++)m||f.push(m={start:g,end:e.length-1,level:"rtl"===t?1:"ltr"===t?0:t_(g,!1)}),n[g]&k&&(m.end=g,m=null);for(var v=z|D|I|L|l|U|N|k,q=function(e){return e+(1&e?1:2)},G=function(e){return e+(1&e?2:1)},V=0;V<f.length;V++){var W=[{_level:(m=f[V]).level,_override:0,_isolate:0}],X=void 0,Y=0,K=0,Z=0;i.clear();for(var $=m.start;$<=m.end;$++){var Q=n[$];if(X=W[W.length-1],i.set(Q,(i.get(Q)||0)+1),Q&u&&i.set(u,(i.get(u)||0)+1),Q&v)if(Q&(z|D)){a[$]=X._level;var J=(Q===z?G:q)(X._level);!(J<=125)||Y||K?!Y&&K++:W.push({_level:J,_override:0,_isolate:0})}else if(Q&(I|L)){a[$]=X._level;var ee=(Q===I?G:q)(X._level);!(ee<=125)||Y||K?!Y&&K++:W.push({_level:ee,_override:Q&I?E:w,_isolate:0})}else if(Q&l){Q&F&&(Q=1===t_($+1,!0)?B:H),a[$]=X._level,X._override&&o($,X._override);var et=(Q===B?G:q)(X._level);et<=125&&0===Y&&0===K?(Z++,W.push({_level:et,_override:0,_isolate:1,_isolInitIndex:$})):Y++}else if(Q&U){if(Y>0)Y--;else if(Z>0){for(K=0;!W[W.length-1]._isolate;)W.pop();var en=W[W.length-1]._isolInitIndex;null!=en&&(s.set(en,$),s.set($,en)),W.pop(),Z--}X=W[W.length-1],a[$]=X._level,X._override&&o($,X._override)}else Q&N?(0===Y&&(K>0?K--:!X._isolate&&W.length>1&&(W.pop(),X=W[W.length-1])),a[$]=X._level):Q&k&&(a[$]=m.level);else a[$]=X._level,X._override&&Q!==P&&o($,X._override)}for(var er=[],ei=null,eo=m.start;eo<=m.end;eo++){var ea=n[eo];if(!(ea&d)){var es=a[eo],el=ea&l,ec=ea===U;ei&&es===ei._level?(ei._end=eo,ei._endsWithIsolInit=el):er.push(ei={_start:eo,_end:eo,_level:es,_startsWithPDI:ec,_endsWithIsolInit:el})}}for(var eu=[],ed=0;ed<er.length;ed++){var eh=er[ed];if(!eh._startsWithPDI||eh._startsWithPDI&&!s.has(eh._start)){for(var ef=[ei=eh],ep=void 0;ei&&ei._endsWithIsolInit&&null!=(ep=s.get(ei._end));)for(var em=ed+1;em<er.length;em++)if(er[em]._start===ep){ef.push(ei=er[em]);break}for(var eg=[],ev=0;ev<ef.length;ev++)for(var eb=ef[ev],ey=eb._start;ey<=eb._end;ey++)eg.push(ey);for(var ex=a[eg[0]],ew=m.level,eE=eg[0]-1;eE>=0;eE--)if(!(n[eE]&d)){ew=a[eE];break}var eA=eg[eg.length-1],eS=a[eA],ej=m.level;if(!(n[eA]&l)){for(var eC=eA+1;eC<=m.end;eC++)if(!(n[eC]&d)){ej=a[eC];break}}eu.push({_seqIndices:eg,_sosType:Math.max(ew,ex)%2?E:w,_eosType:Math.max(ej,eS)%2?E:w})}}for(var eM=0;eM<eu.length;eM++){var ek=eu[eM],eT=ek._seqIndices,e_=ek._sosType,eP=ek._eosType,eO=1&a[eT[0]]?E:w;if(i.get(O))for(var eR=0;eR<eT.length;eR++){var eL=eT[eR];if(n[eL]&O){for(var eI=e_,eD=eR-1;eD>=0;eD--)if(!(n[eT[eD]]&d)){eI=n[eT[eD]];break}o(eL,eI&(l|U)?_:eI)}}if(i.get(A))for(var ez=0;ez<eT.length;ez++){var eN=eT[ez];if(n[eN]&A)for(var eH=ez-1;eH>=-1;eH--){var eB=-1===eH?e_:n[eT[eH]];if(eB&c){eB===R&&o(eN,C);break}}}if(i.get(R))for(var eF=0;eF<eT.length;eF++){var eU=eT[eF];n[eU]&R&&o(eU,E)}if(i.get(S)||i.get(M))for(var eq=1;eq<eT.length-1;eq++){var eG=eT[eq];if(n[eG]&(S|M)){for(var eV=0,eW=0,eX=eq-1;eX>=0&&(eV=n[eT[eX]])&d;eX--);for(var eY=eq+1;eY<eT.length&&(eW=n[eT[eY]])&d;eY++);eV===eW&&(n[eG]===S?eV===A:eV&(A|C))&&o(eG,eV)}}if(i.get(A)){for(var eK=0;eK<eT.length;eK++)if(n[eT[eK]]&A){for(var eZ=eK-1;eZ>=0&&n[eT[eZ]]&(j|d);eZ--)o(eT[eZ],A);for(eK++;eK<eT.length&&n[eT[eK]]&(j|d|A);eK++)n[eT[eK]]!==A&&o(eT[eK],A)}}if(i.get(j)||i.get(S)||i.get(M))for(var e$=0;e$<eT.length;e$++){var eQ=eT[e$];if(n[eQ]&(j|S|M)){o(eQ,_);for(var eJ=e$-1;eJ>=0&&n[eT[eJ]]&d;eJ--)o(eT[eJ],_);for(var e0=e$+1;e0<eT.length&&n[eT[e0]]&d;e0++)o(eT[e0],_)}}if(i.get(A))for(var e1=0,e2=e_;e1<eT.length;e1++){var e3=eT[e1],e5=n[e3];e5&A?e2===w&&o(e3,w):e5&c&&(e2=e5)}if(i.get(u)){for(var e4=E|A|C,e6=e4|w,e8=[],e7=[],e9=0;e9<eT.length;e9++)if(n[eT[e9]]&u){var te=e[eT[e9]],tt=void 0;if(null!==b(te))if(e7.length<63)e7.push({char:te,seqIndex:e9});else break;else if(null!==(tt=y(te)))for(var tn=e7.length-1;tn>=0;tn--){var tr=e7[tn].char;if(tr===tt||tr===y(x(te))||b(x(tr))===te){e8.push([e7[tn].seqIndex,e9]),e7.length=tn;break}}}e8.sort(function(e,t){return e[0]-t[0]});for(var ti=0;ti<e8.length;ti++){for(var to=e8[ti],ta=to[0],ts=to[1],tl=!1,tc=0,tu=ta+1;tu<ts;tu++){var td=eT[tu];if(n[td]&e6){tl=!0;var th=n[td]&e4?E:w;if(th===eO){tc=th;break}}}if(tl&&!tc){tc=e_;for(var tf=ta-1;tf>=0;tf--){var tp=eT[tf];if(n[tp]&e6){var tm=n[tp]&e4?E:w;tc=tm!==eO?tm:eO;break}}}if(tc){if(n[eT[ta]]=n[eT[ts]]=tc,tc!==eO){for(var tg=ta+1;tg<eT.length;tg++)if(!(n[eT[tg]]&d)){p(e[eT[tg]])&O&&(n[eT[tg]]=tc);break}}if(tc!==eO){for(var tv=ts+1;tv<eT.length;tv++)if(!(n[eT[tv]]&d)){p(e[eT[tv]])&O&&(n[eT[tv]]=tc);break}}}}for(var tb=0;tb<eT.length;tb++)if(n[eT[tb]]&u){for(var ty=tb,tx=tb,tw=e_,tE=tb-1;tE>=0;tE--)if(n[eT[tE]]&d)ty=tE;else{tw=n[eT[tE]]&e4?E:w;break}for(var tA=eP,tS=tb+1;tS<eT.length;tS++)if(n[eT[tS]]&(u|d))tx=tS;else{tA=n[eT[tS]]&e4?E:w;break}for(var tj=ty;tj<=tx;tj++)n[eT[tj]]=tw===tA?tw:eO;tb=tx}}}for(var tC=m.start;tC<=m.end;tC++){var tM=a[tC],tk=n[tC];if(1&tM?tk&(w|A|C)&&a[tC]++:tk&E?a[tC]++:tk&(C|A)&&(a[tC]+=2),tk&d&&(a[tC]=0===tC?m.level:a[tC-1]),tC===m.end||p(e[tC])&(T|k))for(var tT=tC;tT>=0&&p(e[tT])&h;tT--)a[tT]=m.level}}return{levels:a,paragraphs:f};function t_(t,r){for(var i=t;i<e.length;i++){var o=n[i];if(o&(E|R))return 1;if(o&(k|w)||r&&o===U)break;if(o&l){var a=function(t){for(var r=1,i=t+1;i<e.length;i++){var o=n[i];if(o&k)break;if(o&U){if(0==--r)return i}else o&l&&r++}return -1}(i);i=-1===a?e.length:a}}return 0}},e.getMirroredCharacter=q,e.getMirroredCharactersMap=function(e,t,n,r){var i=e.length;n=Math.max(0,null==n?0:+n),r=Math.min(i-1,null==r?i-1:+r);for(var o=new Map,a=n;a<=r;a++)if(1&t[a]){var s=q(e[a]);null!==s&&o.set(a,s)}return o},e.getReorderSegments=G,e.getReorderedIndices=V,e.getReorderedString=function(e,t,n,r){var i=V(e,t,n,r),o=[].concat(e);return i.forEach(function(n,r){o[r]=(1&t.levels[n]?q(e[n]):null)||e[n]}),o.join("")},e.openingToClosingBracket=b,Object.defineProperty(e,"__esModule",{value:!0}),e}({})}},58214:(e,t,n)=>{var r=n(14232),i=n(38806),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=i.useSyncExternalStore,s=r.useRef,l=r.useEffect,c=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var d=s(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;var f=a(e,(d=c(function(){function e(e){if(!l){if(l=!0,a=e,e=r(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return s=t}return s=e}if(t=s,o(a,e))return t;var n=r(e);return void 0!==i&&i(t,n)?(a=e,t):(a=e,s=n)}var a,s,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,r,i]))[0],d[1]);return l(function(){h.hasValue=!0,h.value=f},[f]),u(f),f}},61192:(e,t,n)=>{let r,i,o,a,s,l,c,u,d;n.r(t),n.d(t,{default:()=>sI});var h=n(37876),f=n(14232),p=n.t(f,2),m=n(66691),g=n(14796),v=n(87302),b=n(45712);let y=e=>{let t,n=new Set,r=(e,r)=>{let i="function"==typeof e?e(t):e;if(!Object.is(i,t)){let e=t;t=(null!=r?r:"object"!=typeof i||null===i)?i:Object.assign({},t,i),n.forEach(n=>n(t,e))}},i=()=>t,o={setState:r,getState:i,getInitialState:()=>a,subscribe:e=>(n.add(e),()=>n.delete(e))},a=t=e(r,i,o);return o},x=e=>e?y(e):y,{useSyncExternalStoreWithSelector:w}=b,E=e=>e,A=(e,t)=>{let n=x(e),r=(e,r=t)=>(function(e,t=E,n){let r=w(e.subscribe,e.getState,e.getInitialState,t,n);return f.useDebugValue(r),r})(n,e,r);return Object.assign(r,n),r},S=(e,t)=>e?A(e,t):A;var j=n(40667),C=n.n(j),M=n(62786);let k=e=>"object"==typeof e&&"function"==typeof e.then,T=[];function _(e,t,n=(e,t)=>e===t){if(e===t)return!0;if(!e||!t)return!1;let r=e.length;if(t.length!==r)return!1;for(let i=0;i<r;i++)if(!n(e[i],t[i]))return!1;return!0}function P(e,t=null,n=!1,r={}){for(let i of(null===t&&(t=[e]),T))if(_(t,i.keys,i.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(i,"error"))throw i.error;if(Object.prototype.hasOwnProperty.call(i,"response"))return r.lifespan&&r.lifespan>0&&(i.timeout&&clearTimeout(i.timeout),i.timeout=setTimeout(i.remove,r.lifespan)),i.response;if(!n)throw i.promise}let i={keys:t,equal:r.equal,remove:()=>{let e=T.indexOf(i);-1!==e&&T.splice(e,1)},promise:(k(e)?e:e(...t)).then(e=>{i.response=e,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(e=>i.error=e)};if(T.push(i),!n)throw i.promise}let O=(e,t,n)=>P(e,t,!1,n),R=(e,t,n)=>void P(e,t,!0,n),L=e=>{if(void 0===e||0===e.length)T.splice(0,T.length);else{let t=T.find(t=>_(e,t.keys,t.equal));t&&t.remove()}};function I(e,t,n){if(!e)return;if(!0===n(e))return e;let r=t?e.return:e.child;for(;r;){let e=I(r,t,n);if(e)return e;r=t?null:r.sibling}}function D(e){try{return Object.defineProperties(e,{_currentRenderer:{get:()=>null,set(){}},_currentRenderer2:{get:()=>null,set(){}}})}catch(t){return e}}(()=>{var e,t;return"undefined"!=typeof window&&((null==(e=window.document)?void 0:e.createElement)||(null==(t=window.navigator)?void 0:t.product)==="ReactNative")})()?f.useLayoutEffect:f.useEffect;let z=D(f.createContext(null));class N extends f.Component{render(){return f.createElement(z.Provider,{value:this._reactInternals},this.props.children)}}function H(){let e=f.useContext(z);if(null===e)throw Error("its-fine: useFiber must be called within a <FiberProvider />!");let t=f.useId();return f.useMemo(()=>{for(let n of[e,null==e?void 0:e.alternate]){if(!n)continue;let e=I(n,!1,e=>{let n=e.memoizedState;for(;n;){if(n.memoizedState===t)return!0;n=n.next}});if(e)return e}},[e,t])}let B=Symbol.for("react.context"),F=e=>null!==e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===B;function U(e){let t=e.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}n(99742),p.act;let q=e=>e&&e.isOrthographicCamera,G=e=>e&&e.hasOwnProperty("current"),V=e=>null!=e&&("string"==typeof e||"number"==typeof e||e.isColor),W=((e,t)=>"undefined"!=typeof window&&((null==(e=window.document)?void 0:e.createElement)||(null==(t=window.navigator)?void 0:t.product)==="ReactNative"))()?f.useLayoutEffect:f.useEffect;function X(e){let t=f.useRef(e);return W(()=>void(t.current=e),[e]),t}function Y({set:e}){return W(()=>(e(new Promise(()=>null)),()=>e(!1)),[e]),null}let K=(e=>((e=class extends f.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}).getDerivedStateFromError=()=>({error:!0}),e))();function Z(e){var t;let n="undefined"!=typeof window?null!=(t=window.devicePixelRatio)?t:2:1;return Array.isArray(e)?Math.min(Math.max(e[0],n),e[1]):e}function $(e){var t;return null==(t=e.__r3f)?void 0:t.root.getState()}let Q={obj:e=>e===Object(e)&&!Q.arr(e)&&"function"!=typeof e,fun:e=>"function"==typeof e,str:e=>"string"==typeof e,num:e=>"number"==typeof e,boo:e=>"boolean"==typeof e,und:e=>void 0===e,nul:e=>null===e,arr:e=>Array.isArray(e),equ(e,t,{arrays:n="shallow",objects:r="reference",strict:i=!0}={}){let o;if(typeof e!=typeof t||!!e!=!!t)return!1;if(Q.str(e)||Q.num(e)||Q.boo(e))return e===t;let a=Q.obj(e);if(a&&"reference"===r)return e===t;let s=Q.arr(e);if(s&&"reference"===n)return e===t;if((s||a)&&e===t)return!0;for(o in e)if(!(o in t))return!1;if(a&&"shallow"===n&&"shallow"===r){for(o in i?t:e)if(!Q.equ(e[o],t[o],{strict:i,objects:"reference"}))return!1}else for(o in i?t:e)if(e[o]!==t[o])return!1;if(Q.und(o)){if(s&&0===e.length&&0===t.length||a&&0===Object.keys(e).length&&0===Object.keys(t).length)return!0;if(e!==t)return!1}return!0}},J=["children","key","ref"];function ee(e,t,n,r){let i=null==e?void 0:e.__r3f;return!i&&(i={root:t,type:n,parent:null,children:[],props:function(e){let t={};for(let n in e)J.includes(n)||(t[n]=e[n]);return t}(r),object:e,eventCount:0,handlers:{},isHidden:!1},e&&(e.__r3f=i)),i}function et(e,t){let n=e[t];if(!t.includes("-"))return{root:e,key:t,target:n};for(let i of(n=e,t.split("-"))){var r;t=i,e=n,n=null==(r=n)?void 0:r[t]}return{root:e,key:t,target:n}}let en=/-\d+$/;function er(e,t){if(Q.str(t.props.attach)){if(en.test(t.props.attach)){let n=t.props.attach.replace(en,""),{root:r,key:i}=et(e.object,n);Array.isArray(r[i])||(r[i]=[])}let{root:n,key:r}=et(e.object,t.props.attach);t.previousAttach=n[r],n[r]=t.object}else Q.fun(t.props.attach)&&(t.previousAttach=t.props.attach(e.object,t.object))}function ei(e,t){if(Q.str(t.props.attach)){let{root:n,key:r}=et(e.object,t.props.attach),i=t.previousAttach;void 0===i?delete n[r]:n[r]=i}else null==t.previousAttach||t.previousAttach(e.object,t.object);delete t.previousAttach}let eo=[...J,"args","dispose","attach","object","onUpdate","dispose"],ea=new Map,es=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],el=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function ec(e,t){var n,r;let i=e.__r3f,o=i&&U(i).getState(),a=null==i?void 0:i.eventCount;for(let n in t){let a=t[n];if(eo.includes(n))continue;if(i&&el.test(n)){"function"==typeof a?i.handlers[n]=a:delete i.handlers[n],i.eventCount=Object.keys(i.handlers).length;continue}if(void 0===a)continue;let{root:s,key:l,target:c}=et(e,n);c instanceof m.zgK&&a instanceof m.zgK?c.mask=a.mask:c instanceof m.Q1f&&V(a)?c.set(a):null!==c&&"object"==typeof c&&"function"==typeof c.set&&"function"==typeof c.copy&&null!=a&&a.constructor&&c.constructor===a.constructor?c.copy(a):null!==c&&"object"==typeof c&&"function"==typeof c.set&&Array.isArray(a)?"function"==typeof c.fromArray?c.fromArray(a):c.set(...a):null!==c&&"object"==typeof c&&"function"==typeof c.set&&"number"==typeof a?"function"==typeof c.setScalar?c.setScalar(a):c.set(a):(s[l]=a,o&&!o.linear&&es.includes(l)&&null!=(r=s[l])&&r.isTexture&&s[l].format===m.GWd&&s[l].type===m.OUM&&(s[l].colorSpace=m.er$))}if(null!=i&&i.parent&&null!=o&&o.internal&&null!=(n=i.object)&&n.isObject3D&&a!==i.eventCount){let e=i.object,t=o.internal.interaction.indexOf(e);t>-1&&o.internal.interaction.splice(t,1),i.eventCount&&null!==e.raycast&&o.internal.interaction.push(e)}return i&&void 0===i.props.attach&&(i.object.isBufferGeometry?i.props.attach="geometry":i.object.isMaterial&&(i.props.attach="material")),i&&eu(i),e}function eu(e){var t;if(!e.parent)return;null==e.props.onUpdate||e.props.onUpdate(e.object);let n=null==(t=e.root)||null==t.getState?void 0:t.getState();n&&0===n.internal.frames&&n.invalidate()}function ed(e,t){e.manual||(q(e)?(e.left=-(t.width/2),e.right=t.width/2,e.top=t.height/2,e.bottom=-(t.height/2)):e.aspect=t.width/t.height,e.updateProjectionMatrix())}let eh=e=>null==e?void 0:e.isObject3D;function ef(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function ep(e,t,n,r){let i=n.get(t);i&&(n.delete(t),0===n.size&&(e.delete(r),i.target.releasePointerCapture(r)))}let em=e=>!!(null!=e&&e.render),eg=f.createContext(null),ev=(e,t)=>{let n=S((n,r)=>{let i,o=new m.Pq0,a=new m.Pq0,s=new m.Pq0;function l(e=r().camera,t=a,n=r().size){let{width:i,height:c,top:u,left:d}=n,h=i/c;t.isVector3?s.copy(t):s.set(...t);let f=e.getWorldPosition(o).distanceTo(s);if(q(e))return{width:i/e.zoom,height:c/e.zoom,top:u,left:d,factor:1,distance:f,aspect:h};{let t=2*Math.tan(e.fov*Math.PI/180/2)*f,n=i/c*t;return{width:n,height:t,top:u,left:d,factor:i/n,distance:f,aspect:h}}}let c=e=>n(t=>({performance:{...t.performance,current:e}})),u=new m.I9Y;return{set:n,get:r,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(t=1)=>e(r(),t),advance:(e,n)=>t(e,n,r()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new m.zD7,pointer:u,mouse:u,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{let e=r();i&&clearTimeout(i),e.performance.current!==e.performance.min&&c(e.performance.min),i=setTimeout(()=>c(r().performance.max),e.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:l},setEvents:e=>n(t=>({...t,events:{...t.events,...e}})),setSize:(e,t,i=0,o=0)=>{let s=r().camera,c={width:e,height:t,top:i,left:o};n(e=>({size:c,viewport:{...e.viewport,...l(s,a,c)}}))},setDpr:e=>n(t=>{let n=Z(e);return{viewport:{...t.viewport,dpr:n,initialDpr:t.viewport.initialDpr||n}}}),setFrameloop:(e="always")=>{let t=r().clock;t.stop(),t.elapsedTime=0,"never"!==e&&(t.start(),t.elapsedTime=0),n(()=>({frameloop:e}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:f.createRef(),active:!1,frames:0,priority:0,subscribe:(e,t,n)=>{let i=r().internal;return i.priority=i.priority+ +(t>0),i.subscribers.push({ref:e,priority:t,store:n}),i.subscribers=i.subscribers.sort((e,t)=>e.priority-t.priority),()=>{let n=r().internal;null!=n&&n.subscribers&&(n.priority=n.priority-(t>0),n.subscribers=n.subscribers.filter(t=>t.ref!==e))}}}}}),r=n.getState(),i=r.size,o=r.viewport.dpr,a=r.camera;return n.subscribe(()=>{let{camera:e,size:t,viewport:r,gl:s,set:l}=n.getState();if(t.width!==i.width||t.height!==i.height||r.dpr!==o){i=t,o=r.dpr,ed(e,t),r.dpr>0&&s.setPixelRatio(r.dpr);let n="undefined"!=typeof HTMLCanvasElement&&s.domElement instanceof HTMLCanvasElement;s.setSize(t.width,t.height,n)}e!==a&&(a=e,l(t=>({viewport:{...t.viewport,...t.viewport.getCurrentViewport(e)}})))}),n.subscribe(t=>e(t)),n};function eb(){let e=f.useContext(eg);if(!e)throw Error("R3F: Hooks can only be used within the Canvas component!");return e}function ey(e=e=>e,t){return eb()(e,t)}function ex(e,t=0){let n=eb(),r=n.getState().internal.subscribe,i=X(e);return W(()=>r(i,t,n),[t,r,n]),null}let ew=new WeakMap,eE=e=>{var t;return"function"==typeof e&&(null==e||null==(t=e.prototype)?void 0:t.constructor)===e};function eA(e,t){return function(n,...r){let i;return eE(n)?(i=ew.get(n))||(i=new n,ew.set(n,i)):i=n,e&&e(i),Promise.all(r.map(e=>new Promise((n,r)=>i.load(e,e=>{eh(null==e?void 0:e.scene)&&Object.assign(e,function(e){let t={nodes:{},materials:{},meshes:{}};return e&&e.traverse(e=>{e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material),e.isMesh&&!t.meshes[e.name]&&(t.meshes[e.name]=e)}),t}(e.scene)),n(e)},t,t=>r(Error(`Could not load ${e}: ${null==t?void 0:t.message}`))))))}}function eS(e,t,n,r){let i=Array.isArray(t)?t:[t],o=O(eA(n,r),[e,...i],{equal:Q.equ});return Array.isArray(t)?o:o[0]}eS.preload=function(e,t,n){let r=Array.isArray(t)?t:[t];return R(eA(n),[e,...r])},eS.clear=function(e,t){return L([e,...Array.isArray(t)?t:[t]])};let ej={},eC=/^three(?=[A-Z])/,eM=e=>`${e[0].toUpperCase()}${e.slice(1)}`,ek=0,eT=e=>"function"==typeof e;function e_(e,t){let n=eM(e),r=ej[n];if("primitive"!==e&&!r)throw Error(`R3F: ${n} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if("primitive"===e&&!t.object)throw Error("R3F: Primitives without 'object' are invalid!");if(void 0!==t.args&&!Array.isArray(t.args))throw Error("R3F: The args prop must be an array!")}function eP(e){if(e.isHidden){var t;e.props.attach&&null!=(t=e.parent)&&t.object?er(e.parent,e):eh(e.object)&&!1!==e.props.visible&&(e.object.visible=!0),e.isHidden=!1,eu(e)}}function eO(e,t,n){let r=t.root.getState();if(e.parent||e.object===r.scene){if(!t.object){var i,o;let e=ej[eM(t.type)];t.object=null!=(i=t.props.object)?i:new e(...null!=(o=t.props.args)?o:[]),t.object.__r3f=t}if(ec(t.object,t.props),t.props.attach)er(e,t);else if(eh(t.object)&&eh(e.object)){let r=e.object.children.indexOf(null==n?void 0:n.object);if(n&&-1!==r){let n=e.object.children.indexOf(t.object);-1!==n?(e.object.children.splice(n,1),e.object.children.splice(n<r?r-1:r,0,t.object)):(t.object.parent=e.object,e.object.children.splice(r,0,t.object),t.object.dispatchEvent({type:"added"}),e.object.dispatchEvent({type:"childadded",child:t.object}))}else e.object.add(t.object)}for(let e of t.children)eO(t,e);eu(t)}}function eR(e,t){t&&(t.parent=e,e.children.push(t),eO(e,t))}function eL(e,t,n){if(!t||!n)return;t.parent=e;let r=e.children.indexOf(n);-1!==r?e.children.splice(r,0,t):e.children.push(t),eO(e,t,n)}function eI(e){if("function"==typeof e.dispose){let t=()=>{try{e.dispose()}catch{}};"undefined"!=typeof IS_REACT_ACT_ENVIRONMENT?t():(0,M.unstable_scheduleCallback)(M.unstable_IdlePriority,t)}}function eD(e,t,n){if(!t)return;t.parent=null;let r=e.children.indexOf(t);-1!==r&&e.children.splice(r,1),t.props.attach?ei(e,t):eh(t.object)&&eh(e.object)&&(e.object.remove(t.object),function(e,t){let{internal:n}=e.getState();n.interaction=n.interaction.filter(e=>e!==t),n.initialHits=n.initialHits.filter(e=>e!==t),n.hovered.forEach((e,r)=>{(e.eventObject===t||e.object===t)&&n.hovered.delete(r)}),n.capturedMap.forEach((e,r)=>{ep(n.capturedMap,t,e,r)})}(U(t),t.object));let i=null!==t.props.dispose&&!1!==n;for(let e=t.children.length-1;e>=0;e--){let n=t.children[e];eD(t,n,i)}t.children.length=0,delete t.object.__r3f,i&&"primitive"!==t.type&&"Scene"!==t.object.type&&eI(t.object),void 0===n&&eu(t)}let ez=[],eN=()=>{},eH={},eB=0,eF=function(e){let t=C()(e);return t.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:f.version}),t}({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:function(e,t,n){var r;return e_(e=eM(e)in ej?e:e.replace(eC,""),t),"primitive"===e&&null!=(r=t.object)&&r.__r3f&&delete t.object.__r3f,ee(t.object,n,e,t)},removeChild:eD,appendChild:eR,appendInitialChild:eR,insertBefore:eL,appendChildToContainer(e,t){let n=e.getState().scene.__r3f;t&&n&&eR(n,t)},removeChildFromContainer(e,t){let n=e.getState().scene.__r3f;t&&n&&eD(n,t)},insertInContainerBefore(e,t,n){let r=e.getState().scene.__r3f;t&&n&&r&&eL(r,t,n)},getRootHostContext:()=>eH,getChildHostContext:()=>eH,commitUpdate(e,t,n,r,i){var o,a,s;e_(t,r);let l=!1;if("primitive"===e.type&&n.object!==r.object||(null==(o=r.args)?void 0:o.length)!==(null==(a=n.args)?void 0:a.length)?l=!0:null!=(s=r.args)&&s.some((e,t)=>{var r;return e!==(null==(r=n.args)?void 0:r[t])})&&(l=!0),l)ez.push([e,{...r},i]);else{let t=function(e,t){let n={};for(let r in t)if(!eo.includes(r)&&!Q.equ(t[r],e.props[r]))for(let e in n[r]=t[r],t)e.startsWith(`${r}-`)&&(n[e]=t[e]);for(let r in e.props){if(eo.includes(r)||t.hasOwnProperty(r))continue;let{root:i,key:o}=et(e.object,r);if(i.constructor&&0===i.constructor.length){let e=function(e){let t=ea.get(e.constructor);try{t||(t=new e.constructor,ea.set(e.constructor,t))}catch(e){}return t}(i);Q.und(e)||(n[o]=e[o])}else n[o]=0}return n}(e,r);Object.keys(t).length&&(Object.assign(e.props,t),ec(e.object,t))}(null===i.sibling||(4&i.flags)==0)&&function(){for(let[e]of ez){let t=e.parent;if(t)for(let n of(e.props.attach?ei(t,e):eh(e.object)&&eh(t.object)&&t.object.remove(e.object),e.children))n.props.attach?ei(e,n):eh(n.object)&&eh(e.object)&&e.object.remove(n.object);e.isHidden&&eP(e),e.object.__r3f&&delete e.object.__r3f,"primitive"!==e.type&&eI(e.object)}for(let[r,i,o]of ez){r.props=i;let a=r.parent;if(a){let i=ej[eM(r.type)];r.object=null!=(e=r.props.object)?e:new i(...null!=(t=r.props.args)?t:[]),r.object.__r3f=r;var e,t,n=r.object;for(let e of[o,o.alternate])if(null!==e)if("function"==typeof e.ref){null==e.refCleanup||e.refCleanup();let t=e.ref(n);"function"==typeof t&&(e.refCleanup=t)}else e.ref&&(e.ref.current=n);for(let e of(ec(r.object,r.props),r.props.attach?er(a,r):eh(r.object)&&eh(a.object)&&a.object.add(r.object),r.children))e.props.attach?er(r,e):eh(e.object)&&eh(r.object)&&r.object.add(e.object);eu(r)}}ez.length=0}()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:e=>null==e?void 0:e.object,prepareForCommit:()=>null,preparePortalMount:e=>ee(e.getState().scene,e,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:function(e){if(!e.isHidden){var t;e.props.attach&&null!=(t=e.parent)&&t.object?ei(e.parent,e):eh(e.object)&&(e.object.visible=!1),e.isHidden=!0,eu(e)}},unhideInstance:eP,createTextInstance:eN,hideTextInstance:eN,unhideTextInstance:eN,scheduleTimeout:"function"==typeof setTimeout?setTimeout:void 0,cancelTimeout:"function"==typeof clearTimeout?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:f.createContext(null),setCurrentUpdatePriority(e){eB=e},getCurrentUpdatePriority:()=>eB,resolveUpdatePriority(){var e;if(0!==eB)return eB;switch("undefined"!=typeof window&&(null==(e=window.event)?void 0:e.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return v.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return v.ContinuousEventPriority;default:return v.DefaultEventPriority}},resetFormInstance(){}}),eU=new Map,eq={objects:"shallow",strict:!1};function eG({store:e,children:t,onCreated:n,rootElement:r}){return W(()=>{let t=e.getState();t.set(e=>({internal:{...e.internal,active:!0}})),n&&n(t),e.getState().events.connected||null==t.events.connect||t.events.connect(r)},[]),(0,h.jsx)(eg.Provider,{value:e,children:t})}function eV(e,t){let n=eU.get(e),r=null==n?void 0:n.fiber;if(r){let i=null==n?void 0:n.store.getState();i&&(i.internal.active=!1),eF.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{null==i.events.disconnect||i.events.disconnect(),null==(n=i.gl)||null==(r=n.renderLists)||null==r.dispose||r.dispose(),null==(o=i.gl)||null==o.forceContextLoss||o.forceContextLoss(),null!=(a=i.gl)&&a.xr&&i.xr.disconnect();var n,r,o,a,s=i.scene;for(let e in"Scene"!==s.type&&(null==s.dispose||s.dispose()),s){let t=s[e];(null==t?void 0:t.type)!=="Scene"&&(null==t||null==t.dispose||t.dispose())}eU.delete(e),t&&t(e)}catch(e){}},500)})}}function eW({state:e={},children:t,container:n}){let{events:r,size:i,...o}=e,a=eb(),[s]=f.useState(()=>new m.tBo),[l]=f.useState(()=>new m.I9Y),c=X((e,t)=>{let o;if(t.camera&&i){let n=t.camera;o=e.viewport.getCurrentViewport(n,new m.Pq0,i),n!==e.camera&&ed(n,i)}return{...e,...t,scene:n,raycaster:s,pointer:l,mouse:l,previousRoot:a,events:{...e.events,...t.events,...r},size:{...e.size,...i},viewport:{...e.viewport,...o},setEvents:e=>t.set(t=>({...t,events:{...t.events,...e}}))}}),u=f.useMemo(()=>{let e=S((e,t)=>({...o,set:e,get:t})),t=t=>e.setState(e=>c.current(t,e));return t(a.getState()),a.subscribe(t),e},[a,n]);return(0,h.jsx)(h.Fragment,{children:eF.createPortal((0,h.jsx)(eg.Provider,{value:u,children:t}),u,null)})}let eX=new Set,eY=new Set,eK=new Set;function eZ(e,t){if(e.size)for(let{callback:n}of e.values())n(t)}function e$(e,t){switch(e){case"before":return eZ(eX,t);case"after":return eZ(eY,t);case"tail":return eZ(eK,t)}}function eQ(e,t,n){let o=t.clock.getDelta();"never"===t.frameloop&&"number"==typeof e&&(o=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),r=t.internal.subscribers;for(let e=0;e<r.length;e++)(i=r[e]).ref.current(i.store.getState(),o,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),"always"===t.frameloop?1:t.internal.frames}let eJ=!1,e0=!1;function e1(e){for(let n of(a=requestAnimationFrame(e1),eJ=!0,o=0,e$("before",e),e0=!0,eU.values())){var t;(s=n.store.getState()).internal.active&&("always"===s.frameloop||s.internal.frames>0)&&!(null!=(t=s.gl.xr)&&t.isPresenting)&&(o+=eQ(e,s))}if(e0=!1,e$("after",e),0===o)return e$("tail",e),eJ=!1,cancelAnimationFrame(a)}function e2(e,t=1){var n;if(!e)return eU.forEach(e=>e2(e.store.getState(),t));(null==(n=e.gl.xr)||!n.isPresenting)&&e.internal.active&&"never"!==e.frameloop&&(t>1?e.internal.frames=Math.min(60,e.internal.frames+t):e0?e.internal.frames=2:e.internal.frames=1,eJ||(eJ=!0,requestAnimationFrame(e1)))}function e3(e,t=!0,n,r){if(t&&e$("before",e),n)eQ(e,n,r);else for(let t of eU.values())eQ(e,t.store.getState());t&&e$("after",e)}let e5={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function e4(e){let{handlePointer:t}=function(e){function t(e){return e.filter(e=>["Move","Over","Enter","Out","Leave"].some(t=>{var n;return null==(n=e.__r3f)?void 0:n.handlers["onPointer"+t]}))}function n(t){let{internal:n}=e.getState();for(let e of n.hovered.values())if(!t.length||!t.find(t=>t.object===e.object&&t.index===e.index&&t.instanceId===e.instanceId)){let r=e.eventObject.__r3f;if(n.hovered.delete(ef(e)),null!=r&&r.eventCount){let n=r.handlers,i={...e,intersections:t};null==n.onPointerOut||n.onPointerOut(i),null==n.onPointerLeave||n.onPointerLeave(i)}}}function r(e,t){for(let n=0;n<t.length;n++){let r=t[n].__r3f;null==r||null==r.handlers.onPointerMissed||r.handlers.onPointerMissed(e)}}return{handlePointer:function(i){switch(i){case"onPointerLeave":case"onPointerCancel":return()=>n([]);case"onLostPointerCapture":return t=>{let{internal:r}=e.getState();"pointerId"in t&&r.capturedMap.has(t.pointerId)&&requestAnimationFrame(()=>{r.capturedMap.has(t.pointerId)&&(r.capturedMap.delete(t.pointerId),n([]))})}}return function(o){let{onPointerMissed:a,internal:s}=e.getState();s.lastEvent.current=o;let l="onPointerMove"===i,c="onClick"===i||"onContextMenu"===i||"onDoubleClick"===i,u=function(t,n){let r=e.getState(),i=new Set,o=[],a=n?n(r.internal.interaction):r.internal.interaction;for(let e=0;e<a.length;e++){let t=$(a[e]);t&&(t.raycaster.camera=void 0)}r.previousRoot||null==r.events.compute||r.events.compute(t,r);let s=a.flatMap(function(e){let n=$(e);if(!n||!n.events.enabled||null===n.raycaster.camera)return[];if(void 0===n.raycaster.camera){var r;null==n.events.compute||n.events.compute(t,n,null==(r=n.previousRoot)?void 0:r.getState()),void 0===n.raycaster.camera&&(n.raycaster.camera=null)}return n.raycaster.camera?n.raycaster.intersectObject(e,!0):[]}).sort((e,t)=>{let n=$(e.object),r=$(t.object);return n&&r&&r.events.priority-n.events.priority||e.distance-t.distance}).filter(e=>{let t=ef(e);return!i.has(t)&&(i.add(t),!0)});for(let e of(r.events.filter&&(s=r.events.filter(s,r)),s)){let t=e.object;for(;t;){var l;null!=(l=t.__r3f)&&l.eventCount&&o.push({...e,eventObject:t}),t=t.parent}}if("pointerId"in t&&r.internal.capturedMap.has(t.pointerId))for(let e of r.internal.capturedMap.get(t.pointerId).values())i.has(ef(e.intersection))||o.push(e.intersection);return o}(o,l?t:void 0),d=c?function(t){let{internal:n}=e.getState(),r=t.offsetX-n.initialClick[0],i=t.offsetY-n.initialClick[1];return Math.round(Math.sqrt(r*r+i*i))}(o):0;"onPointerDown"===i&&(s.initialClick=[o.offsetX,o.offsetY],s.initialHits=u.map(e=>e.eventObject)),c&&!u.length&&d<=2&&(r(o,s.interaction),a&&a(o)),l&&n(u),!function(e,t,r,i){if(e.length){let o={stopped:!1};for(let a of e){let s=$(a.object);if(s||a.object.traverseAncestors(e=>{let t=$(e);if(t)return s=t,!1}),s){let{raycaster:l,pointer:c,camera:u,internal:d}=s,h=new m.Pq0(c.x,c.y,0).unproject(u),f=e=>{var t,n;return null!=(t=null==(n=d.capturedMap.get(e))?void 0:n.has(a.eventObject))&&t},p=e=>{let n={intersection:a,target:t.target};d.capturedMap.has(e)?d.capturedMap.get(e).set(a.eventObject,n):d.capturedMap.set(e,new Map([[a.eventObject,n]])),t.target.setPointerCapture(e)},g=e=>{let t=d.capturedMap.get(e);t&&ep(d.capturedMap,a.eventObject,t,e)},v={};for(let e in t){let n=t[e];"function"!=typeof n&&(v[e]=n)}let b={...a,...v,pointer:c,intersections:e,stopped:o.stopped,delta:r,unprojectedPoint:h,ray:l.ray,camera:u,stopPropagation(){let r="pointerId"in t&&d.capturedMap.get(t.pointerId);(!r||r.has(a.eventObject))&&(b.stopped=o.stopped=!0,d.hovered.size&&Array.from(d.hovered.values()).find(e=>e.eventObject===a.eventObject)&&n([...e.slice(0,e.indexOf(a)),a]))},target:{hasPointerCapture:f,setPointerCapture:p,releasePointerCapture:g},currentTarget:{hasPointerCapture:f,setPointerCapture:p,releasePointerCapture:g},nativeEvent:t};if(i(b),!0===o.stopped)break}}}}(u,o,d,function(e){let t=e.eventObject,n=t.__r3f;if(!(null!=n&&n.eventCount))return;let a=n.handlers;if(l){if(a.onPointerOver||a.onPointerEnter||a.onPointerOut||a.onPointerLeave){let t=ef(e),n=s.hovered.get(t);n?n.stopped&&e.stopPropagation():(s.hovered.set(t,e),null==a.onPointerOver||a.onPointerOver(e),null==a.onPointerEnter||a.onPointerEnter(e))}null==a.onPointerMove||a.onPointerMove(e)}else{let n=a[i];n?(!c||s.initialHits.includes(t))&&(r(o,s.interaction.filter(e=>!s.initialHits.includes(e))),n(e)):c&&s.initialHits.includes(t)&&r(o,s.interaction.filter(e=>!s.initialHits.includes(e)))}})}}}}(e);return{priority:1,enabled:!0,compute(e,t,n){t.pointer.set(e.offsetX/t.size.width*2-1,-(2*(e.offsetY/t.size.height))+1),t.raycaster.setFromCamera(t.pointer,t.camera)},connected:void 0,handlers:Object.keys(e5).reduce((e,n)=>({...e,[n]:t(n)}),{}),update:()=>{var t;let{events:n,internal:r}=e.getState();null!=(t=r.lastEvent)&&t.current&&n.handlers&&n.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{let{set:n,events:r}=e.getState();if(null==r.disconnect||r.disconnect(),n(e=>({events:{...e.events,connected:t}})),r.handlers)for(let e in r.handlers){let n=r.handlers[e],[i,o]=e5[e];t.addEventListener(i,n,{passive:o})}},disconnect:()=>{let{set:t,events:n}=e.getState();if(n.connected){if(n.handlers)for(let e in n.handlers){let t=n.handlers[e],[r]=e5[e];n.connected.removeEventListener(r,t)}t(e=>({events:{...e.events,connected:void 0}}))}}}}function e6(e,t){let n;return(...r)=>{window.clearTimeout(n),n=window.setTimeout(()=>e(...r),t)}}let e8=["x","y","top","bottom","left","right","width","height"],e7=(e,t)=>e8.every(n=>e[n]===t[n]);function e9({ref:e,children:t,fallback:n,resize:r,style:i,gl:o,events:a=e4,eventSource:s,eventPrefix:l,shadows:c,linear:u,flat:d,legacy:p,orthographic:b,frameloop:y,dpr:x,performance:w,raycaster:E,camera:A,scene:S,onPointerMissed:j,onCreated:C,...M}){f.useMemo(()=>(function(e){if(eT(e)){let t=`${ek++}`;return ej[t]=e,t}Object.assign(ej,e)})(g),[]);let k=function(){let e=H(),t=function(){let e=function(){let e=H(),[t]=f.useState(()=>new Map);t.clear();let n=e;for(;n;){let e=n.type;F(e)&&e!==z&&!t.has(e)&&t.set(e,f.use(D(e))),n=n.return}return t}();return f.useMemo(()=>Array.from(e.keys()).reduce((t,n)=>r=>f.createElement(t,null,f.createElement(n.Provider,{...r,value:e.get(n)})),e=>f.createElement(N,{...e})),[e])}();return f.useMemo(()=>({children:n})=>{let r=I(e,!0,e=>e.type===f.StrictMode)?f.StrictMode:f.Fragment;return(0,h.jsx)(r,{children:(0,h.jsx)(t,{children:n})})},[e,t])}(),[T,_]=function({debounce:e,scroll:t,polyfill:n,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){var i,o,a;let s=n||("undefined"==typeof window?class{}:window.ResizeObserver);if(!s)throw Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");let[l,c]=(0,f.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),u=(0,f.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:l,orientationHandler:null}),d=e?"number"==typeof e?e:e.scroll:null,h=e?"number"==typeof e?e:e.resize:null,p=(0,f.useRef)(!1);(0,f.useEffect)(()=>(p.current=!0,()=>void(p.current=!1)));let[m,g,v]=(0,f.useMemo)(()=>{let e=()=>{if(!u.current.element)return;let{left:e,top:t,width:n,height:i,bottom:o,right:a,x:s,y:l}=u.current.element.getBoundingClientRect(),d={left:e,top:t,width:n,height:i,bottom:o,right:a,x:s,y:l};u.current.element instanceof HTMLElement&&r&&(d.height=u.current.element.offsetHeight,d.width=u.current.element.offsetWidth),Object.freeze(d),p.current&&!e7(u.current.lastBounds,d)&&c(u.current.lastBounds=d)};return[e,h?e6(e,h):e,d?e6(e,d):e]},[c,r,d,h]);function b(){u.current.scrollContainers&&(u.current.scrollContainers.forEach(e=>e.removeEventListener("scroll",v,!0)),u.current.scrollContainers=null),u.current.resizeObserver&&(u.current.resizeObserver.disconnect(),u.current.resizeObserver=null),u.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",u.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",u.current.orientationHandler))}function y(){u.current.element&&(u.current.resizeObserver=new s(v),u.current.resizeObserver.observe(u.current.element),t&&u.current.scrollContainers&&u.current.scrollContainers.forEach(e=>e.addEventListener("scroll",v,{capture:!0,passive:!0})),u.current.orientationHandler=()=>{v()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",u.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",u.current.orientationHandler))}return i=v,o=!!t,(0,f.useEffect)(()=>{if(o)return window.addEventListener("scroll",i,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",i,!0)},[i,o]),a=g,(0,f.useEffect)(()=>(window.addEventListener("resize",a),()=>void window.removeEventListener("resize",a)),[a]),(0,f.useEffect)(()=>{b(),y()},[t,v,g]),(0,f.useEffect)(()=>b,[]),[e=>{e&&e!==u.current.element&&(b(),u.current.element=e,u.current.scrollContainers=function e(t){let n=[];if(!t||t===document.body)return n;let{overflow:r,overflowX:i,overflowY:o}=window.getComputedStyle(t);return[r,i,o].some(e=>"auto"===e||"scroll"===e)&&n.push(t),[...n,...e(t.parentElement)]}(e),y())},l,m]}({scroll:!0,debounce:{scroll:50,resize:0},...r}),P=f.useRef(null),O=f.useRef(null);f.useImperativeHandle(e,()=>P.current);let R=X(j),[L,B]=f.useState(!1),[U,q]=f.useState(!1);if(L)throw L;if(U)throw U;let V=f.useRef(null);W(()=>{let e=P.current;_.width>0&&_.height>0&&e&&(V.current||(V.current=function(e){let t,n,r=eU.get(e),i=null==r?void 0:r.fiber,o=null==r?void 0:r.store;r&&console.warn("R3F.createRoot should only be called once!");let a="function"==typeof reportError?reportError:console.error,s=o||ev(e2,e3),l=i||eF.createContainer(s,v.ConcurrentRoot,null,!1,null,"",a,a,a,null);r||eU.set(e,{fiber:l,store:s});let c=!1,u=null;return{async configure(r={}){var i,o;let a;u=new Promise(e=>a=e);let{gl:l,size:d,scene:h,events:f,onCreated:p,shadows:v=!1,linear:b=!1,flat:y=!1,legacy:x=!1,orthographic:w=!1,frameloop:E="always",dpr:A=[1,2],performance:S,raycaster:j,camera:C,onPointerMissed:M}=r,k=s.getState(),T=k.gl;if(!k.gl){let t={canvas:e,powerPreference:"high-performance",antialias:!0,alpha:!0},n="function"==typeof l?await l(t):l;T=em(n)?n:new g.WebGLRenderer({...t,...l}),k.set({gl:T})}let _=k.raycaster;_||k.set({raycaster:_=new m.tBo});let{params:P,...O}=j||{};if(Q.equ(O,_,eq)||ec(_,{...O}),Q.equ(P,_.params,eq)||ec(_,{params:{..._.params,...P}}),!k.camera||k.camera===n&&!Q.equ(n,C,eq)){n=C;let e=null==C?void 0:C.isCamera,t=e?C:w?new m.qUd(0,0,0,0,.1,1e3):new m.ubm(75,0,.1,1e3);!e&&(t.position.z=5,C&&(ec(t,C),!t.manual&&("aspect"in C||"left"in C||"right"in C||"bottom"in C||"top"in C)&&(t.manual=!0,t.updateProjectionMatrix())),k.camera||null!=C&&C.rotation||t.lookAt(0,0,0)),k.set({camera:t}),_.camera=t}if(!k.scene){let e;null!=h&&h.isScene?ee(e=h,s,"",{}):(ee(e=new m.Z58,s,"",{}),h&&ec(e,h)),k.set({scene:e})}f&&!k.events.handlers&&k.set({events:f(s)});let R=function(e,t){if(!t&&"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&e.parentElement){let{width:t,height:n,top:r,left:i}=e.parentElement.getBoundingClientRect();return{width:t,height:n,top:r,left:i}}return!t&&"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas?{width:e.width,height:e.height,top:0,left:0}:{width:0,height:0,top:0,left:0,...t}}(e,d);if(Q.equ(R,k.size,eq)||k.setSize(R.width,R.height,R.top,R.left),A&&k.viewport.dpr!==Z(A)&&k.setDpr(A),k.frameloop!==E&&k.setFrameloop(E),k.onPointerMissed||k.set({onPointerMissed:M}),S&&!Q.equ(S,k.performance,eq)&&k.set(e=>({performance:{...e.performance,...S}})),!k.xr){let e=(e,t)=>{let n=s.getState();"never"!==n.frameloop&&e3(e,!0,n,t)},t=()=>{let t=s.getState();t.gl.xr.enabled=t.gl.xr.isPresenting,t.gl.xr.setAnimationLoop(t.gl.xr.isPresenting?e:null),t.gl.xr.isPresenting||e2(t)},n={connect(){let e=s.getState().gl;e.xr.addEventListener("sessionstart",t),e.xr.addEventListener("sessionend",t)},disconnect(){let e=s.getState().gl;e.xr.removeEventListener("sessionstart",t),e.xr.removeEventListener("sessionend",t)}};"function"==typeof(null==(i=T.xr)?void 0:i.addEventListener)&&n.connect(),k.set({xr:n})}if(T.shadowMap){let e=T.shadowMap.enabled,t=T.shadowMap.type;if(T.shadowMap.enabled=!!v,Q.boo(v))T.shadowMap.type=m.Wk7;else if(Q.str(v)){let e={basic:m.bTm,percentage:m.QP0,soft:m.Wk7,variance:m.RyA};T.shadowMap.type=null!=(o=e[v])?o:m.Wk7}else Q.obj(v)&&Object.assign(T.shadowMap,v);(e!==T.shadowMap.enabled||t!==T.shadowMap.type)&&(T.shadowMap.needsUpdate=!0)}return m.ppV.enabled=!x,c||(T.outputColorSpace=b?m.Zr2:m.er$,T.toneMapping=y?m.y_p:m.FV),k.legacy!==x&&k.set(()=>({legacy:x})),k.linear!==b&&k.set(()=>({linear:b})),k.flat!==y&&k.set(()=>({flat:y})),!l||Q.fun(l)||em(l)||Q.equ(l,T,eq)||ec(T,l),t=p,c=!0,a(),this},render(n){return c||u||this.configure(),u.then(()=>{eF.updateContainer((0,h.jsx)(eG,{store:s,children:n,onCreated:t,rootElement:e}),l,null,()=>void 0)}),s},unmount(){eV(e)}}}(e)),async function(){await V.current.configure({gl:o,scene:S,events:a,shadows:c,linear:u,flat:d,legacy:p,orthographic:b,frameloop:y,dpr:x,performance:w,raycaster:E,camera:A,size:_,onPointerMissed:(...e)=>null==R.current?void 0:R.current(...e),onCreated:e=>{null==e.events.connect||e.events.connect(s?G(s)?s.current:s:O.current),l&&e.setEvents({compute:(e,t)=>{let n=e[l+"X"],r=e[l+"Y"];t.pointer.set(n/t.size.width*2-1,-(2*(r/t.size.height))+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),null==C||C(e)}}),V.current.render((0,h.jsx)(k,{children:(0,h.jsx)(K,{set:q,children:(0,h.jsx)(f.Suspense,{fallback:(0,h.jsx)(Y,{set:B}),children:null!=t?t:null})})}))}())}),f.useEffect(()=>{let e=P.current;if(e)return()=>eV(e)},[]);let $=s?"none":"auto";return(0,h.jsx)("div",{ref:O,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:$,...i},...M,children:(0,h.jsx)("div",{ref:T,style:{width:"100%",height:"100%"},children:(0,h.jsx)("canvas",{ref:P,style:{display:"block"},children:n})})})}function te(e){return(0,h.jsx)(N,{children:(0,h.jsx)(e9,{...e})})}function tt({defaultScene:e,defaultCamera:t,renderPriority:n=1}){let r,{gl:i,scene:o,camera:a}=ey();return ex(()=>{r=i.autoClear,1===n&&(i.autoClear=!0,i.render(e,t)),i.autoClear=!1,i.clearDepth(),i.render(o,a),i.autoClear=r},n),f.createElement("group",{onPointerOver:()=>null})}function tn({children:e,renderPriority:t=1}){var n,r;let{scene:i,camera:o}=ey(),[a]=f.useState(()=>new m.Z58);return f.createElement(f.Fragment,null,(n=f.createElement(f.Fragment,null,e,f.createElement(tt,{defaultScene:i,defaultCamera:o,renderPriority:t})),r={events:{priority:t+1}},(0,h.jsx)(eW,{children:n,container:a,state:r})))}var tr=n(44501);function ti(e,t,n){let r=ey(e=>e.size),i=ey(e=>e.viewport),o="number"==typeof e?e:r.width*i.dpr,a="number"==typeof t?t:r.height*i.dpr,{samples:s=0,depth:l,...c}=("number"==typeof e?n:e)||{},u=f.useMemo(()=>{let e=new m.nWS(o,a,{minFilter:m.k6q,magFilter:m.k6q,type:m.ix0,...c});return l&&(e.depthTexture=new m.VCu(o,a,m.RQf)),e.samples=s,e},[]);return f.useLayoutEffect(()=>{u.setSize(o,a),s&&(u.samples=s)},[s,u,o,a]),f.useEffect(()=>()=>u.dispose(),[]),u}let to=e=>"function"==typeof e,ta=f.forwardRef(({envMap:e,resolution:t=256,frames:n=1/0,makeDefault:r,children:i,...o},a)=>{let s=ey(({set:e})=>e),l=ey(({camera:e})=>e),c=ey(({size:e})=>e),u=f.useRef(null);f.useImperativeHandle(a,()=>u.current,[]);let d=f.useRef(null),h=ti(t);f.useLayoutEffect(()=>{o.manual||(u.current.aspect=c.width/c.height)},[c,o]),f.useLayoutEffect(()=>{u.current.updateProjectionMatrix()});let p=0,m=null,g=to(i);return ex(t=>{g&&(n===1/0||p<n)&&(d.current.visible=!1,t.gl.setRenderTarget(h),m=t.scene.background,e&&(t.scene.background=e),t.gl.render(t.scene,u.current),t.scene.background=m,t.gl.setRenderTarget(null),d.current.visible=!0,p++)}),f.useLayoutEffect(()=>{if(r)return s(()=>({camera:u.current})),()=>s(()=>({camera:l}))},[u,r,s]),f.createElement(f.Fragment,null,f.createElement("perspectiveCamera",(0,tr.A)({ref:u},o),!g&&i),f.createElement("group",{ref:d},g&&i(h.texture)))});var ts=Object.defineProperty,tl=(e,t,n)=>t in e?ts(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tc=(e,t,n)=>(tl(e,"symbol"!=typeof t?t+"":t,n),n);class tu{constructor(){tc(this,"_listeners")}addEventListener(e,t){void 0===this._listeners&&(this._listeners={});let n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;let n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;let n=this._listeners[e];if(void 0!==n){let e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;let t=this._listeners[e.type];if(void 0!==t){e.target=this;let n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}}var td=Object.defineProperty,th=(e,t,n)=>t in e?td(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tf=(e,t,n)=>(th(e,"symbol"!=typeof t?t+"":t,n),n);class tp extends tu{constructor(e,t){super(),tf(this,"enabled",!0),tf(this,"screen",{left:0,top:0,width:0,height:0}),tf(this,"rotateSpeed",1),tf(this,"zoomSpeed",1.2),tf(this,"panSpeed",.3),tf(this,"noRotate",!1),tf(this,"noZoom",!1),tf(this,"noPan",!1),tf(this,"staticMoving",!1),tf(this,"dynamicDampingFactor",.2),tf(this,"minDistance",0),tf(this,"maxDistance",1/0),tf(this,"keys",["KeyA","KeyS","KeyD"]),tf(this,"mouseButtons",{LEFT:m.kBv.ROTATE,MIDDLE:m.kBv.DOLLY,RIGHT:m.kBv.PAN}),tf(this,"object"),tf(this,"domElement"),tf(this,"cursorZoom",!1),tf(this,"target",new m.Pq0),tf(this,"mousePosition",new m.I9Y),tf(this,"STATE",{NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4}),tf(this,"EPS",1e-6),tf(this,"lastZoom",1),tf(this,"lastPosition",new m.Pq0),tf(this,"cursorVector",new m.Pq0),tf(this,"targetVector",new m.Pq0),tf(this,"_state",this.STATE.NONE),tf(this,"_keyState",this.STATE.NONE),tf(this,"_eye",new m.Pq0),tf(this,"_movePrev",new m.I9Y),tf(this,"_moveCurr",new m.I9Y),tf(this,"_lastAxis",new m.Pq0),tf(this,"_lastAngle",0),tf(this,"_zoomStart",new m.I9Y),tf(this,"_zoomEnd",new m.I9Y),tf(this,"_touchZoomDistanceStart",0),tf(this,"_touchZoomDistanceEnd",0),tf(this,"_panStart",new m.I9Y),tf(this,"_panEnd",new m.I9Y),tf(this,"target0"),tf(this,"position0"),tf(this,"up0"),tf(this,"zoom0"),tf(this,"changeEvent",{type:"change"}),tf(this,"startEvent",{type:"start"}),tf(this,"endEvent",{type:"end"}),tf(this,"onScreenVector",new m.I9Y),tf(this,"getMouseOnScreen",(e,t)=>(this.onScreenVector.set((e-this.screen.left)/this.screen.width,(t-this.screen.top)/this.screen.height),this.onScreenVector)),tf(this,"onCircleVector",new m.I9Y),tf(this,"getMouseOnCircle",(e,t)=>(this.onCircleVector.set((e-.5*this.screen.width-this.screen.left)/(.5*this.screen.width),(this.screen.height+2*(this.screen.top-t))/this.screen.width),this.onCircleVector)),tf(this,"axis",new m.Pq0),tf(this,"quaternion",new m.PTz),tf(this,"eyeDirection",new m.Pq0),tf(this,"objectUpDirection",new m.Pq0),tf(this,"objectSidewaysDirection",new m.Pq0),tf(this,"moveDirection",new m.Pq0),tf(this,"angle",0),tf(this,"rotateCamera",()=>{this.moveDirection.set(this._moveCurr.x-this._movePrev.x,this._moveCurr.y-this._movePrev.y,0),this.angle=this.moveDirection.length(),this.angle?(this._eye.copy(this.object.position).sub(this.target),this.eyeDirection.copy(this._eye).normalize(),this.objectUpDirection.copy(this.object.up).normalize(),this.objectSidewaysDirection.crossVectors(this.objectUpDirection,this.eyeDirection).normalize(),this.objectUpDirection.setLength(this._moveCurr.y-this._movePrev.y),this.objectSidewaysDirection.setLength(this._moveCurr.x-this._movePrev.x),this.moveDirection.copy(this.objectUpDirection.add(this.objectSidewaysDirection)),this.axis.crossVectors(this.moveDirection,this._eye).normalize(),this.angle*=this.rotateSpeed,this.quaternion.setFromAxisAngle(this.axis,this.angle),this._eye.applyQuaternion(this.quaternion),this.object.up.applyQuaternion(this.quaternion),this._lastAxis.copy(this.axis),this._lastAngle=this.angle):!this.staticMoving&&this._lastAngle&&(this._lastAngle*=Math.sqrt(1-this.dynamicDampingFactor),this._eye.copy(this.object.position).sub(this.target),this.quaternion.setFromAxisAngle(this._lastAxis,this._lastAngle),this._eye.applyQuaternion(this.quaternion),this.object.up.applyQuaternion(this.quaternion)),this._movePrev.copy(this._moveCurr)}),tf(this,"zoomCamera",()=>{let e;if(this._state===this.STATE.TOUCH_ZOOM_PAN)e=this._touchZoomDistanceStart/this._touchZoomDistanceEnd,this._touchZoomDistanceStart=this._touchZoomDistanceEnd,this.object.isPerspectiveCamera?this._eye.multiplyScalar(e):this.object.isOrthographicCamera?(this.object.zoom/=e,this.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type");else{if(Math.abs((e=1+(this._zoomEnd.y-this._zoomStart.y)*this.zoomSpeed)-1)>this.EPS&&e>0&&(this.object.isPerspectiveCamera?(e>1&&this._eye.length()>=this.maxDistance-this.EPS&&(e=1),this._eye.multiplyScalar(e)):this.object.isOrthographicCamera?(e>1&&this.object.zoom<this.maxDistance*this.maxDistance&&(e=1),this.object.zoom/=e):console.warn("THREE.TrackballControls: Unsupported camera type")),this.staticMoving?this._zoomStart.copy(this._zoomEnd):this._zoomStart.y+=(this._zoomEnd.y-this._zoomStart.y)*this.dynamicDampingFactor,this.cursorZoom){this.targetVector.copy(this.target).project(this.object);let t=this.cursorVector.set(this.mousePosition.x,this.mousePosition.y,this.targetVector.z).unproject(this.object);this.target.lerpVectors(t,this.target,e)}this.object.isOrthographicCamera&&this.object.updateProjectionMatrix()}}),tf(this,"mouseChange",new m.I9Y),tf(this,"objectUp",new m.Pq0),tf(this,"pan",new m.Pq0),tf(this,"panCamera",()=>{if(this.domElement&&(this.mouseChange.copy(this._panEnd).sub(this._panStart),this.mouseChange.lengthSq()>this.EPS)){if(this.object.isOrthographicCamera){let e=this.object,t=(e.right-e.left)/this.object.zoom,n=(e.top-e.bottom)/this.object.zoom;this.mouseChange.x*=t,this.mouseChange.y*=n}else this.mouseChange.multiplyScalar(this._eye.length()*this.panSpeed);this.pan.copy(this._eye).cross(this.object.up).setLength(this.mouseChange.x),this.pan.add(this.objectUp.copy(this.object.up).setLength(this.mouseChange.y)),this.object.position.add(this.pan),this.target.add(this.pan),this.staticMoving?this._panStart.copy(this._panEnd):this._panStart.add(this.mouseChange.subVectors(this._panEnd,this._panStart).multiplyScalar(this.dynamicDampingFactor))}}),tf(this,"checkDistances",()=>{this.noZoom&&this.noPan||(this._eye.lengthSq()>this.maxDistance*this.maxDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.maxDistance)),this._zoomStart.copy(this._zoomEnd)),this._eye.lengthSq()<this.minDistance*this.minDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.minDistance)),this._zoomStart.copy(this._zoomEnd)))}),tf(this,"handleResize",()=>{if(!this.domElement)return;let e=this.domElement.getBoundingClientRect(),t=this.domElement.ownerDocument.documentElement;this.screen.left=e.left+window.pageXOffset-t.clientLeft,this.screen.top=e.top+window.pageYOffset-t.clientTop,this.screen.width=e.width,this.screen.height=e.height}),tf(this,"update",()=>{this._eye.subVectors(this.object.position,this.target),this.noRotate||this.rotateCamera(),this.noZoom||this.zoomCamera(),this.noPan||this.panCamera(),this.object.position.addVectors(this.target,this._eye),this.object.isPerspectiveCamera?(this.checkDistances(),this.object.lookAt(this.target),this.lastPosition.distanceToSquared(this.object.position)>this.EPS&&(this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position))):this.object.isOrthographicCamera?(this.object.lookAt(this.target),(this.lastPosition.distanceToSquared(this.object.position)>this.EPS||this.lastZoom!==this.object.zoom)&&(this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position),this.lastZoom=this.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")}),tf(this,"reset",()=>{this._state=this.STATE.NONE,this._keyState=this.STATE.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.up.copy(this.up0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this._eye.subVectors(this.object.position,this.target),this.object.lookAt(this.target),this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position),this.lastZoom=this.object.zoom}),tf(this,"keydown",e=>{!1!==this.enabled&&(window.removeEventListener("keydown",this.keydown),this._keyState===this.STATE.NONE&&(e.code!==this.keys[this.STATE.ROTATE]||this.noRotate?e.code!==this.keys[this.STATE.ZOOM]||this.noZoom?e.code!==this.keys[this.STATE.PAN]||this.noPan||(this._keyState=this.STATE.PAN):this._keyState=this.STATE.ZOOM:this._keyState=this.STATE.ROTATE))}),tf(this,"onPointerDown",e=>{if(!1!==this.enabled)switch(e.pointerType){case"mouse":case"pen":this.onMouseDown(e)}}),tf(this,"onPointerMove",e=>{if(!1!==this.enabled)switch(e.pointerType){case"mouse":case"pen":this.onMouseMove(e)}}),tf(this,"onPointerUp",e=>{if(!1!==this.enabled)switch(e.pointerType){case"mouse":case"pen":this.onMouseUp()}}),tf(this,"keyup",()=>{!1!==this.enabled&&(this._keyState=this.STATE.NONE,window.addEventListener("keydown",this.keydown))}),tf(this,"onMouseDown",e=>{if(!this.domElement)return;if(this._state===this.STATE.NONE)switch(e.button){case this.mouseButtons.LEFT:this._state=this.STATE.ROTATE;break;case this.mouseButtons.MIDDLE:this._state=this.STATE.ZOOM;break;case this.mouseButtons.RIGHT:this._state=this.STATE.PAN}let t=this._keyState!==this.STATE.NONE?this._keyState:this._state;t!==this.STATE.ROTATE||this.noRotate?t!==this.STATE.ZOOM||this.noZoom?t!==this.STATE.PAN||this.noPan||(this._panStart.copy(this.getMouseOnScreen(e.pageX,e.pageY)),this._panEnd.copy(this._panStart)):(this._zoomStart.copy(this.getMouseOnScreen(e.pageX,e.pageY)),this._zoomEnd.copy(this._zoomStart)):(this._moveCurr.copy(this.getMouseOnCircle(e.pageX,e.pageY)),this._movePrev.copy(this._moveCurr)),this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),this.dispatchEvent(this.startEvent)}),tf(this,"onMouseMove",e=>{if(!1===this.enabled)return;let t=this._keyState!==this.STATE.NONE?this._keyState:this._state;t!==this.STATE.ROTATE||this.noRotate?t!==this.STATE.ZOOM||this.noZoom?t!==this.STATE.PAN||this.noPan||this._panEnd.copy(this.getMouseOnScreen(e.pageX,e.pageY)):this._zoomEnd.copy(this.getMouseOnScreen(e.pageX,e.pageY)):(this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this.getMouseOnCircle(e.pageX,e.pageY)))}),tf(this,"onMouseUp",()=>{this.domElement&&!1!==this.enabled&&(this._state=this.STATE.NONE,this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),this.dispatchEvent(this.endEvent))}),tf(this,"mousewheel",e=>{if(!1!==this.enabled&&!0!==this.noZoom){switch(e.preventDefault(),e.deltaMode){case 2:this._zoomStart.y-=.025*e.deltaY;break;case 1:this._zoomStart.y-=.01*e.deltaY;break;default:this._zoomStart.y-=25e-5*e.deltaY}this.mousePosition.x=e.offsetX/this.screen.width*2-1,this.mousePosition.y=-(2*(e.offsetY/this.screen.height))+1,this.dispatchEvent(this.startEvent),this.dispatchEvent(this.endEvent)}}),tf(this,"touchstart",e=>{if(!1!==this.enabled){if(e.preventDefault(),1===e.touches.length)this._state=this.STATE.TOUCH_ROTATE,this._moveCurr.copy(this.getMouseOnCircle(e.touches[0].pageX,e.touches[0].pageY)),this._movePrev.copy(this._moveCurr);else{this._state=this.STATE.TOUCH_ZOOM_PAN;let t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY;this._touchZoomDistanceEnd=this._touchZoomDistanceStart=Math.sqrt(t*t+n*n);let r=(e.touches[0].pageX+e.touches[1].pageX)/2,i=(e.touches[0].pageY+e.touches[1].pageY)/2;this._panStart.copy(this.getMouseOnScreen(r,i)),this._panEnd.copy(this._panStart)}this.dispatchEvent(this.startEvent)}}),tf(this,"touchmove",e=>{if(!1!==this.enabled)if(e.preventDefault(),1===e.touches.length)this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this.getMouseOnCircle(e.touches[0].pageX,e.touches[0].pageY));else{let t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY;this._touchZoomDistanceEnd=Math.sqrt(t*t+n*n);let r=(e.touches[0].pageX+e.touches[1].pageX)/2,i=(e.touches[0].pageY+e.touches[1].pageY)/2;this._panEnd.copy(this.getMouseOnScreen(r,i))}}),tf(this,"touchend",e=>{if(!1!==this.enabled){switch(e.touches.length){case 0:this._state=this.STATE.NONE;break;case 1:this._state=this.STATE.TOUCH_ROTATE,this._moveCurr.copy(this.getMouseOnCircle(e.touches[0].pageX,e.touches[0].pageY)),this._movePrev.copy(this._moveCurr)}this.dispatchEvent(this.endEvent)}}),tf(this,"contextmenu",e=>{!1!==this.enabled&&e.preventDefault()}),tf(this,"connect",e=>{e===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.domElement=e,this.domElement.addEventListener("contextmenu",this.contextmenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("wheel",this.mousewheel),this.domElement.addEventListener("touchstart",this.touchstart),this.domElement.addEventListener("touchend",this.touchend),this.domElement.addEventListener("touchmove",this.touchmove),this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup),this.handleResize()}),tf(this,"dispose",()=>{this.domElement&&(this.domElement.removeEventListener("contextmenu",this.contextmenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("wheel",this.mousewheel),this.domElement.removeEventListener("touchstart",this.touchstart),this.domElement.removeEventListener("touchend",this.touchend),this.domElement.removeEventListener("touchmove",this.touchmove),this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup))}),this.object=e,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom,void 0!==t&&this.connect(t),this.update()}}let tm=f.forwardRef(({makeDefault:e,camera:t,domElement:n,regress:r,onChange:i,onStart:o,onEnd:a,...s},l)=>{let{invalidate:c,camera:u,gl:d,events:h,set:p,get:m,performance:g,viewport:v}=ey(),b=t||u,y=n||h.connected||d.domElement,x=f.useMemo(()=>new tp(b),[b]);return ex(()=>{x.enabled&&x.update()},-1),f.useEffect(()=>(x.connect(y),()=>void x.dispose()),[y,r,x,c]),f.useEffect(()=>{let e=e=>{c(),r&&g.regress(),i&&i(e)};return x.addEventListener("change",e),o&&x.addEventListener("start",o),a&&x.addEventListener("end",a),()=>{o&&x.removeEventListener("start",o),a&&x.removeEventListener("end",a),x.removeEventListener("change",e)}},[i,o,a,x,c]),f.useEffect(()=>{x.handleResize()},[v]),f.useEffect(()=>{if(e){let e=m().controls;return p({controls:x}),()=>p({controls:e})}},[e,x]),f.createElement("primitive",(0,tr.A)({ref:l,object:x},s))});var tg=n(6533),tv=n(55522),tb=n(891),ty=n(83681),tx=n(61479),tw=n(39411);let tE=null,tA=e=>e(),tS=[],tj={};function tC(){let{getContainer:e,rtl:t,maxCount:n,top:r,bottom:i,showProgress:o,pauseOnHover:a}=tj,s=(null==e?void 0:e())||document.body;return{getContainer:()=>s,rtl:t,maxCount:n,top:r,bottom:i,showProgress:o,pauseOnHover:a}}let tM=f.forwardRef((e,t)=>{let{notificationConfig:n,sync:r}=e,{getPrefixCls:i}=(0,f.useContext)(tv.QO),o=tj.prefixCls||i("notification"),a=(0,f.useContext)(tg.B),[s,l]=(0,tw.G)(Object.assign(Object.assign(Object.assign({},n),{prefixCls:o}),a.notification));return f.useEffect(r,[]),f.useImperativeHandle(t,()=>{let e=Object.assign({},s);return Object.keys(e).forEach(t=>{e[t]=function(){return r(),s[t].apply(s,arguments)}}),{instance:e,sync:r}}),l}),tk=f.forwardRef((e,t)=>{let[n,r]=f.useState(tC),i=()=>{r(tC)};f.useEffect(i,[]);let o=(0,tb.cr)(),a=o.getRootPrefixCls(),s=o.getIconPrefixCls(),l=o.getTheme(),c=f.createElement(tM,{ref:t,sync:i,notificationConfig:n});return f.createElement(tb.Ay,{prefixCls:a,iconPrefixCls:s,theme:l},o.holderRender?o.holderRender(c):c)});function tT(){if(!tE){let e=document.createDocumentFragment(),t={fragment:e};tE=t,tA(()=>{(0,ty.K)()(f.createElement(tk,{ref:e=>{let{instance:n,sync:r}=e||{};Promise.resolve().then(()=>{!t.instance&&n&&(t.instance=n,t.sync=r,tT())})}}),e)});return}tE.instance&&(tS.forEach(e=>{switch(e.type){case"open":tA(()=>{tE.instance.open(Object.assign(Object.assign({},tj),e.config))});break;case"destroy":tA(()=>{null==tE||tE.instance.destroy(e.key)})}}),tS=[])}function t_(e){(0,tb.cr)(),tS.push({type:"open",config:e}),tT()}let tP={open:t_,destroy:e=>{tS.push({type:"destroy",key:e}),tT()},config:function(e){tj=Object.assign(Object.assign({},tj),e),tA(()=>{var e;null==(e=null==tE?void 0:tE.sync)||e.call(tE)})},useNotification:tw.A,_InternalPanelDoNotUseOrYouWillBeFired:tx.Ay};["success","info","warning","error"].forEach(e=>{tP[e]=t=>t_(Object.assign(Object.assign({},t),{type:e}))});var tO=n(50751);class tR{static isWebGL2Available(){try{let e=document.createElement("canvas");return!!(window.WebGL2RenderingContext&&e.getContext("webgl2"))}catch(e){return!1}}static isColorSpaceAvailable(e){try{let t=document.createElement("canvas"),n=window.WebGL2RenderingContext&&t.getContext("webgl2");return n.drawingBufferColorSpace=e,n.drawingBufferColorSpace===e}catch(e){return!1}}static getWebGL2ErrorMessage(){return this._getErrorMessage(2)}static _getErrorMessage(e){let t={1:window.WebGLRenderingContext,2:window.WebGL2RenderingContext},n='Your $0 does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">$1</a>',r=document.createElement("div");return r.id="webglmessage",r.style.fontFamily="monospace",r.style.fontSize="13px",r.style.fontWeight="normal",r.style.textAlign="center",r.style.background="#fff",r.style.color="#000",r.style.padding="1.5em",r.style.width="400px",r.style.margin="5em auto 0",r.innerHTML=n=(n=t[e]?n.replace("$0","graphics card"):n.replace("$0","browser")).replace("$1",{1:"WebGL",2:"WebGL 2"}[e]),r}static isWebGLAvailable(){console.warn("isWebGLAvailable() has been deprecated and will be removed in r178. Use isWebGL2Available() instead.");try{let e=document.createElement("canvas");return!!(window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl")))}catch(e){return!1}}static getWebGLErrorMessage(){return console.warn("getWebGLErrorMessage() has been deprecated and will be removed in r178. Use getWebGL2ErrorMessage() instead."),this._getErrorMessage(1)}}let tL=e=>e,tI=e=>{let t=x(e),n=e=>(function(e,t=tL){let n=f.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return f.useDebugValue(n),n})(t,e);return Object.assign(n,t),n},tD={notFound:void 0,backgroud:void 0},tz={style:void 0,parts:void 0,selection:void 0,data:void 0,postProcessing:void 0,snapshot:void 0,onHighlight:void 0,onSelect:void 0,onData:void 0,onPostProcessing:void 0},tN={gl:void 0,scene:void 0,camera:void 0,controls:void 0},tH={unit:"m"},tB={transparent:!0,grid:!0},tF={enabled:!1},tU={enabled:!1,clippingPlane:void 0,hidePlane:!1,snap:void 0,flip:void 0},tq={dimension:0},tG={meshVisible:!0},tV={colormap:"rainbow",min:-1,max:1},tW={light:{color:"#ffffff",intensity:1,decay:0},colors:{baseColor:"#d3d3d3",hoverColor:"#fad114",selectColor:"#eafa14",hoverSelectColor:"#fa5f14"},frameRate:{fps:30},localStorage:!1},tX="undefined"==typeof window?void 0:localStorage.getItem("tanatloc-3d-settings"),tY=(e=>e?tI(e):tI)(e=>({extra:tD,props:tz,mainView:tN,unit:tH,display:tB,zoomToSelection:tF,sectionView:tU,geometry:tq,result:tG,lut:tV,settings:tX?JSON.parse(tX):tW,setExtra:t=>e({extra:t}),setProps:t=>e({props:t}),setMainView:t=>e({mainView:t})})),tK=(e,t)=>{let n;return(...r)=>{n||(e(...r),n=setTimeout(()=>{clearTimeout(n),n=void 0},t))}},tZ=({controls:e})=>{let t=(0,f.useMemo)(()=>tK((e,t,n,r)=>tY.setState({mainView:{gl:t,scene:n,camera:e,controls:r}}),500),[]);return ex(({camera:n,gl:r,scene:i})=>{t(n,r,i,e)}),null},t$=()=>{let{frameRate:{fps:e}}=tY(e=>e.settings),{invalidate:t}=ey();return(0,f.useEffect)(()=>{let n=setInterval(t,1e3/e);return()=>{clearInterval(n)}},[e,t]),null};var tQ=n(1825);let tJ=f.forwardRef(({sdfGlyphSize:e=64,anchorX:t="center",anchorY:n="middle",font:r,fontSize:i=1,children:o,characters:a,onSync:s,...l},c)=>{let u=ey(({invalidate:e})=>e),[d]=f.useState(()=>new tQ.EY),[h,p]=f.useMemo(()=>{let e=[],t="";return f.Children.forEach(o,n=>{"string"==typeof n||"number"==typeof n?t+=n:e.push(n)}),[e,t]},[o]);return O(()=>new Promise(e=>(0,tQ.PY)({font:r,characters:a},e)),["troika-text",r,a]),f.useLayoutEffect(()=>void d.sync(()=>{u(),s&&s(d)})),f.useEffect(()=>()=>d.dispose(),[d]),f.createElement("primitive",(0,tr.A)({object:d,ref:c,font:r,text:p,anchorX:t,anchorY:n,fontSize:i,sdfGlyphSize:e},l),h)}),t0=new m.NRn,t1=new m.Pq0;class t2 extends m.CmU{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry",this.setIndex([0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5]),this.setAttribute("position",new m.qtW([-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],3)),this.setAttribute("uv",new m.qtW([-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],2))}applyMatrix4(e){let t=this.attributes.instanceStart,n=this.attributes.instanceEnd;return void 0!==t&&(t.applyMatrix4(e),n.applyMatrix4(e),t.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));let n=new m.LuO(t,6,1);return this.setAttribute("instanceStart",new m.eHs(n,3,0)),this.setAttribute("instanceEnd",new m.eHs(n,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e,t=3){let n;e instanceof Float32Array?n=e:Array.isArray(e)&&(n=new Float32Array(e));let r=new m.LuO(n,2*t,1);return this.setAttribute("instanceColorStart",new m.eHs(r,t,0)),this.setAttribute("instanceColorEnd",new m.eHs(r,t,t)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new m.XJ7(e.geometry)),this}fromLineSegments(e){let t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new m.NRn);let e=this.attributes.instanceStart,t=this.attributes.instanceEnd;void 0!==e&&void 0!==t&&(this.boundingBox.setFromBufferAttribute(e),t0.setFromBufferAttribute(t),this.boundingBox.union(t0))}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new m.iyt),null===this.boundingBox&&this.computeBoundingBox();let e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(void 0!==e&&void 0!==t){let n=this.boundingSphere.center;this.boundingBox.getCenter(n);let r=0;for(let i=0,o=e.count;i<o;i++)t1.fromBufferAttribute(e,i),r=Math.max(r,n.distanceToSquared(t1)),t1.fromBufferAttribute(t,i),r=Math.max(r,n.distanceToSquared(t1));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}let t3=parseInt(m.sPf.replace(/\D+/g,""));class t5 extends m.BKk{constructor(e){super({type:"LineMaterial",uniforms:m.LlO.clone(m.LlO.merge([g.UniformsLib.common,g.UniformsLib.fog,{worldUnits:{value:1},linewidth:{value:1},resolution:{value:new m.I9Y(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}}])),vertexShader:`
				#include <common>
				#include <fog_pars_vertex>
				#include <logdepthbuf_pars_vertex>
				#include <clipping_planes_pars_vertex>

				uniform float linewidth;
				uniform vec2 resolution;

				attribute vec3 instanceStart;
				attribute vec3 instanceEnd;

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
						attribute vec4 instanceColorStart;
						attribute vec4 instanceColorEnd;
					#else
						varying vec3 vLineColor;
						attribute vec3 instanceColorStart;
						attribute vec3 instanceColorEnd;
					#endif
				#endif

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#ifdef USE_DASH

					uniform float dashScale;
					attribute float instanceDistanceStart;
					attribute float instanceDistanceEnd;
					varying float vLineDistance;

				#endif

				void trimSegment( const in vec4 start, inout vec4 end ) {

					// trim end segment so it terminates between the camera plane and the near plane

					// conservative estimate of the near plane
					float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
					float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
					float nearEstimate = - 0.5 * b / a;

					float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

					end.xyz = mix( start.xyz, end.xyz, alpha );

				}

				void main() {

					#ifdef USE_COLOR

						vLineColor = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

					#endif

					#ifdef USE_DASH

						vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
						vUv = uv;

					#endif

					float aspect = resolution.x / resolution.y;

					// camera space
					vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
					vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

					#ifdef WORLD_UNITS

						worldStart = start.xyz;
						worldEnd = end.xyz;

					#else

						vUv = uv;

					#endif

					// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
					// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
					// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
					// perhaps there is a more elegant solution -- WestLangley

					bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

					if ( perspective ) {

						if ( start.z < 0.0 && end.z >= 0.0 ) {

							trimSegment( start, end );

						} else if ( end.z < 0.0 && start.z >= 0.0 ) {

							trimSegment( end, start );

						}

					}

					// clip space
					vec4 clipStart = projectionMatrix * start;
					vec4 clipEnd = projectionMatrix * end;

					// ndc space
					vec3 ndcStart = clipStart.xyz / clipStart.w;
					vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

					// direction
					vec2 dir = ndcEnd.xy - ndcStart.xy;

					// account for clip-space aspect ratio
					dir.x *= aspect;
					dir = normalize( dir );

					#ifdef WORLD_UNITS

						// get the offset direction as perpendicular to the view vector
						vec3 worldDir = normalize( end.xyz - start.xyz );
						vec3 offset;
						if ( position.y < 0.5 ) {

							offset = normalize( cross( start.xyz, worldDir ) );

						} else {

							offset = normalize( cross( end.xyz, worldDir ) );

						}

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

						// don't extend the line if we're rendering dashes because we
						// won't be rendering the endcaps
						#ifndef USE_DASH

							// extend the line bounds to encompass  endcaps
							start.xyz += - worldDir * linewidth * 0.5;
							end.xyz += worldDir * linewidth * 0.5;

							// shift the position of the quad so it hugs the forward edge of the line
							offset.xy -= dir * forwardOffset;
							offset.z += 0.5;

						#endif

						// endcaps
						if ( position.y > 1.0 || position.y < 0.0 ) {

							offset.xy += dir * 2.0 * forwardOffset;

						}

						// adjust for linewidth
						offset *= linewidth * 0.5;

						// set the world position
						worldPos = ( position.y < 0.5 ) ? start : end;
						worldPos.xyz += offset;

						// project the worldpos
						vec4 clip = projectionMatrix * worldPos;

						// shift the depth of the projected points so the line
						// segments overlap neatly
						vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
						clip.z = clipPose.z * clip.w;

					#else

						vec2 offset = vec2( dir.y, - dir.x );
						// undo aspect ratio adjustment
						dir.x /= aspect;
						offset.x /= aspect;

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						// endcaps
						if ( position.y < 0.0 ) {

							offset += - dir;

						} else if ( position.y > 1.0 ) {

							offset += dir;

						}

						// adjust for linewidth
						offset *= linewidth;

						// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
						offset /= resolution.y;

						// select end
						vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

						// back to clip space
						offset *= clip.w;

						clip.xy += offset;

					#endif

					gl_Position = clip;

					vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

					#include <logdepthbuf_vertex>
					#include <clipping_planes_vertex>
					#include <fog_vertex>

				}
			`,fragmentShader:`
				uniform vec3 diffuse;
				uniform float opacity;
				uniform float linewidth;

				#ifdef USE_DASH

					uniform float dashOffset;
					uniform float dashSize;
					uniform float gapSize;

				#endif

				varying float vLineDistance;

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#include <common>
				#include <fog_pars_fragment>
				#include <logdepthbuf_pars_fragment>
				#include <clipping_planes_pars_fragment>

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
					#else
						varying vec3 vLineColor;
					#endif
				#endif

				vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

					float mua;
					float mub;

					vec3 p13 = p1 - p3;
					vec3 p43 = p4 - p3;

					vec3 p21 = p2 - p1;

					float d1343 = dot( p13, p43 );
					float d4321 = dot( p43, p21 );
					float d1321 = dot( p13, p21 );
					float d4343 = dot( p43, p43 );
					float d2121 = dot( p21, p21 );

					float denom = d2121 * d4343 - d4321 * d4321;

					float numer = d1343 * d4321 - d1321 * d4343;

					mua = numer / denom;
					mua = clamp( mua, 0.0, 1.0 );
					mub = ( d1343 + d4321 * ( mua ) ) / d4343;
					mub = clamp( mub, 0.0, 1.0 );

					return vec2( mua, mub );

				}

				void main() {

					#include <clipping_planes_fragment>

					#ifdef USE_DASH

						if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

						if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

					#endif

					float alpha = opacity;

					#ifdef WORLD_UNITS

						// Find the closest points on the view ray and the line segment
						vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
						vec3 lineDir = worldEnd - worldStart;
						vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

						vec3 p1 = worldStart + lineDir * params.x;
						vec3 p2 = rayEnd * params.y;
						vec3 delta = p1 - p2;
						float len = length( delta );
						float norm = len / linewidth;

						#ifndef USE_DASH

							#ifdef USE_ALPHA_TO_COVERAGE

								float dnorm = fwidth( norm );
								alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

							#else

								if ( norm > 0.5 ) {

									discard;

								}

							#endif

						#endif

					#else

						#ifdef USE_ALPHA_TO_COVERAGE

							// artifacts appear on some hardware if a derivative is taken within a conditional
							float a = vUv.x;
							float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
							float len2 = a * a + b * b;
							float dlen = fwidth( len2 );

							if ( abs( vUv.y ) > 1.0 ) {

								alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

							}

						#else

							if ( abs( vUv.y ) > 1.0 ) {

								float a = vUv.x;
								float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
								float len2 = a * a + b * b;

								if ( len2 > 1.0 ) discard;

							}

						#endif

					#endif

					vec4 diffuseColor = vec4( diffuse, alpha );
					#ifdef USE_COLOR
						#ifdef USE_LINE_COLOR_ALPHA
							diffuseColor *= vLineColor;
						#else
							diffuseColor.rgb *= vLineColor;
						#endif
					#endif

					#include <logdepthbuf_fragment>

					gl_FragColor = diffuseColor;

					#include <tonemapping_fragment>
					#include <${t3>=154?"colorspace_fragment":"encodings_fragment"}>
					#include <fog_fragment>
					#include <premultiplied_alpha_fragment>

				}
			`,clipping:!0}),this.isLineMaterial=!0,this.onBeforeCompile=function(){this.transparent?this.defines.USE_LINE_COLOR_ALPHA="1":delete this.defines.USE_LINE_COLOR_ALPHA},Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(e){this.uniforms.diffuse.value=e}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(e){!0===e?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(e){this.uniforms.linewidth.value=e}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(e){!!e!="USE_DASH"in this.defines&&(this.needsUpdate=!0),!0===e?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(e){this.uniforms.dashScale.value=e}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(e){this.uniforms.dashSize.value=e}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(e){this.uniforms.dashOffset.value=e}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(e){this.uniforms.gapSize.value=e}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(e){this.uniforms.opacity.value=e}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(e){this.uniforms.resolution.value.copy(e)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(e){!!e!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),!0===e?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}}let t4=t3>=125?"uv1":"uv2",t6=new m.IUQ,t8=new m.Pq0,t7=new m.Pq0,t9=new m.IUQ,ne=new m.IUQ,nt=new m.IUQ,nn=new m.Pq0,nr=new m.kn4,ni=new m.cZY,no=new m.Pq0,na=new m.NRn,ns=new m.iyt,nl=new m.IUQ;function nc(e,t,n){return nl.set(0,0,-t,1).applyMatrix4(e.projectionMatrix),nl.multiplyScalar(1/nl.w),nl.x=c/n.width,nl.y=c/n.height,nl.applyMatrix4(e.projectionMatrixInverse),nl.multiplyScalar(1/nl.w),Math.abs(Math.max(nl.x,nl.y))}class nu extends m.eaF{constructor(e=new t2,t=new t5({color:0xffffff*Math.random()})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){let e=this.geometry,t=e.attributes.instanceStart,n=e.attributes.instanceEnd,r=new Float32Array(2*t.count);for(let e=0,i=0,o=t.count;e<o;e++,i+=2)t8.fromBufferAttribute(t,e),t7.fromBufferAttribute(n,e),r[i]=0===i?0:r[i-1],r[i+1]=r[i]+t8.distanceTo(t7);let i=new m.LuO(r,2,1);return e.setAttribute("instanceDistanceStart",new m.eHs(i,1,0)),e.setAttribute("instanceDistanceEnd",new m.eHs(i,1,1)),this}raycast(e,t){let n,r,i=this.material.worldUnits,o=e.camera;null!==o||i||console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');let a=void 0!==e.params.Line2&&e.params.Line2.threshold||0;l=e.ray;let s=this.matrixWorld,u=this.geometry,d=this.material;if(c=d.linewidth+a,null===u.boundingSphere&&u.computeBoundingSphere(),ns.copy(u.boundingSphere).applyMatrix4(s),i)n=.5*c;else{let e=Math.max(o.near,ns.distanceToPoint(l.origin));n=nc(o,e,d.resolution)}if(ns.radius+=n,!1!==l.intersectsSphere(ns)){if(null===u.boundingBox&&u.computeBoundingBox(),na.copy(u.boundingBox).applyMatrix4(s),i)r=.5*c;else{let e=Math.max(o.near,na.distanceToPoint(l.origin));r=nc(o,e,d.resolution)}na.expandByScalar(r),!1!==l.intersectsBox(na)&&(i?function(e,t){let n=e.matrixWorld,r=e.geometry,i=r.attributes.instanceStart,o=r.attributes.instanceEnd,a=Math.min(r.instanceCount,i.count);for(let r=0;r<a;r++){ni.start.fromBufferAttribute(i,r),ni.end.fromBufferAttribute(o,r),ni.applyMatrix4(n);let a=new m.Pq0,s=new m.Pq0;l.distanceSqToSegment(ni.start,ni.end,s,a),s.distanceTo(a)<.5*c&&t.push({point:s,pointOnLine:a,distance:l.origin.distanceTo(s),object:e,face:null,faceIndex:r,uv:null,[t4]:null})}}(this,t):function(e,t,n){let r=t.projectionMatrix,i=e.material.resolution,o=e.matrixWorld,a=e.geometry,s=a.attributes.instanceStart,u=a.attributes.instanceEnd,d=Math.min(a.instanceCount,s.count),h=-t.near;l.at(1,nt),nt.w=1,nt.applyMatrix4(t.matrixWorldInverse),nt.applyMatrix4(r),nt.multiplyScalar(1/nt.w),nt.x*=i.x/2,nt.y*=i.y/2,nt.z=0,nn.copy(nt),nr.multiplyMatrices(t.matrixWorldInverse,o);for(let t=0;t<d;t++){if(t9.fromBufferAttribute(s,t),ne.fromBufferAttribute(u,t),t9.w=1,ne.w=1,t9.applyMatrix4(nr),ne.applyMatrix4(nr),t9.z>h&&ne.z>h)continue;if(t9.z>h){let e=t9.z-ne.z,t=(t9.z-h)/e;t9.lerp(ne,t)}else if(ne.z>h){let e=ne.z-t9.z,t=(ne.z-h)/e;ne.lerp(t9,t)}t9.applyMatrix4(r),ne.applyMatrix4(r),t9.multiplyScalar(1/t9.w),ne.multiplyScalar(1/ne.w),t9.x*=i.x/2,t9.y*=i.y/2,ne.x*=i.x/2,ne.y*=i.y/2,ni.start.copy(t9),ni.start.z=0,ni.end.copy(ne),ni.end.z=0;let a=ni.closestPointToPointParameter(nn,!0);ni.at(a,no);let d=m.cj9.lerp(t9.z,ne.z,a),f=d>=-1&&d<=1,p=nn.distanceTo(no)<.5*c;if(f&&p){ni.start.fromBufferAttribute(s,t),ni.end.fromBufferAttribute(u,t),ni.start.applyMatrix4(o),ni.end.applyMatrix4(o);let r=new m.Pq0,i=new m.Pq0;l.distanceSqToSegment(ni.start,ni.end,i,r),n.push({point:i,pointOnLine:r,distance:l.origin.distanceTo(i),object:e,face:null,faceIndex:t,uv:null,[t4]:null})}}}(this,o,t))}}onBeforeRender(e){let t=this.material.uniforms;t&&t.resolution&&(e.getViewport(t6),this.material.uniforms.resolution.value.set(t6.z,t6.w))}}class nd extends t2{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){let t=e.length-3,n=new Float32Array(2*t);for(let r=0;r<t;r+=3)n[2*r]=e[r],n[2*r+1]=e[r+1],n[2*r+2]=e[r+2],n[2*r+3]=e[r+3],n[2*r+4]=e[r+4],n[2*r+5]=e[r+5];return super.setPositions(n),this}setColors(e,t=3){let n=e.length-t,r=new Float32Array(2*n);if(3===t)for(let i=0;i<n;i+=t)r[2*i]=e[i],r[2*i+1]=e[i+1],r[2*i+2]=e[i+2],r[2*i+3]=e[i+3],r[2*i+4]=e[i+4],r[2*i+5]=e[i+5];else for(let i=0;i<n;i+=t)r[2*i]=e[i],r[2*i+1]=e[i+1],r[2*i+2]=e[i+2],r[2*i+3]=e[i+3],r[2*i+4]=e[i+4],r[2*i+5]=e[i+5],r[2*i+6]=e[i+6],r[2*i+7]=e[i+7];return super.setColors(r,t),this}fromLine(e){let t=e.geometry;return this.setPositions(t.attributes.position.array),this}}class nh extends nu{constructor(e=new nd,t=new t5({color:0xffffff*Math.random()})){super(e,t),this.isLine2=!0,this.type="Line2"}}let nf=f.forwardRef(function({points:e,color:t=0xffffff,vertexColors:n,linewidth:r,lineWidth:i,segments:o,dashed:a,...s},l){var c,u;let d=ey(e=>e.size),h=f.useMemo(()=>o?new nu:new nh,[o]),[p]=f.useState(()=>new t5),g=(null==n||null==(c=n[0])?void 0:c.length)===4?4:3,v=f.useMemo(()=>{let r=o?new t2:new nd,i=e.map(e=>{let t=Array.isArray(e);return e instanceof m.Pq0||e instanceof m.IUQ?[e.x,e.y,e.z]:e instanceof m.I9Y?[e.x,e.y,0]:t&&3===e.length?[e[0],e[1],e[2]]:t&&2===e.length?[e[0],e[1],0]:e});if(r.setPositions(i.flat()),n){t=0xffffff;let e=n.map(e=>e instanceof m.Q1f?e.toArray():e);r.setColors(e.flat(),g)}return r},[e,o,n,g]);return f.useLayoutEffect(()=>{h.computeLineDistances()},[e,h]),f.useLayoutEffect(()=>{a?p.defines.USE_DASH="":delete p.defines.USE_DASH,p.needsUpdate=!0},[a,p]),f.useEffect(()=>()=>{v.dispose(),p.dispose()},[v]),f.createElement("primitive",(0,tr.A)({object:h,ref:l},s),f.createElement("primitive",{object:v,attach:"geometry"}),f.createElement("primitive",(0,tr.A)({object:p,attach:"material",color:t,vertexColors:!!n,resolution:[d.width,d.height],linewidth:null!=(u=null!=r?r:i)?u:1,dashed:a,transparent:4===g},s)))}),np=f.forwardRef(({threshold:e=15,geometry:t,...n},r)=>{let i=f.useRef(null);f.useImperativeHandle(r,()=>i.current,[]);let o=f.useMemo(()=>[0,0,0,1,0,0],[]),a=f.useRef(null),s=f.useRef(null);return f.useLayoutEffect(()=>{let n=i.current.parent,r=null!=t?t:null==n?void 0:n.geometry;if(!r||a.current===r&&s.current===e)return;a.current=r,s.current=e;let o=new m.TDQ(r,e).attributes.position.array;i.current.geometry.setPositions(o),i.current.geometry.attributes.instanceStart.needsUpdate=!0,i.current.geometry.attributes.instanceEnd.needsUpdate=!0,i.current.computeLineDistances()}),f.createElement(nf,(0,tr.A)({segments:!0,points:o,ref:i,raycast:()=>null},n))}),nm=e=>"function"==typeof e,ng=f.forwardRef(({envMap:e,resolution:t=256,frames:n=1/0,children:r,makeDefault:i,...o},a)=>{let s=ey(({set:e})=>e),l=ey(({camera:e})=>e),c=ey(({size:e})=>e),u=f.useRef(null);f.useImperativeHandle(a,()=>u.current,[]);let d=f.useRef(null),h=ti(t);f.useLayoutEffect(()=>{o.manual||u.current.updateProjectionMatrix()},[c,o]),f.useLayoutEffect(()=>{u.current.updateProjectionMatrix()}),f.useLayoutEffect(()=>{if(i)return s(()=>({camera:u.current})),()=>s(()=>({camera:l}))},[u,i,s]);let p=0,m=null,g=nm(r);return ex(t=>{g&&(n===1/0||p<n)&&(d.current.visible=!1,t.gl.setRenderTarget(h),m=t.scene.background,e&&(t.scene.background=e),t.gl.render(t.scene,u.current),t.scene.background=m,t.gl.setRenderTarget(null),d.current.visible=!0,p++)}),f.createElement(f.Fragment,null,f.createElement("orthographicCamera",(0,tr.A)({left:-(c.width/2),right:c.width/2,top:c.height/2,bottom:-(c.height/2),ref:u},o),!g&&r),f.createElement("group",{ref:d},g&&r(h.texture)))}),nv=({position:e=new m.Pq0(0,0,0),fontSize:t,color:n,children:r=""})=>{let i=(0,f.useRef)(null);return ex(({camera:e})=>{i.current&&e.quaternion&&i.current.quaternion.copy(e.quaternion)}),(0,h.jsx)(tJ,{ref:i,color:n,position:e,fontSize:t,children:r})},nb=new m.Pq0,ny=({origin:e=new m.Pq0(0,0,0),direction:t=new m.Pq0(1,0,0),length:n=1,color:r,text:i})=>{let o=(0,f.useRef)(null),a=(0,f.useMemo)(()=>(0,h.jsx)("meshBasicMaterial",{color:r}),[r]),s=(0,f.useMemo)(()=>e.clone().add(t.multiplyScalar(1.2*n)),[e,t,n]);return(0,f.useEffect)(()=>{if(t.y>.99999)o.current.quaternion.set(0,0,0,1);else if(t.y<-.99999)o.current.quaternion.set(1,0,0,0);else{nb.set(t.z,0,-t.x).normalize();let e=Math.acos(t.y);o.current.quaternion.setFromAxisAngle(nb,e)}},[t]),(0,h.jsxs)("group",{type:"Arrow",children:[(0,h.jsxs)("mesh",{ref:o,position:e,children:[(0,h.jsxs)("mesh",{position:[0,n/2,0],children:[(0,h.jsx)("cylinderGeometry",{args:[.02*n,.02*n,n]}),a]}),(0,h.jsxs)("mesh",{position:[0,n,0],children:[(0,h.jsx)("coneGeometry",{args:[.2*.2*n,.2*n]}),a]})]}),i?(0,h.jsx)(nv,{position:s,fontSize:.2*n,children:i}):null]})},nx=[{name:"front",size:60,position:[0,0,30],lookAt:[0,0,1]},{name:"right",size:60,position:[30,0,0],lookAt:[1,0,0]},{name:"back",size:60,position:[0,0,-30],lookAt:[0,0,-1]},{name:"left",size:60,position:[-30,0,0],lookAt:[-1,0,0]},{name:"top",size:60,position:[0,30,0],lookAt:[0,1,0]},{name:"bottom",size:60,position:[0,-30,0],lookAt:[0,-1,0]}],nw=[{name:"topFrontRight",size:10,position:[26,26,26],lookAt:[1,1,1]},{name:"topBackRight",size:10,position:[26,26,-26],lookAt:[1,1,-1]},{name:"topBackLeft",size:10,position:[-26,26,-26],lookAt:[-1,1,-1]},{name:"topFrontLeft",size:10,position:[-26,26,26],lookAt:[-1,1,1]},{name:"bottomFrontRight",size:10,position:[26,-26,26],lookAt:[1,-1,1]},{name:"bottomBackRight",size:10,position:[26,-26,-26],lookAt:[1,-1,-1]},{name:"bottomBackLeft",size:10,position:[-26,-26,-26],lookAt:[-1,-1,-1]},{name:"bottomFrontLeft",size:10,position:[-26,-26,26],lookAt:[-1,-1,1]}],nE=[{name:"topFront",size:[25,10,10],position:[0,26,26],lookAt:[0,1,1]},{name:"topRight",size:[10,10,25],position:[26,26,0],lookAt:[1,1,0]},{name:"topBack",size:[25,10,10],position:[0,26,-26],lookAt:[0,1,-1]},{name:"topLeft",size:[10,10,25],position:[-26,26,0],lookAt:[-1,1,0]},{name:"bottomFront",size:[25,10,10],position:[0,-26,26],lookAt:[0,-1,1]},{name:"bottomRight",size:[10,10,25],position:[26,-26,0],lookAt:[1,-1,0]},{name:"bottomBack",size:[25,10,10],position:[0,-26,-26],lookAt:[0,-1,-1]},{name:"bottomLeft",size:[10,10,25],position:[-26,-26,0],lookAt:[-1,-1,0]},{name:"frontRight",size:[10,25,10],position:[26,0,26],lookAt:[1,0,1]},{name:"rightBack",size:[10,25,10],position:[26,0,-26],lookAt:[1,0,-1]},{name:"backLeft",size:[10,25,10],position:[-26,0,-26],lookAt:[-1,0,-1]},{name:"leftFront",size:[10,25,10],position:[-26,0,26],lookAt:[-1,0,1]}],nA=e=>{e.normalize();let t=e.x,n=e.y,r=e.z,i=Math.abs(t),o=Math.abs(n),a=Math.abs(r),s=[0,1,0];return i>=o&&i>=a?s=[t>0?1:-1,0,0]:o>i&&o>=a?s=[0,n>0?1:-1,0]:a>i&&a>o&&(s=[0,0,r>0?1:-1]),s},nS=(e,t,n,r)=>{let i=t.target,o=e.position.distanceTo(i),a=new m.Pq0(...n).clone().normalize().multiplyScalar(o),s=i.clone().add(a);r??=nA(e.up.clone()),e.position.copy(s),e.up.copy(new m.Pq0(...r))},nj=({name:e,size:t,position:n,lookAt:r})=>{let i=(0,f.useRef)(null),{colors:{baseColor:o}}=tY(e=>e.settings);return(0,f.useEffect)(()=>{i.current?.lookAt(new m.Pq0(...r.map(e=>600*e)))},[r]),(0,h.jsxs)("group",{name:"face",position:n,ref:i,children:[(0,h.jsxs)("mesh",{userData:{lookAt:r},children:[(0,h.jsx)("planeGeometry",{args:[t,t]}),(0,h.jsx)("meshBasicMaterial",{color:o})]}),(0,h.jsx)(tJ,{position:[0,0,1],color:0,fontSize:10,children:e.toUpperCase()})]})},nC=()=>(0,h.jsx)("group",{children:nx.map(e=>(0,h.jsx)(nj,{...e},e.name))}),nM=({size:e,position:t,lookAt:n})=>{let{colors:{baseColor:r}}=tY(e=>e.settings);return(0,h.jsx)("group",{name:"corner",position:t,children:(0,h.jsxs)("mesh",{userData:{lookAt:n},children:[(0,h.jsx)("boxGeometry",{args:[e,e,e]}),(0,h.jsx)("meshBasicMaterial",{color:r}),(0,h.jsx)(np,{lineWidth:1,color:"gray"})]})})},nk=()=>(0,h.jsx)("group",{children:nw.map(e=>(0,h.jsx)(nM,{...e},e.name))}),nT=({size:e,position:t,lookAt:n})=>{let{colors:{baseColor:r}}=tY(e=>e.settings);return(0,h.jsx)("group",{name:"corner",position:t,children:(0,h.jsxs)("mesh",{userData:{lookAt:n},children:[(0,h.jsx)("boxGeometry",{args:[...e]}),(0,h.jsx)("meshBasicMaterial",{color:r}),(0,h.jsx)(np,{lineWidth:1,color:"gray"})]})})},n_=()=>(0,h.jsx)("group",{children:nE.map(e=>(0,h.jsx)(nT,{...e},e.name))}),nP=({visible:e,forceFront:t,camera:n,controls:r})=>{let i=(0,f.useRef)(null),o=(0,f.useRef)(null),{colors:{baseColor:a,hoverColor:s}}=tY(e=>e.settings),l=(0,f.useCallback)(e=>{let t=e.object,n=e.distance;"Mesh"===t.type&&(!i.current||n<i.current)&&(t.material.color=new m.Q1f(s),i.current=n,o.current=t)},[s]),c=(0,f.useCallback)(e=>{let t=e.object;"Mesh"===t.type&&(t.material.color=new m.Q1f(a),i.current=1/0,o.current=null)},[a]),u=(0,f.useCallback)(e=>{let t=o.current?.userData.lookAt;n&&r&&t&&(nS(n,r,t),c(e))},[a,n,r,c]);return(0,f.useEffect)(()=>{t&&n&&r&&nS(n,r,[0,0,1],[0,1,0])},[t,n,r]),(0,h.jsxs)("group",{visible:e,onPointerEnter:l,onPointerDown:u,onPointerLeave:c,children:[(0,h.jsx)(nC,{}),(0,h.jsx)(nk,{}),(0,h.jsx)(n_,{})]})},nO=({origin:e,direction:t,color:n,text:r})=>{let i=(0,f.useMemo)(()=>new m.Pq0(t[0],t[1],t[2]),[t]),o=(0,f.useMemo)(()=>new m.Pq0(e[0],e[1],e[2]),[e]);return(0,h.jsx)(ny,{direction:i,origin:o,length:66,color:n,text:r})},nR=({dimension:e})=>{let t=(0,f.useMemo)(()=>35,[]),n=(0,f.useMemo)(()=>[-t,-t,-t],[]),r=(0,f.useMemo)(()=>({x:[1,0,0],y:[0,1,0],z:[0,0,1]}),[]);return(0,h.jsxs)("group",{children:[(0,h.jsx)(nO,{origin:n,direction:r.x,color:0xff0000,text:"x"}),(0,h.jsx)(nO,{origin:n,direction:r.y,color:65280,text:"y"}),3===e?(0,h.jsx)(nO,{origin:n,direction:r.z,color:255,text:"z"}):null]})},nL=({resize:e})=>{let t=(0,f.useRef)(3),{camera:n,controls:r,scene:i}=tY(e=>e.mainView),{dimension:o}=tY(e=>e.geometry),[a,s]=(0,f.useState)(!0),[l,c]=(0,f.useState)(!1),[u,d]=(0,f.useState)(1),p=(0,f.useMemo)(()=>[-4.9*u*60+60,234,120],[u]);return(0,f.useEffect)(()=>{n&&d(n.aspect)},[n,e]),ex(({camera:e})=>{n&&(e.position.set(0,0,0),e.rotation.copy(n.rotation),e.translateX(p[0]),e.translateY(p[1]),e.translateZ(p[2]))}),(0,f.useEffect)(()=>{o!==t.current&&(t.current=o,o<3?(s(!1),c(!0)):(s(!0),c(!1)))},[i?.children,i?.children.length,o]),(0,h.jsxs)("group",{type:"Navigation",children:[(0,h.jsx)(ng,{makeDefault:!0,left:-5*u*60,right:5*u*60,top:300,bottom:-300,near:-750,far:750,position:p}),(0,h.jsx)(nP,{visible:a,forceFront:l,camera:n,controls:r}),(0,h.jsx)(nR,{dimension:o})]})},nI=e=>{let t=e.min,n=e.max;return!!isFinite(t.x)&&!!isFinite(t.y)&&!!isFinite(t.z)&&!!isFinite(n.x)&&!!isFinite(n.y)&&!!isFinite(n.z)},nD=e=>{let t=new m.NRn;return(e.forEach(e=>{"Part"===e.type&&(e.geometry.computeBoundingBox(),t.expandByObject(e))}),nI(t))?t:new m.NRn(new m.Pq0(0,0,0),new m.Pq0(0,0,0))},nz=e=>1e-12>Math.abs(e)?"0":.001>Math.abs(e)||Math.abs(e)>1e3?e.toExponential(2):""+parseFloat(e.toPrecision(3)),nN=e=>e<0?-1:1,nH=e=>{let t=Math.max(...e),n=Math.max(Math.ceil(e[0]/t*5),2);return[n,Math.max(Math.ceil(e[1]/t*5),2),Math.max(Math.ceil(e[2]/t*5),2)]},nB=(e,t)=>{switch(e){case"xy":case"xz":return t[0];case"yz":return t[1]}},nF=(e,t)=>{switch(e){case"xy":return t[1];case"xz":case"yz":return t[2]}},nU=(e,t)=>{switch(e){case"xy":return t[2];case"xz":return t[1];case"yz":return t[0]}},nq=({start:e,stop:t})=>{let n=new m.LoY().setFromPoints([new m.Pq0(e[0],e[1],e[2]),new m.Pq0(t[0],t[1],t[2])]);return(0,h.jsx)("lineSegments",{geometry:n,children:(0,h.jsx)("lineBasicMaterial",{color:8947848})})},nG=({axis:e,center:t,size:n,divisions:r,offset:i})=>{let o=(0,f.useMemo)(()=>nB(e,n),[e,n]),a=(0,f.useMemo)(()=>nF(e,n),[e,n]),s=(0,f.useMemo)(()=>nU(e,n),[e,n]),l=(0,f.useMemo)(()=>new m.O9p("xy"===e?Math.PI/2:0,0,"yz"===e?-Math.PI/2:0),[e]),c=(0,f.useMemo)(()=>{switch(e){case"xy":return new m.Pq0(t[0],t[1],t[2]+i.direction*(s/2+i.value));case"xz":return new m.Pq0(t[0],t[1]+i.direction*(s/2+i.value),t[2]);case"yz":return new m.Pq0(t[0]+i.direction*(s/2+i.value),t[1],t[2])}},[s,e,t,i]),u=(0,f.useMemo)(()=>{let t=[],n=[-o/2,-a/2],i=o/(r[0]-1),s=a/(r[1]-1);for(let o=0;o<r[0];++o)t.push((0,h.jsx)(nq,{start:[n[0]+o*i,0,n[1]],stop:[n[0]+o*i,0,n[1]+a]},"line_"+e+"_"+o));for(let i=0;i<r[1];++i)t.push((0,h.jsx)(nq,{start:[n[0],0,n[1]+i*s],stop:[n[0]+o,0,n[1]+i*s]},"line_"+e+"_"+(i+r[0])));return t},[o,a,e,r]);return(0,h.jsx)("group",{position:c,rotation:l,children:u})},nV=({axis:e,center:t,size:n,range:r,division:i,offset:o})=>{let{unit:a}=tY(e=>e.unit),s=(0,f.useMemo)(()=>nB(e,n),[e,n]),l=(0,f.useMemo)(()=>nF(e,n),[e,n]),c=(0,f.useMemo)(()=>nU(e,n),[e,n]),u=(0,f.useMemo)(()=>"m"===a?1:1e3,[a]),d=(0,f.useMemo)(()=>{switch(e){case"xy":return new m.Pq0(t[0],t[1]-o.depth*(l/2+o.value),t[2]+o.direction*(c/2+o.value));case"xz":return new m.Pq0(t[0]-o.depth*(s/2+o.value),t[1]+o.direction*(c/2+o.value),t[2]);case"yz":return new m.Pq0(t[0]+o.direction*(c/2+o.value),t[1],t[2]-o.depth*(l/2+o.value))}},[s,l,c,e,t,o]),p=(0,f.useMemo)(()=>{let t=[],n=Math.abs(r[1]-r[0]),a=n/(i-1);for(let s=0;s<i;++s){let l,c=r[0]+s/(i-1)*(r[1]-r[0]);switch(e){case"xy":l=new m.Pq0(-n/2+s*a,0,0);break;case"xz":l=new m.Pq0(0,0,-n/2+s*a);break;case"yz":l=new m.Pq0(0,-n/2+s*a,0)}t.push((0,h.jsx)(nv,{position:l,fontSize:o.value/3,children:nz(u*c)},"label_"+e+"_"+s))}return t},[e,r,i,o]);return(0,h.jsx)("group",{position:d,children:p})},nW=({update:e})=>{let{camera:t,scene:n}=tY(e=>e.mainView),{grid:r}=tY(e=>e.display),{dimension:i}=tY(e=>e.geometry),[o,a]=(0,f.useState)([0,0,0]),[s,l]=(0,f.useState)([0,0,0]),[c,u]=(0,f.useState)({x:[0,0],y:[0,0],z:[0,0]}),[d,p]=(0,f.useState)(0),[g,v]=(0,f.useState)([2,2,2]),[b,y]=(0,f.useState)([0,0,0]);return(0,f.useEffect)(()=>{if(!n?.children)return;let e=nD(n.children),t=new m.Pq0;e.getCenter(t);let r=[e.max.x-e.min.x,e.max.y-e.min.y,e.max.z-e.min.z],i={x:[e.min.x,e.max.x],y:[e.min.y,e.max.y],z:[e.min.z,e.max.z]},o=.1*Math.max(...r),s=nH(r);a([t.x,t.y,t.z]),l(r),u(i),p(o),v(s)},[n?.children,n?.children.length]),(0,f.useEffect)(()=>{if(!t)return;let e=new m.Pq0;t.getWorldDirection(e),y([e.x,e.y,e.z])},[t,e]),r?(0,h.jsxs)("group",{type:"Grid",children:[(0,h.jsx)(nG,{axis:"xy",center:o,size:s,divisions:[g[0],g[1]],offset:{value:d,direction:nN(b[2])}}),(0,h.jsx)(nV,{axis:"xy",center:o,size:s,range:c.x,division:g[0],offset:{value:d,direction:nN(b[2]),depth:nN(b[1])}}),3===i?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(nG,{axis:"xz",center:o,size:s,divisions:[g[0],g[2]],offset:{value:d,direction:nN(b[1])}}),(0,h.jsx)(nV,{axis:"xz",center:o,size:s,range:c.z,division:g[2],offset:{value:d,direction:nN(b[1]),depth:nN(b[0])}})]}):null,(0,h.jsx)(nG,{axis:"yz",center:o,size:s,divisions:[g[1],g[2]],offset:{value:d,direction:nN(b[0])}}),(0,h.jsx)(nV,{axis:"yz",center:o,size:s,range:c.y,division:g[1],offset:{value:d,direction:nN(b[0]),depth:nN(b[2])}})]}):null},nX=(e,t,n,r,i)=>{let o={x:Math.abs(e.max.x-e.min.x),y:Math.abs(e.max.y-e.min.y)};if(o.x<5||o.y<5)return;let a={x:(e.max.x+e.min.x)/2,y:(e.max.y+e.min.y)/2},s=t.domElement.getBoundingClientRect(),l=a.x-s.left,c=a.y-s.top,u=new m.I9Y(l/s.width*2-1,-(2*(c/s.height))+1),d=n.filter(e=>"Part"===e.type);if(!d.length)return;let h=new m.tBo;h.setFromCamera(u,r);let f=h.intersectObjects(d);if(!(f=f.filter(e=>"LineSegments"!==e.object.type)).length)return;let p=f[0].point,g=i.target;g.copy(p);let v=new m.I9Y(o.x/s.width,o.y/s.height),b=Math.max(v.x,v.y),y=r.position.distanceTo(g),x=g.clone().sub(r.position).normalize().multiplyScalar(y*(1-b));r.position.add(x)},nY=new m.I9Y,nK=new m.I9Y,nZ=()=>{let{camera:e,controls:t,gl:n,scene:r}=tY(e=>e.mainView),i=tY(e=>e.zoomToSelection),o=(0,f.useMemo)(()=>{if(n)return n.domElement.parentElement},[n]);(0,f.useEffect)(()=>{if(o)return(u=document.createElement("div")).style.position="absolute",u.style.display="none",u.style.border="1px solid #55aaff",u.style.backgroundColor="rgba(75, 160, 255, 0.3)",u.style.pointerEvents="none",u.style.left="0",u.style.top="0",u.style.width="0",u.style.height="0",u.style.zIndex="100",o.appendChild(u),()=>{o.removeChild(u)}},[o]);let a=(0,f.useCallback)(e=>{let t=e.clientX,n=e.clientY,r=o.getBoundingClientRect(),i=t-r.left,a=n-r.top;u.style.display="block",u.style.left=i+"px",u.style.top=a+"px",u.style.width="0",u.style.height="0",nY.x=i,nY.y=a},[o]),s=(0,f.useCallback)(e=>{let t=e.clientX,n=e.clientY,r=o.getBoundingClientRect(),i=t-r.left,a=n-r.top,s=Math.max(nY.x,i),l=Math.max(nY.y,a),c=Math.min(nY.x,i),d=Math.min(nY.y,a);u.style.left=c+"px",u.style.top=d+"px",u.style.width=s-c+"px",u.style.height=l-d+"px"},[o]),l=(0,f.useCallback)(a=>{if(!n||!r?.children.length||!e||!t)return;let s=a.clientX,l=a.clientY,c=o.getBoundingClientRect(),d=s+c.left,h=l+c.top;u.style.display="none",u.style.left="0",u.style.top="0",u.style.width="0",u.style.height="0",nK.x=d,nK.y=h,nX(new m.UtB(nY,nK),n,r.children,e,t),tY.setState({zoomToSelection:{...i,enabled:!1}})},[o,e,t,n,r?.children,r?.children.length,i]);return(0,f.useEffect)(()=>{if(o&&t)return i.enabled?(t.enabled=!1,document.addEventListener("pointerdown",a),document.addEventListener("pointermove",s),document.addEventListener("pointerup",l)):(t.enabled=!0,document.removeEventListener("pointerdown",a),document.removeEventListener("pointermove",s),document.removeEventListener("pointerup",l)),()=>{document.removeEventListener("pointerdown",a),document.removeEventListener("pointermove",s),document.removeEventListener("pointerup",l)}},[o,t,i.enabled,a,s,l]),null},n$=new m.Pq0(0,0,-1),nQ=new m.Zcv,nJ={line:new m.cZY,intersection:new m.Pq0,offset:new m.Pq0,rotation:new m.O9p,pointer:new m.I9Y,controlPlane:new m.Zcv},n0={raycaster:new m.tBo,position:new m.Pq0,scale:1,controlPoint:new m.Pq0,intersection:new m.Pq0},n1={up:new m.Pq0,forward:new m.Pq0,right:new m.Pq0},n2=(e,t)=>{if(!e||!t)return{success:!1};let n=nD(t);n.getCenter(n0.position);let r=new m.Pq0;return n.getSize(r),n0.scale=1.2*Math.max(r.x,r.y,r.z),nQ.setFromNormalAndCoplanarPoint(n$,n0.position),{success:!0}},n3=(e,t,n)=>{if(!e||!t||!n)return{success:!1};nD(t).getCenter(n0.position);let r=n0.position.clone().add(e);return n.position.copy(n0.position),n.lookAt(r),nQ.setFromNormalAndCoplanarPoint(e.clone().multiplyScalar(-1),n0.position),{success:!0}},n5=(e,t)=>{if(!e||!t)return{success:!1};t.rotateX(Math.PI);let n=nQ.normal.clone().multiplyScalar(-1);return nQ.setFromNormalAndCoplanarPoint(n,t.position),{success:!0}},n4=e=>{e.getWorldDirection(n1.forward),n1.forward.normalize(),n1.up.copy(e.up).normalize(),n1.right.crossVectors(n1.up,n1.forward).normalize()},n6=(e,t,n)=>{let r=e.position;nJ.line.set(r,r.clone().add(nQ.normal)),nJ.intersection.copy(t),nJ.offset.copy(t).sub(r),nJ.rotation.copy(e.rotation),nJ.pointer.copy(n),nJ.controlPlane.setFromNormalAndCoplanarPoint(n1.forward,t)},n8=e=>{let t=n$.clone().applyQuaternion(e.quaternion);nQ.setFromNormalAndCoplanarPoint(t,e.position)},n7=(e,t,n,r,i,o)=>{if(!e&&!t||!i||!o)return{type:void 0,enabled:!1};let a=n.intersections.find(e=>e.object.visible&&("Plane"===e.object.type||"Dome"===e.object.type));if(!a)return{type:void 0,enabled:!1};o.enabled=!1;let s=a.object.type;n4(i);let l=n.pointer;return n6(r,a.point,l),{type:s,enabled:!0}},n9=(e,t,n,r,i,o)=>{if(e&&o){if("Dome"===i){let e=t.pointer;n.rotateOnWorldAxis(n1.up,-(.1*(nJ.pointer.x-e.x))),n.rotateOnWorldAxis(n1.right,-(.1*(nJ.pointer.y-e.y))),n8(n)}else if("Plane"===i){n0.raycaster.setFromCamera(t.pointer,o),n0.raycaster.ray.intersectPlane(nJ.controlPlane,n0.intersection);let e=n0.intersection.clone();e.sub(nJ.offset),nJ.line.closestPointToPoint(e,!1,n0.controlPoint),n.position.copy(n0.controlPoint),n8(n)}}},re=e=>{e&&(e.enabled=!0)},rt=()=>{let e=(0,f.useRef)(null),t=(0,f.useRef)(null),[n,r]=(0,f.useState)(),[i,o]=(0,f.useState)(),[a,s]=(0,f.useState)(!1),[l,c]=(0,f.useState)(!1),[u,d]=(0,f.useState)(!1),[p,m]=(0,f.useState)(),{camera:g,controls:v,scene:b}=tY(e=>e.mainView),y=tY(e=>e.sectionView),{colors:{hoverColor:x,selectColor:w}}=tY(e=>e.settings),E=(0,f.useCallback)(t=>{let{type:n,enabled:r}=n7(a,l,t,e.current,g,v);m(n),d(r)},[a,l,g,v]),A=(0,f.useCallback)(n=>{n9(u,n,e.current,t.current,p,g)},[u,p,g]),S=(0,f.useCallback)(()=>{d(!1),re(v)},[v]),j=(0,f.useCallback)(()=>{S()},[S]),C=(0,f.useCallback)(()=>{l||s(!0)},[l]),M=(0,f.useCallback)(()=>{s(!1)},[]),k=(0,f.useCallback)(()=>{c(!0),s(!1)},[]),T=(0,f.useCallback)(()=>{c(!1)},[]);return(0,f.useEffect)(()=>{y.clippingPlane!==nQ&&tY.setState({sectionView:{...y,clippingPlane:nQ}})},[y]),(0,f.useEffect)(()=>{let{success:e}=n2(y.enabled,b?.children);e&&(r(n0.position),o(n0.scale))},[b?.children,b?.children.length,y.enabled]),(0,f.useEffect)(()=>{let{success:t}=n3(y.snap,b?.children,e.current);t&&r(n0.position)},[b?.children,b?.children.length,y.snap]),(0,f.useEffect)(()=>{n5(y.flip,e.current)},[y.flip]),y.enabled?(0,h.jsxs)("group",{ref:e,type:"SectionView",position:n,scale:i,onPointerDown:E,onPointerMove:A,onPointerUp:S,onPointerOut:j,children:[(0,h.jsxs)("mesh",{ref:t,type:"Plane",visible:!y.hidePlane,onPointerMove:C,onPointerOut:M,children:[(0,h.jsx)("planeGeometry",{args:[1,1]}),(0,h.jsx)("meshPhysicalMaterial",{side:2,color:a?w:x,metalness:.5,roughness:.5,transparent:!0,opacity:.25})]}),(0,h.jsxs)("mesh",{type:"Dome",visible:!y.hidePlane,onPointerMove:k,onPointerOut:T,children:[(0,h.jsx)("sphereGeometry",{args:[.2,32,32,Math.PI,-Math.PI]}),(0,h.jsx)("meshPhysicalMaterial",{side:2,color:l?w:x,metalness:.5,roughness:.5,transparent:!0,opacity:.25})]})]}):null};class rn{constructor(e,t=32){this.isLut=!0,this.lut=[],this.map=[],this.n=0,this.minV=0,this.maxV=1,this.setColorMap(e,t)}set(e){return!0===e.isLut&&this.copy(e),this}setMin(e){return this.minV=e,this}setMax(e){return this.maxV=e,this}setColorMap(e,t=32){this.map=rr[e]||rr.rainbow,this.n=t;let n=1/this.n,r=new m.Q1f,i=new m.Q1f;this.lut.length=0,this.lut.push(new m.Q1f(this.map[0][1]));for(let e=1;e<t;e++){let t=e*n;for(let e=0;e<this.map.length-1;e++)if(t>this.map[e][0]&&t<=this.map[e+1][0]){let n=this.map[e][0],o=this.map[e+1][0];r.setHex(this.map[e][1],m.Zr2),i.setHex(this.map[e+1][1],m.Zr2);let a=new m.Q1f().lerpColors(r,i,(t-n)/(o-n));this.lut.push(a)}}return this.lut.push(new m.Q1f(this.map[this.map.length-1][1])),this}copy(e){return this.lut=e.lut,this.map=e.map,this.n=e.n,this.minV=e.minV,this.maxV=e.maxV,this}getColor(e){let t=Math.round((e=((e=m.cj9.clamp(e,this.minV,this.maxV))-this.minV)/(this.maxV-this.minV))*this.n);return this.lut[t]}addColorMap(e,t){return rr[e]=t,this}createCanvas(){let e=document.createElement("canvas");return e.width=1,e.height=this.n,this.updateCanvas(e),e}updateCanvas(e){let t=e.getContext("2d",{alpha:!1}),n=t.getImageData(0,0,1,this.n),r=n.data,i=0,o=1/this.n,a=new m.Q1f,s=new m.Q1f,l=new m.Q1f;for(let e=1;e>=0;e-=o)for(let t=this.map.length-1;t>=0;t--)if(e<this.map[t][0]&&e>=this.map[t-1][0]){let n=this.map[t-1][0],o=this.map[t][0];a.setHex(this.map[t-1][1],m.Zr2),s.setHex(this.map[t][1],m.Zr2),l.lerpColors(a,s,(e-n)/(o-n)),r[4*i]=Math.round(255*l.r),r[4*i+1]=Math.round(255*l.g),r[4*i+2]=Math.round(255*l.b),r[4*i+3]=255,i+=1}return t.putImageData(n,0,0),e}}let rr={rainbow:[[0,255],[.2,65535],[.5,65280],[.8,0xffff00],[1,0xff0000]],cooltowarm:[[0,3952322],[.2,0x9bbcff],[.5,0xdcdcdc],[.8,0xf6a385],[1,0xb40426]],blackbody:[[0,0],[.2,7864320],[.5,0xe63200],[.8,0xffff00],[1,0xffffff]],grayscale:[[0,0],[.2,4210752],[.5,8355712],[.8,0xbfbfbf],[1,0xffffff]]},ri=e=>{let t=1/0,n=-1/0;for(let r of e)for(let e of r.children){let r=e.userData.lut?.min,i=e.userData.lut?.max;void 0!==r&&void 0!==i&&(t=Math.min(t,r),n=Math.max(n,i))}return{min:t,max:n}},ro=(e,t,n,r)=>{let i=e.userData.data;if(!i)return;let o=new rn(t.colormap);o.setMin(t.customMin??n),o.setMax(t.customMax??r);let a=new Float32Array(3*i.count);for(let e=0;e<i.count;++e){let t=o.getColor(i.array[e]);a[3*e+0]=t.r,a[3*e+1]=t.g,a[3*e+2]=t.b}e.geometry.setAttribute("color",new m.qtW(a,3)),e.material.needsUpdate=!0},ra=()=>{let{scene:e}=tY(e=>e.mainView),t=tY(e=>e.lut);return(0,f.useEffect)(()=>{if(!e?.children.length)return;let n=e.children.filter(e=>"Part"===e.type).filter(e=>"result"===e.userData.type),{min:r,max:i}=ri(n);for(let e of((t.min!==r||t.max!==i)&&tY.setState({lut:{...t,min:r,max:i}}),n))for(let n of e.children)ro(n,t,r,i)},[e?.children,e?.children.length,JSON.stringify(t)]),null},rs=({position:e,value:t})=>(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(tJ,{position:e,color:"gray",fontSize:.4,anchorX:"center",children:nz(t)}),(0,h.jsx)(nf,{points:[[e[0],-.2,1],[e[0],.2,1]],color:"gray"})]}),rl=({resize:e})=>{let t=(0,f.useRef)(null),[n,r]=(0,f.useState)(1),{camera:i}=tY(e=>e.mainView),o=tY(e=>e.lut);(0,f.useEffect)(()=>{let e=t.current.geometry,n=new rn(o.colormap);n.setMin(-4.5),n.setMax(4.5);let r=e.getAttribute("position"),i=new Float32Array(r.count*r.itemSize);for(let e=0;e<r.count;++e){let t=n.getColor(r.array[3*e+0]);i[3*e+0]=t.r,i[3*e+1]=t.g,i[3*e+2]=t.b}t.current.geometry.setAttribute("color",new m.qtW(i,3))},[o.colormap]),(0,f.useEffect)(()=>{i&&r(i.aspect)},[i,e]);let a=(0,f.useMemo)(()=>[0,-9.25,0],[]),s=(0,f.useMemo)(()=>{let e=o.customMin??o.min;return e===1/0?-1:e},[o.min,o.customMin]),l=(0,f.useMemo)(()=>{let e=o.customMax??o.max;return e===-1/0?1:e},[o.max,o.customMax]),c=(0,f.useMemo)(()=>l-s,[s,l]);return(0,h.jsxs)("group",{type:"Colorbar",children:[(0,h.jsx)(ng,{makeDefault:!0,left:-(10*n),right:10*n,top:10,bottom:-10,near:-10,far:10,position:a}),(0,h.jsxs)("mesh",{ref:t,children:[(0,h.jsx)("boxGeometry",{args:[9,.5,1,10]}),(0,h.jsx)("meshBasicMaterial",{vertexColors:!0})]}),(0,h.jsx)(rs,{position:[-4.5,.4,1],value:s}),(0,h.jsx)(rs,{position:[-2.25,.4,1],value:s+c/4}),(0,h.jsx)(rs,{position:[0,.4,1],value:s+c/2}),(0,h.jsx)(rs,{position:[2.25,.4,1],value:s+3*c/4}),(0,h.jsx)(rs,{position:[4.5,.4,1],value:l})]})},rc=({update:e})=>{let[t,n]=(0,f.useState)(),[r,i]=(0,f.useState)(),{camera:o,controls:a}=tY(e=>e.mainView),s=tY(e=>e.settings);return(0,f.useEffect)(()=>{if(!o||!a)return;let e=o.position.clone(),t=o.up.clone().normalize(),r=a.target.clone().sub(e).normalize(),s=e.clone().add(r.clone().cross(t)).multiplyScalar(.9),l=e.clone().sub(r.clone().cross(t)).multiplyScalar(.9);n(s),i(l)},[o,a,e]),(0,h.jsxs)("group",{type:"Light",children:[(0,h.jsx)("ambientLight",{}),(0,h.jsx)("pointLight",{position:t,color:s.light.color,intensity:s.light.intensity,decay:s.light.decay}),(0,h.jsx)("pointLight",{position:r,color:s.light.color,intensity:s.light.intensity,decay:s.light.decay})]})};function ru(e,t){let n=e+"Geometry";return f.forwardRef(({args:e,children:r,...i},o)=>{let a=f.useRef(null);return f.useImperativeHandle(o,()=>a.current),f.useLayoutEffect(()=>void(null==t||t(a.current))),f.createElement("mesh",(0,tr.A)({ref:a},i),f.createElement(n,{attach:"geometry",args:e}),r)})}let rd=ru("box"),rh=ru("cylinder"),rf=ru("sphere"),rp=ru("tetrahedron"),rm=e=>{let t=e.max.x-e.min.x,n=e.max.y-e.min.y,r=e.max.z-e.min.z;return[(0,h.jsx)(nf,{points:[[-t/2,0,0],[t/2,0,0]],segments:!0,color:0xff0000},"x"),(0,h.jsx)(nf,{points:[[0,-n/2,0],[0,n/2,0]],segments:!0,color:0xff0000},"y"),(0,h.jsx)(nf,{points:[[0,0,-r/2],[0,0,r/2]],segments:!0,color:0xff0000},"z")]},rg=e=>{let t=new m.iyt;e.getBoundingSphere(t);let n=t.radius/100;return(0,h.jsx)(rf,{args:[n],children:(0,h.jsx)("meshStandardMaterial",{color:0xff0000})})},rv=()=>{let[e,t]=(0,f.useState)([]),[n,r]=(0,f.useState)(null),{selection:i}=tY(e=>e.props),{scene:o}=tY(e=>e.mainView),a=(0,f.useMemo)(()=>{let e=i?.point;return e?[e.x,e.y,e.z]:[0,0,0]},[i?.point]);return(0,f.useEffect)(()=>{if(!o?.children.length)return;let e=nD(o.children);t(rm(e)),r(rg(e))},[o?.children,o?.children.length]),(0,h.jsxs)("group",{type:"Point",visible:!!i?.point,position:a,children:[e,n]})},rb=()=>{let e=(0,f.useMemo)(()=>(0,h.jsx)("meshPhysicalMaterial",{side:2,color:"orange"}),[]),t=(0,f.useMemo)(()=>(0,h.jsx)("meshPhysicalMaterial",{side:2,color:"white"}),[]);return(0,h.jsxs)("mesh",{scale:.1,children:[(0,h.jsx)(rh,{args:[0,1,3,32,1,!0],position:[0,10.5,0],children:e}),(0,h.jsx)(rh,{args:[1,1.5,1.5,32,1,!0],position:[0,8.25,0],children:t}),(0,h.jsx)(rh,{args:[1.5,2,1.5,32,1,!0],position:[0,6.75,0],children:e}),(0,h.jsx)(rh,{args:[2,2.5,1.5,32,1,!0],position:[0,5.25,0],children:t}),(0,h.jsx)(rh,{args:[2.5,5.5,9,32,1,!0],position:[0,0,0],children:e}),(0,h.jsx)(rd,{args:[15,.25,15,32,1],position:[0,-4.625,0],children:e})]})},ry=({width:e,height:t})=>{let n=(0,f.useRef)(null),r=(0,f.useRef)(1),i=(0,f.useRef)(1),{sizeFactor:o,positionFactor:a,rotationFactor:s,colorFactor:l,transparencyFactor:c,opacityFactor:u}=(0,f.useMemo)(()=>({sizeFactor:Math.random(),positionFactor:{x:Math.random(),y:Math.random()},rotationFactor:{x:Math.random(),y:Math.random(),z:Math.random()},colorFactor:Math.random(),transparencyFactor:Math.random(),opacityFactor:Math.random()}),[]),d=(0,f.useMemo)(()=>({x:Math.random(),y:Math.random()}),[]),p=(0,f.useMemo)(()=>({x:Math.random(),y:Math.random(),z:Math.random()}),[]);return ex(()=>{let o=n.current;(o.position.x<-e/2||o.position.x>e/2)&&(r.current*=-1),o.position.x+=.025*r.current*(d.x-.5),(o.position.y<-t/2||o.position.y>t/2)&&(i.current*=-1),o.position.y+=.025*i.current*(d.y-.5),o.rotation.x+=.025*(p.x-.5),o.rotation.y+=.025*(p.y-.5),o.rotation.z+=.025*(p.z-.5)}),(0,h.jsx)(rp,{ref:n,args:[.1+.075*(.5-o)],position:[e/3*(1-2*a.x),t/3*(1-2*a.y),0],rotation:[s.x*Math.PI,s.y*Math.PI,s.y*Math.PI],children:(0,h.jsx)("meshPhysicalMaterial",{color:38599*l+(1-l)*0xbbbbbb,wireframe:!0,transparent:c>.5,opacity:u})})},rx=()=>{let{camera:e}=tY(e=>e.mainView),{width:t,height:n}=(0,f.useMemo)(()=>{if(!e)return{width:1,height:1};let t=e.position.z,n=2*Math.tan(e.fov*Math.PI/180/2)*t;return{width:n*e.aspect,height:n}},[e]),r=(0,f.useMemo)(()=>{let e=[];for(let r=0;r<50;++r)e.push((0,h.jsx)(ry,{width:t,height:n},"tetra_"+r));return e},[t,n]);return(0,h.jsx)("mesh",{children:r})};var rw=n(82909);function rE(e,t){if(t===m.RJ4)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t!==m.rYR&&t!==m.O49)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e;{let n=e.getIndex();if(null===n){let t=[],r=e.getAttribute("position");if(void 0===r)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<r.count;e++)t.push(e);e.setIndex(t),n=e.getIndex()}let r=n.count-2,i=[];if(t===m.rYR)for(let e=1;e<=r;e++)i.push(n.getX(0)),i.push(n.getX(e)),i.push(n.getX(e+1));else for(let e=0;e<r;e++)e%2==0?(i.push(n.getX(e)),i.push(n.getX(e+1)),i.push(n.getX(e+2))):(i.push(n.getX(e+2)),i.push(n.getX(e+1)),i.push(n.getX(e)));i.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");let o=e.clone();return o.setIndex(i),o.clearGroups(),o}}class rA extends m.aHM{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new rT(e)}),this.register(function(e){return new r_(e)}),this.register(function(e){return new rH(e)}),this.register(function(e){return new rB(e)}),this.register(function(e){return new rF(e)}),this.register(function(e){return new rO(e)}),this.register(function(e){return new rR(e)}),this.register(function(e){return new rL(e)}),this.register(function(e){return new rI(e)}),this.register(function(e){return new rk(e)}),this.register(function(e){return new rD(e)}),this.register(function(e){return new rP(e)}),this.register(function(e){return new rN(e)}),this.register(function(e){return new rz(e)}),this.register(function(e){return new rC(e)}),this.register(function(e){return new rU(e)}),this.register(function(e){return new rq(e)})}load(e,t,n,r){let i,o=this;if(""!==this.resourcePath)i=this.resourcePath;else if(""!==this.path){let t=m.r6x.extractUrlBase(e);i=m.r6x.resolveURL(t,this.path)}else i=m.r6x.extractUrlBase(e);this.manager.itemStart(e);let a=function(t){r?r(t):console.error(t),o.manager.itemError(e),o.manager.itemEnd(e)},s=new m.Y9S(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(n){try{o.parse(n,i,function(n){t(n),o.manager.itemEnd(e)},a)}catch(e){a(e)}},n,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return -1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return -1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let i,o={},a={},s=new TextDecoder;if("string"==typeof e)i=JSON.parse(e);else if(e instanceof ArrayBuffer)if(s.decode(new Uint8Array(e,0,4))===rG){try{o[rj.KHR_BINARY_GLTF]=new rW(e)}catch(e){r&&r(e);return}i=JSON.parse(o[rj.KHR_BINARY_GLTF].content)}else i=JSON.parse(s.decode(e));else i=e;if(void 0===i.asset||i.asset.version[0]<2){r&&r(Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}let l=new ii(i,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let e=0;e<this.pluginCallbacks.length;e++){let t=this.pluginCallbacks[e](l);t.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[t.name]=t,o[t.name]=!0}if(i.extensionsUsed)for(let e=0;e<i.extensionsUsed.length;++e){let t=i.extensionsUsed[e],n=i.extensionsRequired||[];switch(t){case rj.KHR_MATERIALS_UNLIT:o[t]=new rM;break;case rj.KHR_DRACO_MESH_COMPRESSION:o[t]=new rX(i,this.dracoLoader);break;case rj.KHR_TEXTURE_TRANSFORM:o[t]=new rY;break;case rj.KHR_MESH_QUANTIZATION:o[t]=new rK;break;default:n.indexOf(t)>=0&&void 0===a[t]&&console.warn('THREE.GLTFLoader: Unknown extension "'+t+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(n,r)}parseAsync(e,t){let n=this;return new Promise(function(r,i){n.parse(e,t,r,i)})}}function rS(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}let rj={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class rC{constructor(e){this.parser=e,this.name=rj.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){let e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){let r=t[n];r.extensions&&r.extensions[this.name]&&void 0!==r.extensions[this.name].light&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){let t,n=this.parser,r="light:"+e,i=n.cache.get(r);if(i)return i;let o=n.json,a=((o.extensions&&o.extensions[this.name]||{}).lights||[])[e],s=new m.Q1f(0xffffff);void 0!==a.color&&s.setRGB(a.color[0],a.color[1],a.color[2],m.Zr2);let l=void 0!==a.range?a.range:0;switch(a.type){case"directional":(t=new m.ZyN(s)).target.position.set(0,0,-1),t.add(t.target);break;case"point":(t=new m.HiM(s)).distance=l;break;case"spot":(t=new m.nCl(s)).distance=l,a.spot=a.spot||{},a.spot.innerConeAngle=void 0!==a.spot.innerConeAngle?a.spot.innerConeAngle:0,a.spot.outerConeAngle=void 0!==a.spot.outerConeAngle?a.spot.outerConeAngle:Math.PI/4,t.angle=a.spot.outerConeAngle,t.penumbra=1-a.spot.innerConeAngle/a.spot.outerConeAngle,t.target.position.set(0,0,-1),t.add(t.target);break;default:throw Error("THREE.GLTFLoader: Unexpected light type: "+a.type)}return t.position.set(0,0,0),r9(t,a),void 0!==a.intensity&&(t.intensity=a.intensity),t.name=n.createUniqueName(a.name||"light_"+e),i=Promise.resolve(t),n.cache.add(r,i),i}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){let t=this,n=this.parser,r=n.json.nodes[e],i=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then(function(e){return n._getNodeRef(t.cache,i,e)})}}class rM{constructor(){this.name=rj.KHR_MATERIALS_UNLIT}getMaterialType(){return m.V9B}extendParams(e,t,n){let r=[];e.color=new m.Q1f(1,1,1),e.opacity=1;let i=t.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){let t=i.baseColorFactor;e.color.setRGB(t[0],t[1],t[2],m.Zr2),e.opacity=t[3]}void 0!==i.baseColorTexture&&r.push(n.assignTexture(e,"map",i.baseColorTexture,m.er$))}return Promise.all(r)}}class rk{constructor(e){this.parser=e,this.name=rj.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){let n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();let r=n.extensions[this.name].emissiveStrength;return void 0!==r&&(t.emissiveIntensity=r),Promise.resolve()}}class rT{constructor(e){this.parser=e,this.name=rj.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?m.uSd:null}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let i=[],o=r.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&i.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&i.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(i.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){let e=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new m.I9Y(e,e)}return Promise.all(i)}}class r_{constructor(e){this.parser=e,this.name=rj.KHR_MATERIALS_DISPERSION}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?m.uSd:null}extendMaterialParams(e,t){let n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();let r=n.extensions[this.name];return t.dispersion=void 0!==r.dispersion?r.dispersion:0,Promise.resolve()}}class rP{constructor(e){this.parser=e,this.name=rj.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?m.uSd:null}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let i=[],o=r.extensions[this.name];return void 0!==o.iridescenceFactor&&(t.iridescence=o.iridescenceFactor),void 0!==o.iridescenceTexture&&i.push(n.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),void 0!==o.iridescenceIor&&(t.iridescenceIOR=o.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==o.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),void 0!==o.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),void 0!==o.iridescenceThicknessTexture&&i.push(n.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(i)}}class rO{constructor(e){this.parser=e,this.name=rj.KHR_MATERIALS_SHEEN}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?m.uSd:null}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let i=[];t.sheenColor=new m.Q1f(0,0,0),t.sheenRoughness=0,t.sheen=1;let o=r.extensions[this.name];if(void 0!==o.sheenColorFactor){let e=o.sheenColorFactor;t.sheenColor.setRGB(e[0],e[1],e[2],m.Zr2)}return void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&i.push(n.assignTexture(t,"sheenColorMap",o.sheenColorTexture,m.er$)),void 0!==o.sheenRoughnessTexture&&i.push(n.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(i)}}class rR{constructor(e){this.parser=e,this.name=rj.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?m.uSd:null}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let i=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&i.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(i)}}class rL{constructor(e){this.parser=e,this.name=rj.KHR_MATERIALS_VOLUME}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?m.uSd:null}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let i=[],o=r.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&i.push(n.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;let a=o.attenuationColor||[1,1,1];return t.attenuationColor=new m.Q1f().setRGB(a[0],a[1],a[2],m.Zr2),Promise.all(i)}}class rI{constructor(e){this.parser=e,this.name=rj.KHR_MATERIALS_IOR}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?m.uSd:null}extendMaterialParams(e,t){let n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();let r=n.extensions[this.name];return t.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}class rD{constructor(e){this.parser=e,this.name=rj.KHR_MATERIALS_SPECULAR}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?m.uSd:null}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let i=[],o=r.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&i.push(n.assignTexture(t,"specularIntensityMap",o.specularTexture));let a=o.specularColorFactor||[1,1,1];return t.specularColor=new m.Q1f().setRGB(a[0],a[1],a[2],m.Zr2),void 0!==o.specularColorTexture&&i.push(n.assignTexture(t,"specularColorMap",o.specularColorTexture,m.er$)),Promise.all(i)}}class rz{constructor(e){this.parser=e,this.name=rj.EXT_MATERIALS_BUMP}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?m.uSd:null}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let i=[],o=r.extensions[this.name];return t.bumpScale=void 0!==o.bumpFactor?o.bumpFactor:1,void 0!==o.bumpTexture&&i.push(n.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(i)}}class rN{constructor(e){this.parser=e,this.name=rj.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?m.uSd:null}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let i=[],o=r.extensions[this.name];return void 0!==o.anisotropyStrength&&(t.anisotropy=o.anisotropyStrength),void 0!==o.anisotropyRotation&&(t.anisotropyRotation=o.anisotropyRotation),void 0!==o.anisotropyTexture&&i.push(n.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(i)}}class rH{constructor(e){this.parser=e,this.name=rj.KHR_TEXTURE_BASISU}loadTexture(e){let t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;let i=r.extensions[this.name],o=t.options.ktx2Loader;if(!o)if(!(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0))return null;else throw Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return t.loadTextureImage(e,i.source,o)}}class rB{constructor(e){this.parser=e,this.name=rj.EXT_TEXTURE_WEBP}loadTexture(e){let t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;let o=i.extensions[t],a=r.images[o.source],s=n.textureLoader;if(a.uri){let e=n.options.manager.getHandler(a.uri);null!==e&&(s=e)}return n.loadTextureImage(e,o.source,s)}}class rF{constructor(e){this.parser=e,this.name=rj.EXT_TEXTURE_AVIF}loadTexture(e){let t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;let o=i.extensions[t],a=r.images[o.source],s=n.textureLoader;if(a.uri){let e=n.options.manager.getHandler(a.uri);null!==e&&(s=e)}return n.loadTextureImage(e,o.source,s)}}class rU{constructor(e){this.name=rj.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){let t=this.parser.json,n=t.bufferViews[e];if(!n.extensions||!n.extensions[this.name])return null;{let e=n.extensions[this.name],r=this.parser.getDependency("buffer",e.buffer),i=this.parser.options.meshoptDecoder;if(!i||!i.supported)if(!(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0))return null;else throw Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return r.then(function(t){let n=e.byteOffset||0,r=e.byteLength||0,o=e.count,a=e.byteStride,s=new Uint8Array(t,n,r);return i.decodeGltfBufferAsync?i.decodeGltfBufferAsync(o,a,s,e.mode,e.filter).then(function(e){return e.buffer}):i.ready.then(function(){let t=new ArrayBuffer(o*a);return i.decodeGltfBuffer(new Uint8Array(t),o,a,s,e.mode,e.filter),t})})}}}class rq{constructor(e){this.name=rj.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){let t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;for(let e of t.meshes[n.mesh].primitives)if(e.mode!==rJ.TRIANGLES&&e.mode!==rJ.TRIANGLE_STRIP&&e.mode!==rJ.TRIANGLE_FAN&&void 0!==e.mode)return null;let r=n.extensions[this.name].attributes,i=[],o={};for(let e in r)i.push(this.parser.getDependency("accessor",r[e]).then(t=>(o[e]=t,o[e])));return i.length<1?null:(i.push(this.parser.createNodeMesh(e)),Promise.all(i).then(e=>{let t=e.pop(),n=t.isGroup?t.children:[t],r=e[0].count,i=[];for(let e of n){let t=new m.kn4,n=new m.Pq0,a=new m.PTz,s=new m.Pq0(1,1,1),l=new m.ZLX(e.geometry,e.material,r);for(let e=0;e<r;e++)o.TRANSLATION&&n.fromBufferAttribute(o.TRANSLATION,e),o.ROTATION&&a.fromBufferAttribute(o.ROTATION,e),o.SCALE&&s.fromBufferAttribute(o.SCALE,e),l.setMatrixAt(e,t.compose(n,a,s));for(let t in o)if("_COLOR_0"===t){let e=o[t];l.instanceColor=new m.uWO(e.array,e.itemSize,e.normalized)}else"TRANSLATION"!==t&&"ROTATION"!==t&&"SCALE"!==t&&e.geometry.setAttribute(t,o[t]);m.B69.prototype.copy.call(l,e),this.parser.assignFinalMaterial(l),i.push(l)}return t.isGroup?(t.clear(),t.add(...i),t):i[0]}))}}let rG="glTF",rV={JSON:0x4e4f534a,BIN:5130562};class rW{constructor(e){this.name=rj.KHR_BINARY_GLTF,this.content=null,this.body=null;let t=new DataView(e,0,12),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==rG)throw Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw Error("THREE.GLTFLoader: Legacy binary file detected.");let r=this.header.length-12,i=new DataView(e,12),o=0;for(;o<r;){let t=i.getUint32(o,!0);o+=4;let r=i.getUint32(o,!0);if(o+=4,r===rV.JSON){let r=new Uint8Array(e,12+o,t);this.content=n.decode(r)}else if(r===rV.BIN){let n=12+o;this.body=e.slice(n,n+t)}o+=t}if(null===this.content)throw Error("THREE.GLTFLoader: JSON content not found.")}}class rX{constructor(e,t){if(!t)throw Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=rj.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){let n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},s={},l={};for(let e in o)a[r5[e]||e.toLowerCase()]=o[e];for(let t in e.attributes){let r=r5[t]||t.toLowerCase();if(void 0!==o[t]){let i=n.accessors[e.attributes[t]],o=r0[i.componentType];l[r]=o.name,s[r]=!0===i.normalized}}return t.getDependency("bufferView",i).then(function(e){return new Promise(function(t,n){r.decodeDracoFile(e,function(e){for(let t in e.attributes){let n=e.attributes[t],r=s[t];void 0!==r&&(n.normalized=r)}t(e)},a,l,m.Zr2,n)})})}}class rY{constructor(){this.name=rj.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(void 0===t.texCoord||t.texCoord===e.channel)&&void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class rK{constructor(){this.name=rj.KHR_MESH_QUANTIZATION}}class rZ extends m.lGw{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){let t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r;for(let e=0;e!==r;e++)t[e]=n[i+e];return t}interpolate_(e,t,n,r){let i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=2*a,l=3*a,c=r-t,u=(n-t)/c,d=u*u,h=d*u,f=e*l,p=f-l,m=-2*h+3*d,g=h-d,v=1-m,b=g-d+u;for(let e=0;e!==a;e++){let t=o[p+e+a],n=o[p+e+s]*c,r=o[f+e+a],l=o[f+e]*c;i[e]=v*t+b*n+m*r+g*l}return i}}let r$=new m.PTz;class rQ extends rZ{interpolate_(e,t,n,r){let i=super.interpolate_(e,t,n,r);return r$.fromArray(i).normalize().toArray(i),i}}let rJ={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},r0={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},r1={9728:m.hxR,9729:m.k6q,9984:m.pHI,9985:m.kRr,9986:m.Cfg,9987:m.$_I},r2={33071:m.ghU,33648:m.kTW,10497:m.GJx},r3={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},r5={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},r4={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},r6={CUBICSPLINE:void 0,LINEAR:m.PJ3,STEP:m.ljd},r8={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function r7(e,t,n){for(let r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function r9(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function ie(e){let t="",n=Object.keys(e).sort();for(let r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function it(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}let ir=new m.kn4;class ii{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new rS,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=-1,i=!1,o=-1;if("undefined"!=typeof navigator){let e=navigator.userAgent;n=!0===/^((?!chrome|android).)*safari/i.test(e);let t=e.match(/Version\/(\d+)/);r=n&&t?parseInt(t[1],10):-1,o=(i=e.indexOf("Firefox")>-1)?e.match(/Firefox\/([0-9]+)\./)[1]:-1}"undefined"==typeof createImageBitmap||n&&r<17||i&&o<98?this.textureLoader=new m.Tap(this.options.manager):this.textureLoader=new m.Kzg(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new m.Y9S(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){let n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(e){return e._markDefs&&e._markDefs()}),Promise.all(this._invokeAll(function(e){return e.beforeRoot&&e.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(t){let o={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};return r7(i,o,r),r9(o,r),Promise.all(n._invokeAll(function(e){return e.afterRoot&&e.afterRoot(o)})).then(function(){for(let e of o.scenes)e.updateMatrixWorld();e(o)})}).catch(t)}_markDefs(){let e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let n=0,r=t.length;n<r;n++){let r=t[n].joints;for(let t=0,n=r.length;t<n;t++)e[r[t]].isBone=!0}for(let t=0,r=e.length;t<r;t++){let r=e[t];void 0!==r.mesh&&(this._addNodeRef(this.meshCache,r.mesh),void 0!==r.skin&&(n[r.mesh].isSkinnedMesh=!0)),void 0!==r.camera&&this._addNodeRef(this.cameraCache,r.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;let r=n.clone(),i=(e,t)=>{let n=this.associations.get(e);for(let[r,o]of(null!=n&&this.associations.set(t,n),e.children.entries()))i(o,t.children[r])};return i(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){let t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){let r=e(t[n]);if(r)return r}return null}_invokeAll(e){let t=Object.values(this.plugins);t.unshift(this);let n=[];for(let r=0;r<t.length;r++){let i=e(t[r]);i&&n.push(i)}return n}getDependency(e,t){let n=e+":"+t,r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(e){return e.loadNode&&e.loadNode(t)});break;case"mesh":r=this._invokeOne(function(e){return e.loadMesh&&e.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(e){return e.loadBufferView&&e.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(e){return e.loadMaterial&&e.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(e){return e.loadTexture&&e.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(e){return e.loadAnimation&&e.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(!(r=this._invokeOne(function(n){return n!=this&&n.getDependency&&n.getDependency(e,t)})))throw Error("Unknown type: "+e)}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){let n=this;t=Promise.all((this.json[e+("mesh"===e?"es":"s")]||[]).map(function(t,r){return n.getDependency(e,r)})),this.cache.add(e,t)}return t}loadBuffer(e){let t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[rj.KHR_BINARY_GLTF].body);let r=this.options;return new Promise(function(e,i){n.load(m.r6x.resolveURL(t.uri,r.path),e,void 0,function(){i(Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){let t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(e){let n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)})}loadAccessor(e){let t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse){let e=r3[r.type],t=r0[r.componentType],n=!0===r.normalized,i=new t(r.count*e);return Promise.resolve(new m.THS(i,e,n))}let i=[];return void 0!==r.bufferView?i.push(this.getDependency("bufferView",r.bufferView)):i.push(null),void 0!==r.sparse&&(i.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(i).then(function(e){let i,o,a=e[0],s=r3[r.type],l=r0[r.componentType],c=l.BYTES_PER_ELEMENT,u=c*s,d=r.byteOffset||0,h=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,f=!0===r.normalized;if(h&&h!==u){let e=Math.floor(d/h),n="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+e+":"+r.count,u=t.cache.get(n);u||(i=new l(a,e*h,r.count*h/c),u=new m.eB$(i,h/c),t.cache.add(n,u)),o=new m.eHs(u,s,d%h/c,f)}else i=null===a?new l(r.count*s):new l(a,d,r.count*s),o=new m.THS(i,s,f);if(void 0!==r.sparse){let t=r3.SCALAR,n=r0[r.sparse.indices.componentType],i=r.sparse.indices.byteOffset||0,c=r.sparse.values.byteOffset||0,u=new n(e[1],i,r.sparse.count*t),d=new l(e[2],c,r.sparse.count*s);null!==a&&(o=new m.THS(o.array.slice(),o.itemSize,o.normalized)),o.normalized=!1;for(let e=0,t=u.length;e<t;e++){let t=u[e];if(o.setX(t,d[e*s]),s>=2&&o.setY(t,d[e*s+1]),s>=3&&o.setZ(t,d[e*s+2]),s>=4&&o.setW(t,d[e*s+3]),s>=5)throw Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}o.normalized=f}return o})}loadTexture(e){let t=this.json,n=this.options,r=t.textures[e].source,i=t.images[r],o=this.textureLoader;if(i.uri){let e=n.manager.getHandler(i.uri);null!==e&&(o=e)}return this.loadTextureImage(e,r,o)}loadTextureImage(e,t,n){let r=this,i=this.json,o=i.textures[e],a=i.images[t],s=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[s])return this.textureCache[s];let l=this.loadImageSource(t,n).then(function(t){t.flipY=!1,t.name=o.name||a.name||"",""===t.name&&"string"==typeof a.uri&&!1===a.uri.startsWith("data:image/")&&(t.name=a.uri);let n=(i.samplers||{})[o.sampler]||{};return t.magFilter=r1[n.magFilter]||m.k6q,t.minFilter=r1[n.minFilter]||m.$_I,t.wrapS=r2[n.wrapS]||m.GJx,t.wrapT=r2[n.wrapT]||m.GJx,t.generateMipmaps=!t.isCompressedTexture&&t.minFilter!==m.hxR&&t.minFilter!==m.k6q,r.associations.set(t,{textures:e}),t}).catch(function(){return null});return this.textureCache[s]=l,l}loadImageSource(e,t){let n=this.json,r=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(e=>e.clone());let i=n.images[e],o=self.URL||self.webkitURL,a=i.uri||"",s=!1;if(void 0!==i.bufferView)a=this.getDependency("bufferView",i.bufferView).then(function(e){s=!0;let t=new Blob([e],{type:i.mimeType});return a=o.createObjectURL(t)});else if(void 0===i.uri)throw Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");let l=Promise.resolve(a).then(function(e){return new Promise(function(n,i){let o=n;!0===t.isImageBitmapLoader&&(o=function(e){let t=new m.gPd(e);t.needsUpdate=!0,n(t)}),t.load(m.r6x.resolveURL(e,r.path),o,void 0,i)})}).then(function(e){var t;return!0===s&&o.revokeObjectURL(a),r9(e,i),e.userData.mimeType=i.mimeType||((t=i.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":t.search(/\.ktx2($|\?)/i)>0||0===t.search(/^data\:image\/ktx2/)?"image/ktx2":"image/png"),e}).catch(function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",a),e});return this.sourceCache[e]=l,l}assignTexture(e,t,n,r){let i=this;return this.getDependency("texture",n.index).then(function(o){if(!o)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((o=o.clone()).channel=n.texCoord),i.extensions[rj.KHR_TEXTURE_TRANSFORM]){let e=void 0!==n.extensions?n.extensions[rj.KHR_TEXTURE_TRANSFORM]:void 0;if(e){let t=i.associations.get(o);o=i.extensions[rj.KHR_TEXTURE_TRANSFORM].extendTexture(o,e),i.associations.set(o,t)}}return void 0!==r&&(o.colorSpace=r),e[t]=o,o})}assignFinalMaterial(e){let t=e.geometry,n=e.material,r=void 0===t.attributes.tangent,i=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){let e="PointsMaterial:"+n.uuid,t=this.cache.get(e);t||(t=new m.BH$,m.imn.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,t.sizeAttenuation=!1,this.cache.add(e,t)),n=t}else if(e.isLine){let e="LineBasicMaterial:"+n.uuid,t=this.cache.get(e);t||(t=new m.mrM,m.imn.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,this.cache.add(e,t)),n=t}if(r||i||o){let e="ClonedMaterial:"+n.uuid+":";r&&(e+="derivative-tangents:"),i&&(e+="vertex-colors:"),o&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=n.clone(),i&&(t.vertexColors=!0),o&&(t.flatShading=!0),r&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(n))),n=t}e.material=n}getMaterialType(){return m._4j}loadMaterial(e){let t,n=this,r=this.json,i=this.extensions,o=r.materials[e],a={},s=o.extensions||{},l=[];if(s[rj.KHR_MATERIALS_UNLIT]){let e=i[rj.KHR_MATERIALS_UNLIT];t=e.getMaterialType(),l.push(e.extendParams(a,o,n))}else{let r=o.pbrMetallicRoughness||{};if(a.color=new m.Q1f(1,1,1),a.opacity=1,Array.isArray(r.baseColorFactor)){let e=r.baseColorFactor;a.color.setRGB(e[0],e[1],e[2],m.Zr2),a.opacity=e[3]}void 0!==r.baseColorTexture&&l.push(n.assignTexture(a,"map",r.baseColorTexture,m.er$)),a.metalness=void 0!==r.metallicFactor?r.metallicFactor:1,a.roughness=void 0!==r.roughnessFactor?r.roughnessFactor:1,void 0!==r.metallicRoughnessTexture&&(l.push(n.assignTexture(a,"metalnessMap",r.metallicRoughnessTexture)),l.push(n.assignTexture(a,"roughnessMap",r.metallicRoughnessTexture))),t=this._invokeOne(function(t){return t.getMaterialType&&t.getMaterialType(e)}),l.push(Promise.all(this._invokeAll(function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,a)})))}!0===o.doubleSided&&(a.side=m.$EB);let c=o.alphaMode||r8.OPAQUE;if(c===r8.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,c===r8.MASK&&(a.alphaTest=void 0!==o.alphaCutoff?o.alphaCutoff:.5)),void 0!==o.normalTexture&&t!==m.V9B&&(l.push(n.assignTexture(a,"normalMap",o.normalTexture)),a.normalScale=new m.I9Y(1,1),void 0!==o.normalTexture.scale)){let e=o.normalTexture.scale;a.normalScale.set(e,e)}if(void 0!==o.occlusionTexture&&t!==m.V9B&&(l.push(n.assignTexture(a,"aoMap",o.occlusionTexture)),void 0!==o.occlusionTexture.strength&&(a.aoMapIntensity=o.occlusionTexture.strength)),void 0!==o.emissiveFactor&&t!==m.V9B){let e=o.emissiveFactor;a.emissive=new m.Q1f().setRGB(e[0],e[1],e[2],m.Zr2)}return void 0!==o.emissiveTexture&&t!==m.V9B&&l.push(n.assignTexture(a,"emissiveMap",o.emissiveTexture,m.er$)),Promise.all(l).then(function(){let r=new t(a);return o.name&&(r.name=o.name),r9(r,o),n.associations.set(r,{materials:e}),o.extensions&&r7(i,r,o),r})}createUniqueName(e){let t=m.Nwf.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){let t=this,n=this.extensions,r=this.primitiveCache,i=[];for(let o=0,a=e.length;o<a;o++){let a=e[o],s=function(e){let t,n=e.extensions&&e.extensions[rj.KHR_DRACO_MESH_COMPRESSION];if(t=n?"draco:"+n.bufferView+":"+n.indices+":"+ie(n.attributes):e.indices+":"+ie(e.attributes)+":"+e.mode,void 0!==e.targets)for(let n=0,r=e.targets.length;n<r;n++)t+=":"+ie(e.targets[n]);return t}(a),l=r[s];if(l)i.push(l.promise);else{let e;e=a.extensions&&a.extensions[rj.KHR_DRACO_MESH_COMPRESSION]?function(e){return n[rj.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then(function(n){return io(n,e,t)})}(a):io(new m.LoY,a,t),r[s]={primitive:a,promise:e},i.push(e)}}return Promise.all(i)}loadMesh(e){let t=this,n=this.json,r=this.extensions,i=n.meshes[e],o=i.primitives,a=[];for(let e=0,t=o.length;e<t;e++){var s;let t=void 0===o[e].material?(void 0===(s=this.cache).DefaultMaterial&&(s.DefaultMaterial=new m._4j({color:0xffffff,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:m.hB5})),s.DefaultMaterial):this.getDependency("material",o[e].material);a.push(t)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(n){let a=n.slice(0,n.length-1),s=n[n.length-1],l=[];for(let n=0,c=s.length;n<c;n++){let c,u=s[n],d=o[n],h=a[n];if(d.mode===rJ.TRIANGLES||d.mode===rJ.TRIANGLE_STRIP||d.mode===rJ.TRIANGLE_FAN||void 0===d.mode)!0===(c=!0===i.isSkinnedMesh?new m.I46(u,h):new m.eaF(u,h)).isSkinnedMesh&&c.normalizeSkinWeights(),d.mode===rJ.TRIANGLE_STRIP?c.geometry=rE(c.geometry,m.O49):d.mode===rJ.TRIANGLE_FAN&&(c.geometry=rE(c.geometry,m.rYR));else if(d.mode===rJ.LINES)c=new m.DXC(u,h);else if(d.mode===rJ.LINE_STRIP)c=new m.N1A(u,h);else if(d.mode===rJ.LINE_LOOP)c=new m.FCc(u,h);else if(d.mode===rJ.POINTS)c=new m.ONl(u,h);else throw Error("THREE.GLTFLoader: Primitive mode unsupported: "+d.mode);Object.keys(c.geometry.morphAttributes).length>0&&function(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){let n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let t=0,r=n.length;t<r;t++)e.morphTargetDictionary[n[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}(c,i),c.name=t.createUniqueName(i.name||"mesh_"+e),r9(c,i),d.extensions&&r7(r,c,d),t.assignFinalMaterial(c),l.push(c)}for(let n=0,r=l.length;n<r;n++)t.associations.set(l[n],{meshes:e,primitives:n});if(1===l.length)return i.extensions&&r7(r,l[0],i),l[0];let c=new m.YJl;i.extensions&&r7(r,c,i),t.associations.set(c,{meshes:e});for(let e=0,t=l.length;e<t;e++)c.add(l[e]);return c})}loadCamera(e){let t,n=this.json.cameras[e],r=n[n.type];return r?("perspective"===n.type?t=new m.ubm(m.cj9.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new m.qUd(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),r9(t,n),Promise.resolve(t)):void console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){let t=this.json.skins[e],n=[];for(let e=0,r=t.joints.length;e<r;e++)n.push(this._loadNodeShallow(t.joints[e]));return void 0!==t.inverseBindMatrices?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(e){let n=e.pop(),r=[],i=[];for(let o=0,a=e.length;o<a;o++){let a=e[o];if(a){r.push(a);let e=new m.kn4;null!==n&&e.fromArray(n.array,16*o),i.push(e)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[o])}return new m.EAD(r,i)})}loadAnimation(e){let t=this.json,n=this,r=t.animations[e],i=r.name?r.name:"animation_"+e,o=[],a=[],s=[],l=[],c=[];for(let e=0,t=r.channels.length;e<t;e++){let t=r.channels[e],n=r.samplers[t.sampler],i=t.target,u=i.node,d=void 0!==r.parameters?r.parameters[n.input]:n.input,h=void 0!==r.parameters?r.parameters[n.output]:n.output;void 0!==i.node&&(o.push(this.getDependency("node",u)),a.push(this.getDependency("accessor",d)),s.push(this.getDependency("accessor",h)),l.push(n),c.push(i))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(s),Promise.all(l),Promise.all(c)]).then(function(e){let t=e[0],r=e[1],o=e[2],a=e[3],s=e[4],l=[];for(let e=0,i=t.length;e<i;e++){let i=t[e],c=r[e],u=o[e],d=a[e],h=s[e];if(void 0===i)continue;i.updateMatrix&&i.updateMatrix();let f=n._createAnimationTracks(i,c,u,d,h);if(f)for(let e=0;e<f.length;e++)l.push(f[e])}return new m.tz3(i,void 0,l)})}createNodeMesh(e){let t=this.json,n=this,r=t.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then(function(e){let t=n._getNodeRef(n.meshCache,r.mesh,e);return void 0!==r.weights&&t.traverse(function(e){if(e.isMesh)for(let t=0,n=r.weights.length;t<n;t++)e.morphTargetInfluences[t]=r.weights[t]}),t})}loadNode(e){let t=this.json.nodes[e],n=this._loadNodeShallow(e),r=[],i=t.children||[];for(let e=0,t=i.length;e<t;e++)r.push(this.getDependency("node",i[e]));let o=void 0===t.skin?Promise.resolve(null):this.getDependency("skin",t.skin);return Promise.all([n,Promise.all(r),o]).then(function(e){let t=e[0],n=e[1],r=e[2];null!==r&&t.traverse(function(e){e.isSkinnedMesh&&e.bind(r,ir)});for(let e=0,r=n.length;e<r;e++)t.add(n[e]);return t})}_loadNodeShallow(e){let t=this.json,n=this.extensions,r=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];let i=t.nodes[e],o=i.name?r.createUniqueName(i.name):"",a=[],s=r._invokeOne(function(t){return t.createNodeMesh&&t.createNodeMesh(e)});return s&&a.push(s),void 0!==i.camera&&a.push(r.getDependency("camera",i.camera).then(function(e){return r._getNodeRef(r.cameraCache,i.camera,e)})),r._invokeAll(function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)}).forEach(function(e){a.push(e)}),this.nodeCache[e]=Promise.all(a).then(function(t){let a;if((a=!0===i.isBone?new m.$Kf:t.length>1?new m.YJl:1===t.length?t[0]:new m.B69)!==t[0])for(let e=0,n=t.length;e<n;e++)a.add(t[e]);if(i.name&&(a.userData.name=i.name,a.name=o),r9(a,i),i.extensions&&r7(n,a,i),void 0!==i.matrix){let e=new m.kn4;e.fromArray(i.matrix),a.applyMatrix4(e)}else void 0!==i.translation&&a.position.fromArray(i.translation),void 0!==i.rotation&&a.quaternion.fromArray(i.rotation),void 0!==i.scale&&a.scale.fromArray(i.scale);return r.associations.has(a)||r.associations.set(a,{}),r.associations.get(a).nodes=e,a}),this.nodeCache[e]}loadScene(e){let t=this.extensions,n=this.json.scenes[e],r=this,i=new m.YJl;n.name&&(i.name=r.createUniqueName(n.name)),r9(i,n),n.extensions&&r7(t,i,n);let o=n.nodes||[],a=[];for(let e=0,t=o.length;e<t;e++)a.push(r.getDependency("node",o[e]));return Promise.all(a).then(function(e){for(let t=0,n=e.length;t<n;t++)i.add(e[t]);return r.associations=(e=>{let t=new Map;for(let[e,n]of r.associations)(e instanceof m.imn||e instanceof m.gPd)&&t.set(e,n);return e.traverse(e=>{let n=r.associations.get(e);null!=n&&t.set(e,n)}),t})(i),i})}_createAnimationTracks(e,t,n,r,i){let o,a=[],s=e.name?e.name:e.uuid,l=[];switch(r4[i.path]===r4.weights?e.traverse(function(e){e.morphTargetInfluences&&l.push(e.name?e.name:e.uuid)}):l.push(s),r4[i.path]){case r4.weights:o=m.Hit;break;case r4.rotation:o=m.MBL;break;case r4.translation:case r4.scale:o=m.RiT;break;default:o=1===n.itemSize?m.Hit:m.RiT}let c=void 0!==r.interpolation?r6[r.interpolation]:m.PJ3,u=this._getArrayFromAccessor(n);for(let e=0,n=l.length;e<n;e++){let n=new o(l[e]+"."+r4[i.path],t.array,u,c);"CUBICSPLINE"===r.interpolation&&this._createCubicSplineTrackInterpolant(n),a.push(n)}return a}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){let e=it(t.constructor),n=new Float32Array(t.length);for(let r=0,i=t.length;r<i;r++)n[r]=t[r]*e;t=n}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(e){return new(this instanceof m.MBL?rQ:rZ)(this.times,this.values,this.getValueSize()/3,e)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function io(e,t,n){let r=t.attributes,i=[];for(let t in r){let o=r5[t]||t.toLowerCase();o in e.attributes||i.push(function(t,r){return n.getDependency("accessor",t).then(function(t){e.setAttribute(r,t)})}(r[t],o))}if(void 0!==t.indices&&!e.index){let r=n.getDependency("accessor",t.indices).then(function(t){e.setIndex(t)});i.push(r)}return m.ppV.workingColorSpace!==m.Zr2&&"COLOR_0"in r&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${m.ppV.workingColorSpace}" not supported.`),r9(e,t),!function(e,t,n){let r=t.attributes,i=new m.NRn;if(void 0===r.POSITION)return;{let e=n.json.accessors[r.POSITION],t=e.min,o=e.max;if(void 0===t||void 0===o)return console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(i.set(new m.Pq0(t[0],t[1],t[2]),new m.Pq0(o[0],o[1],o[2])),e.normalized){let t=it(r0[e.componentType]);i.min.multiplyScalar(t),i.max.multiplyScalar(t)}}let o=t.targets;if(void 0!==o){let e=new m.Pq0,t=new m.Pq0;for(let r=0,i=o.length;r<i;r++){let i=o[r];if(void 0!==i.POSITION){let r=n.json.accessors[i.POSITION],o=r.min,a=r.max;if(void 0!==o&&void 0!==a){if(t.setX(Math.max(Math.abs(o[0]),Math.abs(a[0]))),t.setY(Math.max(Math.abs(o[1]),Math.abs(a[1]))),t.setZ(Math.max(Math.abs(o[2]),Math.abs(a[2]))),r.normalized){let e=it(r0[r.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(e)}e.boundingBox=i;let a=new m.iyt;i.getCenter(a.center),a.radius=i.min.distanceTo(i.max)/2,e.boundingSphere=a}(e,t,n),Promise.all(i).then(function(){return void 0!==t.targets?function(e,t,n){let r=!1,i=!1,o=!1;for(let e=0,n=t.length;e<n;e++){let n=t[e];if(void 0!==n.POSITION&&(r=!0),void 0!==n.NORMAL&&(i=!0),void 0!==n.COLOR_0&&(o=!0),r&&i&&o)break}if(!r&&!i&&!o)return Promise.resolve(e);let a=[],s=[],l=[];for(let c=0,u=t.length;c<u;c++){let u=t[c];if(r){let t=void 0!==u.POSITION?n.getDependency("accessor",u.POSITION):e.attributes.position;a.push(t)}if(i){let t=void 0!==u.NORMAL?n.getDependency("accessor",u.NORMAL):e.attributes.normal;s.push(t)}if(o){let t=void 0!==u.COLOR_0?n.getDependency("accessor",u.COLOR_0):e.attributes.color;l.push(t)}}return Promise.all([Promise.all(a),Promise.all(s),Promise.all(l)]).then(function(t){let n=t[0],a=t[1],s=t[2];return r&&(e.morphAttributes.position=n),i&&(e.morphAttributes.normal=a),o&&(e.morphAttributes.color=s),e.morphTargetsRelative=!0,e})}(e,t.targets,n):e})}let ia=(e,t,n)=>{if(!e||!t||!n)return;let r=nD(e),i=new m.Pq0;r.getCenter(i);let o=new m.iyt;r.getBoundingSphere(o);let a=2*o.radius/(2*Math.atan(Math.PI*t.fov/360)),s=a/t.aspect,l=1.1*Math.max(a,s),c=n.target,u=c.clone().sub(t.position).normalize().multiplyScalar(l);c.copy(i),n.minDistance=l/10,n.maxDistance=10*l,t.position.copy(i).sub(u),t.near=l/100,t.far=100*l,t.updateProjectionMatrix()},is={uuid:"",label:0},il=[],ic=e=>{if(e?.highlighted)return{...e.highlighted}},iu=e=>{if(!e?.selected)return;let t=[];return e.selected.forEach(e=>{t.push({...e})}),t},id=({child:e,hover:t,selected:n,onPointerMove:r,onPointerLeave:i,onClick:o})=>{let{selection:a}=tY(e=>e.props),s=tY(e=>e.display),l=tY(e=>e.sectionView),{colors:{hoverColor:c,selectColor:u,hoverSelectColor:d}}=tY(e=>e.settings),p=(0,f.useMemo)(()=>{let t=e.geometry;return t.computeVertexNormals(),t},[e.geometry]),m=(0,f.useMemo)(()=>e.material,[e.material]),g=(0,f.useMemo)(()=>e.userData.uuid,[e.userData.uuid]),v=(0,f.useMemo)(()=>e.userData.label,[e.userData.label]),b=(0,f.useCallback)(()=>{a?.enabled&&"edges"==a.type&&r({uuid:g,label:v})},[a?.enabled,a?.type,g,v,r]),y=(0,f.useCallback)(()=>{a?.enabled&&"edges"===a.type&&i(g)},[a?.enabled,a?.type,g,i]),x=(0,f.useCallback)(()=>{a?.enabled&&"edges"===a.type&&o()},[a?.enabled,a?.type,o]),w=(0,f.useMemo)(()=>a?.enabled&&"edges"!==a.type?m.color:n.find(e=>e.uuid===g)?t.uuid===g?d:u:t.uuid===g?c:m.color,[a,c,u,d,m,g,t,n]);return(0,h.jsxs)("mesh",{name:e.name,type:"Geometry2D_edge",uuid:e.userData.uuid,userData:e.userData,onPointerMove:b,onPointerLeave:y,onClick:x,children:[(0,h.jsx)("primitive",{object:p}),(0,h.jsx)("meshPhysicalMaterial",{side:2,color:w,metalness:.5,roughness:.5,depthWrite:!1,transparent:!0,opacity:s.transparent?.5:1,clippingPlanes:l.enabled&&l.clippingPlane?[l.clippingPlane]:[]})]})},ih=({child:e,hover:t,selected:n,onPointerMove:r,onPointerLeave:i,onClick:o})=>{let{selection:a}=tY(e=>e.props),s=tY(e=>e.display),l=tY(e=>e.sectionView),{colors:{hoverColor:c,selectColor:u,hoverSelectColor:d}}=tY(e=>e.settings),p=(0,f.useMemo)(()=>{let t=e.geometry;return t.computeVertexNormals(),t},[e.geometry]),m=(0,f.useMemo)(()=>e.material,[e.material]),g=(0,f.useMemo)(()=>e.children,[e.children]),v=(0,f.useMemo)(()=>e.userData.uuid,[e.userData.uuid]),b=(0,f.useMemo)(()=>e.userData.label,[e.userData.label]),y=(0,f.useCallback)(e=>{if(a?.enabled){if("faces"===a.type)r({uuid:v,label:b});else if(a?.type==="point"){let t=e.intersections[0].point;a?.onPoint?.({x:t.x,y:t.y,z:t.z})}}},[a?.enabled,a?.type,a?.onPoint,v,b,r]),x=(0,f.useCallback)(()=>{a?.enabled&&"faces"===a.type&&i(v)},[a?.enabled,a?.type,v,i]),w=(0,f.useCallback)(()=>{a?.enabled&&"faces"===a.type&&o()},[a?.enabled,a?.type,o]),E=(0,f.useMemo)(()=>a?.enabled&&"faces"!==a.type?m.color:n.find(e=>e.uuid===v)?t.uuid===v?d:u:t.uuid===v?c:m.color,[a,c,u,d,m,v,t,n]);return(0,h.jsxs)("mesh",{name:e.name,type:"Geometry2D_face",uuid:e.userData.uuid,userData:e.userData,onPointerMove:y,onPointerLeave:x,onClick:w,children:[(0,h.jsx)("primitive",{object:p}),(0,h.jsx)("meshPhysicalMaterial",{side:2,color:E,metalness:.5,roughness:.5,depthWrite:!1,transparent:!0,opacity:s.transparent?.5:1,clippingPlanes:l.enabled&&l.clippingPlane?[l.clippingPlane]:[]}),g.map(e=>(0,h.jsx)(id,{child:e,hover:t,selected:n,onPointerMove:r,onPointerLeave:i,onClick:o},e.uuid))]},e.uuid)},ip=({scene:e})=>{let[t,n]=(0,f.useState)(is),[r,i]=(0,f.useState)(il),{selection:o}=tY(e=>e.props),a=(0,f.useMemo)(()=>e.children,[e.children]),s=(0,f.useMemo)(()=>{let t=e.userData?.uuid;return o?.part&&t===o.part},[e.userData?.uuid,o?.part]),l=(0,f.useCallback)(e=>{s&&(n(e),o?.onHighlight?.({uuid:e.uuid,label:e.label}))},[s,o?.onHighlight]),c=(0,f.useCallback)(e=>{s&&e===t.uuid&&(n(is),o?.onHighlight?.())},[s,t.uuid,o?.onHighlight]),u=(0,f.useCallback)(()=>{if(!s)return;let e=[],n=r.findIndex(e=>e.uuid===t.uuid);i(e=-1===n?[...r,t]:[...r.slice(0,n),...r.slice(n+1)]),o?.onSelect?.(e.map(e=>({uuid:e.uuid,label:e.label})))},[s,t,r,o?.onSelect]);return(0,f.useEffect)(()=>{n((s?ic(o):void 0)??is),i((s?iu(o):void 0)??il)},[s,a,o]),(0,f.useEffect)(()=>{o?.enabled||(n(is),o?.onHighlight?.(),i(il),o?.onSelect?.([]))},[o?.enabled,o?.onHighlight,o?.onSelect]),(0,h.jsx)("mesh",{type:"Geometry2D",children:a.map((e,n)=>(0,h.jsx)(ih,{child:e,hover:t,selected:r,onPointerMove:l,onPointerLeave:c,onClick:u},e.uuid))})},im={uuid:"",label:0,distance:1/0},ig=[],iv=(e,t)=>{if(e?.highlighted)return{...e.highlighted,distance:t}},ib=(e,t)=>{if(!e?.selected)return;let n=[];return e.selected.forEach(e=>{n.push({...e,distance:t})}),n},iy=({solid:e,child:t,hover:n,selected:r,onPointerMove:i,onPointerLeave:o,onClick:a})=>{let{selection:s}=tY(e=>e.props),l=tY(e=>e.display),c=tY(e=>e.sectionView),{colors:{hoverColor:u,selectColor:d,hoverSelectColor:p}}=tY(e=>e.settings),m=(0,f.useMemo)(()=>{let e=t.geometry;return e.computeVertexNormals(),e},[t.geometry]),g=(0,f.useMemo)(()=>t.material,[t.material]),v=(0,f.useMemo)(()=>t.userData.uuid,[t.userData.uuid]),b=(0,f.useMemo)(()=>t.userData.label,[t.userData.label]),y=(0,f.useCallback)(e=>{if(s?.enabled){if("faces"===s.type)i({uuid:v,label:b,distance:e.distance});else if(s?.type==="point"){let t=e.intersections[0].point;s?.onPoint?.({x:t.x,y:t.y,z:t.z})}}},[s?.enabled,s?.type,s?.onPoint,v,b,i]),x=(0,f.useCallback)(()=>{s?.enabled&&"faces"===s.type&&o(v)},[s?.enabled,s?.type,v,o]),w=(0,f.useCallback)(()=>{s?.enabled&&"faces"===s.type&&a()},[s?.enabled,s?.type,a]),E=(0,f.useMemo)(()=>e.selected?e.hover?p:d:e.hover?u:s?.enabled&&"faces"!==s.type?g.color:r.find(e=>e.uuid===v)?n.uuid===v?p:d:n.uuid===v?u:g.color,[s,u,d,p,g,v,e,n,r]);return(0,h.jsxs)("mesh",{name:t.name,type:"Geometry3D_face",uuid:t.userData.uuid,userData:t.userData,onPointerMove:y,onPointerLeave:x,onClick:w,children:[(0,h.jsx)("primitive",{object:m}),(0,h.jsx)("meshPhysicalMaterial",{side:2,color:E,metalness:.5,roughness:.5,depthWrite:!1,transparent:!0,opacity:l.transparent?.5:1,clippingPlanes:c.enabled&&c.clippingPlane?[c.clippingPlane]:[]})]})},ix=({child:e,hover:t,selected:n,onPointerMove:r,onPointerLeave:i,onClick:o})=>{let{selection:a}=tY(e=>e.props),s=(0,f.useMemo)(()=>e.children,[e.children]),l=(0,f.useMemo)(()=>e.userData.uuid,[e.userData.uuid]),c=(0,f.useMemo)(()=>e.userData.label,[e.userData.label]),u=(0,f.useCallback)(e=>{a?.enabled&&"solids"===a.type&&r({uuid:l,label:c,distance:e.distance})},[a?.enabled,a?.type,l,c,r]),d=(0,f.useCallback)(()=>{a?.enabled&&"solids"===a.type&&i(l)},[a?.enabled,a?.type,l,i]),p=(0,f.useCallback)(()=>{a?.enabled&&"solids"===a.type&&o()},[a?.enabled,a?.type,o]),m=(0,f.useMemo)(()=>a?.enabled&&"solids"===a.type&&t.uuid===l,[a?.enabled,a?.type,l,t]),g=(0,f.useMemo)(()=>a?.enabled&&"solids"===a.type&&!!n.find(e=>e.uuid===l),[a?.enabled,a?.type,l,n]);return(0,h.jsx)("mesh",{name:e.name,type:"Geometry3D_Solid",uuid:e.userData.uuid,userData:e.userData,onPointerMove:u,onPointerLeave:d,onClick:p,children:s.map(e=>(0,h.jsx)(iy,{solid:{hover:m,selected:g},child:e,hover:t,selected:n,onPointerMove:r,onPointerLeave:i,onClick:o},e.uuid))},e.uuid)},iw=({scene:e})=>{let t=(0,f.useRef)(1/0),[n,r]=(0,f.useState)(im),[i,o]=(0,f.useState)(ig),{selection:a}=tY(e=>e.props),s=(0,f.useMemo)(()=>e.children,[e.children]),l=(0,f.useMemo)(()=>{let t=e.userData?.uuid;return a?.part&&t===a.part},[e.userData?.uuid,a?.part]),c=(0,f.useCallback)(e=>{l&&e.distance<n.distance&&(t.current=e.distance,r(e),a?.onHighlight?.({uuid:e.uuid,label:e.label}))},[l,n.distance,a?.onHighlight]),u=(0,f.useCallback)(e=>{l&&e===n.uuid&&(r(im),a?.onHighlight?.())},[l,n.uuid,a?.onHighlight]),d=(0,f.useCallback)(()=>{if(!l)return;let e=[],t=i.findIndex(e=>e.uuid===n.uuid);o(e=-1===t?[...i,n]:[...i.slice(0,t),...i.slice(t+1)]),a?.onSelect?.(e.map(e=>({uuid:e.uuid,label:e.label})))},[l,n,i,a?.onSelect]);return(0,f.useEffect)(()=>{r((l?iv(a,t.current):void 0)??im),o((l?ib(a,t.current):void 0)??ig)},[l,a]),(0,f.useEffect)(()=>{a?.enabled||(r(im),a?.onHighlight?.(),o(ig),a?.onSelect?.([]))},[a?.enabled,a?.onHighlight,a?.onSelect]),(0,h.jsx)("mesh",{type:"Geometry3D",children:s.map((e,t)=>(0,h.jsx)(ix,{child:e,hover:n,selected:i,onPointerMove:c,onPointerLeave:u,onClick:d},e.uuid))})},iE=({child:e})=>{let t=tY(e=>e.display),n=tY(e=>e.sectionView),r=(0,f.useMemo)(()=>{let r=new m.XJ7(e.geometry),i=new m.mrM({linewidth:2,transparent:!0,color:e.material.color,opacity:t.transparent?.5:1,clippingPlanes:n.enabled&&n.clippingPlane?[n.clippingPlane]:[]});return(0,h.jsx)("lineSegments",{args:[r,i]})},[e,t,n]);return(0,h.jsxs)("mesh",{name:e.name,uuid:e.userData.uuid,userData:e.userData,children:[(0,h.jsx)("primitive",{object:e.geometry}),(0,h.jsx)("meshBasicMaterial",{transparent:!0,side:2,opacity:0,clippingPlanes:n.enabled&&n.clippingPlane?[n.clippingPlane]:[]}),r]})},iA=({scene:e})=>{let t=(0,f.useMemo)(()=>e.children,[e.children]);return(0,h.jsx)("mesh",{type:"Mesh",children:t.map(e=>(0,h.jsx)(iE,{child:e},e.uuid))})},iS=e=>{if(e.geometry.getAttribute("color"))return{min:1/0,max:-1/0};let t=e.geometry.getAttribute("data");if(!t)return{min:1/0,max:-1/0};let n=t.array,r=n.reduce((e,t)=>Math.min(e,t),1/0),i=n.reduce((e,t)=>Math.max(e,t),-1/0);return r===i&&(r<1e-12?(r=-1,i=1):(r-=.1*i,i+=.1*i)),{min:r,max:i}},ij=({child:e})=>{let t=tY(e=>e.display),n=tY(e=>e.sectionView),r=tY(e=>e.result),{min:i,max:o}=(0,f.useMemo)(()=>iS(e),[e]),a=(0,f.useMemo)(()=>{let t=e.geometry.getAttribute("data");return t?{count:t.count,array:t.array}:{}},[e]),s=(0,f.useMemo)(()=>{if(!r.meshVisible||"Mesh"!==e.type)return;let i=new m.XJ7(e.geometry),o=new m.mrM({linewidth:2,transparent:!0,color:0,opacity:t.transparent?.5:1,clippingPlanes:n.enabled&&n.clippingPlane?[n.clippingPlane]:[]});return(0,h.jsx)("lineSegments",{args:[i,o]})},[t.transparent,n.enabled,n.clippingPlane,r.meshVisible,e]);return(0,h.jsxs)("mesh",{name:e.name,type:"Result",uuid:e.userData.uuid,userData:{...e.userData,lut:{min:i,max:o},data:a},children:[(0,h.jsx)("primitive",{object:e.geometry}),(0,h.jsx)("meshBasicMaterial",{vertexColors:!0,side:2,transparent:!0,opacity:t.transparent?.5:1,clippingPlanes:n.enabled&&n.clippingPlane?[n.clippingPlane]:[]}),s]})},iC=({scene:e})=>(0,f.useMemo)(()=>e.children,[e.children]).map(e=>(0,h.jsx)(ij,{child:e},e.uuid)),iM=({scene:e})=>{switch((0,f.useMemo)(()=>e.userData.type,[e.userData.type])){case"geometry2D":return(0,h.jsx)(ip,{scene:e});case"geometry3D":return(0,h.jsx)(iw,{scene:e});case"mesh":return(0,h.jsx)(iA,{scene:e});case"result":return(0,h.jsx)(iC,{scene:e});default:return(0,h.jsx)(h.Fragment,{})}},ik=({part:e})=>{let t=(0,f.useRef)(void 0),[n,r]=(0,f.useState)(),{camera:i,controls:o,scene:a}=tY(e=>e.mainView);(0,f.useEffect)(()=>{let t=new Blob([rw.hp.from(e.buffer)]),n=URL.createObjectURL(t);(new rA).load(n,r,e=>console.info("Loading part "+e.loaded/e.total*100+"%"),console.error)},[e]),(0,f.useEffect)(()=>{a?.children.length&&i&&o&&t.current!==n&&(t.current=n,ia(a.children,i,o))},[i,o,a?.children,a?.children.length,n]);let s=(0,f.useMemo)(()=>e.summary.uuid,[e]),l=(0,f.useMemo)(()=>e.extra?.name,[e]);return n?.scene?(0,h.jsx)("mesh",{type:"Part",uuid:s,userData:n.scene.userData,name:l,children:(0,h.jsx)(iM,{scene:n.scene})}):null},iT=()=>{let[e,t]=(0,f.useState)([]),{parts:n}=tY(e=>e.props);return(0,f.useEffect)(()=>{if(!n?.length)return;let r=3;n.forEach(e=>{let t=e.summary.dimension??3;r=Math.min(r,t)}),tY.setState({geometry:{dimension:r}});let i=n.filter(t=>!e.find(e=>e.props.uuid===t.summary.uuid)),o=e.filter(e=>!n?.find(t=>t.summary.uuid===e.props.uuid));if(!i.length&&!o.length)return;let a=[...e];o.length&&o.forEach(t=>{let n=e.findIndex(e=>e.props.uuid===t.props.uuid);a=[...a.slice(0,n),...a.slice(n+1)]}),i.length&&i.forEach(e=>{a.push((0,h.jsx)(ik,{part:e,uuid:e.summary.uuid},e.summary.uuid))}),t(a)},[n,e]),(0,h.jsx)(h.Fragment,{children:e})},i_={canvas:{position:"absolute",top:0,right:0,width:"100vw",height:"100vh",overflow:"hidden"}};var iP=n(52323),iO=n(53123),iR=n(11329),iL=n(56368);let iI={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M957.6 507.4L603.2 158.2a7.9 7.9 0 00-11.2 0L353.3 393.4a8.03 8.03 0 00-.1 11.3l.1.1 40 39.4-117.2 115.3a8.03 8.03 0 00-.1 11.3l.1.1 39.5 38.9-189.1 187H72.1c-4.4 0-8.1 3.6-8.1 8V860c0 4.4 3.6 8 8 8h344.9c2.1 0 4.1-.8 5.6-2.3l76.1-75.6 40.4 39.8a7.9 7.9 0 0011.2 0l117.1-115.6 40.1 39.5a7.9 7.9 0 0011.2 0l238.7-235.2c3.4-3 3.4-8 .3-11.2zM389.8 796.2H229.6l134.4-133 80.1 78.9-54.3 54.1zm154.8-62.1L373.2 565.2l68.6-67.6 171.4 168.9-68.6 67.6zM713.1 658L450.3 399.1 597.6 254l262.8 259-147.3 145z"}}]},name:"highlight",theme:"outlined"};var iD=n(3755);function iz(){return(iz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let iN=f.forwardRef((e,t)=>f.createElement(iD.A,iz({},e,{ref:t,icon:iI})));var iH=n(75695);let iB={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880.1 154H143.9c-24.5 0-39.8 26.7-27.5 48L349 597.4V838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V597.4L907.7 202c12.2-21.3-3.1-48-27.6-48zM603.4 798H420.6V642h182.9v156zm9.6-236.6l-9.5 16.6h-183l-9.5-16.6L212.7 226h598.6L613 561.4z"}}]},name:"filter",theme:"outlined"};function iF(){return(iF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let iU=f.forwardRef((e,t)=>f.createElement(iD.A,iF({},e,{ref:t,icon:iB}))),iq={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M876.6 239.5c-.5-.9-1.2-1.8-2-2.5-5-5-13.1-5-18.1 0L684.2 409.3l-67.9-67.9L788.7 169c.8-.8 1.4-1.6 2-2.5 3.6-6.1 1.6-13.9-4.5-17.5-98.2-58-226.8-44.7-311.3 39.7-67 67-89.2 162-66.5 247.4l-293 293c-3 3-2.8 7.9.3 11l169.7 169.7c3.1 3.1 8.1 3.3 11 .3l292.9-292.9c85.5 22.8 180.5.7 247.6-66.4 84.4-84.5 97.7-213.1 39.7-311.3zM786 499.8c-58.1 58.1-145.3 69.3-214.6 33.6l-8.8 8.8-.1-.1-274 274.1-79.2-79.2 230.1-230.1s0 .1.1.1l52.8-52.8c-35.7-69.3-24.5-156.5 33.6-214.6a184.2 184.2 0 01144-53.5L537 318.9a32.05 32.05 0 000 45.3l124.5 124.5a32.05 32.05 0 0045.3 0l132.8-132.8c3.7 51.8-14.4 104.8-53.6 143.9z"}}]},name:"tool",theme:"outlined"};function iG(){return(iG=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let iV=f.forwardRef((e,t)=>f.createElement(iD.A,iG({},e,{ref:t,icon:iq})));var iW=n(22887),iX=n(88697);let iY="projectSnapshot",iK=(e,t,n,r)=>{let i=e.domElement.width,o=e.domElement.height,a=n.aspect,s=r?.size?.width??520,l=r?.size?.height??312;e.domElement.width=s,e.domElement.height=l,n.aspect=s/l,n.updateProjectionMatrix(),e.clear(),e.setViewport(0,0,s,l),e.render(t,n);let c=e.domElement.toDataURL("image/png");e.domElement.width=i,e.domElement.height=o,n.aspect=a,n.updateProjectionMatrix(),e.clear(),e.setViewport(0,0,i,o),e.render(t,n),r?.apiRoute(c).catch(console.error)},iZ=(e,t,n)=>{let r=e.domElement.width,i=e.domElement.height;e.clear(),e.setViewport(0,0,r,i),e.render(t,n);let o=e.domElement.toDataURL("image/png"),a=document.createElement("a");a.setAttribute("download","snapshot_"+new Date().toLocaleDateString()+".png"),a.setAttribute("href",o.replace("image/png","image/octet-stream")),a.click()},i$=()=>{let e=tY(e=>e.props),{camera:t,gl:n,scene:r}=tY(e=>e.mainView),i=(0,f.useCallback)(({key:i})=>{n&&r&&t&&(i===iY?iK(n,r,t,e.snapshot?.project):iZ(n,r,t))},[n,r,t,e.snapshot?.project]),o=(0,f.useCallback)(()=>{n&&r&&t&&iZ(n,r,t)},[n,r,t]);return(0,h.jsx)(iR.A,{title:"Take snapshot",placement:"left",children:e.snapshot?.project?(0,h.jsx)(iW.A,{placement:"bottom",menu:{onClick:i,items:[{key:iY,title:"This snapshot will appear on your project card",label:"Project snapshot"},{key:"exportSnapshot",title:"Take a snapshot and export it",label:"Export image"}]},children:(0,h.jsx)(tO.Ay,{icon:(0,h.jsx)(iX.A,{})})}):(0,h.jsx)(tO.Ay,{icon:(0,h.jsx)(iX.A,{}),onClick:o})})},iQ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M916 210H376c-17.7 0-32 14.3-32 32v236H108c-17.7 0-32 14.3-32 32v272c0 17.7 14.3 32 32 32h540c17.7 0 32-14.3 32-32V546h236c17.7 0 32-14.3 32-32V242c0-17.7-14.3-32-32-32zm-504 68h200v200H412V278zm-68 468H144V546h200v200zm268 0H412V546h200v200zm268-268H680V278h200v200z"}}]},name:"build",theme:"outlined"};function iJ(){return(iJ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let i0=f.forwardRef((e,t)=>f.createElement(iD.A,iJ({},e,{ref:t,icon:iQ}))),i1=()=>{let{unit:e}=tY(e=>e.unit),t=(0,f.useCallback)(({key:e})=>{tY.setState({unit:{unit:e}})},[]);return(0,h.jsx)(iR.A,{title:"Unit",placement:"left",children:(0,h.jsx)(iW.A,{placement:"bottom",menu:{onClick:t,selectedKeys:[e],items:[{key:"m",title:"Meters",label:"m"},{key:"mm",title:"Millimeters",label:"mm"}]},children:(0,h.jsx)(tO.Ay,{icon:(0,h.jsx)(i0,{})})})})};var i2=n(6128),i3=n(33261),i5=n(25261);let i4=()=>{let e=tY(e=>e.display),t=(0,f.useCallback)(t=>{let n=t.valueOf();tY.setState({display:{...e,grid:n}})},[e]),n=(0,f.useCallback)(t=>{let n=t.valueOf();tY.setState({display:{...e,transparent:n}})},[e]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(iR.A,{title:"Display grid",placement:"left",children:(0,h.jsx)(i2.A,{checked:e.grid,checkedChildren:(0,h.jsx)(i3.A,{}),unCheckedChildren:(0,h.jsx)(i3.A,{}),onChange:t})}),(0,h.jsx)(iR.A,{title:"Transparency",placement:"left",children:(0,h.jsx)(i2.A,{checked:e.transparent,checkedChildren:(0,h.jsx)(i5.A,{}),unCheckedChildren:(0,h.jsx)(i5.A,{}),onChange:n})})]})};var i6=n(35850),i8=n(70952),i7=n(17920),i9=n(17715);let oe=(e,t,n)=>{if(!e||!t)return;let r=t.object,i=t.target,o=r.position.distanceTo(i),a=i.clone().sub(e.position).normalize().multiplyScalar(o*n*.01);e.position.add(a)},ot=()=>{let{camera:e,controls:t,scene:n}=tY(e=>e.mainView),r=tY(e=>e.zoomToSelection),i=(0,f.useCallback)(()=>{oe(e,t,1),d=requestAnimationFrame(i)},[e,t]),o=(0,f.useCallback)(()=>ia(n?.children,e,t),[e,t,n?.children,n?.children.length]),a=(0,f.useCallback)(()=>{oe(e,t,-1),d=requestAnimationFrame(a)},[e,t]),s=(0,f.useCallback)(()=>{d&&cancelAnimationFrame(d),d=void 0},[]),l=(0,f.useCallback)(()=>{tY.setState({zoomToSelection:{...r,enabled:!r.enabled}})},[r]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(iR.A,{title:"Zoom in",placement:"left",children:(0,h.jsx)(tO.Ay,{icon:(0,h.jsx)(i6.A,{}),onMouseDown:i,onMouseUp:s,onMouseOut:s})}),(0,h.jsx)(iR.A,{title:"Zoom to fit",placement:"left",children:(0,h.jsx)(tO.Ay,{icon:(0,h.jsx)(i8.A,{}),onClick:o})}),(0,h.jsx)(iR.A,{title:"Zoom out",placement:"left",children:(0,h.jsx)(tO.Ay,{icon:(0,h.jsx)(i7.A,{}),onMouseDown:a,onMouseUp:s,onMouseOut:s})}),(0,h.jsx)(iR.A,{title:"Zoom to selection",placement:"left",children:(0,h.jsx)(tO.Ay,{type:r.enabled?"primary":"default",icon:(0,h.jsx)(i9.A,{}),onClick:l})})]})};var on=n(75532),or=n(72686),oi=n(77029),oo=n(46528);let oa={header:{position:"absolute",background:"none",backgroundColor:"transparent",height:"unset",width:"200px",zIndex:10,top:0,right:0,padding:0,margin:"10px 10px 0 0",display:"flex",justifyContent:"flex-end",gap:"10px"},collapse:{backgroundColor:"#f5f5f5"},collapseBody:{display:"flex",flexDirection:"column",alignItems:"center",lineHeight:"unset",gap:"10px",maxHeight:"70vh",overflowX:"hidden",overflowY:"auto",margin:"-16px",padding:"16px 0"},divider:{margin:"10px 0"},iconButton:{width:"32px",height:"32px",paddingInlineStart:0,paddingInlineEnd:0}},os=new m.Pq0(1,0,0),ol=new m.Pq0(0,1,0),oc=new m.Pq0(0,0,1),ou=()=>{let e=tY(e=>e.sectionView),t=(0,f.useCallback)(()=>{tY.setState({sectionView:{...e,enabled:!e.enabled}})},[e]),n=(0,f.useCallback)(()=>{tY.setState({sectionView:{...e,hidePlane:!e.hidePlane}})},[e]),r=(0,f.useCallback)(()=>{tY.setState({sectionView:{...e,snap:os}})},[e]),i=(0,f.useCallback)(()=>{tY.setState({sectionView:{...e,snap:ol}})},[e]),o=(0,f.useCallback)(()=>{tY.setState({sectionView:{...e,snap:oc}})},[e]),a=(0,f.useCallback)(()=>{tY.setState({sectionView:{...e,flip:Math.random()}})},[e]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(iR.A,{title:"Section view",placement:"left",children:(0,h.jsx)(tO.Ay,{type:e.enabled?"primary":"default",icon:(0,h.jsx)(on.A,{}),onClick:t})},"section-view"),e.enabled?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(iR.A,{title:e.hidePlane?"Show plane":"Hide plane",placement:"left",children:(0,h.jsx)(tO.Ay,{icon:e.hidePlane?(0,h.jsx)(or.A,{}):(0,h.jsx)(oi.A,{}),onClick:n})}),(0,h.jsx)(iR.A,{title:"Snap plane to X",placement:"left",children:(0,h.jsx)(tO.Ay,{style:oa.iconButton,onClick:r,children:"X"})}),(0,h.jsx)(iR.A,{title:"Snap plane to Y",placement:"left",children:(0,h.jsx)(tO.Ay,{style:oa.iconButton,onClick:i,children:"Y"})}),(0,h.jsx)(iR.A,{title:"Snap plane to Z",placement:"left",children:(0,h.jsx)(tO.Ay,{style:oa.iconButton,onClick:o,children:"Z"})}),(0,h.jsx)(iR.A,{title:"Flip plane",placement:"left",children:(0,h.jsx)(tO.Ay,{icon:(0,h.jsx)(oo.A,{}),onClick:a})})]}):null]})};var od=n(67135),oh=n(16625),of=n(52930);let op={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M766.4 744.3c43.7 0 79.4-36.2 79.4-80.5 0-53.5-79.4-140.8-79.4-140.8S687 610.3 687 663.8c0 44.3 35.7 80.5 79.4 80.5zm-377.1-44.1c7.1 7.1 18.6 7.1 25.6 0l256.1-256c7.1-7.1 7.1-18.6 0-25.6l-256-256c-.6-.6-1.3-1.2-2-1.7l-78.2-78.2a9.11 9.11 0 00-12.8 0l-48 48a9.11 9.11 0 000 12.8l67.2 67.2-207.8 207.9c-7.1 7.1-7.1 18.6 0 25.6l255.9 256zm12.9-448.6l178.9 178.9H223.4l178.8-178.9zM904 816H120c-4.4 0-8 3.6-8 8v80c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-80c0-4.4-3.6-8-8-8z"}}]},name:"bg-colors",theme:"outlined"};function om(){return(om=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let og=f.forwardRef((e,t)=>f.createElement(iD.A,om({},e,{ref:t,icon:op}))),ov={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M180 176h-60c-4.4 0-8 3.6-8 8v656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V184c0-4.4-3.6-8-8-8zm724 0h-60c-4.4 0-8 3.6-8 8v656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V184c0-4.4-3.6-8-8-8zM785.3 504.3L657.7 403.6a7.23 7.23 0 00-11.7 5.7V476H378v-62.8c0-6-7-9.4-11.7-5.7L238.7 508.3a7.14 7.14 0 000 11.3l127.5 100.8c4.7 3.7 11.7.4 11.7-5.7V548h268v62.8c0 6 7 9.4 11.7 5.7l127.5-100.8c3.8-2.9 3.8-8.5.2-11.4z"}}]},name:"column-width",theme:"outlined"};function ob(){return(ob=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let oy=f.forwardRef((e,t)=>f.createElement(iD.A,ob({},e,{ref:t,icon:ov}))),ox={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M855 160.1l-189.2 23.5c-6.6.8-9.3 8.8-4.7 13.5l54.7 54.7-153.5 153.5a8.03 8.03 0 000 11.3l45.1 45.1c3.1 3.1 8.2 3.1 11.3 0l153.6-153.6 54.7 54.7a7.94 7.94 0 0013.5-4.7L863.9 169a7.9 7.9 0 00-8.9-8.9zM416.6 562.3a8.03 8.03 0 00-11.3 0L251.8 715.9l-54.7-54.7a7.94 7.94 0 00-13.5 4.7L160.1 855c-.6 5.2 3.7 9.5 8.9 8.9l189.2-23.5c6.6-.8 9.3-8.8 4.7-13.5l-54.7-54.7 153.6-153.6c3.1-3.1 3.1-8.2 0-11.3l-45.2-45z"}}]},name:"arrows-alt",theme:"outlined"};function ow(){return(ow=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let oE=f.forwardRef((e,t)=>f.createElement(iD.A,ow({},e,{ref:t,icon:ox}))),oA=()=>{let[e,t]=(0,f.useState)(!1),n=tY(e=>e.lut),[r]=od.A.useForm(),i=(0,f.useMemo)(()=>({min:nz(n.min),max:nz(n.max)}),[n.min,n.max]),o=(0,f.useCallback)(({key:e})=>{tY.setState({lut:{...n,colormap:e}})},[n]),a=(0,f.useCallback)(()=>t(!0),[]),s=(0,f.useCallback)(()=>{t(!1),r.resetFields()},[]),l=(0,f.useCallback)(e=>{tY.setState({lut:{...n,customMin:+e.min,customMax:+e.max}}),t(!1)},[n]),c=(0,f.useCallback)(()=>{tY.setState({lut:{...n,customMin:void 0,customMax:void 0}})},[n]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(oh.A,{open:e,closable:!1,onCancel:s,okText:"Apply",onOk:r.submit,children:(0,h.jsxs)(od.A,{form:r,initialValues:i,onFinish:l,children:[(0,h.jsx)(od.A.Item,{name:"min",label:"Minimum",children:(0,h.jsx)(of.A,{style:{width:"100%"}})}),(0,h.jsx)(od.A.Item,{name:"max",label:"Maximum",children:(0,h.jsx)(of.A,{style:{width:"100%"}})})]})}),(0,h.jsx)(iR.A,{title:"Result colormap",placement:"left",children:(0,h.jsx)(iW.A,{placement:"bottomRight",menu:{onClick:o,selectedKeys:[n.colormap],items:[{key:"rainbow",label:"Rainbow"},{key:"cooltowarm",label:"Cool to warm"},{key:"blackbody",label:"Black body"},{key:"grayscale",label:"Gray scale"}]},children:(0,h.jsx)(tO.Ay,{icon:(0,h.jsx)(og,{})})})},"result-colormap"),(0,h.jsx)(iR.A,{title:"Result custom range",placement:"left",children:(0,h.jsx)(tO.Ay,{icon:(0,h.jsx)(oy,{}),onClick:a})},"result-custom-range"),(0,h.jsx)(iR.A,{title:"Results automatic range",placement:"left",children:(0,h.jsx)(tO.Ay,{icon:(0,h.jsx)(oE,{}),onClick:c})},"result-automaic-range")]})};var oS=n(7981);let oj=()=>{let e=tY(e=>e.result),t=(0,f.useCallback)(t=>{tY.setState({result:{...e,meshVisible:t}})},[e]);return(0,h.jsx)(iR.A,{title:"Display result mesh",placement:"left",children:(0,h.jsx)(i2.A,{checked:e.meshVisible,checkedChildren:(0,h.jsx)(oS.A,{}),unCheckedChildren:(0,h.jsx)(oS.A,{}),onChange:t})},"display-result-mesh")};var oC=n(8139),oM=n(15039),ok=n.n(oM),oT=n(26740),o_=n(91e3),oP=n(29368),oO=n(61863),oR=n(85410),oL=n(33543),oI=n(4620),oD=n(8264),oz=n(64640),oN=n(51298),oH=n(39170),oB=n(2389),oF=n(63298),oU=n(9092),oq=n(12906),oG=n(88683),oV=n(85190),oW=n(57078),oX=n(54945),oY=n(65564),oK=n(83162),oZ=n(21851),o$=function(e,t){if(!e)return null;var n={left:e.offsetLeft,right:e.parentElement.clientWidth-e.clientWidth-e.offsetLeft,width:e.clientWidth,top:e.offsetTop,bottom:e.parentElement.clientHeight-e.clientHeight-e.offsetTop,height:e.clientHeight};return t?{left:0,right:0,width:0,top:n.top,bottom:n.bottom,height:n.height}:{left:n.left,right:n.right,width:n.width,top:0,bottom:0,height:0}},oQ=function(e){return void 0!==e?"".concat(e,"px"):void 0};function oJ(e){var t=e.prefixCls,n=e.containerRef,r=e.value,i=e.getValueIndex,o=e.motionName,a=e.onMotionStart,s=e.onMotionEnd,l=e.direction,c=e.vertical,u=void 0!==c&&c,d=f.useRef(null),h=f.useState(r),p=(0,oq.A)(h,2),m=p[0],g=p[1],v=function(e){var r,o=i(e),a=null==(r=n.current)?void 0:r.querySelectorAll(".".concat(t,"-item"))[o];return(null==a?void 0:a.offsetParent)&&a},b=f.useState(null),y=(0,oq.A)(b,2),x=y[0],w=y[1],E=f.useState(null),A=(0,oq.A)(E,2),S=A[0],j=A[1];(0,oU.A)(function(){if(m!==r){var e=v(m),t=v(r),n=o$(e,u),i=o$(t,u);g(r),w(n),j(i),e&&t?a():s()}},[r]);var C=f.useMemo(function(){if(u){var e;return oQ(null!=(e=null==x?void 0:x.top)?e:0)}return"rtl"===l?oQ(-(null==x?void 0:x.right)):oQ(null==x?void 0:x.left)},[u,l,x]),M=f.useMemo(function(){if(u){var e;return oQ(null!=(e=null==S?void 0:S.top)?e:0)}return"rtl"===l?oQ(-(null==S?void 0:S.right)):oQ(null==S?void 0:S.left)},[u,l,S]);return x&&S?f.createElement(oZ.Ay,{visible:!0,motionName:o,motionAppear:!0,onAppearStart:function(){return u?{transform:"translateY(var(--thumb-start-top))",height:"var(--thumb-start-height)"}:{transform:"translateX(var(--thumb-start-left))",width:"var(--thumb-start-width)"}},onAppearActive:function(){return u?{transform:"translateY(var(--thumb-active-top))",height:"var(--thumb-active-height)"}:{transform:"translateX(var(--thumb-active-left))",width:"var(--thumb-active-width)"}},onVisibleChanged:function(){w(null),j(null),s()}},function(e,n){var r=e.className,i=e.style,o=(0,oW.A)((0,oW.A)({},i),{},{"--thumb-start-left":C,"--thumb-start-width":oQ(null==x?void 0:x.width),"--thumb-active-left":M,"--thumb-active-width":oQ(null==S?void 0:S.width),"--thumb-start-top":C,"--thumb-start-height":oQ(null==x?void 0:x.height),"--thumb-active-top":M,"--thumb-active-height":oQ(null==S?void 0:S.height)}),a={ref:(0,oK.K4)(d,n),style:o,className:ok()("".concat(t,"-thumb"),r)};return f.createElement("div",a)}):null}var o0=["prefixCls","direction","vertical","options","disabled","defaultValue","value","name","onChange","className","motionName"],o1=function(e){var t=e.prefixCls,n=e.className,r=e.disabled,i=e.checked,o=e.label,a=e.title,s=e.value,l=e.name,c=e.onChange,u=e.onFocus,d=e.onBlur,h=e.onKeyDown,p=e.onKeyUp,m=e.onMouseDown;return f.createElement("label",{className:ok()(n,(0,oV.A)({},"".concat(t,"-item-disabled"),r)),onMouseDown:m},f.createElement("input",{name:l,className:"".concat(t,"-item-input"),type:"radio",disabled:r,checked:i,onChange:function(e){r||c(e,s)},onFocus:u,onBlur:d,onKeyDown:h,onKeyUp:p}),f.createElement("div",{className:"".concat(t,"-item-label"),title:a,"aria-selected":i},o))},o2=f.forwardRef(function(e,t){var n,r,i=e.prefixCls,o=void 0===i?"rc-segmented":i,a=e.direction,s=e.vertical,l=e.options,c=void 0===l?[]:l,u=e.disabled,d=e.defaultValue,h=e.value,p=e.name,m=e.onChange,g=e.className,v=e.motionName,b=(0,oG.A)(e,o0),y=f.useRef(null),x=f.useMemo(function(){return(0,oK.K4)(y,t)},[y,t]),w=f.useMemo(function(){return c.map(function(e){if("object"===(0,oX.A)(e)&&null!==e){var t=function(e){if(void 0!==e.title)return e.title;if("object"!==(0,oX.A)(e.label)){var t;return null==(t=e.label)?void 0:t.toString()}}(e);return(0,oW.A)((0,oW.A)({},e),{},{title:t})}return{label:null==e?void 0:e.toString(),title:null==e?void 0:e.toString(),value:e}})},[c]),E=(0,oT.A)(null==(n=w[0])?void 0:n.value,{value:h,defaultValue:d}),A=(0,oq.A)(E,2),S=A[0],j=A[1],C=f.useState(!1),M=(0,oq.A)(C,2),k=M[0],T=M[1],_=function(e,t){j(t),null==m||m(t)},P=(0,oY.A)(b,["children"]),O=f.useState(!1),R=(0,oq.A)(O,2),L=R[0],I=R[1],D=f.useState(!1),z=(0,oq.A)(D,2),N=z[0],H=z[1],B=function(){H(!0)},F=function(){H(!1)},U=function(){I(!1)},q=function(e){"Tab"===e.key&&I(!0)},G=function(e){var t=w.findIndex(function(e){return e.value===S}),n=w.length,r=w[(t+e+n)%n];r&&(j(r.value),null==m||m(r.value))},V=function(e){switch(e.key){case"ArrowLeft":case"ArrowUp":G(-1);break;case"ArrowRight":case"ArrowDown":G(1)}};return f.createElement("div",(0,tr.A)({role:"radiogroup","aria-label":"segmented control",tabIndex:u?void 0:0},P,{className:ok()(o,(r={},(0,oV.A)(r,"".concat(o,"-rtl"),"rtl"===a),(0,oV.A)(r,"".concat(o,"-disabled"),u),(0,oV.A)(r,"".concat(o,"-vertical"),s),r),void 0===g?"":g),ref:x}),f.createElement("div",{className:"".concat(o,"-group")},f.createElement(oJ,{vertical:s,prefixCls:o,value:S,containerRef:y,motionName:"".concat(o,"-").concat(void 0===v?"thumb-motion":v),direction:a,getValueIndex:function(e){return w.findIndex(function(t){return t.value===e})},onMotionStart:function(){T(!0)},onMotionEnd:function(){T(!1)}}),w.map(function(e){var t;return f.createElement(o1,(0,tr.A)({},e,{name:p,key:e.value,prefixCls:o,className:ok()(e.className,"".concat(o,"-item"),(t={},(0,oV.A)(t,"".concat(o,"-item-selected"),e.value===S&&!k),(0,oV.A)(t,"".concat(o,"-item-focused"),N&&L&&e.value===S),t)),checked:e.value===S,onChange:_,onFocus:B,onBlur:F,onKeyDown:V,onKeyUp:q,onMouseDown:U,disabled:!!u||!!e.disabled}))})))}),o3=n(83410),o5=n(22608),o4=n(72824),o6=n(78495),o8=n(17471);function o7(e,t){return{["".concat(e,", ").concat(e,":hover, ").concat(e,":focus")]:{color:t.colorTextDisabled,cursor:"not-allowed"}}}function o9(e){return{backgroundColor:e.itemSelectedBg,boxShadow:e.boxShadowTertiary}}let ae=Object.assign({overflow:"hidden"},o4.L9),at=e=>{let{componentCls:t}=e,n=e.calc(e.controlHeight).sub(e.calc(e.trackPadding).mul(2)).equal(),r=e.calc(e.controlHeightLG).sub(e.calc(e.trackPadding).mul(2)).equal(),i=e.calc(e.controlHeightSM).sub(e.calc(e.trackPadding).mul(2)).equal();return{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(0,o4.dF)(e)),{display:"inline-block",padding:e.trackPadding,color:e.itemColor,background:e.trackBg,borderRadius:e.borderRadius,transition:"all ".concat(e.motionDurationMid," ").concat(e.motionEaseInOut)}),(0,o4.K8)(e)),{["".concat(t,"-group")]:{position:"relative",display:"flex",alignItems:"stretch",justifyItems:"flex-start",flexDirection:"row",width:"100%"},["&".concat(t,"-rtl")]:{direction:"rtl"},["&".concat(t,"-vertical")]:{["".concat(t,"-group")]:{flexDirection:"column"},["".concat(t,"-thumb")]:{width:"100%",height:0,padding:"0 ".concat((0,o5.zA)(e.paddingXXS))}},["&".concat(t,"-block")]:{display:"flex"},["&".concat(t,"-block ").concat(t,"-item")]:{flex:1,minWidth:0},["".concat(t,"-item")]:{position:"relative",textAlign:"center",cursor:"pointer",transition:"color ".concat(e.motionDurationMid," ").concat(e.motionEaseInOut),borderRadius:e.borderRadiusSM,transform:"translateZ(0)","&-selected":Object.assign(Object.assign({},o9(e)),{color:e.itemSelectedColor}),"&-focused":Object.assign({},(0,o4.jk)(e)),"&::after":{content:'""',position:"absolute",zIndex:-1,width:"100%",height:"100%",top:0,insetInlineStart:0,borderRadius:"inherit",opacity:0,transition:"opacity ".concat(e.motionDurationMid),pointerEvents:"none"},["&:hover:not(".concat(t,"-item-selected):not(").concat(t,"-item-disabled)")]:{color:e.itemHoverColor,"&::after":{opacity:1,backgroundColor:e.itemHoverBg}},["&:active:not(".concat(t,"-item-selected):not(").concat(t,"-item-disabled)")]:{color:e.itemHoverColor,"&::after":{opacity:1,backgroundColor:e.itemActiveBg}},"&-label":Object.assign({minHeight:n,lineHeight:(0,o5.zA)(n),padding:"0 ".concat((0,o5.zA)(e.segmentedPaddingHorizontal))},ae),"&-icon + *":{marginInlineStart:e.calc(e.marginSM).div(2).equal()},"&-input":{position:"absolute",insetBlockStart:0,insetInlineStart:0,width:0,height:0,opacity:0,pointerEvents:"none"}},["".concat(t,"-thumb")]:Object.assign(Object.assign({},o9(e)),{position:"absolute",insetBlockStart:0,insetInlineStart:0,width:0,height:"100%",padding:"".concat((0,o5.zA)(e.paddingXXS)," 0"),borderRadius:e.borderRadiusSM,transition:"transform ".concat(e.motionDurationSlow," ").concat(e.motionEaseInOut,", height ").concat(e.motionDurationSlow," ").concat(e.motionEaseInOut),["& ~ ".concat(t,"-item:not(").concat(t,"-item-selected):not(").concat(t,"-item-disabled)::after")]:{backgroundColor:"transparent"}}),["&".concat(t,"-lg")]:{borderRadius:e.borderRadiusLG,["".concat(t,"-item-label")]:{minHeight:r,lineHeight:(0,o5.zA)(r),padding:"0 ".concat((0,o5.zA)(e.segmentedPaddingHorizontal)),fontSize:e.fontSizeLG},["".concat(t,"-item, ").concat(t,"-thumb")]:{borderRadius:e.borderRadius}},["&".concat(t,"-sm")]:{borderRadius:e.borderRadiusSM,["".concat(t,"-item-label")]:{minHeight:i,lineHeight:(0,o5.zA)(i),padding:"0 ".concat((0,o5.zA)(e.segmentedPaddingHorizontalSM))},["".concat(t,"-item, ").concat(t,"-thumb")]:{borderRadius:e.borderRadiusXS}}}),o7("&-disabled ".concat(t,"-item"),e)),o7("".concat(t,"-item-disabled"),e)),{["".concat(t,"-thumb-motion-appear-active")]:{transition:"transform ".concat(e.motionDurationSlow," ").concat(e.motionEaseInOut,", width ").concat(e.motionDurationSlow," ").concat(e.motionEaseInOut),willChange:"transform, width"},["&".concat(t,"-shape-round")]:{borderRadius:9999,["".concat(t,"-item, ").concat(t,"-thumb")]:{borderRadius:9999}}})}},an=(0,o6.OF)("Segmented",e=>{let{lineWidth:t,calc:n}=e;return[at((0,o8.oX)(e,{segmentedPaddingHorizontal:n(e.controlPaddingHorizontal).sub(t).equal(),segmentedPaddingHorizontalSM:n(e.controlPaddingHorizontalSM).sub(t).equal()}))]},e=>{let{colorTextLabel:t,colorText:n,colorFillSecondary:r,colorBgElevated:i,colorFill:o,lineWidthBold:a,colorBgLayout:s}=e;return{trackPadding:a,trackBg:s,itemColor:t,itemHoverColor:n,itemHoverBg:r,itemSelectedBg:i,itemActiveBg:o,itemSelectedColor:n}});var ar=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};let ai=f.forwardRef((e,t)=>{let n=(0,o3.A)(),{prefixCls:r,className:i,rootClassName:o,block:a,options:s=[],size:l="middle",style:c,vertical:u,shape:d="default",name:h=n}=e,p=ar(e,["prefixCls","className","rootClassName","block","options","size","style","vertical","shape","name"]),{getPrefixCls:m,direction:g,className:v,style:b}=(0,tv.TP)("segmented"),y=m("segmented",r),[x,w,E]=an(y),A=(0,oI.A)(l),S=f.useMemo(()=>s.map(e=>{if(function(e){return"object"==typeof e&&!!(null==e?void 0:e.icon)}(e)){let{icon:t,label:n}=e;return Object.assign(Object.assign({},ar(e,["icon","label"])),{label:f.createElement(f.Fragment,null,f.createElement("span",{className:"".concat(y,"-item-icon")},t),n&&f.createElement("span",null,n))})}return e}),[s,y]),j=ok()(i,o,v,{["".concat(y,"-block")]:a,["".concat(y,"-sm")]:"small"===A,["".concat(y,"-lg")]:"large"===A,["".concat(y,"-vertical")]:u,["".concat(y,"-shape-").concat(d)]:"round"===d},w,E),C=Object.assign(Object.assign({},b),c);return x(f.createElement(o2,Object.assign({},p,{name:h,className:j,style:C,options:S,ref:t,prefixCls:y,direction:g,vertical:u})))}),ao=f.createContext({}),aa=f.createContext({});var as=n(95315);let al=e=>{let{prefixCls:t,value:n,onChange:r}=e;return f.createElement("div",{className:"".concat(t,"-clear"),onClick:()=>{if(r&&n&&!n.cleared){let e=n.toHsb();e.a=0;let t=(0,as.Z6)(e);t.cleared=!0,r(t)}}})};var ac=n(55217);let au=e=>{let{prefixCls:t,min:n=0,max:r=100,value:i,onChange:o,className:a,formatter:s}=e,[l,c]=(0,f.useState)(i);return(0,f.useEffect)(()=>{Number.isNaN(i)||c(i)},[i]),f.createElement(of.A,{className:ok()("".concat(t,"-steppers"),a),min:n,max:r,value:l,formatter:s,size:"small",onChange:e=>{i||c(e||0),null==o||o(e)}})},ad=e=>{let{prefixCls:t,value:n,onChange:r}=e,i="".concat(t,"-alpha-input"),[o,a]=(0,f.useState)(()=>(0,as.Z6)(n||"#000"));return(0,f.useEffect)(()=>{n&&a(n)},[n]),f.createElement(au,{value:(0,as.Gp)(o),prefixCls:t,formatter:e=>"".concat(e,"%"),className:i,onChange:e=>{let t=o.toHsb();t.a=(e||0)/100;let i=(0,as.Z6)(t);n||a(i),null==r||r(i)}})};var ah=n(18478);let af=/(^#[\da-f]{6}$)|(^#[\da-f]{8}$)/i,ap=e=>af.test("#".concat(e)),am=e=>{let{prefixCls:t,value:n,onChange:r}=e,[i,o]=(0,f.useState)(()=>n?(0,oH.Ol)(n.toHexString()):void 0);return(0,f.useEffect)(()=>{n&&o((0,oH.Ol)(n.toHexString()))},[n]),f.createElement(ah.A,{className:"".concat(t,"-hex-input"),value:i,prefix:"#",onChange:e=>{let t=e.target.value;o((0,oH.Ol)(t)),ap((0,oH.Ol)(t,!0))&&(null==r||r((0,as.Z6)(t)))},size:"small"})},ag=e=>{let{prefixCls:t,value:n,onChange:r}=e,i="".concat(t,"-hsb-input"),[o,a]=(0,f.useState)(()=>(0,as.Z6)(n||"#000"));(0,f.useEffect)(()=>{n&&a(n)},[n]);let s=(e,t)=>{let i=o.toHsb();i[t]="h"===t?e:(e||0)/100;let s=(0,as.Z6)(i);n||a(s),null==r||r(s)};return f.createElement("div",{className:i},f.createElement(au,{max:360,min:0,value:Number(o.toHsb().h),prefixCls:t,className:i,formatter:e=>(0,as.W)(e||0).toString(),onChange:e=>s(Number(e),"h")}),f.createElement(au,{max:100,min:0,value:100*Number(o.toHsb().s),prefixCls:t,className:i,formatter:e=>"".concat((0,as.W)(e||0),"%"),onChange:e=>s(Number(e),"s")}),f.createElement(au,{max:100,min:0,value:100*Number(o.toHsb().b),prefixCls:t,className:i,formatter:e=>"".concat((0,as.W)(e||0),"%"),onChange:e=>s(Number(e),"b")}))},av=e=>{let{prefixCls:t,value:n,onChange:r}=e,i="".concat(t,"-rgb-input"),[o,a]=(0,f.useState)(()=>(0,as.Z6)(n||"#000"));(0,f.useEffect)(()=>{n&&a(n)},[n]);let s=(e,t)=>{let i=o.toRgb();i[t]=e||0;let s=(0,as.Z6)(i);n||a(s),null==r||r(s)};return f.createElement("div",{className:i},f.createElement(au,{max:255,min:0,value:Number(o.toRgb().r),prefixCls:t,className:i,onChange:e=>s(Number(e),"r")}),f.createElement(au,{max:255,min:0,value:Number(o.toRgb().g),prefixCls:t,className:i,onChange:e=>s(Number(e),"g")}),f.createElement(au,{max:255,min:0,value:Number(o.toRgb().b),prefixCls:t,className:i,onChange:e=>s(Number(e),"b")}))},ab=["hex","hsb","rgb"].map(e=>({value:e,label:e.toUpperCase()})),ay=e=>{let{prefixCls:t,format:n,value:r,disabledAlpha:i,onFormatChange:o,onChange:a,disabledFormat:s}=e,[l,c]=(0,oT.A)("hex",{value:n,onChange:o}),u="".concat(t,"-input"),d=(0,f.useMemo)(()=>{let e={value:r,prefixCls:t,onChange:a};switch(l){case"hsb":return f.createElement(ag,Object.assign({},e));case"rgb":return f.createElement(av,Object.assign({},e));default:return f.createElement(am,Object.assign({},e))}},[l,t,r,a]);return f.createElement("div",{className:"".concat(u,"-container")},!s&&f.createElement(ac.A,{value:l,variant:"borderless",getPopupContainer:e=>e,popupMatchSelectWidth:68,placement:"bottomRight",onChange:e=>{c(e)},className:"".concat(t,"-format-select"),size:"small",options:ab}),f.createElement("div",{className:u},d),!i&&f.createElement(ad,{prefixCls:t,value:r,onChange:a}))};var ax=n(89873),aw=n(9411),aE=n(75611),aA=n(98477);function aS(e,t,n,r){var i=(t-n)/(r-n),o={};switch(e){case"rtl":o.right="".concat(100*i,"%"),o.transform="translateX(50%)";break;case"btt":o.bottom="".concat(100*i,"%"),o.transform="translateY(50%)";break;case"ttb":o.top="".concat(100*i,"%"),o.transform="translateY(-50%)";break;default:o.left="".concat(100*i,"%"),o.transform="translateX(-50%)"}return o}function aj(e,t){return Array.isArray(e)?e[t]:e}var aC=n(22013),aM=f.createContext({min:0,max:0,direction:"ltr",step:1,includedStart:0,includedEnd:0,tabIndex:0,keyboard:!0,styles:{},classNames:{}}),ak=f.createContext({}),aT=["prefixCls","value","valueIndex","onStartMove","onDelete","style","render","dragging","draggingDelete","onOffsetChange","onChangeComplete","onFocus","onMouseEnter"],a_=f.forwardRef(function(e,t){var n,r=e.prefixCls,i=e.value,o=e.valueIndex,a=e.onStartMove,s=e.onDelete,l=e.style,c=e.render,u=e.dragging,d=e.draggingDelete,h=e.onOffsetChange,p=e.onChangeComplete,m=e.onFocus,g=e.onMouseEnter,v=(0,oG.A)(e,aT),b=f.useContext(aM),y=b.min,x=b.max,w=b.direction,E=b.disabled,A=b.keyboard,S=b.range,j=b.tabIndex,C=b.ariaLabelForHandle,M=b.ariaLabelledByForHandle,k=b.ariaRequired,T=b.ariaValueTextFormatterForHandle,_=b.styles,P=b.classNames,O="".concat(r,"-handle"),R=function(e){E||a(e,o)},L=aS(w,i,y,x),I={};null!==o&&(I={tabIndex:E?null:aj(j,o),role:"slider","aria-valuemin":y,"aria-valuemax":x,"aria-valuenow":i,"aria-disabled":E,"aria-label":aj(C,o),"aria-labelledby":aj(M,o),"aria-required":aj(k,o),"aria-valuetext":null==(n=aj(T,o))?void 0:n(i),"aria-orientation":"ltr"===w||"rtl"===w?"horizontal":"vertical",onMouseDown:R,onTouchStart:R,onFocus:function(e){null==m||m(e,o)},onMouseEnter:function(e){g(e,o)},onKeyDown:function(e){if(!E&&A){var t=null;switch(e.which||e.keyCode){case aC.A.LEFT:t="ltr"===w||"btt"===w?-1:1;break;case aC.A.RIGHT:t="ltr"===w||"btt"===w?1:-1;break;case aC.A.UP:t="ttb"!==w?1:-1;break;case aC.A.DOWN:t="ttb"!==w?-1:1;break;case aC.A.HOME:t="min";break;case aC.A.END:t="max";break;case aC.A.PAGE_UP:t=2;break;case aC.A.PAGE_DOWN:t=-2;break;case aC.A.BACKSPACE:case aC.A.DELETE:s(o)}null!==t&&(e.preventDefault(),h(t,o))}},onKeyUp:function(e){switch(e.which||e.keyCode){case aC.A.LEFT:case aC.A.RIGHT:case aC.A.UP:case aC.A.DOWN:case aC.A.HOME:case aC.A.END:case aC.A.PAGE_UP:case aC.A.PAGE_DOWN:null==p||p()}}});var D=f.createElement("div",(0,tr.A)({ref:t,className:ok()(O,(0,oV.A)((0,oV.A)((0,oV.A)({},"".concat(O,"-").concat(o+1),null!==o&&S),"".concat(O,"-dragging"),u),"".concat(O,"-dragging-delete"),d),P.handle),style:(0,oW.A)((0,oW.A)((0,oW.A)({},L),l),_.handle)},I,v));return c&&(D=c(D,{index:o,prefixCls:r,value:i,dragging:u,draggingDelete:d})),D}),aP=["prefixCls","style","onStartMove","onOffsetChange","values","handleRender","activeHandleRender","draggingIndex","draggingDelete","onFocus"],aO=f.forwardRef(function(e,t){var n=e.prefixCls,r=e.style,i=e.onStartMove,o=e.onOffsetChange,a=e.values,s=e.handleRender,l=e.activeHandleRender,c=e.draggingIndex,u=e.draggingDelete,d=e.onFocus,h=(0,oG.A)(e,aP),p=f.useRef({}),m=f.useState(!1),g=(0,oq.A)(m,2),v=g[0],b=g[1],y=f.useState(-1),x=(0,oq.A)(y,2),w=x[0],E=x[1],A=function(e){E(e),b(!0)};f.useImperativeHandle(t,function(){return{focus:function(e){var t;null==(t=p.current[e])||t.focus()},hideHelp:function(){(0,aA.flushSync)(function(){b(!1)})}}});var S=(0,oW.A)({prefixCls:n,onStartMove:i,onOffsetChange:o,render:s,onFocus:function(e,t){A(t),null==d||d(e)},onMouseEnter:function(e,t){A(t)}},h);return f.createElement(f.Fragment,null,a.map(function(e,t){var n=c===t;return f.createElement(a_,(0,tr.A)({ref:function(e){e?p.current[t]=e:delete p.current[t]},dragging:n,draggingDelete:n&&u,style:aj(r,t),key:t,value:e,valueIndex:t},S))}),l&&v&&f.createElement(a_,(0,tr.A)({key:"a11y"},S,{value:a[w],valueIndex:null,dragging:-1!==c,draggingDelete:u,render:l,style:{pointerEvents:"none"},tabIndex:null,"aria-hidden":!0})))});let aR=function(e){var t=e.prefixCls,n=e.style,r=e.children,i=e.value,o=e.onClick,a=f.useContext(aM),s=a.min,l=a.max,c=a.direction,u=a.includedStart,d=a.includedEnd,h=a.included,p="".concat(t,"-text"),m=aS(c,i,s,l);return f.createElement("span",{className:ok()(p,(0,oV.A)({},"".concat(p,"-active"),h&&u<=i&&i<=d)),style:(0,oW.A)((0,oW.A)({},m),n),onMouseDown:function(e){e.stopPropagation()},onClick:function(){o(i)}},r)},aL=function(e){var t=e.prefixCls,n=e.marks,r=e.onClick,i="".concat(t,"-mark");return n.length?f.createElement("div",{className:i},n.map(function(e){var t=e.value,n=e.style,o=e.label;return f.createElement(aR,{key:t,prefixCls:i,style:n,value:t,onClick:r},o)})):null},aI=function(e){var t=e.prefixCls,n=e.value,r=e.style,i=e.activeStyle,o=f.useContext(aM),a=o.min,s=o.max,l=o.direction,c=o.included,u=o.includedStart,d=o.includedEnd,h="".concat(t,"-dot"),p=c&&u<=n&&n<=d,m=(0,oW.A)((0,oW.A)({},aS(l,n,a,s)),"function"==typeof r?r(n):r);return p&&(m=(0,oW.A)((0,oW.A)({},m),"function"==typeof i?i(n):i)),f.createElement("span",{className:ok()(h,(0,oV.A)({},"".concat(h,"-active"),p)),style:m})},aD=function(e){var t=e.prefixCls,n=e.marks,r=e.dots,i=e.style,o=e.activeStyle,a=f.useContext(aM),s=a.min,l=a.max,c=a.step,u=f.useMemo(function(){var e=new Set;if(n.forEach(function(t){e.add(t.value)}),r&&null!==c)for(var t=s;t<=l;)e.add(t),t+=c;return Array.from(e)},[s,l,c,r,n]);return f.createElement("div",{className:"".concat(t,"-step")},u.map(function(e){return f.createElement(aI,{prefixCls:t,key:e,value:e,style:i,activeStyle:o})}))},az=function(e){var t=e.prefixCls,n=e.style,r=e.start,i=e.end,o=e.index,a=e.onStartMove,s=e.replaceCls,l=f.useContext(aM),c=l.direction,u=l.min,d=l.max,h=l.disabled,p=l.range,m=l.classNames,g="".concat(t,"-track"),v=(r-u)/(d-u),b=(i-u)/(d-u),y=function(e){!h&&a&&a(e,-1)},x={};switch(c){case"rtl":x.right="".concat(100*v,"%"),x.width="".concat(100*b-100*v,"%");break;case"btt":x.bottom="".concat(100*v,"%"),x.height="".concat(100*b-100*v,"%");break;case"ttb":x.top="".concat(100*v,"%"),x.height="".concat(100*b-100*v,"%");break;default:x.left="".concat(100*v,"%"),x.width="".concat(100*b-100*v,"%")}var w=s||ok()(g,(0,oV.A)((0,oV.A)({},"".concat(g,"-").concat(o+1),null!==o&&p),"".concat(t,"-track-draggable"),a),m.track);return f.createElement("div",{className:w,style:(0,oW.A)((0,oW.A)({},x),n),onMouseDown:y,onTouchStart:y})},aN=function(e){var t=e.prefixCls,n=e.style,r=e.values,i=e.startPoint,o=e.onStartMove,a=f.useContext(aM),s=a.included,l=a.range,c=a.min,u=a.styles,d=a.classNames,h=f.useMemo(function(){if(!l){if(0===r.length)return[];var e=null!=i?i:c,t=r[0];return[{start:Math.min(e,t),end:Math.max(e,t)}]}for(var n=[],o=0;o<r.length-1;o+=1)n.push({start:r[o],end:r[o+1]});return n},[r,l,i,c]);if(!s)return null;var p=null!=h&&h.length&&(d.tracks||u.tracks)?f.createElement(az,{index:null,prefixCls:t,start:h[0].start,end:h[h.length-1].end,replaceCls:ok()(d.tracks,"".concat(t,"-tracks")),style:u.tracks}):null;return f.createElement(f.Fragment,null,p,h.map(function(e,r){var i=e.start,a=e.end;return f.createElement(az,{index:r,prefixCls:t,style:(0,oW.A)((0,oW.A)({},aj(n,r)),u.track),start:i,end:a,key:r,onStartMove:o})}))};function aH(e){var t="targetTouches"in e?e.targetTouches[0]:e;return{pageX:t.pageX,pageY:t.pageY}}let aB=function(e,t,n,r,i,o,a,s,l,c,u){var d=f.useState(null),h=(0,oq.A)(d,2),p=h[0],m=h[1],g=f.useState(-1),v=(0,oq.A)(g,2),b=v[0],y=v[1],x=f.useState(!1),w=(0,oq.A)(x,2),E=w[0],A=w[1],S=f.useState(n),j=(0,oq.A)(S,2),C=j[0],M=j[1],k=f.useState(n),T=(0,oq.A)(k,2),_=T[0],P=T[1],O=f.useRef(null),R=f.useRef(null),L=f.useRef(null),I=f.useContext(ak),D=I.onDragStart,z=I.onDragChange;(0,oU.A)(function(){-1===b&&M(n)},[n,b]),f.useEffect(function(){return function(){document.removeEventListener("mousemove",O.current),document.removeEventListener("mouseup",R.current),L.current&&(L.current.removeEventListener("touchmove",O.current),L.current.removeEventListener("touchend",R.current))}},[]);var N=function(e,t,n){void 0!==t&&m(t),M(e);var r=e;n&&(r=e.filter(function(e,t){return t!==b})),a(r),z&&z({rawValues:e,deleteIndex:n?b:-1,draggingIndex:b,draggingValue:t})},H=(0,ax.A)(function(e,t,n){if(-1===e){var a=_[0],s=_[_.length-1],c=t*(i-r);c=Math.min(c=Math.max(c,r-a),i-s),c=o(a+c)-a,N(_.map(function(e){return e+c}))}else{var u=(0,oB.A)(C);u[e]=_[e];var d=l(u,(i-r)*t,e,"dist");N(d.values,d.value,n)}});return[b,p,E,f.useMemo(function(){var e=(0,oB.A)(n).sort(function(e,t){return e-t}),t=(0,oB.A)(C).sort(function(e,t){return e-t}),r={};t.forEach(function(e){r[e]=(r[e]||0)+1}),e.forEach(function(e){r[e]=(r[e]||0)-1});var i=+!!c;return Object.values(r).reduce(function(e,t){return e+Math.abs(t)},0)<=i?C:n},[n,C,c]),function(r,i,o){r.stopPropagation();var a=o||n,l=a[i];y(i),m(l),P(a),M(a),A(!1);var d=aH(r),h=d.pageX,f=d.pageY,p=!1;D&&D({rawValues:a,draggingIndex:i,draggingValue:l});var g=function(n){n.preventDefault();var r,o,a=aH(n),s=a.pageX,l=a.pageY,d=s-h,m=l-f,g=e.current.getBoundingClientRect(),v=g.width,b=g.height;switch(t){case"btt":r=-m/b,o=d;break;case"ttb":r=m/b,o=d;break;case"rtl":r=-d/v,o=m;break;default:r=d/v,o=m}A(p=!!c&&Math.abs(o)>130&&u<C.length),H(i,r,p)},v=function e(t){t.preventDefault(),document.removeEventListener("mouseup",e),document.removeEventListener("mousemove",g),L.current&&(L.current.removeEventListener("touchmove",O.current),L.current.removeEventListener("touchend",R.current)),O.current=null,R.current=null,L.current=null,s(p),y(-1),A(!1)};document.addEventListener("mouseup",v),document.addEventListener("mousemove",g),r.currentTarget.addEventListener("touchend",v),r.currentTarget.addEventListener("touchmove",g),O.current=g,R.current=v,L.current=r.currentTarget}]};var aF=f.forwardRef(function(e,t){var n,r,i,o,a,s,l,c=e.prefixCls,u=void 0===c?"rc-slider":c,d=e.className,h=e.style,p=e.classNames,m=e.styles,g=e.id,v=e.disabled,b=void 0!==v&&v,y=e.keyboard,x=void 0===y||y,w=e.autoFocus,E=e.onFocus,A=e.onBlur,S=e.min,j=void 0===S?0:S,C=e.max,M=void 0===C?100:C,k=e.step,T=void 0===k?1:k,_=e.value,P=e.defaultValue,O=e.range,R=e.count,L=e.onChange,I=e.onBeforeChange,D=e.onAfterChange,z=e.onChangeComplete,N=e.allowCross,H=e.pushable,B=void 0!==H&&H,F=e.reverse,U=e.vertical,q=e.included,G=void 0===q||q,V=e.startPoint,W=e.trackStyle,X=e.handleStyle,Y=e.railStyle,K=e.dotStyle,Z=e.activeDotStyle,$=e.marks,Q=e.dots,J=e.handleRender,ee=e.activeHandleRender,et=e.track,en=e.tabIndex,er=void 0===en?0:en,ei=e.ariaLabelForHandle,eo=e.ariaLabelledByForHandle,ea=e.ariaRequired,es=e.ariaValueTextFormatterForHandle,el=f.useRef(null),ec=f.useRef(null),eu=f.useMemo(function(){return U?F?"ttb":"btt":F?"rtl":"ltr"},[F,U]),ed=(0,f.useMemo)(function(){if(!0===O||!O)return[!!O,!1,!1,0];var e=O.editable,t=O.draggableTrack;return[!0,e,!e&&t,O.minCount||0,O.maxCount]},[O]),eh=(0,oq.A)(ed,5),ef=eh[0],ep=eh[1],em=eh[2],eg=eh[3],ev=eh[4],eb=f.useMemo(function(){return isFinite(j)?j:0},[j]),ey=f.useMemo(function(){return isFinite(M)?M:100},[M]),ex=f.useMemo(function(){return null!==T&&T<=0?1:T},[T]),ew=f.useMemo(function(){return"boolean"==typeof B?!!B&&ex:B>=0&&B},[B,ex]),eE=f.useMemo(function(){return Object.keys($||{}).map(function(e){var t=$[e],n={value:Number(e)};return t&&"object"===(0,oX.A)(t)&&!f.isValidElement(t)&&("label"in t||"style"in t)?(n.style=t.style,n.label=t.label):n.label=t,n}).filter(function(e){var t=e.label;return t||"number"==typeof t}).sort(function(e,t){return e.value-t.value})},[$]),eA=(n=void 0===N||N,r=f.useCallback(function(e){return Math.max(eb,Math.min(ey,e))},[eb,ey]),i=f.useCallback(function(e){if(null!==ex){var t=eb+Math.round((r(e)-eb)/ex)*ex,n=function(e){return(String(e).split(".")[1]||"").length},i=Math.max(n(ex),n(ey),n(eb)),o=Number(t.toFixed(i));return eb<=o&&o<=ey?o:null}return null},[ex,eb,ey,r]),o=f.useCallback(function(e){var t=r(e),n=eE.map(function(e){return e.value});null!==ex&&n.push(i(e)),n.push(eb,ey);var o=n[0],a=ey-eb;return n.forEach(function(e){var n=Math.abs(t-e);n<=a&&(o=e,a=n)}),o},[eb,ey,eE,ex,r,i]),a=function e(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit";if("number"==typeof n){var a,s=t[r],l=s+n,c=[];eE.forEach(function(e){c.push(e.value)}),c.push(eb,ey),c.push(i(s));var u=n>0?1:-1;"unit"===o?c.push(i(s+u*ex)):c.push(i(l)),c=c.filter(function(e){return null!==e}).filter(function(e){return n<0?e<=s:e>=s}),"unit"===o&&(c=c.filter(function(e){return e!==s}));var d="unit"===o?s:l,h=Math.abs((a=c[0])-d);if(c.forEach(function(e){var t=Math.abs(e-d);t<h&&(a=e,h=t)}),void 0===a)return n<0?eb:ey;if("dist"===o)return a;if(Math.abs(n)>1){var f=(0,oB.A)(t);return f[r]=a,e(f,n-u,r,o)}return a}return"min"===n?eb:"max"===n?ey:void 0},s=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit",i=e[n],o=a(e,t,n,r);return{value:o,changed:o!==i}},l=function(e){return null===ew&&0===e||"number"==typeof ew&&e<ew},[o,function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit",c=e.map(o),u=c[r],d=a(c,t,r,i);if(c[r]=d,!1===n){var h=ew||0;r>0&&c[r-1]!==u&&(c[r]=Math.max(c[r],c[r-1]+h)),r<c.length-1&&c[r+1]!==u&&(c[r]=Math.min(c[r],c[r+1]-h))}else if("number"==typeof ew||null===ew){for(var f=r+1;f<c.length;f+=1)for(var p=!0;l(c[f]-c[f-1])&&p;){var m=s(c,1,f);c[f]=m.value,p=m.changed}for(var g=r;g>0;g-=1)for(var v=!0;l(c[g]-c[g-1])&&v;){var b=s(c,-1,g-1);c[g-1]=b.value,v=b.changed}for(var y=c.length-1;y>0;y-=1)for(var x=!0;l(c[y]-c[y-1])&&x;){var w=s(c,-1,y-1);c[y-1]=w.value,x=w.changed}for(var E=0;E<c.length-1;E+=1)for(var A=!0;l(c[E+1]-c[E])&&A;){var S=s(c,1,E+1);c[E+1]=S.value,A=S.changed}}return{value:c[r],values:c}}]),eS=(0,oq.A)(eA,2),ej=eS[0],eC=eS[1],eM=(0,oT.A)(P,{value:_}),ek=(0,oq.A)(eM,2),eT=ek[0],e_=ek[1],eP=f.useMemo(function(){var e=null==eT?[]:Array.isArray(eT)?eT:[eT],t=(0,oq.A)(e,1)[0],n=void 0===t?eb:t,r=null===eT?[]:[n];if(ef){if(r=(0,oB.A)(e),R||void 0===eT){var i,o=R>=0?R+1:2;for(r=r.slice(0,o);r.length<o;)r.push(null!=(i=r[r.length-1])?i:eb)}r.sort(function(e,t){return e-t})}return r.forEach(function(e,t){r[t]=ej(e)}),r},[eT,ef,eb,R,ej]),eO=function(e){return ef?e:e[0]},eR=(0,ax.A)(function(e){var t=(0,oB.A)(e).sort(function(e,t){return e-t});L&&!(0,aw.A)(t,eP,!0)&&L(eO(t)),e_(t)}),eL=(0,ax.A)(function(e){e&&el.current.hideHelp();var t=eO(eP);null==D||D(t),(0,aE.Ay)(!D,"[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead."),null==z||z(t)}),eI=aB(ec,eu,eP,eb,ey,ej,eR,eL,eC,ep,eg),eD=(0,oq.A)(eI,5),ez=eD[0],eN=eD[1],eH=eD[2],eB=eD[3],eF=eD[4],eU=function(e,t){if(!b){var n,r,i=(0,oB.A)(eP),o=0,a=0,s=ey-eb;eP.forEach(function(t,n){var r=Math.abs(e-t);r<=s&&(s=r,o=n),t<e&&(a=n)});var l=o;ep&&0!==s&&(!ev||eP.length<ev)?(i.splice(a+1,0,e),l=a+1):i[o]=e,ef&&!eP.length&&void 0===R&&i.push(e);var c=eO(i);null==I||I(c),eR(i),t?(null==(n=document.activeElement)||null==(r=n.blur)||r.call(n),el.current.focus(l),eF(t,l,i)):(null==D||D(c),(0,aE.Ay)(!D,"[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead."),null==z||z(c))}},eq=f.useState(null),eG=(0,oq.A)(eq,2),eV=eG[0],eW=eG[1];f.useEffect(function(){if(null!==eV){var e=eP.indexOf(eV);e>=0&&el.current.focus(e)}eW(null)},[eV]);var eX=f.useMemo(function(){return(!em||null!==ex)&&em},[em,ex]),eY=(0,ax.A)(function(e,t){eF(e,t),null==I||I(eO(eP))}),eK=-1!==ez;f.useEffect(function(){if(!eK){var e=eP.lastIndexOf(eN);el.current.focus(e)}},[eK]);var eZ=f.useMemo(function(){return(0,oB.A)(eB).sort(function(e,t){return e-t})},[eB]),e$=f.useMemo(function(){return ef?[eZ[0],eZ[eZ.length-1]]:[eb,eZ[0]]},[eZ,ef,eb]),eQ=(0,oq.A)(e$,2),eJ=eQ[0],e0=eQ[1];f.useImperativeHandle(t,function(){return{focus:function(){el.current.focus(0)},blur:function(){var e,t=document.activeElement;null!=(e=ec.current)&&e.contains(t)&&(null==t||t.blur())}}}),f.useEffect(function(){w&&el.current.focus(0)},[]);var e1=f.useMemo(function(){return{min:eb,max:ey,direction:eu,disabled:b,keyboard:x,step:ex,included:G,includedStart:eJ,includedEnd:e0,range:ef,tabIndex:er,ariaLabelForHandle:ei,ariaLabelledByForHandle:eo,ariaRequired:ea,ariaValueTextFormatterForHandle:es,styles:m||{},classNames:p||{}}},[eb,ey,eu,b,x,ex,G,eJ,e0,ef,er,ei,eo,ea,es,m,p]);return f.createElement(aM.Provider,{value:e1},f.createElement("div",{ref:ec,className:ok()(u,d,(0,oV.A)((0,oV.A)((0,oV.A)((0,oV.A)({},"".concat(u,"-disabled"),b),"".concat(u,"-vertical"),U),"".concat(u,"-horizontal"),!U),"".concat(u,"-with-marks"),eE.length)),style:h,onMouseDown:function(e){e.preventDefault();var t,n=ec.current.getBoundingClientRect(),r=n.width,i=n.height,o=n.left,a=n.top,s=n.bottom,l=n.right,c=e.clientX,u=e.clientY;switch(eu){case"btt":t=(s-u)/i;break;case"ttb":t=(u-a)/i;break;case"rtl":t=(l-c)/r;break;default:t=(c-o)/r}eU(ej(eb+t*(ey-eb)),e)},id:g},f.createElement("div",{className:ok()("".concat(u,"-rail"),null==p?void 0:p.rail),style:(0,oW.A)((0,oW.A)({},Y),null==m?void 0:m.rail)}),!1!==et&&f.createElement(aN,{prefixCls:u,style:W,values:eP,startPoint:V,onStartMove:eX?eY:void 0}),f.createElement(aD,{prefixCls:u,marks:eE,dots:Q,style:K,activeStyle:Z}),f.createElement(aO,{ref:el,prefixCls:u,style:X,values:eB,draggingIndex:ez,draggingDelete:eH,onStartMove:eY,onOffsetChange:function(e,t){if(!b){var n=eC(eP,e,t);null==I||I(eO(eP)),eR(n.values),eW(n.value)}},onFocus:E,onBlur:A,handleRender:J,activeHandleRender:ee,onChangeComplete:eL,onDelete:ep?function(e){if(!b&&ep&&!(eP.length<=eg)){var t=(0,oB.A)(eP);t.splice(e,1),null==I||I(eO(t)),eR(t);var n=Math.max(0,e-1);el.current.hideHelp(),el.current.focus(n)}}:void 0}),f.createElement(aL,{prefixCls:u,marks:eE,onClick:eU})))}),aU=n(60910);let aq=(0,f.createContext)({}),aG=f.forwardRef((e,t)=>{let{open:n,draggingDelete:r,value:i}=e,o=(0,f.useRef)(null),a=n&&!r,s=(0,f.useRef)(null);function l(){aU.A.cancel(s.current),s.current=null}return f.useEffect(()=>(a?s.current=(0,aU.A)(()=>{var e;null==(e=o.current)||e.forceAlign(),s.current=null}):l(),l),[a,e.title,i]),f.createElement(iR.A,Object.assign({ref:(0,oK.K4)(o,t)},e,{open:a}))});var aV=n(50655);let aW=e=>{let{componentCls:t,antCls:n,controlSize:r,dotSize:i,marginFull:o,marginPart:a,colorFillContentHover:s,handleColorDisabled:l,calc:c,handleSize:u,handleSizeHover:d,handleActiveColor:h,handleActiveOutlineColor:f,handleLineWidth:p,handleLineWidthHover:m,motionDurationMid:g}=e;return{[t]:Object.assign(Object.assign({},(0,o4.dF)(e)),{position:"relative",height:r,margin:"".concat((0,o5.zA)(a)," ").concat((0,o5.zA)(o)),padding:0,cursor:"pointer",touchAction:"none","&-vertical":{margin:"".concat((0,o5.zA)(o)," ").concat((0,o5.zA)(a))},["".concat(t,"-rail")]:{position:"absolute",backgroundColor:e.railBg,borderRadius:e.borderRadiusXS,transition:"background-color ".concat(g)},["".concat(t,"-track,").concat(t,"-tracks")]:{position:"absolute",transition:"background-color ".concat(g)},["".concat(t,"-track")]:{backgroundColor:e.trackBg,borderRadius:e.borderRadiusXS},["".concat(t,"-track-draggable")]:{boxSizing:"content-box",backgroundClip:"content-box",border:"solid rgba(0,0,0,0)"},"&:hover":{["".concat(t,"-rail")]:{backgroundColor:e.railHoverBg},["".concat(t,"-track")]:{backgroundColor:e.trackHoverBg},["".concat(t,"-dot")]:{borderColor:s},["".concat(t,"-handle::after")]:{boxShadow:"0 0 0 ".concat((0,o5.zA)(p)," ").concat(e.colorPrimaryBorderHover)},["".concat(t,"-dot-active")]:{borderColor:e.dotActiveBorderColor}},["".concat(t,"-handle")]:{position:"absolute",width:u,height:u,outline:"none",userSelect:"none","&-dragging-delete":{opacity:0},"&::before":{content:'""',position:"absolute",insetInlineStart:c(p).mul(-1).equal(),insetBlockStart:c(p).mul(-1).equal(),width:c(u).add(c(p).mul(2)).equal(),height:c(u).add(c(p).mul(2)).equal(),backgroundColor:"transparent"},"&::after":{content:'""',position:"absolute",insetBlockStart:0,insetInlineStart:0,width:u,height:u,backgroundColor:e.colorBgElevated,boxShadow:"0 0 0 ".concat((0,o5.zA)(p)," ").concat(e.handleColor),outline:"0px solid transparent",borderRadius:"50%",cursor:"pointer",transition:"\n            inset-inline-start ".concat(g,",\n            inset-block-start ").concat(g,",\n            width ").concat(g,",\n            height ").concat(g,",\n            box-shadow ").concat(g,",\n            outline ").concat(g,"\n          ")},"&:hover, &:active, &:focus":{"&::before":{insetInlineStart:c(d).sub(u).div(2).add(m).mul(-1).equal(),insetBlockStart:c(d).sub(u).div(2).add(m).mul(-1).equal(),width:c(d).add(c(m).mul(2)).equal(),height:c(d).add(c(m).mul(2)).equal()},"&::after":{boxShadow:"0 0 0 ".concat((0,o5.zA)(m)," ").concat(h),outline:"6px solid ".concat(f),width:d,height:d,insetInlineStart:e.calc(u).sub(d).div(2).equal(),insetBlockStart:e.calc(u).sub(d).div(2).equal()}}},["&-lock ".concat(t,"-handle")]:{"&::before, &::after":{transition:"none"}},["".concat(t,"-mark")]:{position:"absolute",fontSize:e.fontSize},["".concat(t,"-mark-text")]:{position:"absolute",display:"inline-block",color:e.colorTextDescription,textAlign:"center",wordBreak:"keep-all",cursor:"pointer",userSelect:"none","&-active":{color:e.colorText}},["".concat(t,"-step")]:{position:"absolute",background:"transparent",pointerEvents:"none"},["".concat(t,"-dot")]:{position:"absolute",width:i,height:i,backgroundColor:e.colorBgElevated,border:"".concat((0,o5.zA)(p)," solid ").concat(e.dotBorderColor),borderRadius:"50%",cursor:"pointer",transition:"border-color ".concat(e.motionDurationSlow),pointerEvents:"auto","&-active":{borderColor:e.dotActiveBorderColor}},["&".concat(t,"-disabled")]:{cursor:"not-allowed",["".concat(t,"-rail")]:{backgroundColor:"".concat(e.railBg," !important")},["".concat(t,"-track")]:{backgroundColor:"".concat(e.trackBgDisabled," !important")},["\n          ".concat(t,"-dot\n        ")]:{backgroundColor:e.colorBgElevated,borderColor:e.trackBgDisabled,boxShadow:"none",cursor:"not-allowed"},["".concat(t,"-handle::after")]:{backgroundColor:e.colorBgElevated,cursor:"not-allowed",width:u,height:u,boxShadow:"0 0 0 ".concat((0,o5.zA)(p)," ").concat(l),insetInlineStart:0,insetBlockStart:0},["\n          ".concat(t,"-mark-text,\n          ").concat(t,"-dot\n        ")]:{cursor:"not-allowed !important"}},["&-tooltip ".concat(n,"-tooltip-inner")]:{minWidth:"unset"}})}},aX=(e,t)=>{let{componentCls:n,railSize:r,handleSize:i,dotSize:o,marginFull:a,calc:s}=e,l=t?"width":"height",c=t?"height":"width",u=t?"insetBlockStart":"insetInlineStart",d=t?"top":"insetInlineStart",h=s(r).mul(3).sub(i).div(2).equal(),f=s(i).sub(r).div(2).equal(),p=t?{borderWidth:"".concat((0,o5.zA)(f)," 0"),transform:"translateY(".concat((0,o5.zA)(s(f).mul(-1).equal()),")")}:{borderWidth:"0 ".concat((0,o5.zA)(f)),transform:"translateX(".concat((0,o5.zA)(e.calc(f).mul(-1).equal()),")")};return{[t?"paddingBlock":"paddingInline"]:r,[c]:s(r).mul(3).equal(),["".concat(n,"-rail")]:{[l]:"100%",[c]:r},["".concat(n,"-track,").concat(n,"-tracks")]:{[c]:r},["".concat(n,"-track-draggable")]:Object.assign({},p),["".concat(n,"-handle")]:{[u]:h},["".concat(n,"-mark")]:{insetInlineStart:0,top:0,[d]:s(r).mul(3).add(t?0:a).equal(),[l]:"100%"},["".concat(n,"-step")]:{insetInlineStart:0,top:0,[d]:r,[l]:"100%",[c]:r},["".concat(n,"-dot")]:{position:"absolute",[u]:s(r).sub(o).div(2).equal()}}},aY=e=>{let{componentCls:t,marginPartWithMark:n}=e;return{["".concat(t,"-horizontal")]:Object.assign(Object.assign({},aX(e,!0)),{["&".concat(t,"-with-marks")]:{marginBottom:n}})}},aK=e=>{let{componentCls:t}=e;return{["".concat(t,"-vertical")]:Object.assign(Object.assign({},aX(e,!1)),{height:"100%"})}},aZ=(0,o6.OF)("Slider",e=>{let t=(0,o8.oX)(e,{marginPart:e.calc(e.controlHeight).sub(e.controlSize).div(2).equal(),marginFull:e.calc(e.controlSize).div(2).equal(),marginPartWithMark:e.calc(e.controlHeightLG).sub(e.controlSize).equal()});return[aW(t),aY(t),aK(t)]},e=>{let t=e.controlHeightLG/4,n=e.controlHeightSM/2,r=e.lineWidth+1,i=e.lineWidth+1.5,o=e.colorPrimary,a=new aV.Y(o).setA(.2).toRgbString();return{controlSize:t,railSize:4,handleSize:t,handleSizeHover:n,dotSize:8,handleLineWidth:r,handleLineWidthHover:i,railBg:e.colorFillTertiary,railHoverBg:e.colorFillSecondary,trackBg:e.colorPrimaryBorder,trackHoverBg:e.colorPrimaryBorderHover,handleColor:e.colorPrimaryBorder,handleActiveColor:o,handleActiveOutlineColor:a,handleColorDisabled:new aV.Y(e.colorTextDisabled).onBackground(e.colorBgContainer).toHexString(),dotBorderColor:e.colorBorderSecondary,dotActiveBorderColor:e.colorPrimaryBorder,trackBgDisabled:e.colorBgContainerDisabled}});function a$(){let[e,t]=f.useState(!1),n=f.useRef(null),r=()=>{aU.A.cancel(n.current)};return f.useEffect(()=>r,[]),[e,e=>{r(),e?t(e):n.current=(0,aU.A)(()=>{t(e)})}]}var aQ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};let aJ=f.forwardRef((e,t)=>{let{prefixCls:n,range:r,className:i,rootClassName:o,style:a,disabled:s,tooltipPrefixCls:l,tipFormatter:c,tooltipVisible:u,getTooltipPopupContainer:d,tooltipPlacement:h,tooltip:p={},onChangeComplete:m,classNames:g,styles:v}=e,b=aQ(e,["prefixCls","range","className","rootClassName","style","disabled","tooltipPrefixCls","tipFormatter","tooltipVisible","getTooltipPopupContainer","tooltipPlacement","tooltip","onChangeComplete","classNames","styles"]),{vertical:y}=e,{getPrefixCls:x,direction:w,className:E,style:A,classNames:S,styles:j,getPopupContainer:C}=(0,tv.TP)("slider"),M=f.useContext(oR.A),{handleRender:k,direction:T}=f.useContext(aq),_="rtl"===(T||w),[P,O]=a$(),[R,L]=a$(),I=Object.assign({},p),{open:D,placement:z,getPopupContainer:N,prefixCls:H,formatter:B}=I,F=null!=D?D:u,U=(P||R)&&!1!==F,q=function(e,t){return e||null===e?e:t||null===t?t:e=>"number"==typeof e?e.toString():""}(B,c),[G,V]=a$(),W=(e,t)=>e||(t?_?"left":"right":"top"),X=x("slider",n),[Y,K,Z]=aZ(X),$=ok()(i,E,S.root,null==g?void 0:g.root,o,{["".concat(X,"-rtl")]:_,["".concat(X,"-lock")]:G},K,Z);_&&!b.vertical&&(b.reverse=!b.reverse),f.useEffect(()=>{let e=()=>{(0,aU.A)(()=>{L(!1)},1)};return document.addEventListener("mouseup",e),()=>{document.removeEventListener("mouseup",e)}},[]);let Q=r&&!F,J=k||((e,t)=>{let{index:n}=t,r=e.props;function i(e,t,n){var i,o;n&&(null==(i=b[e])||i.call(b,t)),null==(o=r[e])||o.call(r,t)}let o=Object.assign(Object.assign({},r),{onMouseEnter:e=>{O(!0),i("onMouseEnter",e)},onMouseLeave:e=>{O(!1),i("onMouseLeave",e)},onMouseDown:e=>{L(!0),V(!0),i("onMouseDown",e)},onFocus:e=>{var t;L(!0),null==(t=b.onFocus)||t.call(b,e),i("onFocus",e,!0)},onBlur:e=>{var t;L(!1),null==(t=b.onBlur)||t.call(b,e),i("onBlur",e,!0)}}),a=f.cloneElement(e,o),s=(!!F||U)&&null!==q;return Q?a:f.createElement(aG,Object.assign({},I,{prefixCls:x("tooltip",null!=H?H:l),title:q?q(t.value):"",value:t.value,open:s,placement:W(null!=z?z:h,y),key:n,classNames:{root:"".concat(X,"-tooltip")},getPopupContainer:N||d||C}),a)}),ee=Q?(e,t)=>{let n=f.cloneElement(e,{style:Object.assign(Object.assign({},e.props.style),{visibility:"hidden"})});return f.createElement(aG,Object.assign({},I,{prefixCls:x("tooltip",null!=H?H:l),title:q?q(t.value):"",open:null!==q&&U,placement:W(null!=z?z:h,y),key:"tooltip",classNames:{root:"".concat(X,"-tooltip")},getPopupContainer:N||d||C,draggingDelete:t.draggingDelete}),n)}:void 0,et=Object.assign(Object.assign(Object.assign(Object.assign({},j.root),A),null==v?void 0:v.root),a),en=Object.assign(Object.assign({},j.tracks),null==v?void 0:v.tracks),er=ok()(S.tracks,null==g?void 0:g.tracks);return Y(f.createElement(aF,Object.assign({},b,{classNames:Object.assign({handle:ok()(S.handle,null==g?void 0:g.handle),rail:ok()(S.rail,null==g?void 0:g.rail),track:ok()(S.track,null==g?void 0:g.track)},er?{tracks:er}:{}),styles:Object.assign({handle:Object.assign(Object.assign({},j.handle),null==v?void 0:v.handle),rail:Object.assign(Object.assign({},j.rail),null==v?void 0:v.rail),track:Object.assign(Object.assign({},j.track),null==v?void 0:v.track)},Object.keys(en).length?{tracks:en}:{}),step:b.step,range:r,className:$,style:et,disabled:null!=s?s:M,ref:t,prefixCls:X,handleRender:J,activeHandleRender:ee,onChangeComplete:e=>{null==m||m(e),V(!1)}})))});var a0=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};let a1=e=>{let{prefixCls:t,colors:n,type:r,color:i,range:o=!1,className:a,activeIndex:s,onActive:l,onDragStart:c,onDragChange:u,onKeyDelete:d}=e,h=Object.assign(Object.assign({},a0(e,["prefixCls","colors","type","color","range","className","activeIndex","onActive","onDragStart","onDragChange","onKeyDelete"])),{track:!1}),p=f.useMemo(()=>{let e=n.map(e=>"".concat(e.color," ").concat(e.percent,"%")).join(", ");return"linear-gradient(90deg, ".concat(e,")")},[n]),m=f.useMemo(()=>i&&r?"alpha"===r?i.toRgbString():"hsl(".concat(i.toHsb().h,", 100%, 50%)"):null,[i,r]),g=(0,ax.A)(c),v=(0,ax.A)(u),b=f.useMemo(()=>({onDragStart:g,onDragChange:v}),[]),y=(0,ax.A)((e,i)=>{let{onFocus:o,style:a,className:c,onKeyDown:u}=e.props,h=Object.assign({},a);return"gradient"===r&&(h.background=(0,as.PU)(n,i.value)),f.cloneElement(e,{onFocus:e=>{null==l||l(i.index),null==o||o(e)},style:h,className:ok()(c,{["".concat(t,"-slider-handle-active")]:s===i.index}),onKeyDown:e=>{("Delete"===e.key||"Backspace"===e.key)&&d&&d(i.index),null==u||u(e)}})}),x=f.useMemo(()=>({direction:"ltr",handleRender:y}),[]);return f.createElement(aq.Provider,{value:x},f.createElement(ak.Provider,{value:b},f.createElement(aJ,Object.assign({},h,{className:ok()(a,"".concat(t,"-slider")),tooltip:{open:!1},range:{editable:o,minCount:2},styles:{rail:{background:p},handle:m?{background:m}:{}},classNames:{rail:"".concat(t,"-slider-rail"),handle:"".concat(t,"-slider-handle")}}))))};function a2(e){return(0,oB.A)(e).sort((e,t)=>e.percent-t.percent)}let a3=f.memo(e=>{let{prefixCls:t,mode:n,onChange:r,onChangeComplete:i,onActive:o,activeIndex:a,onGradientDragging:s,colors:l}=e,c=f.useMemo(()=>l.map(e=>({percent:e.percent,color:e.color.toRgbString()})),[l]),u=f.useMemo(()=>c.map(e=>e.percent),[c]),d=f.useRef(c);return"gradient"!==n?null:f.createElement(a1,{min:0,max:100,prefixCls:t,className:"".concat(t,"-gradient-slider"),colors:c,color:null,value:u,range:!0,onChangeComplete:e=>{i(new oH.kf(c)),a>=e.length&&o(e.length-1),s(!1)},disabled:!1,type:"gradient",activeIndex:a,onActive:o,onDragStart:e=>{let{rawValues:t,draggingIndex:n,draggingValue:i}=e;if(t.length>c.length){let e=(0,as.PU)(c,i),t=(0,oB.A)(c);t.splice(n,0,{percent:i,color:e}),d.current=t}else d.current=c;s(!0),r(new oH.kf(a2(d.current)),!0)},onDragChange:e=>{let{deleteIndex:t,draggingIndex:n,draggingValue:i}=e,o=(0,oB.A)(d.current);-1!==t?o.splice(t,1):(o[n]=Object.assign(Object.assign({},o[n]),{percent:i}),o=a2(o)),r(new oH.kf(o),!0)},onKeyDelete:e=>{let t=(0,oB.A)(c);t.splice(e,1);let n=new oH.kf(t);r(n),i(n)}})});var a5=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};let a4={slider:e=>{let{value:t,onChange:n,onChangeComplete:r}=e;return f.createElement(a1,Object.assign({},e,{value:[t],onChange:e=>n(e[0]),onChangeComplete:e=>r(e[0])}))}},a6=()=>{let e=(0,f.useContext)(ao),{mode:t,onModeChange:n,modeOptions:r,prefixCls:i,allowClear:o,value:a,disabledAlpha:s,onChange:l,onClear:c,onChangeComplete:u,activeIndex:d,gradientDragging:h}=e,p=a5(e,["mode","onModeChange","modeOptions","prefixCls","allowClear","value","disabledAlpha","onChange","onClear","onChangeComplete","activeIndex","gradientDragging"]),m=f.useMemo(()=>a.cleared?[{percent:0,color:new oH.kf("")},{percent:100,color:new oH.kf("")}]:a.getColors(),[a]),g=!a.isGradient(),[v,b]=f.useState(a);(0,oU.A)(()=>{var e;g||b(null==(e=m[d])?void 0:e.color)},[h,d]);let y=f.useMemo(()=>{var e;return g?a:h?v:null==(e=m[d])?void 0:e.color},[a,d,g,v,h]),[x,w]=f.useState(y),[E,A]=f.useState(0),S=(null==x?void 0:x.equals(y))?y:x;(0,oU.A)(()=>{w(y)},[E,null==y?void 0:y.toHexString()]);let j=(e,n)=>{let r=(0,as.Z6)(e);if(a.cleared){let e=r.toRgb();if(e.r||e.g||e.b||!n)r=(0,as.E)(r);else{let{type:e,value:t=0}=n;r=new oH.kf({h:"hue"===e?t:0,s:1,b:1,a:"alpha"===e?t/100:1})}}if("single"===t)return r;let i=(0,oB.A)(m);return i[d]=Object.assign(Object.assign({},i[d]),{color:r}),new oH.kf(i)},C=(e,t,n)=>{let r=j(e,n);w(r.isGradient()?r.getColors()[d].color:r),l(r,t)},M=(e,t)=>{u(j(e,t)),A(e=>e+1)},k=null,T=r.length>1;return(o||T)&&(k=f.createElement("div",{className:"".concat(i,"-operation")},T&&f.createElement(ai,{size:"small",options:r,value:t,onChange:n}),f.createElement(al,Object.assign({prefixCls:i,value:a,onChange:e=>{l(e),null==c||c()}},p)))),f.createElement(f.Fragment,null,k,f.createElement(a3,Object.assign({},e,{colors:m})),f.createElement(oF.Ay,{prefixCls:i,value:null==S?void 0:S.toHsb(),disabledAlpha:s,onChange:(e,t)=>{C(e,!0,t)},onChangeComplete:(e,t)=>{M(e,t)},components:a4}),f.createElement(ay,Object.assign({value:y,onChange:e=>{l(j(e))},prefixCls:i,disabledAlpha:s},p)))};var a8=n(92129);let a7=()=>{let{prefixCls:e,value:t,presets:n,onChange:r}=(0,f.useContext)(aa);return Array.isArray(n)?f.createElement(a8.A,{value:t,presets:n,prefixCls:e,onChange:r}):null},a9=e=>{let{prefixCls:t,presets:n,panelRender:r,value:i,onChange:o,onClear:a,allowClear:s,disabledAlpha:l,mode:c,onModeChange:u,modeOptions:d,onChangeComplete:h,activeIndex:p,onActive:m,format:g,onFormatChange:v,gradientDragging:b,onGradientDragging:y,disabledFormat:x}=e,w="".concat(t,"-inner"),E=f.useMemo(()=>({prefixCls:t,value:i,onChange:o,onClear:a,allowClear:s,disabledAlpha:l,mode:c,onModeChange:u,modeOptions:d,onChangeComplete:h,activeIndex:p,onActive:m,format:g,onFormatChange:v,gradientDragging:b,onGradientDragging:y,disabledFormat:x}),[t,i,o,a,s,l,c,u,d,h,p,m,g,v,b,y,x]),A=f.useMemo(()=>({prefixCls:t,value:i,presets:n,onChange:o}),[t,i,n,o]),S=f.createElement("div",{className:"".concat(w,"-content")},f.createElement(a6,null),Array.isArray(n)&&f.createElement(iL.A,null),f.createElement(a7,null));return f.createElement(ao.Provider,{value:E},f.createElement(aa.Provider,{value:A},f.createElement("div",{className:w},"function"==typeof r?r(S,{components:{Picker:a6,Presets:a7}}):S)))};var se=n(1928),st=n(55222),sn=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};let sr=(0,f.forwardRef)((e,t)=>{let{color:n,prefixCls:r,open:i,disabled:o,format:a,className:s,showText:l,activeIndex:c}=e,u=sn(e,["color","prefixCls","open","disabled","format","className","showText","activeIndex"]),d="".concat(r,"-trigger"),h="".concat(d,"-text"),p="".concat(h,"-cell"),[m]=(0,st.A)("ColorPicker"),g=f.useMemo(()=>{if(!l)return"";if("function"==typeof l)return l(n);if(n.cleared)return m.transparent;if(n.isGradient())return n.getColors().map((e,t)=>{let n=-1!==c&&c!==t;return f.createElement("span",{key:t,className:ok()(p,n&&"".concat(p,"-inactive"))},e.color.toRgbString()," ",e.percent,"%")});let e=n.toHexString().toUpperCase(),t=(0,as.Gp)(n);switch(a){case"rgb":return n.toRgbString();case"hsb":return n.toHsbString();default:return t<100?"".concat(e.slice(0,7),",").concat(t,"%"):e}},[n,a,l,c]),v=(0,f.useMemo)(()=>n.cleared?f.createElement(al,{prefixCls:r}):f.createElement(oF.ZC,{prefixCls:r,color:n.toCssString()}),[n,r]);return f.createElement("div",Object.assign({ref:t,className:ok()(d,s,{["".concat(d,"-active")]:i,["".concat(d,"-disabled")]:o})},(0,se.A)(u)),v,l&&f.createElement("div",{className:h},g))});var si=n(60327);let so=(e,t)=>({backgroundImage:"conic-gradient(".concat(t," 25%, transparent 25% 50%, ").concat(t," 50% 75%, transparent 75% 100%)"),backgroundSize:"".concat(e," ").concat(e)}),sa=(e,t)=>{let{componentCls:n,borderRadiusSM:r,colorPickerInsetShadow:i,lineWidth:o,colorFillSecondary:a}=e;return{["".concat(n,"-color-block")]:Object.assign(Object.assign({position:"relative",borderRadius:r,width:t,height:t,boxShadow:i,flex:"none"},so("50%",e.colorFillSecondary)),{["".concat(n,"-color-block-inner")]:{width:"100%",height:"100%",boxShadow:"inset 0 0 0 ".concat((0,o5.zA)(o)," ").concat(a),borderRadius:"inherit"}})}},ss=e=>{let{componentCls:t,antCls:n,fontSizeSM:r,lineHeightSM:i,colorPickerAlphaInputWidth:o,marginXXS:a,paddingXXS:s,controlHeightSM:l,marginXS:c,fontSizeIcon:u,paddingXS:d,colorTextPlaceholder:h,colorPickerInputNumberHandleWidth:f,lineWidth:p}=e;return{["".concat(t,"-input-container")]:{display:"flex",["".concat(t,"-steppers").concat(n,"-input-number")]:{fontSize:r,lineHeight:i,["".concat(n,"-input-number-input")]:{paddingInlineStart:s,paddingInlineEnd:0},["".concat(n,"-input-number-handler-wrap")]:{width:f}},["".concat(t,"-steppers").concat(t,"-alpha-input")]:{flex:"0 0 ".concat((0,o5.zA)(o)),marginInlineStart:a},["".concat(t,"-format-select").concat(n,"-select")]:{marginInlineEnd:c,width:"auto","&-single":{["".concat(n,"-select-selector")]:{padding:0,border:0},["".concat(n,"-select-arrow")]:{insetInlineEnd:0},["".concat(n,"-select-selection-item")]:{paddingInlineEnd:e.calc(u).add(a).equal(),fontSize:r,lineHeight:(0,o5.zA)(l)},["".concat(n,"-select-item-option-content")]:{fontSize:r,lineHeight:i},["".concat(n,"-select-dropdown")]:{["".concat(n,"-select-item")]:{minHeight:"auto"}}}},["".concat(t,"-input")]:{gap:a,alignItems:"center",flex:1,width:0,["".concat(t,"-hsb-input,").concat(t,"-rgb-input")]:{display:"flex",gap:a,alignItems:"center"},["".concat(t,"-steppers")]:{flex:1},["".concat(t,"-hex-input").concat(n,"-input-affix-wrapper")]:{flex:1,padding:"0 ".concat((0,o5.zA)(d)),["".concat(n,"-input")]:{fontSize:r,textTransform:"uppercase",lineHeight:(0,o5.zA)(e.calc(l).sub(e.calc(p).mul(2)).equal())},["".concat(n,"-input-prefix")]:{color:h}}}}}},sl=e=>{let{componentCls:t,controlHeightLG:n,borderRadiusSM:r,colorPickerInsetShadow:i,marginSM:o,colorBgElevated:a,colorFillSecondary:s,lineWidthBold:l,colorPickerHandlerSize:c}=e;return{userSelect:"none",["".concat(t,"-select")]:{["".concat(t,"-palette")]:{minHeight:e.calc(n).mul(4).equal(),overflow:"hidden",borderRadius:r},["".concat(t,"-saturation")]:{position:"absolute",borderRadius:"inherit",boxShadow:i,inset:0},marginBottom:o},["".concat(t,"-handler")]:{width:c,height:c,border:"".concat((0,o5.zA)(l)," solid ").concat(a),position:"relative",borderRadius:"50%",cursor:"pointer",boxShadow:"".concat(i,", 0 0 0 1px ").concat(s)}}},sc=e=>{let{componentCls:t,antCls:n,colorTextQuaternary:r,paddingXXS:i,colorPickerPresetColorSize:o,fontSizeSM:a,colorText:s,lineHeightSM:l,lineWidth:c,borderRadius:u,colorFill:d,colorWhite:h,marginXXS:f,paddingXS:p,fontHeightSM:m}=e;return{["".concat(t,"-presets")]:{["".concat(n,"-collapse-item > ").concat(n,"-collapse-header")]:{padding:0,["".concat(n,"-collapse-expand-icon")]:{height:m,color:r,paddingInlineEnd:i}},["".concat(n,"-collapse")]:{display:"flex",flexDirection:"column",gap:f},["".concat(n,"-collapse-item > ").concat(n,"-collapse-content > ").concat(n,"-collapse-content-box")]:{padding:"".concat((0,o5.zA)(p)," 0")},"&-label":{fontSize:a,color:s,lineHeight:l},"&-items":{display:"flex",flexWrap:"wrap",gap:e.calc(f).mul(1.5).equal(),["".concat(t,"-presets-color")]:{position:"relative",cursor:"pointer",width:o,height:o,"&::before":{content:'""',pointerEvents:"none",width:e.calc(o).add(e.calc(c).mul(4)).equal(),height:e.calc(o).add(e.calc(c).mul(4)).equal(),position:"absolute",top:e.calc(c).mul(-2).equal(),insetInlineStart:e.calc(c).mul(-2).equal(),borderRadius:u,border:"".concat((0,o5.zA)(c)," solid transparent"),transition:"border-color ".concat(e.motionDurationMid," ").concat(e.motionEaseInBack)},"&:hover::before":{borderColor:d},"&::after":{boxSizing:"border-box",position:"absolute",top:"50%",insetInlineStart:"21.5%",display:"table",width:e.calc(o).div(13).mul(5).equal(),height:e.calc(o).div(13).mul(8).equal(),border:"".concat((0,o5.zA)(e.lineWidthBold)," solid ").concat(e.colorWhite),borderTop:0,borderInlineStart:0,transform:"rotate(45deg) scale(0) translate(-50%,-50%)",opacity:0,content:'""',transition:"all ".concat(e.motionDurationFast," ").concat(e.motionEaseInBack,", opacity ").concat(e.motionDurationFast)},["&".concat(t,"-presets-color-checked")]:{"&::after":{opacity:1,borderColor:h,transform:"rotate(45deg) scale(1) translate(-50%,-50%)",transition:"transform ".concat(e.motionDurationMid," ").concat(e.motionEaseOutBack," ").concat(e.motionDurationFast)},["&".concat(t,"-presets-color-bright")]:{"&::after":{borderColor:"rgba(0, 0, 0, 0.45)"}}}}},"&-empty":{fontSize:a,color:r}}}},su=e=>{let{componentCls:t,colorPickerInsetShadow:n,colorBgElevated:r,colorFillSecondary:i,lineWidthBold:o,colorPickerHandlerSizeSM:a,colorPickerSliderHeight:s,marginSM:l,marginXS:c}=e,u=e.calc(a).sub(e.calc(o).mul(2).equal()).equal(),d=e.calc(a).add(e.calc(o).mul(2).equal()).equal(),h={"&:after":{transform:"scale(1)",boxShadow:"".concat(n,", 0 0 0 1px ").concat(e.colorPrimaryActive)}};return{["".concat(t,"-slider")]:[so((0,o5.zA)(s),e.colorFillSecondary),{margin:0,padding:0,height:s,borderRadius:e.calc(s).div(2).equal(),"&-rail":{height:s,borderRadius:e.calc(s).div(2).equal(),boxShadow:n},["& ".concat(t,"-slider-handle")]:{width:u,height:u,top:0,borderRadius:"100%","&:before":{display:"block",position:"absolute",background:"transparent",left:{_skip_check_:!0,value:"50%"},top:"50%",transform:"translate(-50%, -50%)",width:d,height:d,borderRadius:"100%"},"&:after":{width:a,height:a,border:"".concat((0,o5.zA)(o)," solid ").concat(r),boxShadow:"".concat(n,", 0 0 0 1px ").concat(i),outline:"none",insetInlineStart:e.calc(o).mul(-1).equal(),top:e.calc(o).mul(-1).equal(),background:"transparent",transition:"none"},"&:focus":h}}],["".concat(t,"-slider-container")]:{display:"flex",gap:l,marginBottom:l,["".concat(t,"-slider-group")]:{flex:1,flexDirection:"column",justifyContent:"space-between",display:"flex","&-disabled-alpha":{justifyContent:"center"}}},["".concat(t,"-gradient-slider")]:{marginBottom:c,["& ".concat(t,"-slider-handle")]:{"&:after":{transform:"scale(0.8)"},"&-active, &:focus":h}}}},sd=(e,t,n)=>({borderInlineEndWidth:e.lineWidth,borderColor:t,boxShadow:"0 0 0 ".concat((0,o5.zA)(e.controlOutlineWidth)," ").concat(n),outline:0}),sh=e=>{let{componentCls:t}=e;return{"&-rtl":{["".concat(t,"-presets-color")]:{"&::after":{direction:"ltr"}},["".concat(t,"-clear")]:{"&::after":{direction:"ltr"}}}}},sf=(e,t,n)=>{let{componentCls:r,borderRadiusSM:i,lineWidth:o,colorSplit:a,colorBorder:s,red6:l}=e;return{["".concat(r,"-clear")]:Object.assign(Object.assign({width:t,height:t,borderRadius:i,border:"".concat((0,o5.zA)(o)," solid ").concat(a),position:"relative",overflow:"hidden",cursor:"inherit",transition:"all ".concat(e.motionDurationFast)},n),{"&::after":{content:'""',position:"absolute",insetInlineEnd:e.calc(o).mul(-1).equal(),top:e.calc(o).mul(-1).equal(),display:"block",width:40,height:2,transformOrigin:"calc(100% - 1px) 1px",transform:"rotate(-45deg)",backgroundColor:l},"&:hover":{borderColor:s}})}},sp=e=>{let{componentCls:t,colorError:n,colorWarning:r,colorErrorHover:i,colorWarningHover:o,colorErrorOutline:a,colorWarningOutline:s}=e;return{["&".concat(t,"-status-error")]:{borderColor:n,"&:hover":{borderColor:i},["&".concat(t,"-trigger-active")]:Object.assign({},sd(e,n,a))},["&".concat(t,"-status-warning")]:{borderColor:r,"&:hover":{borderColor:o},["&".concat(t,"-trigger-active")]:Object.assign({},sd(e,r,s))}}},sm=e=>{let{componentCls:t,controlHeightLG:n,controlHeightSM:r,controlHeight:i,controlHeightXS:o,borderRadius:a,borderRadiusSM:s,borderRadiusXS:l,borderRadiusLG:c,fontSizeLG:u}=e;return{["&".concat(t,"-lg")]:{minWidth:n,minHeight:n,borderRadius:c,["".concat(t,"-color-block, ").concat(t,"-clear")]:{width:i,height:i,borderRadius:a},["".concat(t,"-trigger-text")]:{fontSize:u}},["&".concat(t,"-sm")]:{minWidth:r,minHeight:r,borderRadius:s,["".concat(t,"-color-block, ").concat(t,"-clear")]:{width:o,height:o,borderRadius:l},["".concat(t,"-trigger-text")]:{lineHeight:(0,o5.zA)(o)}}}},sg=e=>{let{antCls:t,componentCls:n,colorPickerWidth:r,colorPrimary:i,motionDurationMid:o,colorBgElevated:a,colorTextDisabled:s,colorText:l,colorBgContainerDisabled:c,borderRadius:u,marginXS:d,marginSM:h,controlHeight:f,controlHeightSM:p,colorBgTextActive:m,colorPickerPresetColorSize:g,colorPickerPreviewSize:v,lineWidth:b,colorBorder:y,paddingXXS:x,fontSize:w,colorPrimaryHover:E,controlOutline:A}=e;return[{[n]:Object.assign({["".concat(n,"-inner")]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({"&-content":{display:"flex",flexDirection:"column",width:r,["& > ".concat(t,"-divider")]:{margin:"".concat((0,o5.zA)(h)," 0 ").concat((0,o5.zA)(d))}},["".concat(n,"-panel")]:Object.assign({},sl(e))},su(e)),sa(e,v)),ss(e)),sc(e)),sf(e,g,{marginInlineStart:"auto"})),{["".concat(n,"-operation")]:{display:"flex",justifyContent:"space-between",marginBottom:d}}),"&-trigger":Object.assign(Object.assign(Object.assign(Object.assign({minWidth:f,minHeight:f,borderRadius:u,border:"".concat((0,o5.zA)(b)," solid ").concat(y),cursor:"pointer",display:"inline-flex",alignItems:"flex-start",justifyContent:"center",transition:"all ".concat(o),background:a,padding:e.calc(x).sub(b).equal(),["".concat(n,"-trigger-text")]:{marginInlineStart:d,marginInlineEnd:e.calc(d).sub(e.calc(x).sub(b)).equal(),fontSize:w,color:l,alignSelf:"center","&-cell":{"&:not(:last-child):after":{content:'", "'},"&-inactive":{color:s}}},"&:hover":{borderColor:E},["&".concat(n,"-trigger-active")]:Object.assign({},sd(e,i,A)),"&-disabled":{color:s,background:c,cursor:"not-allowed","&:hover":{borderColor:m},["".concat(n,"-trigger-text")]:{color:s}}},sf(e,p)),sa(e,p)),sp(e)),sm(e))},sh(e))},(0,si.G)(e,{focusElCls:"".concat(n,"-trigger-active")})]},sv=(0,o6.OF)("ColorPicker",e=>{let{colorTextQuaternary:t,marginSM:n}=e;return[sg((0,o8.oX)(e,{colorPickerWidth:234,colorPickerHandlerSize:16,colorPickerHandlerSizeSM:12,colorPickerAlphaInputWidth:44,colorPickerInputNumberHandleWidth:16,colorPickerPresetColorSize:24,colorPickerInsetShadow:"inset 0 0 1px 0 ".concat(t),colorPickerSliderHeight:8,colorPickerPreviewSize:e.calc(8).mul(2).add(n).equal()}))]});var sb=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};let sy=e=>{let{mode:t,value:n,defaultValue:r,format:i,defaultFormat:o,allowClear:a=!1,presets:s,children:l,trigger:c="click",open:u,disabled:d,placement:h="bottomLeft",arrow:p=!0,panelRender:m,showText:g,style:v,className:b,size:y,rootClassName:x,prefixCls:w,styles:E,disabledAlpha:A=!1,onFormatChange:S,onChange:j,onClear:C,onOpenChange:M,onChangeComplete:k,getPopupContainer:T,autoAdjustOverflow:_=!0,destroyTooltipOnHide:P,disabledFormat:O}=e,R=sb(e,["mode","value","defaultValue","format","defaultFormat","allowClear","presets","children","trigger","open","disabled","placement","arrow","panelRender","showText","style","className","size","rootClassName","prefixCls","styles","disabledAlpha","onFormatChange","onChange","onClear","onOpenChange","onChangeComplete","getPopupContainer","autoAdjustOverflow","destroyTooltipOnHide","disabledFormat"]),{getPrefixCls:L,direction:I,colorPicker:D}=(0,f.useContext)(tv.QO),z=(0,f.useContext)(oR.A),N=null!=d?d:z,[H,B]=(0,oT.A)(!1,{value:u,postState:e=>!N&&e,onChange:M}),[F,U]=(0,oT.A)(i,{value:i,defaultValue:o,onChange:S}),q=L("color-picker",w),[G,V,W,X,Y]=function(e,t,n){let[r]=(0,st.A)("ColorPicker"),[i,o]=(0,oT.A)(e,{value:t}),[a,s]=f.useState("single"),[l,c]=f.useMemo(()=>{let e=(Array.isArray(n)?n:[n]).filter(e=>e);e.length||e.push("single");let t=new Set(e),i=[],o=(e,n)=>{t.has(e)&&i.push({label:n,value:e})};return o("single",r.singleColor),o("gradient",r.gradientColor),[i,t]},[n]),[u,d]=f.useState(null),h=(0,ax.A)(e=>{d(e),o(e)}),p=f.useMemo(()=>{let e=(0,as.Z6)(i||"");return e.equals(u)?u:e},[i,u]),m=f.useMemo(()=>{var e;return c.has(a)?a:null==(e=l[0])?void 0:e.value},[c,a,l]);return f.useEffect(()=>{s(p.isGradient()?"gradient":"single")},[p]),[p,h,m,s,l]}(r,n,t),K=(0,f.useMemo)(()=>100>(0,as.Gp)(G),[G]),[Z,$]=f.useState(null),Q=e=>{if(k){let t=(0,as.Z6)(e);A&&K&&(t=(0,as.E)(e)),k(t)}},J=(e,t)=>{let n=(0,as.Z6)(e);A&&K&&(n=(0,as.E)(n)),V(n),$(null),j&&j(n,n.toCssString()),t||Q(n)},[ee,et]=f.useState(0),[en,er]=f.useState(!1),{status:ei}=f.useContext(oD.$W),{compactSize:eo,compactItemClassnames:ea}=(0,oN.RQ)(q,I),es=(0,oI.A)(e=>{var t;return null!=(t=null!=y?y:eo)?t:e}),el=(0,oL.A)(q),[ec,eu,ed]=sv(q,el),eh=ok()(x,ed,el,{["".concat(q,"-rtl")]:I}),ef=ok()((0,oO.L)(q,ei),{["".concat(q,"-sm")]:"small"===es,["".concat(q,"-lg")]:"large"===es},ea,null==D?void 0:D.className,eh,b,eu),ep=ok()(q,eh),em=Object.assign(Object.assign({},null==D?void 0:D.style),v);return ec(f.createElement(oz.A,Object.assign({style:null==E?void 0:E.popup,styles:{body:null==E?void 0:E.popupOverlayInner},onOpenChange:e=>{e&&N||B(e)},content:f.createElement(o_.A,{form:!0},f.createElement(a9,{mode:W,onModeChange:e=>{if(X(e),"single"===e&&G.isGradient())et(0),J(new oH.kf(G.getColors()[0].color)),$(G);else if("gradient"===e&&!G.isGradient()){let e=K?(0,as.E)(G):G;J(new oH.kf(Z||[{percent:0,color:e},{percent:100,color:e}]))}},modeOptions:Y,prefixCls:q,value:G,allowClear:a,disabled:N,disabledAlpha:A,presets:s,panelRender:m,format:F,onFormatChange:U,onChange:J,onChangeComplete:Q,onClear:C,activeIndex:ee,onActive:et,gradientDragging:en,onGradientDragging:er,disabledFormat:O})),classNames:{root:ep}},{open:H,trigger:c,placement:h,arrow:p,rootClassName:x,getPopupContainer:T,autoAdjustOverflow:_,destroyTooltipOnHide:P}),l||f.createElement(sr,Object.assign({activeIndex:H?ee:-1,open:H,className:ef,style:em,prefixCls:q,disabled:N,showText:g,format:F},R,{color:G}))))},sx=(0,oP.A)(sy,void 0,e=>Object.assign(Object.assign({},e),{placement:"bottom",autoAdjustOverflow:!1}),"color-picker",e=>e);sy._InternalPanelDoNotUseOrYouWillBeFired=sx;var sw=n(72359);let sE={rE:"1.2.32"},sA=e=>"string"==typeof e?e:e.toHexString(),sS=()=>{let[e,t]=(0,f.useState)(!1),n=tY(e=>e.settings),[r]=od.A.useForm(),i=(0,f.useCallback)(()=>t(!0),[]),o=(0,f.useCallback)(()=>t(!1),[]),a=(0,f.useCallback)(()=>{r.setFieldsValue({lightColor:tW.light.color,lightIntensity:tW.light.intensity,lightDecay:tW.light.decay,baseColor:tW.colors.baseColor,hoverColor:tW.colors.hoverColor,selectColor:tW.colors.selectColor,hoverSelectColor:tW.colors.hoverSelectColor,fps:tW.frameRate.fps,localStorage:tW.localStorage})},[r]),s=(0,f.useCallback)(e=>{tY.setState({settings:{light:{color:sA(e.lightColor),intensity:e.lightIntensity,decay:e.lightDecay},colors:{baseColor:sA(e.baseColor),hoverColor:sA(e.hoverColor),selectColor:sA(e.selectColor),hoverSelectColor:sA(e.hoverSelectColor)},frameRate:{fps:e.fps},localStorage:e.localStorage}}),o()},[o]);return(0,f.useEffect)(()=>{n.localStorage?localStorage.setItem("tanatloc-3d-settings",JSON.stringify(n)):localStorage.removeItem("tanatloc-3d-settings")},[n]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(oh.A,{open:e,onCancel:o,footer:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(tO.Ay,{onClick:o,children:"Cancel"}),(0,h.jsx)(tO.Ay,{onClick:a,children:"Reset default"}),(0,h.jsx)(tO.Ay,{type:"primary",onClick:r.submit,children:"Apply"})]}),children:[(0,h.jsxs)(od.A,{form:r,initialValues:{lightColor:n.light.color,lightIntensity:n.light.intensity,lightDecay:n.light.decay,baseColor:n.colors.baseColor,hoverColor:n.colors.hoverColor,selectColor:n.colors.selectColor,hoverSelectColor:n.colors.hoverSelectColor,fps:n.frameRate.fps,localStorage:n.localStorage},labelCol:{span:8},wrapperCol:{span:16},onFinish:s,children:[(0,h.jsx)(oC.A.Text,{strong:!0,children:"Light"}),(0,h.jsx)(od.A.Item,{label:"Color",name:"lightColor",colon:!1,children:(0,h.jsx)(sy,{showText:!0,format:"hex"})}),(0,h.jsx)(od.A.Item,{label:"Intensity",name:"lightIntensity",children:(0,h.jsx)(of.A,{min:0,max:1,step:.01})}),(0,h.jsx)(od.A.Item,{label:"Decay",name:"lightDecay",children:(0,h.jsx)(of.A,{min:0,max:10,step:.01})}),(0,h.jsx)(oC.A.Text,{strong:!0,children:"Colors"}),(0,h.jsx)(od.A.Item,{label:"Base color",name:"baseColor",children:(0,h.jsx)(sy,{showText:!0,format:"hex"})}),(0,h.jsx)(od.A.Item,{label:"Hover color",name:"hoverColor",children:(0,h.jsx)(sy,{showText:!0,format:"hex"})}),(0,h.jsx)(od.A.Item,{label:"Selection color",name:"selectColor",children:(0,h.jsx)(sy,{showText:!0,format:"hex"})}),(0,h.jsx)(od.A.Item,{label:"Hover selection color",name:"hoverSelectColor",children:(0,h.jsx)(sy,{showText:!0,format:"hex"})}),(0,h.jsx)(oC.A.Text,{strong:!0,children:"Frame rate"}),(0,h.jsx)(od.A.Item,{label:"FPS",name:"fps",children:(0,h.jsx)(of.A,{min:5,max:120})}),(0,h.jsx)(oC.A.Text,{strong:!0,children:"Settings persistance"})," ",(0,h.jsx)(oC.A.Text,{children:"If you want to keep the settings for your next navigation, you have to accept usage of local storage API"}),(0,h.jsx)(od.A.Item,{label:"Accept",name:"localStorage",valuePropName:"checked",children:(0,h.jsx)(i2.A,{})})]}),(0,h.jsxs)(oC.A.Text,{children:["Version: ",sE.rE]})]}),(0,h.jsx)(iR.A,{title:"Settings",placement:"left",children:(0,h.jsx)(tO.Ay,{icon:(0,h.jsx)(sw.A,{}),onClick:i})})]})},sj=({oneResult:e})=>{let{data:t,postProcessing:n,onData:r,onPostProcessing:i}=tY(e=>e.props);return(0,h.jsxs)(iP.A.Header,{style:oa.header,children:[t||n?(0,h.jsx)("div",{children:(0,h.jsx)(iO.A,{defaultActiveKey:"post-processing",items:[{key:"post-processing",label:(0,h.jsx)(iN,{style:{fontSize:16,paddingRight:"6px"}}),children:[(0,h.jsxs)("div",{style:oa.collapseBody,children:[t?(0,h.jsx)(iR.A,{title:"Data",placement:"left",children:(0,h.jsx)(tO.Ay,{icon:(0,h.jsx)(iH.A,{}),onClick:r})},"data"):null,n?(0,h.jsx)(iR.A,{title:"Post-processing",placement:"left",children:(0,h.jsx)(tO.Ay,{icon:(0,h.jsx)(iU,{}),onClick:i})},"postProcessing"):null]},"container")]}],style:oa.collapse})}):null,(0,h.jsx)("div",{children:(0,h.jsx)(iO.A,{defaultActiveKey:"tools",items:[{key:"tools",label:(0,h.jsx)(iV,{style:{fontSize:16,paddingRight:"6px"}}),children:[(0,h.jsxs)("div",{style:oa.collapseBody,children:[(0,h.jsx)(i$,{},"snapshot"),(0,h.jsx)(iL.A,{style:oa.divider},"divider-1"),(0,h.jsx)(i1,{},"unit"),(0,h.jsx)(iL.A,{style:oa.divider},"divider-2"),(0,h.jsx)(i4,{},"display"),(0,h.jsx)(iL.A,{style:oa.divider},"divider-3"),(0,h.jsx)(ot,{},"zoom"),(0,h.jsx)(iL.A,{style:oa.divider},"divider-4"),(0,h.jsx)(ou,{},"section-view"),e?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(iL.A,{style:oa.divider},"divider-5"),(0,h.jsx)(oj,{},"results"),(0,h.jsx)(iL.A,{style:oa.divider},"divider-6"),(0,h.jsx)(oA,{},"colorbar")]}):null,(0,h.jsx)(iL.A,{style:oa.divider},"divider-7"),(0,h.jsx)(sS,{})]},"container")]}],style:oa.collapse})})]})},sC={layout:{width:0,height:0}};var sM=n(16443),sk=n(66510),sT=n(91022);let s_=()=>(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(oC.A.Title,{level:5,mark:!0,children:"No manipulation needed"}),(0,h.jsx)(oC.A.Text,{children:"This browser has full support for WebGL on all platforms."}),(0,h.jsx)("br",{}),(0,h.jsx)(oC.A.Text,{children:"If you are having issues with WebGL, you may need to update to the latest version of your browser."})]}),sP=()=>(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(oC.A.Title,{level:5,mark:!0,children:"1- Enter config"}),(0,h.jsxs)(oC.A,{children:["Open mozilla and enter"," ",(0,h.jsx)(oC.A.Text,{code:!0,children:"about:config"})," in your search bar"]}),(0,h.jsx)(oC.A.Title,{level:5,mark:!0,children:"2- Check if enabled"}),(0,h.jsxs)(oC.A,{children:["Search for ",(0,h.jsx)(oC.A.Text,{code:!0,children:"webgl.force-enabled"})," ","and switch value to ",(0,h.jsx)(oC.A.Text,{code:!0,children:"true"})," (double click on the value)"]}),(0,h.jsx)(oC.A.Title,{level:5,mark:!0,children:"3- Check if force disabled"}),(0,h.jsxs)(oC.A,{children:["Search for ",(0,h.jsx)(oC.A.Text,{code:!0,children:"webgl.disabled"})," and switch value to ",(0,h.jsx)(oC.A.Text,{code:!0,children:"false"})," (double click on the value)"]}),(0,h.jsx)(oC.A.Title,{level:5,mark:!0,children:"4- Still not working"}),(0,h.jsx)(oC.A,{children:"Update to the latest version and retry all steps, if the problem persists, switch to another web browser."})]}),sO=()=>(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(oC.A.Title,{level:4,children:"No manipulation needed (MacOS)"}),(0,h.jsx)(oC.A,{children:"Firefox on MacOS supports and enables WebGL for all versions from Snow Leopard 10.6. If WebGL still does not work, try to update to the last version of MacOS."}),(0,h.jsx)(oC.A.Title,{level:4,children:"Enable webGL (Linux)"}),(0,h.jsx)(oC.A.Title,{level:5,mark:!0,children:"1- Enter config"}),(0,h.jsxs)(oC.A,{children:["Open mozilla and enter"," ",(0,h.jsx)(oC.A.Text,{code:!0,children:"about:config"})," in your search bar"]}),(0,h.jsx)(oC.A.Title,{level:5,mark:!0,children:"2- Check if enabled"}),(0,h.jsxs)(oC.A,{children:["Search for ",(0,h.jsx)(oC.A.Text,{code:!0,children:"webgl.force-enabled"})," ","and switch value to ",(0,h.jsx)(oC.A.Text,{code:!0,children:"true"})," (double click on the value)"]}),(0,h.jsx)(oC.A.Title,{level:5,mark:!0,children:"3- Check if force disabled"}),(0,h.jsxs)(oC.A,{children:["Search for ",(0,h.jsx)(oC.A.Text,{code:!0,children:"webgl.disabled"})," and switch value to ",(0,h.jsx)(oC.A.Text,{code:!0,children:"false"})," (double click on the value)"]}),(0,h.jsx)(oC.A.Title,{level:5,mark:!0,children:"4- Still not working"}),(0,h.jsx)(oC.A,{children:"Update to the latest version and retry all steps."})]}),sR={layout:{maxHeight:"100%",overflow:"auto"},header:{background:"white",paddingInline:0},content:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",padding:"20px",gap:"20px"},card:{maxWidth:"600px"},largeCard:{maxWidth:"1200px"},largeCardBody:{display:"flex",gap:"20px"},textLight:{color:"rgba(0, 0, 0, 0.45)"}},sL=()=>(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(oC.A.Title,{level:5,mark:!0,children:"1- Check MacOS version"}),(0,h.jsx)(oC.A,{children:"If you have MacOS version 10.10 Yosemite or a previous one, WebGL needs to be activated manually."}),(0,h.jsx)(oC.A.Title,{level:5,mark:!0,children:"2- Developpers Settings"}),(0,h.jsxs)(oC.A,{children:["Open your browser, then go to Safari -",">"," Preferences, click",(0,h.jsx)("span",{style:sR.textLight,children:"Advanced"})," tab."]}),(0,h.jsx)(oC.A.Title,{level:5,mark:!0,children:"3- Show new menu"}),(0,h.jsxs)(oC.A,{children:["At the bottom of the window, check the"," ",(0,h.jsx)("span",{style:sR.textLight,children:"Show Develop"})," menu in menu bar checkbox."]}),(0,h.jsx)(oC.A.Title,{level:5,mark:!0,children:"4- Enable WebGL"}),(0,h.jsxs)(oC.A,{children:["Open Develop Tab, check enable WebGL (whether in"," ",(0,h.jsx)("span",{style:sR.textLight,children:"Experimental feature"})," or in the main menu)"]})]}),sI={Canvas:({toWebGL:e})=>{let t=(0,f.useRef)(null),[n,r]=(0,f.useState)(!1),[i,o]=(0,f.useState)(0),[a,s]=(0,f.useState)(0),l=tY(e=>e.extra),{parts:c,style:u}=tY(e=>e.props),{dimension:d}=tY(e=>e.geometry),p=(0,f.useCallback)(()=>{o(Math.random())},[]),m=(0,f.useMemo)(()=>!!c?.find(e=>"result"===e.summary.type),[c]),g=(0,f.useCallback)(()=>{s(Math.random())},[]);return((0,f.useEffect)(()=>{tR.isWebGL2Available()?r(!0):(r(!1),tP.error({message:"WebGL unavailable",description:(0,h.jsxs)(h.Fragment,{children:["WebGL is not activated. Please have a look on"," ",e?(0,h.jsx)(tO.Ay,{onClick:e,children:"solutions"}):"solutions"]}),duration:0}))},[]),(0,f.useEffect)(()=>(window.addEventListener("resize",g),()=>{window.removeEventListener("resize",g)}),[g]),(0,f.useEffect)(()=>{g()},[u,g]),n)?(0,h.jsxs)(te,{hidden:(!c||0===c.length)&&!l.notFound&&!l.background,style:{...i_.canvas,...u},frameloop:"demand",gl:{preserveDrawingBuffer:!0,localClippingEnabled:!0,logarithmicDepthBuffer:!0},children:[(0,h.jsx)(t$,{}),(0,h.jsxs)(tn,{renderPriority:1,children:[(0,h.jsx)(tZ,{controls:t.current}),(0,h.jsx)(ta,{makeDefault:!0,position:[0,0,5]}),(0,h.jsx)(nW,{update:i}),(0,h.jsx)(nZ,{}),(0,h.jsx)(rt,{}),(0,h.jsx)(tm,{ref:t,onChange:p,noRotate:!l.notFound&&3!==d}),(0,h.jsx)(rc,{update:i}),(0,h.jsx)(rv,{}),l.notFound?(0,h.jsx)(rb,{}):null,l.background?(0,h.jsx)(rx,{}):null,l.notFound||l.background?null:(0,h.jsx)(iT,{})]}),(0,h.jsx)(tn,{renderPriority:2,children:l.notFound||l.background?null:(0,h.jsx)(nL,{resize:a})}),m?(0,h.jsxs)(tn,{renderPriority:3,children:[(0,h.jsx)(ra,{}),(0,h.jsx)(rl,{resize:a})]}):null]}):null},Renderer:e=>{let{parts:t}=tY(e=>e.props);(0,f.useEffect)(()=>(tY.setState({props:e}),()=>{tY.setState({props:{}})}),[e]);let n=(0,f.useMemo)(()=>!!t?.find(e=>"result"===e.summary.type),[t]);return(0,h.jsx)(tb.Ay,{theme:e.theme,children:(0,h.jsx)(iP.A,{style:sC.layout,children:(0,h.jsx)(sj,{oneResult:n})})})},extra:{NotFound:()=>((0,f.useEffect)(()=>(tY.setState({extra:{notFound:!0}}),()=>{tY.setState({extra:{}})}),[]),null),Background:()=>((0,f.useEffect)(()=>(tY.setState({extra:{background:!0}}),()=>{tY.setState({extra:{}})}),[]),null),WebGL:({logo:e,back:t})=>{let n=(0,f.useCallback)(()=>{oh.A.info({title:"Google Chrome (Windows)",content:(0,h.jsx)(s_,{})})},[]),r=(0,f.useCallback)(()=>{oh.A.info({title:"Google Chrome (MacOS / Linux)",content:(0,h.jsx)(s_,{})})},[]),i=(0,f.useCallback)(()=>{oh.A.info({title:"Firefox (Windows)",content:(0,h.jsx)(sP,{})})},[]),o=(0,f.useCallback)(()=>{oh.A.info({title:"Firefox (MacOS / Linux)",content:(0,h.jsx)(sO,{})})},[]),a=(0,f.useCallback)(()=>{oh.A.info({title:"Microsoft Edge (Windows)",content:(0,h.jsx)(s_,{})})},[]),s=(0,f.useCallback)(()=>{oh.A.info({title:"Safari (MacOS)",content:(0,h.jsx)(sL,{})})},[]),l=(0,f.useMemo)(()=>[(0,h.jsx)(tO.Ay,{onClick:n,children:"Google Chrome"},"chrome"),(0,h.jsx)(tO.Ay,{onClick:i,children:"Mozilla Firefox"},"firefox"),(0,h.jsx)(tO.Ay,{onClick:a,children:"Microsoft Edge"},"edge")],[n,i,a]),c=(0,f.useMemo)(()=>[(0,h.jsx)(tO.Ay,{onClick:r,children:"Google Chrome"},"chrome"),(0,h.jsx)(tO.Ay,{onClick:o,children:"Mozilla Firefox"},"firefox"),(0,h.jsx)(tO.Ay,{onClick:s,children:"Safari"},"safari")],[r,o,s]),u=(0,f.useCallback)(e=>(0,h.jsx)(sM.A.Item,{children:e}),[]);return(0,h.jsxs)(iP.A,{style:sR.layout,children:[(0,h.jsx)(iP.A.Header,{style:sR.header,children:e}),(0,h.jsxs)(iP.A.Content,{style:sR.content,children:[(0,h.jsxs)(sk.A,{title:"WebGL Error",style:sR.card,children:[(0,h.jsxs)(oC.A.Text,{children:[(0,h.jsx)(sT.A,{style:{color:"red"}})," ","WebGL is not enabled on your device. Please enable it."]}),(0,h.jsx)(oC.A.Text,{children:(0,h.jsx)(tO.Ay,{onClick:t,children:"Return to the previous page"})})]}),(0,h.jsxs)(sk.A,{title:"How to enable WebGL",style:sR.largeCard,styles:{body:sR.largeCardBody},children:[(0,h.jsx)(sk.A,{title:"Windows",style:sR.card,children:(0,h.jsx)(sM.A,{dataSource:l,renderItem:u})}),(0,h.jsx)(sk.A,{title:"MacOS / Linux",style:sR.card,children:(0,h.jsx)(sM.A,{dataSource:c,renderItem:u})})]}),(0,h.jsx)(sk.A,{title:"WebGL Check",style:sR.card,children:(0,h.jsxs)(oC.A.Text,{children:["Visit"," ",(0,h.jsxs)("a",{href:"https://get.webgl.org",target:"_blank",rel:"noreferrer",children:[" ","this website"]})," ","to check if WebGL is enabled on your device"]})})]})]})}}}},62786:(e,t,n)=>{e.exports=n(45919)},72359:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(14232);let i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 009.3-35.2l-.9-2.6a443.74 443.74 0 00-79.7-137.9l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.4a351.86 351.86 0 00-99 57.4l-81.9-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a446.02 446.02 0 00-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0025.8 25.7l2.7.5a449.4 449.4 0 00159 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-85a350 350 0 0099.7-57.6l81.3 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 01-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 01-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 01624 502c0 29.9-11.7 58-32.8 79.2z"}}]},name:"setting",theme:"outlined"};var o=n(3755);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let s=r.forwardRef((e,t)=>r.createElement(o.A,a({},e,{ref:t,icon:i})))},73307:(e,t)=>{t.ConcurrentRoot=1,t.ContinuousEventPriority=8,t.DefaultEventPriority=32,t.DiscreteEventPriority=2},87302:(e,t,n)=>{e.exports=n(73307)},89665:(e,t,n)=>{function r(){var e=Object.create(null);function t(e,t){var n=void 0;self.troikaDefine=function(e){return n=e};var r=URL.createObjectURL(new Blob(["/** "+e.replace(/\*/g,"")+" **/\n\ntroikaDefine(\n"+t+"\n)"],{type:"application/javascript"}));try{importScripts(r)}catch(e){console.error(e)}return URL.revokeObjectURL(r),delete self.troikaDefine,n}self.addEventListener("message",function(n){var r=n.data,i=r.messageId,o=r.action,a=r.data;try{"registerModule"===o&&function n(r,i){var o=r.id,a=r.name,s=r.dependencies;void 0===s&&(s=[]);var l=r.init;void 0===l&&(l=function(){});var c=r.getTransferables;if(void 0===c&&(c=null),!e[o])try{s=s.map(function(t){return t&&t.isWorkerModule&&(n(t,function(e){if(e instanceof Error)throw e}),t=e[t.id].value),t}),l=t("<"+a+">.init",l),c&&(c=t("<"+a+">.getTransferables",c));var u=null;"function"==typeof l?u=l.apply(void 0,s):console.error("worker module init function failed to rehydrate"),e[o]={id:o,value:u,getTransferables:c},i(u)}catch(e){e&&e.noLog||console.error(e),i(e)}}(a,function(e){e instanceof Error?postMessage({messageId:i,success:!1,error:e.message}):postMessage({messageId:i,success:!0,result:{isCallable:"function"==typeof e}})}),"callModule"===o&&function(t,n){var r,i=t.id,o=t.args;e[i]&&"function"==typeof e[i].value||n(Error("Worker module "+i+": not found or its 'init' did not return a function"));try{var a=(r=e[i]).value.apply(r,o);a&&"function"==typeof a.then?a.then(s,function(e){return n(e instanceof Error?e:Error(""+e))}):s(a)}catch(e){n(e)}function s(t){try{var r=e[i].getTransferables&&e[i].getTransferables(t);r&&Array.isArray(r)&&r.length||(r=void 0),n(t,r)}catch(e){console.error(e),n(e)}}}(a,function(e,t){e instanceof Error?postMessage({messageId:i,success:!1,error:e.message}):postMessage({messageId:i,success:!0,result:e},t||void 0)})}catch(e){postMessage({messageId:i,success:!1,error:e.stack})}})}n.d(t,{Qw:()=>d,kl:()=>function e(t){if((!t||"function"!=typeof t.init)&&!s)throw Error("requires `options.init` function");var n,r=t.dependencies,a=t.init,l=t.getTransferables,u=t.workerId,d=((n=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return n._getInitResult().then(function(t){if("function"==typeof t)return t.apply(void 0,e);throw Error("Worker module function was called but `init` did not return a callable function")})})._getInitResult=function(){var e=t.dependencies,r=t.init,i=Promise.all(e=Array.isArray(e)?e.map(function(e){return e&&(e=e.onMainThread||e)._getInitResult&&(e=e._getInitResult()),e}):[]).then(function(e){return r.apply(null,e)});return n._getInitResult=function(){return i},i},n);null==u&&(u="#default");var p="workerModule"+ ++o,m=t.name||p,g=null;function v(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(!i())return d.apply(void 0,e);if(!g){g=f(u,"registerModule",v.workerModuleData);var n=function(){g=null,c[u].delete(n)};(c[u]||(c[u]=new Set)).add(n)}return g.then(function(t){if(t.isCallable)return f(u,"callModule",{id:p,args:e});throw Error("Worker module function was called but `init` did not return a callable function")})}return r=r&&r.map(function(t){return"function"!=typeof t||t.workerModuleData||(s=!0,t=e({workerId:u,name:"<"+m+"> function dependency: "+t.name,init:"function(){return (\n"+h(t)+"\n)}"}),s=!1),t&&t.workerModuleData&&(t=t.workerModuleData),t}),v.workerModuleData={isWorkerModule:!0,id:p,name:m,dependencies:r,init:h(a),getTransferables:l&&h(l)},v.onMainThread=d,v}}),n(99742);var i=function(){var e=!1;if("undefined"!=typeof window&&void 0!==window.document)try{new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"}))).terminate(),e=!0}catch(e){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+e.message+"]")}return i=function(){return e},e},o=0,a=0,s=!1,l=Object.create(null),c=Object.create(null),u=Object.create(null);function d(e){c[e]&&c[e].forEach(function(e){e()}),l[e]&&(l[e].terminate(),delete l[e])}function h(e){var t=e.toString();return!/^function/.test(t)&&/^\w+\s*\(/.test(t)&&(t="function "+t),t}function f(e,t,n){return new Promise(function(i,o){var s=++a;u[s]=function(e){e.success?i(e.result):o(Error("Error in worker "+t+" call: "+e.error))},(function(e){var t=l[e];if(!t){var n=h(r);(t=l[e]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+e.replace(/\*/g,"")+" **/\n\n;("+n+")()"],{type:"application/javascript"})))).onmessage=function(e){var t=e.data,n=t.messageId,r=u[n];if(!r)throw Error("WorkerModule response with empty or unknown messageId");delete u[n],r(t)}}return t})(e).postMessage({messageId:s,action:t,data:n})})}}}]);