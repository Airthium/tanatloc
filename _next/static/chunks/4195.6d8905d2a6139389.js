(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4195],{4195:(e,t,a)=>{"use strict";a.r(t),a.d(t,{_exportCSV:()=>A,default:()=>D,errors:()=>S});var l=a(37876),n=a(14232),o=a(90617),i=a(94353),s=a(2241),r=a(22887),d=a(22854),c=a(51008),m=a(81427),u=a(28834),x=a(80252),h=a(75561),b=a(84758),f=a(22333),y=a(24354),k=a(1874),p=a(39884),C=a(62665),j=a(89480),_=a(9772),v=a(59597),g=a(95161),N=a(81559),w=a(16192),M=a.n(w);let S={download:"Unable to download CSV"},A=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:";",l="";l="x"+a+t.yNames.join(a)+"\n",t.points.forEach(e=>{l+=e.x,t.yNames.forEach(t=>{l+=a+e[t]}),l+="\n"});let n=e+".csv",o=new File([l],n,{type:"text/csv"}),i=window.URL.createObjectURL(o),s=document.createElement("a");s.href=i,s.setAttribute("download",n),s.click(),s.remove()},E=e=>{let{name:t,index:a,selection:s,setSelection:r}=e,d=(0,n.useCallback)(e=>{let t=e.target.checked,l=[...s];l[a]=t,r(l)},[a,s,r]);return(0,l.jsxs)(o.A,{className:M().tableHead,children:[t,(0,l.jsx)(i.A,{"data-testid":"table-checkbox",checked:s[a],onChange:d,children:(0,l.jsx)(m.A,{style:{fontSize:20}})})]})},D=e=>{let{simulation:t}=e,[a,o]=(0,n.useState)([!0]),[i,m]=(0,n.useState)(!1),{data:w,dispatch:D}=(0,n.useContext)(_.CW),{dispatch:O}=(0,n.useContext)(C.V2),[V]=N.A.useSimulation(null==t?void 0:t.id),W=(0,n.useMemo)(()=>{if("0"===V.id)return;let e=V.tasks;if(!e.length)return;let t=e.map(e=>e.datas).filter(e=>e).flat();if(!t.length)return;t.sort((e,t)=>e.x-t.x);let a=t[0].title,l=[];t.forEach(e=>l=[...new Set([...l,...e.names])]);let n=t.map(e=>{let t={x:e.x};for(let a of l){let l=e.names.indexOf(a);t[a]=-1===l?0:e.ys[l]}return t});return{xName:a,yNames:l,points:n}},[V]),z=(0,n.useMemo)(()=>{if(!W)return;let e=W.yNames.map((e,t)=>({key:e,dataIndex:e,title:(0,l.jsx)(E,{name:e,index:t,selection:a,setSelection:o}),align:"center"}));return e.unshift({key:"x",dataIndex:"x",title:W.xName,align:"center",fixed:"left"}),e},[W,a,o]),H=(0,n.useMemo)(()=>{if(!W)return;let e=g.A.colorGenerator(a.length),t=a.map((t,a)=>{if(!t)return;let n=W.yNames[a],o=e[a];return(0,l.jsx)(u.N,{name:n,type:"monotone",dataKey:n,stroke:o,strokeWidth:2},n)}).filter(e=>e),n=W.points.map(e=>e.x),o=Math.min(...n),i=Math.max(...n),s=a.map((e,t)=>{if(!e)return;let a=W.yNames[t];return W.points.map(e=>e[a])}).filter(e=>e).flat(),r=Math.min(...s),d=Math.max(...s),c=d-r;return{xMin:o,xMax:i,yMin:r-.1*c,yMax:d+.1*c,lines:t}},[W,a]),I=(0,n.useCallback)(()=>D((0,v.XO)(!1)),[D]),L=(0,n.useCallback)(()=>{m(!0);try{A(null==t?void 0:t.name,W,"	")}catch(e){O((0,j.CN)({title:S.download,err:e}))}finally{m(!1)}},[t,W,O]),U=(0,n.useCallback)(()=>{m(!0);try{A(null==t?void 0:t.name,W,",")}catch(e){O((0,j.CN)({title:S.download,err:e}))}finally{m(!1)}},[t,W,O]),q=(0,n.useCallback)(()=>{m(!0);try{A(null==t?void 0:t.name,W)}catch(e){O((0,j.CN)({title:S.download,err:e}))}finally{m(!1)}},[null==t?void 0:t.name,W,O]),F=(0,n.useCallback)(e=>Number(e).toExponential(3),[]);return t&&W&&z?(0,l.jsx)(s.A,{title:"Data visualization",placement:"bottom",closable:!0,onClose:I,open:w,mask:!1,maskClosable:!1,height:"50vh",styles:{body:{height:"100%",overflow:"hidden"}},extra:(0,l.jsx)(r.A.Button,{loading:i,menu:{items:[{label:"Default separator: semicolon",key:"semicolon",disabled:!0},{label:"Separator: tab",key:"tab",onClick:L},{label:"Separator: comma",key:",",onClick:U}]},onClick:q,children:"Export CSV"}),children:(0,l.jsxs)("div",{className:M().container,children:[(0,l.jsx)("div",{className:M().tableContainer,children:(0,l.jsx)(d.A,{size:"small",sticky:!0,pagination:!1,dataSource:W.points,columns:z,scroll:{x:(z.length-1)*200}})}),(0,l.jsx)(x.u,{width:"49%",height:"100%",children:(null==H?void 0:H.lines.length)?(0,l.jsxs)(h.b,{data:W.points,margin:{top:0,right:40,left:40,bottom:0},children:[(0,l.jsx)(b.d,{strokeDasharray:"3 3"}),(0,l.jsx)(f.W,{dataKey:"x",domain:[H.xMin,H.xMax]}),(0,l.jsx)(y.h,{domain:[H.yMin,H.yMax],tickFormatter:F}),(0,l.jsx)(k.m,{}),(0,l.jsx)(p.s,{}),H.lines]}):(0,l.jsx)(c.A,{description:"No data to display"})})]})}):null}},16192:e=>{e.exports={variables:'"@/styles/variables.css"',colorPrimary:"#fad114",colorPrimary55:"#fad11455",data:"data_data__6TY8E",button:"data_button__WZosy",container:"data_container__qk8DL",tableContainer:"data_tableContainer__jfr5q",tableHead:"data_tableHead__OyI2w"}}}]);