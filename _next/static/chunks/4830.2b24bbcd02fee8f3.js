(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4830],{4830:function(e,t,a){"use strict";a.r(t),a.d(t,{_exportCSV:function(){return I},errors:function(){return D}});var l=a(85893),n=a(67294),i=a(65400),o=a.n(i),s=a(31059),r=a(1825),d=a(82891),c=a(16373),u=a(74048),f=a(2307),m=a(94055),x=a(34700),h=a(56880),b=a(9253),k=a(65310),p=a(14195),y=a(3023),v=a(75358),j=a(14888),C=a(19264),S=a(68929),_=a.n(S),g=a(55359),w=a(830),E=a(87782),N=a(72616),Z=a(93515),M=a.n(Z);let D={download:"Unable to download CSV"},I=function(e,t,a,l){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:";",i="";i="x"+n+a.join(n)+"\n",t.forEach(e=>{i+=e.x,null==l||l.forEach(t=>{void 0!==e[t]&&(i+=n+e[t])}),i+="\n"});let o=e.name+".csv",s=new File([i],o,{type:"text/csv"}),r=window.URL.createObjectURL(s),d=document.createElement("a");d.href=r,d.setAttribute("download",o),d.click(),d.remove()},z=e=>{let{name:t,index:a,columnSelection:i,setColumnSelection:o}=e,r=(0,n.useCallback)(e=>{let t=e.target.checked,l=[...i];l[a]=t,o(l)},[a,i,o]);return(0,l.jsxs)(u.default,{className:M().tableHead,children:[t,(0,l.jsx)(s.default,{"data-testid":"table-checkbox",checked:i[a],onChange:r,children:(0,l.jsx)(x.Z,{style:{fontSize:20}})})]})};t.default=e=>{let{simulation:t}=e,[a,i]=(0,n.useState)(!1),[s,u]=(0,n.useState)(),[S,Z]=(0,n.useState)(),[T,q]=(0,n.useState)(),[H,K]=(0,n.useState)(),[L,U]=(0,n.useState)(),[V,B]=(0,n.useState)([!0]),[F,O]=(0,n.useState)(),[P,R]=(0,n.useState)(!1),{dispatch:W}=(0,n.useContext)(g.uj),[A]=N.Z.useSimulation(null==t?void 0:t.id);(0,n.useEffect)(()=>{let e=null==A?void 0:A.tasks;if(!e){u(void 0),q(void 0),K(void 0);return}let t=e.map(e=>e.datas).filter(e=>e).flatMap(e=>e);if(!(null==t?void 0:t.length)||!t[0].names){q(void 0),K(void 0);return}t.sort((e,t)=>e.x-t.x);let a=t[0].title,l=t.map(e=>e.names).flatMap(e=>e).filter((e,t,a)=>a.findIndex(t=>t===e)===t),n=l.map(e=>_()(e)),i=[];t.forEach((e,t)=>{e.names.forEach((a,l)=>{let n=i.find(t=>t.x===e.x);n?n[_()(a)]=e.ys[l]:i.push({key:t,x:e.x,[_()(a)]:e.ys[l]})})}),Z(a),u(i),q(l),K(n)},[A]),(0,n.useEffect)(()=>{if(!s||!T||!H){U(void 0);return}let e=T.map((e,t)=>({align:"center",className:"column"+(V[t]?" selected":""),title:(0,l.jsx)(z,{name:e,index:t,columnSelection:V,setColumnSelection:B}),dataIndex:H[t],key:H[t]}));e.unshift({align:"center",title:null!=S?S:"Iteration",dataIndex:"x",key:"x",fixed:"left"}),U(e)},[S,s,T,H,V]),(0,n.useEffect)(()=>{if(!s||!T||!H){O(void 0);return}let e=[],t=E.Z.colorGenerator(V.length),a=V.map((a,n)=>{if(!a)return;let i=H[n],o=T[n],s=t[n];return e.push(i),(0,l.jsx)(h.x,{name:o,type:"monotone",dataKey:i,stroke:s,strokeWidth:2},i)}).filter(e=>e),n=s.map(t=>{let a={x:t.x};return e.forEach(e=>{t[e]&&(a[e]=t[e])}),a}).filter(e=>e),i=Math.min(...e.flatMap(e=>n.map(t=>t[e]))),o=Math.max(...e.flatMap(e=>n.map(t=>t[e]))),r=o-i,d=i-.1*r,c=o+.1*r;O({data:n,min:i,max:o,domainMin:d,domainMax:c,lines:a})},[s,T,H,V]);let G=(0,n.useCallback)(()=>i(!0),[]),Y=(0,n.useCallback)(()=>i(!1),[]),J=(0,n.useCallback)(()=>{R(!0);try{I(t,s,T,H,"	")}catch(e){W((0,w.iT)({title:D.download,err:e}))}finally{R(!1)}},[t,s,T,H,W]),Q=(0,n.useCallback)(()=>{R(!0);try{I(t,s,T,H,",")}catch(e){W((0,w.iT)({title:D.download,err:e}))}finally{R(!1)}},[t,s,T,H,W]),X=(0,n.useCallback)(()=>{R(!0);try{I(t,s,T,H)}catch(e){W((0,w.iT)({title:D.download,err:e}))}finally{R(!1)}},[t,s,T,H,W]),$=(0,n.useCallback)(e=>Number(e).toExponential(3),[]);return t&&s&&T&&H?(0,l.jsx)(c.Z,{className:M().data,children:(0,l.jsxs)(c.Z.Content,{children:[(0,l.jsx)(m.default,{title:"Data visualization",children:(0,l.jsx)(o(),{type:"primary",icon:(0,l.jsx)(x.Z,{}),onClick:G,className:M().button})}),(0,l.jsx)(r.Z,{title:"Data visualization",placement:"bottom",closable:!0,onClose:Y,open:a,mask:!1,maskClosable:!1,height:"50vh",bodyStyle:{height:"100%",overflow:"hidden"},extra:(0,l.jsx)(d.default.Button,{loading:P,disabled:!s,menu:{items:[{label:"Default separator: semicolon",key:"semicolon",disabled:!0},{label:"Separator: tab",key:"tab",onClick:J},{label:"Separator: comma",key:",",onClick:Q}]},onClick:X,children:"Export CSV"}),children:(0,l.jsxs)("div",{className:M().container,children:[(0,l.jsx)("div",{className:M().tableContainer,children:(0,l.jsx)(f.Z,{size:"small",sticky:!0,pagination:!1,dataSource:s,columns:L,scroll:{x:(((null==L?void 0:L.length)?+L.length:1)-1)*200}})}),(0,l.jsx)(b.h,{width:"49%",height:"100%",children:(0,l.jsxs)(k.w,{data:null==F?void 0:F.data,margin:{top:0,right:40,left:40,bottom:0},children:[(0,l.jsx)(p.q,{strokeDasharray:"3 3"}),(0,l.jsx)(y.K,{dataKey:"x"}),(0,l.jsx)(v.B,{domain:F?[F.domainMin,F.domainMax]:[-1,1],tickFormatter:$}),(0,l.jsx)(j.u,{}),(0,l.jsx)(C.D,{}),null==F?void 0:F.lines]})})]})})]})}):null}},93515:function(e){e.exports={variables:'"@/styles/variables.css"',colorPrimary:"#fad114",colorPrimary55:"#fad11455",data:"data_data__6TY8E",button:"data_button__WZosy",container:"data_container__qk8DL",tableContainer:"data_tableContainer__jfr5q",tableHead:"data_tableHead__OyI2w"}}}]);