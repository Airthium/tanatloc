(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5650],{83755:function(e,t,a){"use strict";a.d(t,{R:function(){return c},_:function(){return o}});var i=a(59134),n=a.n(i),r=a(83454);let s=r.env.PORT?parseInt(r.env.PORT):3e3,l=n()()?"http://localhost:"+s:"",o=async(e,t)=>{let a=await fetch(l+e,{method:t?"POST":"GET",headers:{accept:"application/json","Content-Type":"application/json"},...t&&{body:t}}),i=a.headers.get("Content-Type");if(!a.ok){let e=Error("An error occured while fetching data.");throw e.info=(null==i?void 0:i.includes("application/json"))&&await a.json(),e.status=a.status,e}return a.json()},c=async(e,t)=>{var a;let i=await fetch(l+e,{...t,method:null!==(a=null==t?void 0:t.method)&&void 0!==a?a:"GET",headers:{...null==t?void 0:t.headers,"Content-Type":"application/json"}}),n=i.headers.get("Content-Type");if(!i.ok){let e=Error("An error occured while fetching data.");throw e.info=(null==n?void 0:n.includes("application/json"))&&await i.json(),e.status=i.status,e}return i}},33997:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var i=a(83755);let n=async e=>{await (0,i.R)("/api/plugin",{method:"POST",body:JSON.stringify(e)})},r=async e=>{await (0,i.R)("/api/plugin",{method:"PUT",body:JSON.stringify(e)})},s=async e=>{await (0,i.R)("/api/plugin",{method:"DELETE",body:JSON.stringify(e)})};var l=a(59734),o=a(67294),c={add:n,update:r,del:s,usePlugins:()=>{var e;let{data:t,error:a,mutate:n}=(0,l.ZP)("/api/plugin",i._),r=null!==(e=null==t?void 0:t.plugins)&&void 0!==e?e:[],s=(0,o.useCallback)(async e=>{let t=[...r,e];await n({plugins:t})},[r,n]),c=(0,o.useCallback)(async e=>{let t=r.filter(t=>t.key!==e.key);await n({plugins:t})},[r,n]),d=(0,o.useCallback)(async e=>{let t=r.map(t=>(t.key===e.key&&(t={...t,...e}),t));await n({plugins:t})},[r,n]);return[r,{addOnePlugin:s,delOnePlugin:c,mutateOnePlugin:d,errorPlugins:a,loadingPlugins:!t}]}}},55276:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var i=a(83755);let n=async()=>{let e=await (0,i.R)("/api/plugins",{method:"GET",headers:{Accept:"application/json"}});return e.json()},r=async()=>{let e=await (0,i.R)("/api/plugins",{method:"POST",headers:{Accept:"application/json"}});return e.json()};var s={list:n,completeList:r}},77149:function(e,t,a){"use strict";a.d(t,{Z:function(){return y}});var i=a(59734),n=a(67294),r=a(83755);let s=async(e,t)=>{let a=await (0,r.R)("/api/project",{method:"POST",headers:{Accept:"application/json"},body:JSON.stringify({workspace:{id:e.id},project:t})});return a.json()},l=async(e,t)=>{await (0,r.R)("/api/project/"+e.id,{method:"PUT",body:JSON.stringify(t)})},o=async(e,t)=>{await (0,r.R)("/api/project/"+t.id,{method:"DELETE",body:JSON.stringify({id:e.id})})},c=async e=>(0,r.R)("/api/project/"+e.id+"/archive",{method:"GET",headers:{Accept:"application/json"}}),d=async e=>(0,r.R)("/api/project/"+e.id+"/archive",{method:"PUT"}),u=async e=>(0,r.R)("/api/project/"+e.id+"/archive",{method:"DELETE"}),p=async(e,t)=>(0,r.R)("/api/project/"+e.id+"/archive",{method:"POST",body:JSON.stringify({archive:t})}),h=async(e,t)=>{let a=await (0,r.R)("/api/project/"+t.id+"/copy",{method:"POST",headers:{Accept:"application/json"},body:JSON.stringify({workspace:{id:e.id}})});return a.json()};var y={useProjects:e=>{var t;let{data:a,error:s,mutate:l}=(0,i.ZP)(["/api/projects",JSON.stringify({ids:e})],e=>{let[t,a]=e;return(0,r._)(t,a)}),o=null!==(t=null==a?void 0:a.projects)&&void 0!==t?t:[],c=(0,n.useCallback)(async e=>{let t=[...o,{...e,users:[],geometries:[],simulations:[],groups:[]}];await l({projects:t})},[o,l]),d=(0,n.useCallback)(async e=>{let t=o.filter(t=>t.id!==e.id);await l({projects:t})},[o,l]),u=(0,n.useCallback)(async e=>{let t=o.map(t=>(t.id===e.id&&(t={...t,...e}),t));await l({projects:t})},[o,l]);return[o,{addOneProject:c,delOneProject:d,mutateOneProject:u,errorProjects:s,loadingProjects:!a}]},useProject:e=>{var t;let{data:a,error:s,mutate:l}=(0,i.ZP)("/api/project"+(e?"/"+e:""),r._),o=null!==(t=null==a?void 0:a.project)&&void 0!==t?t:{id:"0"},c=(0,n.useCallback)(async e=>{let t={...o,...e};await l({project:t})},[o,l]);return[o,{mutateProject:c,errorProject:s,loadingProject:!a}]},add:s,update:l,del:o,archive:c,unarchiveFromServer:d,deleteArchiveFile:u,unarchiveFromFile:p,copy:h}},42661:function(e,t,a){"use strict";a.d(t,{Z:function(){return p}});var i=a(59734),n=a(67294),r=a(83755);let s=async e=>{let t=await (0,r.R)("/api/user",{method:"POST",headers:{Accept:"application/json"},body:JSON.stringify(e)});return t.json()},l=async e=>{await (0,r.R)("/api/user",{method:"PUT",body:JSON.stringify(e)})},o=async(e,t)=>{await (0,r.R)("/api/user/"+e,{method:"PUT",body:JSON.stringify(t)})},c=async()=>{await (0,r.R)("/api/user",{method:"DELETE"})},d=async e=>{await (0,r.R)("/api/user/"+e,{method:"DELETE"})},u=async e=>{let t=await (0,r.R)("/api/user/check",{method:"POST",headers:{Accept:"application/json"},body:JSON.stringify(e)});return t.json()};var p={useUser:()=>{let{data:e,error:t,mutate:a}=(0,i.ZP)("/api/user",r._),s=null==e?void 0:e.user,l=(0,n.useCallback)(async e=>{await a({user:{...s,...e}})},[s,a]),o=(0,n.useCallback)(async()=>{await a({user:void 0})},[a]);return[s,{mutateUser:l,clearUser:o,errorUser:(null==t?void 0:t.status)===401?void 0:t,loadingUser:(null==t?void 0:t.status)!==401&&!e}]},useUsers:()=>{var e;let{data:t,error:a,mutate:s}=(0,i.ZP)("/api/users",r._),l=null!==(e=null==t?void 0:t.users)&&void 0!==e?e:[],o=(0,n.useCallback)(async e=>{let t=[...l,{...e,authorizedplugins:[]}];await s({users:t})},[l,s]),c=(0,n.useCallback)(async e=>{let t=l.filter(t=>t.id!==e.id);await s({users:t})},[l,s]),d=(0,n.useCallback)(async e=>{let t=l.map(t=>(t.id===e.id&&(t={...t,...e}),t));await s({users:t})},[l,s]);return[l,{addOneUser:o,delOneUser:c,mutateOneUser:d,errorUsers:a,loadingUsers:!t}]},add:s,update:l,updateById:o,del:c,delById:d,check:u}},94725:function(e,t,a){"use strict";var i=a(85893),n=a(67294),r=a(41664),s=a.n(r),l=a(26713),o=a(85813),c=a(57953),d=a(97183),u=a(22850),p=a(3363),h=a(50888),y=a(28058),g=a(14856),j=a.n(g),v=a(80108),f=a.n(v);let m=e=>{let{text:t,status:a,errors:r}=e,[l,g]=(0,n.useState)([]),[v,m]=(0,n.useState)([]);(0,n.useEffect)(()=>{if(!(null==a?void 0:a.length)){g([]);return}let e=a.map((e,t)=>({index:t,status:"finish",icon:0===t?(0,i.jsx)(h.Z,{}):void 0,title:e})).filter(e=>e);g(e)},[a]),(0,n.useEffect)(()=>{if(!(null==r?void 0:r.length)){m([]);return}m(r.map(e=>{let t=null;return e.includes("docker: command not found")||e.includes("Is the docker daemon running")?t=(0,i.jsxs)(o.Z,{className:f().errorCard,children:["There is an error with your Docker installation.",(0,i.jsx)("br",{}),"Please verify that Docker is correctly installed and running."]}):(e.includes("EHOSTUNREACH")||e.includes("ENETUNREACH")||e.includes("ETIMEOUT"))&&(t=(0,i.jsxs)(o.Z,{className:f().errorCard,children:["There is an error with your PostgreSQL installation.",(0,i.jsx)("br",{}),'Please verify that postgres Docker container "tanatloc-postgres" is correctly installed and running.']})),(0,i.jsxs)("div",{children:[e,t]},e)}))},[r]);let w=!!(null==a?void 0:a.length)||!!(null==r?void 0:r.length);return(0,i.jsxs)(d.Z,{children:[(0,i.jsx)("div",{className:j().logo,children:(0,i.jsx)("img",{src:"/images/logo.svg",alt:"Tanatloc"})}),(0,i.jsx)(o.Z,{className:f().loading,bodyStyle:{padding:0},title:(0,i.jsx)("div",{className:f().title,children:(null==r?void 0:r.length)?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(y.Z,{className:"warning"}),(0,i.jsx)(u.Z.Title,{level:3,style:{margin:"0"},children:"An error occurs"}),(0,i.jsx)(s(),{href:"https://github.com/Airthium/tanatloc/issues/new/choose",target:"_blank",children:"Open an issue"})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.Z,{size:"large",indicator:(0,i.jsx)(h.Z,{})}),null!=t?t:"Loading, please wait..."]})}),children:w?(0,i.jsxs)("div",{className:f().content,children:[v.length?(0,i.jsxs)("div",{className:f().errors,children:[v.map(e=>e),(0,i.jsx)(u.Z.Title,{level:5,children:"Please restart the application"})]}):null,(0,i.jsx)("div",{className:f().status,children:(0,i.jsx)(p.Z,{direction:"vertical",items:l})})]}):null})]})};m.Simple=()=>(0,i.jsx)(l.Z,{style:{height:"100%",width:"100%",justifyContent:"center",alignItems:"center"},children:(0,i.jsx)(o.Z,{children:(0,i.jsxs)(l.Z,{children:[(0,i.jsx)(c.Z,{}),"Loading, please wait..."]})})}),t.Z=m},36642:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var i=a(67294);let n=(e,t)=>{if(!e||!t)return!1;let a=e.length,i=t.length;return a===i&&e.every((e,a)=>{let i=t[a];return null===e&&null===i||void 0===e&&void 0===i||(Array.isArray(e)?n(e,i):"object"==typeof e?r(e,i):e===i)})},r=(e,t)=>!!e&&!!t&&JSON.stringify(e)===JSON.stringify(t);var s=(e,t,a)=>{let r=(0,i.useRef)();(0,i.useEffect)(()=>{var a;if(!(null===(a=r.current)||void 0===a?void 0:a.length)||!n(r.current,t))return r.current=[...null!=t?t:[!0]],e()},[...null!=t?t:[],...null!=a?a:[],e])}},80108:function(e){e.exports={loading:"loading_loading__JrCmd",title:"loading_title__ESacg",content:"loading_content__NuP8g",status:"loading_status__UhnSG",errors:"loading_errors__j2ZIA",error:"loading_error__p5Dww",errorCard:"loading_errorCard__BCfHX"}}}]);