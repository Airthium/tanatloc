"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5706],{45706:function(t,n,e){e.r(n),e.d(n,{errors:function(){return M},exportCSV:function(){return I},onCheck:function(){return z}});var i=e(14924),o=e(828),a=e(29815),r=e(85893),u=e(67294),l=e(26713),s=e(32808),c=e(97183),d=e(84908),f=e(71577),h=e(63463),x=e(5027),v=e(56299),m=e(18870),p=e(9253),y=e(51584),j=e(14195),g=e(3023),k=e(75358),b=e(14888),Z=e(44141),w=e(96486),C=e(41641),S=e(96844),E=e(60877),D=e(83283),M={download:"Unable to download CSV"},z=function(t,n,e){var i=t.target.checked,o=(0,a.Z)(e);return o[n]=i,o},I=function(t,n,e,i){var o="";o="x,"+e.join(",")+"\n",n.forEach((function(t){o+=t.x,null===i||void 0===i||i.forEach((function(n){void 0!==t[n]&&(o+=","+t[n])})),o+="\n"}));var a=t.name+".csv",r=new File([o],a,{type:"text/csv"}),u=window.URL.createObjectURL(r),l=document.createElement("a");l.href=u,l.setAttribute("download",a),l.click(),l.remove()};n.default=function(t){var n=t.simulation,e=(0,u.useState)(!1),_=e[0],K=e[1],N=(0,u.useState)(),R=N[0],U=N[1],V=(0,u.useState)(),A=V[0],B=V[1],F=(0,u.useState)(),L=F[0],q=F[1],O=(0,u.useState)(),T=O[0],W=O[1],G=(0,u.useState)([!0]),H=G[0],J=G[1],P=(0,u.useState)(),Q=P[0],X=P[1],Y=(0,u.useState)(!1),$=Y[0],tt=Y[1],nt=(0,o.Z)(D.Z.useSimulation(null===n||void 0===n?void 0:n.id),1)[0];return(0,u.useEffect)((function(){var t=null===nt||void 0===nt?void 0:nt.tasks;if(!t)return U(void 0),B(void 0),void q(void 0);var n=t.map((function(t){return t.datas})).filter((function(t){return t})).flatMap((function(t){return t}));if(!n.length||!n[0].names)return B(void 0),void q(void 0);n.sort((function(t,n){return t.x-n.x}));var e=n.map((function(t){return t.names})).flatMap((function(t){return t})).filter((function(t,n,e){return e.findIndex((function(n){return n===t}))===n})),o=e.map((function(t){return(0,w.camelCase)(t)})),a=[];n.forEach((function(t,n){t.names.forEach((function(e,o){var r=a.find((function(n){return n.x===t.x}));r?r[(0,w.camelCase)(e)]=t.ys[o]:a.push((0,i.Z)({key:n,x:t.x},(0,w.camelCase)(e),t.ys[o]))}))})),U(a),B(e),q(o)}),[nt]),(0,u.useEffect)((function(){if(R&&A&&L){var t=A.map((function(t,n){return{align:"center",className:"Data-column"+(H[n]?" Data-column-selected":""),title:(0,r.jsxs)(l.Z,{children:[t,(0,r.jsx)(s.Z,{checked:H[n],onChange:function(t){return J(z(t,n,H))},children:(0,r.jsx)(v.Z,{style:{fontSize:20}})})]}),dataIndex:L[n],key:L[n]}}));t.unshift({title:"",dataIndex:"x",key:"x"}),W(t)}else W(void 0)}),[R,A,L,H]),(0,u.useEffect)((function(){var t,n;if(R&&A&&L){var e=[],i=H.map((function(t,n){if(t){var i=L[n],o=A[n];return e.push(i),(0,r.jsx)(m.x,{name:o,type:"monotone",dataKey:i,stroke:E.Z.stringToColor(i),strokeWidth:2},n)}})).filter((function(t){return t})),o=R.map((function(t){var n={x:t.x};return e.forEach((function(e){t[e]&&(n[e]=t[e])})),n})).filter((function(t){return t})),u=(t=Math).min.apply(t,(0,a.Z)(e.flatMap((function(t){return o.map((function(n){return n[t]}))})))),l=(n=Math).max.apply(n,(0,a.Z)(e.flatMap((function(t){return o.map((function(n){return n[t]}))}))));X({data:o,min:u,max:l,lines:i})}else X(void 0)}),[R,A,L,H]),n&&R&&A&&L?(0,r.jsx)(c.Z,{style:{position:"absolute",zIndex:100,right:50,bottom:25,backgroundColor:"rgba(255, 255, 255, 0)"},children:(0,r.jsxs)(c.Z.Content,{children:[(0,r.jsx)(d.Z,{title:"Data visualization",children:(0,r.jsx)(f.Z,{type:"primary",icon:(0,r.jsx)(v.Z,{}),onClick:function(){return K(!0)},style:{width:40,height:40,border:"1px solid #5E14FA",borderRadius:20,marginBottom:-20}})}),(0,r.jsx)(h.Z,{title:"Data visualization",placement:"bottom",closable:!0,onClose:function(){return K(!1)},open:_,mask:!1,maskClosable:!1,height:"50vh",bodyStyle:{height:"100%",overflow:"hidden"},extra:(0,r.jsx)(C.o6,{bordered:!0,loading:$,disabled:!R,onDownload:function(){tt(!0);try{I(n,R,A,L)}catch(t){(0,S.lt)(M.download,t)}finally{tt(!1)}},children:"Export CSV"}),children:(0,r.jsxs)("div",{style:{display:"flex",height:"100%",padding:"10px"},children:[(0,r.jsx)("div",{style:{display:"flex",height:"100%",width:"50%",overflow:"auto"},children:(0,r.jsx)(x.Z,{size:"small",dataSource:R,columns:T,pagination:!1})}),(0,r.jsx)(p.h,{width:"50%",height:"100%",children:(0,r.jsxs)(y.w,{data:null===Q||void 0===Q?void 0:Q.data,margin:{top:0,right:40,left:40,bottom:0},children:[(0,r.jsx)(j.q,{strokeDasharray:"3 3"}),(0,r.jsx)(g.K,{dataKey:"x"}),(0,r.jsx)(k.B,{domain:[(null===Q||void 0===Q?void 0:Q.min)||-1,(null===Q||void 0===Q?void 0:Q.max)||1]}),(0,r.jsx)(b.u,{}),(0,r.jsx)(Z.D,{}),null===Q||void 0===Q?void 0:Q.lines]})})]})})]})}):null}}}]);