(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5753],{9819:function(e,l,t){"use strict";t.d(l,{E:function(){return i},j:function(){return a}});let a=[{label:"Density",symbol:"Rho",units:[{label:"\\(kg.m^{-3}\\)"}],unit:{label:"\\(kg.m^{-3}\\)"}},{label:"Young's modulus",symbol:"E",units:[{label:"\\(Pa\\)"}],unit:{label:"\\(Pa\\)"}},{label:"Poisson's ratio",symbol:"Nu"},{label:"Thermal conductivity",symbol:"Lambda",units:[{label:"\\(W.m^{-1}.K^{-1}\\)"}],unit:{label:"\\(W.m^{-1}.K^{-1}\\)"}},{label:"Heat capacity",symbol:"Cp",units:[{label:"\\(J.K^{-1}.kg^{-1}\\)"}],unit:{label:"\\(J.K^{-1}.kg^{-1}\\)"}},{label:"Dynamic viscosity",symbol:"Mu",units:[{label:"\\(Pa.s\\)"}],unit:{label:"\\(Pa.s\\)"}}],i={metal:{label:"Metal",children:[{key:"steel",label:"Generic Steel",children:[{label:"Density",symbol:"Rho",value:"7850"},{label:"Young's modulus",symbol:"E",value:"2.1e11"},{label:"Poisson's ratio",symbol:"Nu",value:"0.3"},{label:"Thermal conductivity",symbol:"Lambda",value:"15"},{label:"Heat capacity",symbol:"Cp",value:"502"}]},{key:"S235JR+AR",label:"Steel (S235JR+AR)",children:[{label:"Density",symbol:"Rho",value:"7850"},{label:"Young's modulus",symbol:"E",value:"2.1e11"},{label:"Poisson's ratio",symbol:"Nu",value:"0.27"},{label:"Thermal conductivity",symbol:"Lambda",value:"15"},{label:"Heat capacity",symbol:"Cp",value:"502"}]},{key:"304",label:"Stainless Steel 304",children:[{label:"Density",symbol:"Rho",value:"8000"},{label:"Young's modulus",symbol:"E",value:"193e9"},{label:"Poisson's ratio",symbol:"Nu",value:"0.29"},{label:"Thermal conductivity",symbol:"Lambda",value:"16.2"},{label:"Heat capacity",symbol:"Cp",value:"500"},{label:"Yield strength",symbol:"SigmaY",value:"215e6"}]},{key:"316L",label:"Stainless Steel 316L",children:[{label:"Density",symbol:"Rho",value:"7990"},{label:"Young's modulus",symbol:"E",value:"193e9"},{label:"Poisson's ratio",symbol:"Nu",value:"0.25"},{label:"Thermal conductivity",symbol:"Lambda",value:"16.2"},{label:"Heat capacity",symbol:"Cp",value:"500"},{label:"Yield strength",symbol:"SigmaY",value:"290e6"}]},{key:"6082-O",label:"Aluminium 6082-O",children:[{label:"Density",symbol:"Rho",value:"2700"},{label:"Young's modulus",symbol:"E",value:"69e9"},{label:"Poisson's ratio",symbol:"Nu",value:"0.33"},{label:"Thermal conductivity",symbol:"Lambda",value:"170"},{label:"Heat capacity",symbol:"Cp",value:"960"},{label:"Yield strength",symbol:"SigmaY",value:"60e6"}]},{key:"7075-O",label:"Aluminium 7075-O",children:[{label:"Density",symbol:"Rho",value:"2810"},{label:"Young's modulus",symbol:"E",value:"71.7e9"},{label:"Poisson's ratio",symbol:"Nu",value:"0.33"},{label:"Thermal conductivity",symbol:"Lambda",value:"173"},{label:"Heat capacity",symbol:"Cp",value:"960"},{label:"Yield strength",symbol:"SigmaY",value:"110e6"}]},{key:"2017A",label:"Aluminium 2017A",children:[{label:"Density",symbol:"Rho",value:"2790"},{label:"Young's modulus",symbol:"E",value:"72.5e9"},{label:"Poisson's ratio",symbol:"Nu",value:"0.33"},{label:"Thermal conductivity",symbol:"Lambda",value:"134"},{label:"Heat capacity",symbol:"Cp",value:"873"},{label:"Yield strength",symbol:"SigmaY",value:"275e6"}]}]},polymer:{label:"Polymer",children:[{key:"PMMA",label:"PMMA",children:[{label:"Density",symbol:"Rho",value:"1180"},{label:"Young's modulus",symbol:"E",value:"2.9e9"},{label:"Poisson's ratio",symbol:"Nu",value:"0.36"},{label:"Thermal conductivity",symbol:"Lambda",value:"0.193"},{label:"Heat capacity",symbol:"Cp",value:"1480"},{label:"Yield strength",symbol:"SigmaY",value:"69e6"}]}]},fluid:{label:"Fluid",children:[{key:"water",label:"Water",children:[{label:"Density",symbol:"Rho",value:"1e3"},{label:"Dynamic viscosity",symbol:"Mu",value:"1e-3"},{label:"Thermal conductivity",symbol:"Lambda",value:"0.6"},{label:"Heat capacity",symbol:"Cp",value:"4185"}]}]},contact:{label:"Contact",children:[{key:"fundation",label:"Fundation",children:[]}]}}},85615:function(e,l,t){"use strict";t.d(l,{Z:function(){return u}});var a=t(948);let i=async(e,l)=>{let t=await (0,a.R)("/api/result",{method:"POST",headers:{Accept:"application/json"},body:JSON.stringify({simulation:e,result:l})});return t.json()},n=async(e,l)=>(0,a.R)("/api/result/download",{method:"POST",body:JSON.stringify({simulation:e,result:l})}),s=async e=>(0,a.R)("/api/result/archive",{method:"POST",body:JSON.stringify({simulation:e})});var u={load:i,download:n,archive:s}},15753:function(e,l,t){"use strict";t.d(l,{ZP:function(){return tZ}});var a=t(85893),i=t(67294),n=t(16373),s=t(12386),u=t(56697),o=t(64749),r=t(20838),d=t(94055),c=t(53740),m=t(60052),h=t(68245),v=t(82492),y=t.n(v),p=t(8061),f=t(54509),x=t(95590),b=t(8418),g=t(88053),j=t(28456),C=t(97221),k=t(81229),Z=t(70459),w=t(4863),S=t(70302),T=t(74048),E=t(89552),N=t(65400),O=t.n(N),P=t(52655),M=t(35304),A=t.n(M);let L={copy:"Unable to copy simulation"},I=async(e,l,t,a)=>{try{let a=await k.Z.copy(l);await t.addOneSimulation(a),await t.mutateProject({id:e.id,simulations:[...e.simulations,a.id]})}catch(e){a((0,f.iT)({title:L.copy,err:e}))}};var R=e=>{let{project:l,simulation:t,swr:n}=e,[s,u]=(0,i.useState)(!1),{dispatch:o}=(0,i.useContext)(p.uj),r=(0,i.useCallback)(()=>{(async()=>{u(!0);try{await I(l,t,n,o)}finally{u(!1)}})()},[l,t,n,o]);return(0,a.jsx)(d.default,{title:"Copy simulation",children:(0,a.jsx)(O(),{className:A().noBorder,loading:s,icon:(0,a.jsx)(P.default,{}),onClick:r})})},_=t(97538),U=t(51024),Y=t(51274);let z={update:"Unable to update simulation"},B=async(e,l,t,a)=>{try{await k.Z.update({id:e.id},[{key:"name",value:l.name}]),await t.mutateOneSimulation({id:e.id,name:l.name})}catch(e){throw a((0,f.iT)({title:z.update,err:e})),e}};var V=e=>{let{simulation:l,swr:t}=e,n=(0,i.useRef)(null),[s,u]=(0,i.useState)(!1),[o,r]=(0,i.useState)(!1),{dispatch:d}=(0,i.useContext)(p.uj);(0,i.useEffect)(()=>{n.current&&n.current.focus()});let c=(0,i.useCallback)(async e=>{r(!0);try{await B(l,e,t,d),r(!1),u(!1)}catch(e){throw r(!1),e}},[l,t,d]),m=(0,i.useCallback)(()=>u(!0),[]),h=(0,i.useCallback)(()=>u(!1),[]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.w6,{onEdit:m}),(0,a.jsx)(Y.ZP,{title:"Edit the simulation's name",visible:s,initialValues:{name:l.name},onCancel:h,onOk:c,loading:o,children:(0,a.jsx)(_.Z.Item,{name:"name",label:"Name:",rules:[{required:!0,message:"Name is required"}],children:(0,a.jsx)(U.default,{ref:n})})})]})};let H={del:"Unable to delete simulation"},F=async(e,l,t,a)=>{try{await k.Z.del(l);let a=e.simulations.filter(e=>e!==l.id);await t.mutateProject({id:e.id,simulations:a}),await t.delOneSimulation({id:l.id})}catch(e){throw a((0,f.iT)({title:H.del,err:e})),e}};var W=e=>{let{project:l,simulation:t,swr:n}=e,[s,u]=(0,i.useState)(!1),{dispatch:o}=(0,i.useContext)(p.uj),r=(0,i.useCallback)(async()=>{u(!0);try{await F(l,t,n,o)}finally{u(!1)}},[l,t,n,o]);return(0,a.jsx)(g.m1,{loading:s,text:(0,a.jsxs)(a.Fragment,{children:["Are you sure you want to delete the simulation"," ",(0,a.jsx)(c.Z.Text,{strong:!0,children:t.name}),"?"]}),onDelete:r})},D=t(68469),K=t(31059),G=t(48138),q=t(4851),J=t(64713),$=t(2307),Q=t(86994),X=t(68130),ee=e=>{let{dimension:l,initialValue:t,additionalKeywords:n,unit:s,units:u,onChange:o,onUnitChange:r}=e,[m,h]=(0,i.useState)(!1),[v,y]=(0,i.useState)(t),[p,f]=(0,i.useState)(),x=(0,i.useMemo)(()=>[{title:"Label",dataIndex:"label",key:"label"},{title:"Keyword",dataIndex:"value",key:"value"}],[]),g=(0,i.useCallback)(()=>h(!0),[]),j=(0,i.useCallback)(()=>h(!1),[]),C=(0,i.useCallback)(e=>{let t=e.target.value;try{f(void 0),(0,X.Q)(t,{additionalKeywords:null==n?void 0:n.map(e=>{if(2!==l||!e.only3D)return e.value}).filter(e=>e)})}catch(e){f(e.message)}y(t)},[l,n]),k=(0,i.useCallback)(e=>{let l=e.target.value,t=null==u?void 0:u.find(e=>e.label===l);null==r||r(t)},[u,r]),Z=(0,i.useCallback)(async()=>{o({target:{value:v}})},[v,o]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.default,{title:"Complex formula",children:(0,a.jsx)(Q.default,{onClick:g})}),(0,a.jsxs)(Y.ZP,{title:"Formula",visible:m,initialValues:{formula:t},onOk:Z,onCancel:j,children:[(0,a.jsx)(_.Z.Item,{extra:(0,a.jsx)("span",{style:{color:"red"},children:p}),style:{marginBottom:0},children:(0,a.jsx)(U.default.TextArea,{value:v,onChange:C,style:p?{borderColor:"red"}:{}})}),u?(0,a.jsx)(_.Z.Item,{children:(0,a.jsx)(J.default.Group,{value:null==s?void 0:s.label,onChange:k,children:null==u?void 0:u.map(e=>(0,a.jsx)(J.default.Button,{value:e.label,children:(0,a.jsx)(b.Z.Inline,{text:e.label})},e.label))})}):null,n?(0,a.jsx)(_.Z.Item,{children:(0,a.jsx)(D.Z,{items:[{key:"additional",label:"Additional keywords",children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.Z.Text,{children:"Additional keywods are model-specific keywords, in addition to FreeFEM keywords."}),(0,a.jsx)($.Z,{pagination:!1,columns:x,dataSource:n.map(e=>({key:e.label,...e})).filter(e=>!(2===l&&e.only3D))})]})}]})}):null]})]})},el=t(2594),et=t.n(el),ea=e=>{let{label:l,noLarge:t,className:n,dimension:s,defaultValue:u,defaultChecked:r,additionalKeywords:d,units:c,unit:m,onValueChange:h,onCheckedChange:v,onUnitChange:y}=e,[p,f]=(0,i.useState)(String(null!=u?u:0)),[x,g]=(0,i.useState)(!!r),[j,C]=(0,i.useState)(void 0!==r&&!r),[k,Z]=(0,i.useState)(0),[w,S]=(0,i.useState)(!1);(0,i.useEffect)(()=>{f(String(null!=u?u:0))},[u]),(0,i.useEffect)(()=>{g(!!r)},[r]);let E=(0,i.useCallback)(e=>{let l=e.target.checked;g(l),null==v||v(l),C(!l)},[v]),N=(0,i.useCallback)(e=>{k&&clearTimeout(k);let l=setTimeout(()=>{h(e),S(!1)},500);Z(+l)},[k,h]),O=(0,i.useCallback)(e=>{let l=e.target.value;f(l),S(!0),N(l)},[N]),P=(0,i.useCallback)(e=>{let l=null==c?void 0:c.find(l=>l.label===e);null==y||y(l)},[c,y]),M=(0,i.useMemo)(()=>m?c&&c.length>1?(0,a.jsx)(o.default,{className:et().select,options:c.map(e=>({value:e.label,label:(0,a.jsx)(b.Z.Inline,{text:e.label})})),onChange:P,value:null==m?void 0:m.label}):(0,a.jsx)(b.Z.Inline,{text:m.label}):null,[m,c,P]),L=(0,i.useMemo)(()=>(0,a.jsx)(q.default,{spin:!0,className:A().textOrange}),[]),I=(0,i.useMemo)(()=>t?(0,a.jsx)(G.Z,{className:A().textGreen}):(0,a.jsx)(ee,{dimension:s,initialValue:p,additionalKeywords:d,unit:m,units:c,onChange:O,onUnitChange:y}),[t,s,p,d,m,c,O,y]);return(0,a.jsx)(T.default,{className:"".concat(A().fullWidth," ").concat(et().formula," ").concat(n),style:et(),align:"start",children:(0,a.jsx)(_.Z,{layout:"vertical",children:(0,a.jsx)(_.Z.Item,{label:(0,a.jsxs)(a.Fragment,{children:[void 0!==r&&(0,a.jsx)(K.default,{checked:x,onChange:E,style:{marginRight:"5px"}}),l]}),children:(0,a.jsx)(U.default,{className:et().input,disabled:j,value:p,onChange:O,addonBefore:w?L:I,addonAfter:M})})})})};let ei={manual:{type:"manual",value:1},auto:{type:"auto",value:"normal"},factor:{type:"factor",value:1}},en={update:"Unable to update simulation"},es=async(e,l,t,a)=>{try{let i=C.Z.deepCopy(e);i.scheme.configuration.geometry.children[l].meshParameters=t;let n={...i.scheme.configuration.geometry,done:!0};await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","geometry"],value:n}]),await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","run"],value:{...i.scheme.configuration.run,done:!1}}]),await a.mutateOneSimulation(i)}catch(e){throw e}};var eu=e=>{let{simulation:l,index:t,swr:n}=e,[s,u]=(0,i.useState)(ei.auto),{dispatch:r}=(0,i.useContext)(p.uj);(0,i.useEffect)(()=>{let e=l.scheme.configuration.geometry.children[t].meshParameters;e&&u(e)},[l,t]);let d=(0,i.useCallback)(e=>{let a=ei[e];es(l,t,a,n).then(()=>{u(a)}).catch(e=>r((0,f.iT)({title:en.update,err:e})))},[l,t,n,r]),c=(0,i.useCallback)(e=>{let a={...s,value:e};es(l,t,a,n).then(()=>{u(a)}).catch(e=>r((0,f.iT)({title:en.update,err:e})))},[l,t,n,s,r]),m=(0,i.useCallback)(e=>{let a={...s,unit:e};es(l,t,a,n).then(()=>u(a)).catch(e=>r((0,f.iT)({title:en.update,err:e})))},[l,t,n,s,r]);return(0,a.jsx)(D.Z,{items:[{key:"meshRefinement",label:"Mesh refinement",children:(0,a.jsxs)(S.Z,{size:"small",children:[(0,a.jsx)(_.Z,{layout:"vertical",children:(0,a.jsx)(_.Z.Item,{label:"Type",children:(0,a.jsx)(o.default,{className:A().fullWidth,options:Object.keys(ei).map(e=>({label:e.charAt(0).toUpperCase()+e.slice(1),value:e})),value:s.type,onChange:d})})}),"auto"===s.type&&(0,a.jsx)(_.Z,{layout:"vertical",children:(0,a.jsx)(_.Z.Item,{label:"Size",children:(0,a.jsx)(o.default,{className:A().fullWidth,options:[{label:"Very fine",value:"veryfine"},{label:"Fine",value:"fine"},{label:"Normal",value:"normal"},{label:"Coarse",value:"coarse"},{label:"Very coarse",value:"verycoarse"}],value:s.value,onChange:c})})}),"manual"===s.type&&(0,a.jsx)(ea,{label:"Size",noLarge:!0,defaultValue:s.value,units:[{label:"m"},{label:"mm",multiplicator:1e3}],unit:s.unit,onValueChange:c,onUnitChange:m}),"factor"===s.type&&(0,a.jsx)(ea,{label:"Size",noLarge:!0,defaultValue:s.value,onValueChange:c})]})}]})};let eo=async(e,l,t,a)=>{try{var i;let n=C.Z.deepCopy(e);n.scheme.configuration.geometry.children[t].value=l.id;let s={...n.scheme.configuration,dimension:null!==(i=l.summary.dimension)&&void 0!==i?i:3,geometry:{...n.scheme.configuration.geometry,done:!0},run:{...n.scheme.configuration.run,done:!1}};await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration"],value:s}]),await a.mutateOneSimulation(n)}catch(e){throw e}},er=e=>{let{geometries:l,simulation:t,child:n,index:s,setGeometries:u,swr:r}=e,{dispatch:d}=(0,i.useContext)(p.uj),c=(0,i.useMemo)(()=>n.value,[n.value]),m=(0,i.useMemo)(()=>n.noMeshable,[n.noMeshable]),h=(0,i.useCallback)(e=>{let a=l.find(l=>l.id===e);eo(t,a,s,r).then(()=>u([a])).catch(e=>d((0,f.iT)({title:"Unable to update simulation",err:e})))},[l,t,s,u,r,d]);return(0,i.useEffect)(()=>{l.length&&!c&&h(l[0].id)},[l,c,h]),(0,a.jsxs)(S.Z,{size:"small",title:n.label,children:[(0,a.jsx)(_.Z,{layout:"vertical",children:(0,a.jsx)(_.Z.Item,{children:(0,a.jsx)(o.default,{placeholder:"Select a simulation domain",options:l.map(e=>({value:e.id,label:e.name})),value:c,onChange:h})})}),m?null:(0,a.jsx)(eu,{simulation:{id:t.id,scheme:t.scheme},index:s,swr:{mutateOneSimulation:r.mutateOneSimulation}})]})};var ed=t(40561),ec=t(54523),em=t(78804);let eh={update:"Unable to delete material"},ev=async(e,l,t,a,i)=>{try{let i=C.Z.deepCopy(e),n=i.scheme.configuration.materials,s=n.values[l];a((0,em.Ys)(s.selected)),n.values=[...n.values.slice(0,l),...n.values.slice(l+1)];let u={...n,done:!!n.values.length};await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","materials"],value:u}]),await t.mutateOneSimulation(i)}catch(e){throw i((0,f.iT)({title:eh.update,err:e})),e}};var ey=e=>{let{simulation:l,index:t,swr:n}=e,[s,u]=(0,i.useState)(!1),{dispatch:o}=(0,i.useContext)(p.uj),{dispatch:r}=(0,i.useContext)(ec.ZB),d=(0,i.useMemo)(()=>l.scheme.configuration.materials,[l]),m=(0,i.useMemo)(()=>d.values[t],[d,t]),h=(0,i.useCallback)(async()=>{u(!0);try{await ev(l,t,n,r,o)}finally{u(!1)}},[l,t,n,r,o]);return(0,a.jsx)(g.m1,{loading:s,text:(0,a.jsxs)(a.Fragment,{children:["Are you sure you want to delete the material"," ",(0,a.jsx)(c.Z.Text,{strong:!0,children:m.material.label})]}),onDelete:h})},ep=t(29040),ef=t.n(ep);let ex=e=>{let{geometries:l,simulation:t,material:n,index:s,swr:u,_onEdit:o}=e,[r,d]=(0,i.useState)(!0),{dispatch:m}=(0,i.useContext)(ec.ZB),h=(0,i.useCallback)(()=>{let e=n.geometry,t=l.find(l=>l.id===e),a=n.selected;setTimeout(()=>{m((0,em.wp)()),m((0,em.rx)(null==t?void 0:t.summary.uuid)),m((0,em.Ys)(a))},50)},[l,n,m]),v=(0,i.useCallback)(()=>{r&&setTimeout(()=>m((0,em.h$)()),50)},[r,m]),y=(0,i.useCallback)(()=>{d(!1),o(s),setTimeout(()=>d(!0),500)},[s,o]);return(0,a.jsx)(S.Z,{className:"".concat(A().textAlignCenter," ").concat(ef().listItem),hoverable:!0,onMouseEnter:h,onMouseLeave:v,actions:[(0,a.jsx)(g.w6,{onEdit:y},"edit"),(0,a.jsx)(ey,{index:s,simulation:t,swr:u},"delete")],children:(0,a.jsx)(c.Z.Text,{strong:!0,className:A().textAlignCenter,children:n.material.label})})};var eb=e=>{var l;let{geometries:t,simulation:n,swr:s,onEdit:u}=e,o=(0,i.useMemo)(()=>n.scheme.configuration.materials,[n]);return(0,a.jsx)(a.Fragment,{children:null===(l=o.values)||void 0===l?void 0:l.map((e,l)=>(0,a.jsx)(ex,{geometries:t,simulation:n,material:e,index:l,swr:s,_onEdit:u},e.uuid)).filter(e=>e)})},eg=t(1825),ej=t(83482),eC=t(3855),ek=t(59361),eZ=t(95286),ew=t(91873),eS=t(7737),eT=t(49031);let eE=(e,l)=>{let t=[...e],a=t.findIndex(e=>e.uuid===l.uuid);return -1===a?t.push(l):t=[...t.slice(0,a),...t.slice(a+1)],t},eN=(e,l)=>{let t=[...e,...l];return t.reduce((e,l)=>(e.find(e=>e.uuid===l.uuid)||e.push(l),e),[])},eO=(e,l)=>{let t=[...e];return l.forEach(e=>{let l=t.findIndex(l=>l.uuid===e.uuid);-1!==l&&(t=[...t.slice(0,l),...t.slice(l+1)])}),t},eP=(e,l)=>{let t=[...e];return l.forEach(e=>{let l=t.findIndex(l=>l.uuid===e.uuid);-1===l?t.push(e):t=[...t.slice(0,l),...t.slice(l+1)]}),t},eM=e=>{let{color:l,setFilter:t}=e,n=(0,i.useCallback)(()=>{t(l)},[l,t]);return(0,a.jsx)(d.default,{title:"Color",children:(0,a.jsx)(O(),{style:{backgroundColor:C.Z.rgbToHex(l)},onClick:n,children:" "})})},eA=e=>{let{colors:l,setFilter:t}=e,n=(0,i.useCallback)(()=>{t(void 0)},[t]);return l.length>1&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.default,{title:"Reset",children:(0,a.jsx)(O(),{icon:(0,a.jsx)(ej.default,{}),onClick:n})}),l.map(e=>(0,a.jsx)(eM,{color:e,setFilter:t},JSON.stringify(e)))]})},eL=e=>{let{element:l,alreadySelected:t,filter:n,search:s,context:u}=e,o=(0,i.useMemo)(()=>{var e,t,a;return(!n||n.r===(null===(e=l.color)||void 0===e?void 0:e.r)&&n.g===(null===(t=l.color)||void 0===t?void 0:t.g)&&n.b===(null===(a=l.color)||void 0===a?void 0:a.b))&&(!s||!l.name||!!l.name.includes(s))},[l,n,s]),r=(0,i.useCallback)(e=>{u.dispatch((0,em.CH)(e))},[u]),d=(0,i.useCallback)(()=>{u.dispatch((0,em.CH)())},[u]),c=(0,i.useCallback)(e=>{let l=eE(u.selected,e);u.dispatch((0,em.Ys)(l))},[u]),m=(0,i.useMemo)(()=>{var e;return u.selected.find(e=>e.uuid===l.uuid)?"#EE9817":(null===(e=u.highlighted)||void 0===e?void 0:e.uuid)===l.uuid?"#FAD114":"transparent"},[l,u]),h=(0,i.useMemo)(()=>{var e;return u.selected.find(e=>e.uuid===l.uuid)?"rgba(238, 152, 23, 0.3)":(null===(e=u.highlighted)||void 0===e?void 0:e.uuid)===l.uuid?"rgba(250, 209, 20, 0.3)":"transparent"},[l,u]),v=(0,i.useCallback)(()=>r({uuid:l.uuid,label:l.label}),[l,r]),y=(0,i.useCallback)(()=>c({uuid:l.uuid,label:l.label}),[l,c]);return o?(0,a.jsx)(S.Z,{style:{marginBottom:"10px"},bodyStyle:{position:"relative",padding:"10px 10px 10px 40px",borderWidth:"2px",borderStyle:"solid",borderColor:m,backgroundColor:h},onMouseEnter:v,onMouseLeave:d,onClick:y,children:(0,a.jsxs)(T.default,{direction:"vertical",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{style:{position:"absolute",left:"-2px",top:"-2px",bottom:"-2px",width:"30px",backgroundColor:C.Z.rgbToRgba(l.color,1)}}),l.name]}),null==t?void 0:t.map(e=>{if(e.selected.find(e=>e.uuid===l.uuid))return(0,a.jsx)(ek.Z,{color:C.Z.stringToColor(e.label),children:e.label},l.uuid+e.label)})]})}):null};var eI=e=>{var l;let{geometry:t,alreadySelected:n,updateSelected:s}=e,[u,o]=(0,i.useState)([]),[r,m]=(0,i.useState)(),[h,v]=(0,i.useState)(),{type:y,highlighted:p,selected:f,dispatch:b}=(0,i.useContext)(ec.ZB);(0,x.Z)(()=>s(f),[f],[s]),(0,x.Z)(()=>{var e;let l=[];y&&(null===(e=t.summary[y])||void 0===e||e.forEach(e=>{if(e.color){let t=l.find(l=>l.r===e.color.r&&l.g===e.color.g&&l.b===e.color.b);t||l.push(e.color)}})),o(l)},[t,y]);let g=(0,i.useCallback)(()=>{var e,l;let a=null!==(l=null===(e=t.summary[y])||void 0===e?void 0:e.map(e=>{var l,t,a;if(!r||r&&r.r===(null===(l=e.color)||void 0===l?void 0:l.r)&&r.g===(null===(t=e.color)||void 0===t?void 0:t.g)&&r.b===(null===(a=e.color)||void 0===a?void 0:a.b))return{uuid:e.uuid,label:e.label}}).filter(e=>e))&&void 0!==l?l:[],i=eN(f,a);b((0,em.Ys)(i))},[t,y,f,r,b]),j=(0,i.useCallback)(()=>{var e,l;let a=null!==(l=null===(e=t.summary[y])||void 0===e?void 0:e.map(e=>{var l,t,a;if(!r||r&&r.r===(null===(l=e.color)||void 0===l?void 0:l.r)&&r.g===(null===(t=e.color)||void 0===t?void 0:t.g)&&r.b===(null===(a=e.color)||void 0===a?void 0:a.b))return{uuid:e.uuid,label:e.label}}).filter(e=>e))&&void 0!==l?l:[],i=eO(f,a);b((0,em.Ys)(i))},[t,y,f,r,b]),C=(0,i.useCallback)(()=>{var e,l;let a=null!==(l=null===(e=t.summary[y])||void 0===e?void 0:e.map(e=>{var l,t,a;if(!r||r&&r.r===(null===(l=e.color)||void 0===l?void 0:l.r)&&r.g===(null===(t=e.color)||void 0===t?void 0:t.g)&&r.b===(null===(a=e.color)||void 0===a?void 0:a.b))return{uuid:e.uuid,label:e.label}}).filter(e=>e))&&void 0!==l?l:[],i=eP(f,a);b((0,em.Ys)(i))},[t,y,f,r,b]),k=(0,i.useCallback)(e=>{let l=e.target.value;v(l)},[]);return(0,a.jsxs)(S.Z,{size:"small",className:A().noBorderBottom,children:[(0,a.jsxs)(T.default,{direction:"vertical",className:A().fullWidth,children:[(0,a.jsx)(c.Z.Text,{strong:!0,children:"Filters"}),(0,a.jsxs)(T.default,{direction:"horizontal",wrap:!0,children:[(0,a.jsx)(eA,{colors:u,setFilter:m}),(0,a.jsx)(d.default,{title:"Select all",children:(0,a.jsx)(O(),{icon:(0,a.jsx)(ew.default,{}),onClick:g})}),(0,a.jsx)(d.default,{title:"Unselect all",children:(0,a.jsx)(O(),{icon:(0,a.jsx)(eZ.Z,{}),onClick:j})}),(0,a.jsx)(d.default,{title:"Swap",children:(0,a.jsx)(O(),{icon:(0,a.jsx)(eT.Z,{}),onClick:C})})]}),(0,a.jsx)(U.default,{placeholder:"Search",value:h,onChange:k,suffix:(0,a.jsx)(eS.default,{className:A().textLight})})]}),(0,a.jsx)("div",{className:A().fullWidth,style:{marginTop:"20px"},children:y?null===(l=t.summary[y])||void 0===l?void 0:l.map(e=>(0,a.jsx)(eL,{element:e,alreadySelected:n,filter:r,search:h,context:{selected:f,highlighted:p,dispatch:b}},e.uuid)):null})]})},eR=t(56590),e_=t(69590),eU=t(9819),eY=e=>{let{onSelect:l}=e,[t,o]=(0,i.useState)(),[r,d]=(0,i.useState)(),[c,m]=(0,i.useState)(),[h,v]=(0,i.useState)(),y=(0,i.useMemo)(()=>Object.keys(eU.E),[]),p=(0,i.useCallback)(()=>o(!0),[]),f=(0,i.useCallback)(()=>o(!1),[]),x=(0,i.useCallback)(e=>{let{key:l}=e,t=eU.E[l];d({key:l,children:t.children}),m(void 0),v(void 0)},[]),b=(0,i.useCallback)(e=>{let{key:l}=e,t=eU.E[r.key],a=t.children.find(e=>e.key===l);m({key:l}),v(a)},[r]),g=(0,i.useCallback)(()=>{l(h),o(!1)},[h,l]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(O(),{icon:(0,a.jsx)(e_.Z,{}),onClick:p,className:A().fullWidth,children:"Pick a material"}),(0,a.jsx)(u.Z,{open:t,title:"Material database",onCancel:f,onOk:g,okText:"Choose",okButtonProps:{disabled:!h},width:"50%",children:(0,a.jsx)(n.Z,{children:(0,a.jsx)(n.Z.Content,{children:(0,a.jsxs)(T.default,{style:{alignItems:"stretch"},children:[(0,a.jsx)(s.default,{mode:"inline",items:y.map(e=>({key:e,label:eU.E[e].label})),onClick:x}),(0,a.jsx)(s.default,{mode:"inline",items:null==r?void 0:r.children.map(e=>({key:e.key,label:e.label})),selectedKeys:(null==c?void 0:c.key)?[null==c?void 0:c.key]:[],onClick:b}),h&&(0,a.jsx)(eR.Z,{itemLayout:"vertical",children:h.children.map(e=>(0,a.jsxs)(eR.Z.Item,{children:[e.label,": ",e.symbol," = ",e.value]},e.label))})]})})})})]})},ez=t(57632);let eB={material:"You need to define a material",selected:"You need to select a solid",update:"Unable to add material"},eV=async(e,l,t,a)=>{try{var i;let a=C.Z.deepCopy(l);a.uuid=(0,ez.Z)();let n=C.Z.deepCopy(e),s=n.scheme.configuration.materials;s.values=[...null!==(i=s.values)&&void 0!==i?i:[],a];let u={...s,done:!0};await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","materials"],value:u}]),await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","run"],value:{...n.scheme.configuration.run,done:!1}}]),await t.mutateOneSimulation(n)}catch(e){throw a((0,f.iT)({title:eB.update,err:e})),e}};var eH=e=>{let{simulation:l,material:t,swr:n,onError:s,onClose:u}=e,[o,r]=(0,i.useState)(!1),{dispatch:d}=(0,i.useContext)(p.uj),c=(0,i.useCallback)(()=>{(async()=>{r(!0);try{var e;if(!t.material){s(eB.material),r(!1);return}if(!(null===(e=t.selected)||void 0===e?void 0:e.length)){s(eB.selected),r(!1);return}s(),await eV(l,t,n,d),r(!1),u()}catch(e){r(!1)}})()},[l,t,n,s,u,d]);return(0,a.jsx)(g.HS,{loading:o,needMargin:!0,onAdd:c,children:"Add"})};let eF={material:"You need to define a material",selected:"You need to select a solid",update:"Unable to edit material"},eW=async(e,l,t,a)=>{try{let a=C.Z.deepCopy(e),i=a.scheme.configuration.materials,n=i.values.findIndex(e=>e.uuid===l.uuid);i.values=[...i.values.slice(0,n),l,...i.values.slice(n+1)];let s={...i};await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","materials"],value:s}]),await t.mutateOneSimulation(a)}catch(e){throw a((0,f.iT)({title:eF.update,err:e})),e}};var eD=e=>{let{simulation:l,material:t,swr:n,onError:s,onClose:u}=e,[o,r]=(0,i.useState)(!1),{dispatch:d}=(0,i.useContext)(p.uj),c=(0,i.useCallback)(()=>{(async()=>{r(!0);try{var e;if(!t.material){s(eF.material),r(!1);return}if(!(null===(e=t.selected)||void 0===e?void 0:e.length)){s(eF.selected),r(!1);return}s(),await eW(l,t,n,d),r(!1),u()}catch(e){r(!1)}})()},[l,t,n,s,u,d]);return(0,a.jsx)(g.w6,{loading:o,primary:!0,needMargin:!0,onEdit:c,children:"Edit"})},eK=t(64098),eG=t.n(eK);let eq=e=>{let{dimension:l,variables:t,child:n,index:s,value:u,unit:o,_onMaterialChange:r,_onUnitChange:d}=e,c=(0,i.useCallback)(e=>{r(n,s,e)},[n,s,r]),m=(0,i.useCallback)(e=>{d(s,e)},[s,d]);return(0,a.jsx)(ea,{dimension:l,label:n.name,defaultValue:null!=u?u:String(n.default),additionalKeywords:t,units:n.units,unit:null!=o?o:n.unit,onValueChange:c,onUnitChange:m},n.name)};var eJ=e=>{var l,t,n,s,u,o,d;let{visible:m,geometries:h,simulation:v,material:y,swr:p,onClose:f}=e,[b,j]=(0,i.useState)(),[C,k]=(0,i.useState)(),[Z,w]=(0,i.useState)(),[E,N]=(0,i.useState)(),{dispatch:P}=(0,i.useContext)(ec.ZB),M=(0,i.useMemo)(()=>v.scheme.configuration.dimension,[v]),L=(0,i.useMemo)(()=>v.scheme.variables,[v]),I=(0,i.useMemo)(()=>v.scheme.configuration.materials,[v]);(0,x.Z)(()=>{let e=h.find(e=>e.id===(null==y?void 0:y.geometry));if(console.log(e),e)P((0,em.rx)(e.summary.uuid)),w(e.id);else{var l,t;P((0,em.rx)(null===(l=h[0])||void 0===l?void 0:l.summary.uuid)),w(null===(t=h[0])||void 0===t?void 0:t.id)}},[m,h,y],[P]),(0,x.Z)(()=>{!m&&C&&k(void 0)},[m,C]),(0,x.Z)(()=>{var e,l;m&&!C&&y?k(y):!m||C||y||k({material:{label:"Default",children:null!==(l=null==I?void 0:I.children.map(e=>({label:e.label,symbol:e.name,value:e.default})))&&void 0!==l?l:[]},geometry:null===(e=h[0])||void 0===e?void 0:e.id})},[m,h,I,C]),(0,x.Z)(()=>{var e;let l=null==I?void 0:null===(e=I.values)||void 0===e?void 0:e.map(e=>{if(e.uuid!==(null==y?void 0:y.uuid))return{label:e.material.label,selected:e.selected}}).filter(e=>e);j(null!=l?l:[])},[v,y,I]);let R=(0,i.useCallback)(e=>{k(l=>({...l,material:e}))},[]),_=(0,i.useCallback)((e,l,t)=>{k(a=>({...a,material:{label:"Custom",children:[...a.material.children.slice(0,l),{...a.material.children[l],label:e.label,symbol:e.name,value:t},...a.material.children.slice(l+1)]}}))},[]),U=(0,i.useCallback)((e,l)=>{k(t=>({...t,material:{...t.material,children:[...t.material.children.slice(0,e),{...t.material.children[e],unit:l},...t.material.children.slice(e+1)]}}))},[]),Y=(0,i.useCallback)(e=>{k(l=>({...l,selected:e}))},[]),z=(0,i.useCallback)(e=>{w(e);let l=h.find(l=>l.id===e);P((0,em.rx)(l.summary.uuid)),k(l=>({...l,geometry:e}))},[h,P]),B=(0,i.useCallback)(()=>{k(void 0),f()},[f]);return(0,a.jsx)(eg.Z,{className:eG().subPanel,title:"Material",placement:"left",closable:!1,open:m,mask:!1,maskClosable:!1,width:300,extra:(0,a.jsx)(O(),{type:"text",icon:(0,a.jsx)(ej.default,{}),onClick:B}),footer:(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end"},children:[(0,a.jsx)(g.Lw,{onCancel:B}),y?(0,a.jsx)(eD,{material:{uuid:null!==(n=null==C?void 0:C.uuid)&&void 0!==n?n:y.uuid,material:null!==(s=null==C?void 0:C.material)&&void 0!==s?s:y.material,geometry:null!==(u=null==C?void 0:C.geometry)&&void 0!==u?u:y.geometry,selected:null!==(o=null==C?void 0:C.selected)&&void 0!==o?o:y.selected},simulation:{id:v.id,scheme:v.scheme},swr:{mutateOneSimulation:p.mutateOneSimulation},onError:N,onClose:B}):(0,a.jsx)(eH,{material:{material:null==C?void 0:C.material,geometry:null==C?void 0:C.geometry,selected:null==C?void 0:C.selected},simulation:{id:v.id,scheme:v.scheme},swr:{mutateOneSimulation:p.mutateOneSimulation},onError:N,onClose:B})]}),children:(0,a.jsxs)(T.default,{direction:"vertical",className:A().fullWidth,children:[(0,a.jsx)(S.Z,{size:"small",children:(0,a.jsxs)(T.default,{direction:"vertical",className:A().fullWidth,children:[(0,a.jsx)(eY,{onSelect:R}),(0,a.jsxs)(c.Z.Text,{children:["Material: ",null!==(d=null==C?void 0:null===(l=C.material)||void 0===l?void 0:l.label)&&void 0!==d?d:"default"]}),null==I?void 0:null===(t=I.children)||void 0===t?void 0:t.map((e,l)=>{var t,i,n;let s=null==C?void 0:null===(i=C.material)||void 0===i?void 0:null===(t=i.children)||void 0===t?void 0:t.find(l=>l.symbol===e.name);return(0,a.jsx)(eq,{dimension:M,variables:L,child:e,index:l,value:null==s?void 0:s.value,unit:null!==(n=null==s?void 0:s.unit)&&void 0!==n?n:e.unit,_onMaterialChange:_,_onUnitChange:U},e.name)})]})}),(0,a.jsx)(r.default,{items:h.map(e=>({key:e.id,label:e.name,children:(0,a.jsx)(eI,{geometry:e,alreadySelected:b,updateSelected:Y})})),activeKey:Z,onChange:z}),E&&(0,a.jsxs)(c.Z.Text,{children:[(0,a.jsx)(eC.Z,{style:{color:"red"}})," ",E]})]})})};let e$={update:"Unable to update simulation"},eQ=(e,l,t,i,n)=>{var s,u;return(0,a.jsx)(ea,{dimension:2,label:null!==(s=t.label2D)&&void 0!==s?s:t.label,defaultValue:null!==(u=t.value)&&void 0!==u?u:t.default,additionalKeywords:l,onValueChange:i,onUnitChange:n,units:t.units,unit:t.unit},e)},eX=(e,l,t)=>{var i,n,s,u;return(0,a.jsx)(_.Z,{layout:"vertical",children:(0,a.jsx)(_.Z.Item,{label:null!==(n=l.label2D)&&void 0!==n?n:l.label,children:(0,a.jsx)(o.default,{options:null===(i=l.options)||void 0===i?void 0:i.map(e=>{var l;return{label:e.label,value:null!==(l=e.value2D)&&void 0!==l?l:e.value}}),defaultValue:null!==(u=null!==(s=l.value)&&void 0!==s?s:l.default2D)&&void 0!==u?u:l.default,onChange:t})})},e)},e0=(e,l,t)=>{var i,n;return(0,a.jsx)(_.Z,{layout:"horizontal",children:(0,a.jsx)(_.Z.Item,{label:null!==(i=l.label2D)&&void 0!==i?i:l.label,children:(0,a.jsx)(K.default,{defaultChecked:null!==(n=l.value)&&void 0!==n?n:l.default,onChange:t})})},e)},e1=(e,l,t,i,n)=>{var s;return(0,a.jsx)(ea,{dimension:3,label:t.label,defaultValue:null!==(s=t.value)&&void 0!==s?s:t.default,additionalKeywords:l,units:t.units,unit:t.unit,onValueChange:i,onUnitChange:n},e)},e5=(e,l,t)=>{var i;return(0,a.jsx)(_.Z,{layout:"vertical",children:(0,a.jsx)(_.Z.Item,{label:l.label,children:(0,a.jsx)(o.default,{options:l.options,defaultValue:null!==(i=l.value)&&void 0!==i?i:l.default,onChange:t})})},e)},e2=(e,l,t)=>{var i;return(0,a.jsx)(_.Z,{layout:"horizontal",children:(0,a.jsx)(_.Z.Item,{label:l.label,children:(0,a.jsx)(K.default,{defaultChecked:null!==(i=l.value)&&void 0!==i?i:l.default,onChange:t})})},e)},e3=(e,l,t)=>{var i;return(0,a.jsx)(_.Z,{layout:"vertical",children:(0,a.jsx)(_.Z.Item,{label:l.label,children:(0,a.jsx)(J.default.Group,{options:l.options,defaultValue:null!==(i=l.value)&&void 0!==i?i:l.default,onChange:t})})},e)},e6=async(e,l,t)=>{try{let t=C.Z.deepCopy(e),a=t.scheme.configuration.parameters,i={...a,done:!0};await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","parameters"],value:i}]),await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","run"],value:{...t.scheme.configuration.run,done:!1}}]),await l.mutateOneSimulation(t)}catch(e){t((0,f.iT)({title:e$.update,err:e}))}},e4=async(e,l,t,a,i,n)=>{try{let n=C.Z.deepCopy(e),s=n.scheme.configuration.parameters,u=s[l];u.children[t].value=a;let o={...s};await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","parameters"],value:o}]),await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","run"],value:{...n.scheme.configuration.run,done:!1}}]),await i.mutateOneSimulation(n)}catch(e){n((0,f.iT)({title:e$.update,err:e}))}},e9=async(e,l,t,a,i,n)=>{try{let n=C.Z.deepCopy(e),s=n.scheme.configuration.parameters,u=s[l];u.children[t].unit=a;let o={...s};await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","parameters"],value:o}]),await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","run"],value:{...n.scheme.configuration.run,done:!1}}]),await i.mutateOneSimulation(n)}catch(e){n((0,f.iT)({title:e$.update,err:e}))}},e7=e=>{let{simulation:l,dimension:t,child:a,pkey:n,index:s,swr:u}=e,{dispatch:o}=(0,i.useContext)(p.uj),r=(0,i.useMemo)(()=>l.scheme.variables,[l]),d=(0,i.useCallback)(e=>{(async()=>{await e4(l,n,s,e,u,o)})()},[l,n,s,u,o]),c=(0,i.useCallback)(e=>{(async()=>{await e9(l,n,s,e,u,o)})()},[l,n,s,u,o]),m=(0,i.useCallback)(e=>{(async()=>{await e4(l,n,s,e.target.checked,u,o)})()},[l,n,s,u,o]);if(2===t){if(a.only3D);else if("formula"===a.htmlEntity)return eQ(n+"&"+s,r,a,d,c);else if("select"===a.htmlEntity)return eX(n+"&"+s,a,d);else if("checkbox"===a.htmlEntity)return e0(n+"&"+s,a,m);return null}return"formula"===a.htmlEntity?e1(n+"&"+s,r,a,d,c):"select"===a.htmlEntity?e5(n+"&"+s,a,d):"checkbox"===a.htmlEntity?e2(n+"&"+s,a,m):"radio"===a.htmlEntity?e3(n+"&"+s,a,m):null},e8=e=>{let{simulation:l,dimension:t,pkey:n,parameter:s,swr:u}=e,o=(0,i.useMemo)(()=>s.children.map((e,i)=>(0,a.jsx)(e7,{simulation:l,dimension:t,child:e,pkey:n,index:i,swr:u},n+"&"+e.label)),[l,t,n,s,u]);return(0,a.jsx)(S.Z,{size:"small",title:null==s?void 0:s.label,children:(0,a.jsx)(T.default,{direction:"vertical",children:o})},n)},le=(e,l)=>{let t=[];t=Array.isArray(l.pattern)?l.pattern.map(e=>new RegExp(e)):[new RegExp(l.pattern)];let a=[],i=[];return e.forEach(e=>{let l=t.map(l=>l.test(e.fileName)),n=l.reduce((e,l)=>+e+ +l,0);0===n?i.push(e):a.push(e)}),{notFilteredFiles:i,filteredFiles:a}},ll=(e,l)=>{let t=[];t=Array.isArray(l.prefixPattern)?l.prefixPattern.map(e=>new RegExp(e)):[new RegExp(l.prefixPattern)];let a=[];return a=Array.isArray(l.suffixPattern)?l.suffixPattern.map(e=>new RegExp(e)):[new RegExp(l.suffixPattern)],e.map(e=>{let l=e.fileName;return t.forEach(e=>l=l.replace(e,"")),a.forEach(e=>l=l.replace(e,"")),{...e,number:+l}})},lt=(e,l)=>{let t=l.multiplicator;if(t){var a;let l=t.reduce((e,l)=>e[l],e);return null!==(a=l.value)&&void 0!==a?a:l.default}},la={update:"Unable to update simulation"},li=async(e,l,t,a)=>{try{let a=C.Z.deepCopy(e),i=a.scheme.configuration.initialization;i.value={type:l},await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","initialization"],value:i}]),await t.mutateOneSimulation(a)}catch(e){throw a((0,f.iT)({title:la.update,err:e})),e}},ln=async(e,l,t,a,i)=>{try{var n;let i=await lr(e,t),s=C.Z.deepCopy(l),u=s.scheme.configuration.initialization;u.value={...u.value,simulation:t,result:null==i?void 0:null===(n=i[0])||void 0===n?void 0:n.value},await k.Z.update({id:l.id},[{key:"scheme",type:"json",method:"set",path:["configuration","initialization"],value:u}]),await a.mutateOneSimulation(s)}catch(e){throw i((0,f.iT)({title:la.update,err:e})),e}},ls=async(e,l,t,a,i)=>{try{let i=C.Z.deepCopy(e),n=i.scheme.configuration.initialization;n.value={...n.value,number:+l,result:t.file},await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","initialization"],value:n}]),await a.mutateOneSimulation(i)}catch(e){i((0,f.iT)({title:la.update,err:e}))}},lu=async(e,l,t,a,i)=>{try{let i=C.Z.deepCopy(e),n=i.scheme.configuration.initialization;n.value.values||(n.value.values=[]),n.value.values[l]=t,await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","initialization"],value:n}]),await a.mutateOneSimulation(i)}catch(e){i((0,f.iT)({title:la.update,err:e}))}},lo=(e,l)=>{let{filteredFiles:t,notFilteredFiles:a}=le(e,l),i=ll(t,l),n=i.map(e=>{let t=[];t=Array.isArray(l.suffixPattern)?l.suffixPattern.map(e=>new RegExp(e)):[new RegExp(l.suffixPattern)];let a=e.fileName;return t.forEach(e=>a=a.replace(e,"")),{number:e.number,fileName:a}}).filter((e,l,t)=>t.findIndex(l=>l.number===e.number)===l).sort((e,l)=>e.number-l.number);return{filteredFiles:n,notFilteredFiles:a}},lr=async(e,l)=>{var t;let a=await k.Z.tasks({id:l}),i=e.find(e=>e.id===l),n=i.scheme.configuration,s=null==n?void 0:null===(t=n.run)||void 0===t?void 0:t.resultsFilter,u=[];return a.forEach(e=>{if(e.file&&"result"===e.file.type&&u.push({label:e.file.fileName,value:e.file.fileName,file:e.file.fileName}),e.files){if(s){let{filteredFiles:l,notFilteredFiles:t}=lo(e.files,s),a=lt(n,s),i=l.map((e,l)=>{let t=a?e.number*a:l;return{label:String(Math.round(1e15*t)/1e15),value:e.fileName,file:e.fileName}});u.push(...t.map(e=>({label:e.fileName,value:e.fileName,file:e.fileName})).filter(e=>e)),u.push(...i)}else e.files.forEach(e=>{"result"===e.type&&u.push({label:e.fileName,value:e.fileName,file:e.fileName})})}}),u},ld=e=>{let{simulation:l,child:t,index:n,value:s,swr:u,dispatch:o}=e,r=(0,i.useCallback)(e=>{(async()=>{await lu(l,n,e,u,o)})()},[l,n,u,o]);return(0,a.jsx)(ea,{label:t.label,defaultValue:(null!=s?s:t.default).toString(),units:t.units,unit:t.unit,onValueChange:r})},lc={update:"Unable to delete boundary condition"},lm=async(e,l,t,a,i,n)=>{try{let n=C.Z.deepCopy(e),s=n.scheme.configuration.boundaryConditions,u=s[l],o=u.values[t];i((0,em.Ys)(o.selected)),u.values=[...u.values.slice(0,t),...u.values.slice(t+1)];let r=!1;Object.keys(s).forEach(e=>{var l;if("index"===e||"title"===e||"done"===e)return;let t=s[e];(null===(l=t.values)||void 0===l?void 0:l.length)&&(r=!0)});let d={...s,done:r};await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","boundaryConditions"],value:d}]),await a.mutateOneSimulation(n)}catch(e){throw n((0,f.iT)({title:lc.update,err:e})),e}};var lh=e=>{let{type:l,index:t,simulation:n,swr:s}=e,[u,o]=(0,i.useState)(!1),{dispatch:r}=(0,i.useContext)(ec.ZB),{dispatch:d}=(0,i.useContext)(p.uj),m=(0,i.useMemo)(()=>n.scheme.configuration.boundaryConditions,[n]),h=(0,i.useMemo)(()=>m[l],[m,l]),v=(0,i.useMemo)(()=>h.values[t],[h,t]),y=(0,i.useCallback)(async()=>{o(!0);try{await lm(n,l,t,s,r,d)}finally{o(!1)}},[n,l,t,s,r,d]);return(0,a.jsx)(g.m1,{loading:u,onDelete:y,text:(0,a.jsxs)(a.Fragment,{children:["Are you sure you want to delete the condition"," ",(0,a.jsx)(c.Z.Text,{strong:!0,children:null==v?void 0:v.name}),"?"]})})};let lv=e=>{let{geometries:l,simulation:t,boundaryCondition:n,index:s,type:u,swr:o,_onEdit:r}=e,[d,m]=(0,i.useState)(!0),{dispatch:h}=(0,i.useContext)(ec.ZB),v=(0,i.useCallback)(()=>{let e=n.geometry,t=l.find(l=>l.id===e),a=n.selected;setTimeout(()=>{h((0,em.wp)()),h((0,em.rx)(null==t?void 0:t.summary.uuid)),h((0,em.Ys)(a))},50)},[l,n,h]),y=(0,i.useCallback)(()=>{d&&setTimeout(()=>h((0,em.h$)()),50)},[d,h]),p=(0,i.useCallback)(()=>{m(!1),r(u,s),setTimeout(()=>m(!0),500)},[s,u,r]);return(0,a.jsxs)(S.Z,{className:ef().listItem,hoverable:!0,onMouseEnter:v,onMouseLeave:y,actions:[(0,a.jsx)(g.w6,{onEdit:p},"edit"),(0,a.jsx)(lh,{simulation:{id:t.id,scheme:t.scheme},type:u,index:s,swr:{mutateOneSimulation:o.mutateOneSimulation}},"delete")],children:[(0,a.jsx)(c.Z.Text,{strong:!0,children:n.name})," ",(0,a.jsxs)(c.Z.Text,{children:["(",n.type.label,")"]})]})};var ly=e=>{let{geometries:l,simulation:t,swr:n,onEdit:s}=e,u=(0,i.useMemo)(()=>t.scheme.configuration.boundaryConditions,[t]);return(0,a.jsx)(a.Fragment,{children:Object.keys(u).map(e=>{var i;if("index"===e||"title"===e||"done"===e)return;let o=u[e];return null===(i=o.values)||void 0===i?void 0:i.map((i,u)=>(0,a.jsx)(lv,{geometries:l,simulation:t,boundaryCondition:i,index:u,type:e,swr:n,_onEdit:s},i.uuid))}).filter(e=>e)})};let lp={name:"You need to define a name",type:"You need to select a type",selected:"You need to select a face",update:"Unable to add boundary condition"},lf=async(e,l,t,a)=>{try{var i;let a={...l},n=a.type.key;a.uuid=(0,ez.Z)();let s=C.Z.deepCopy(e),u=s.scheme.configuration.boundaryConditions,o=u[n];o.values=[...null!==(i=o.values)&&void 0!==i?i:[],a];let r={...u,done:!0};await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","boundaryConditions"],value:r}]),await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","run"],value:{...s.scheme.configuration.run,done:!1}}]),await t.mutateOneSimulation(s)}catch(e){throw a((0,f.iT)({title:lp.update,err:e})),e}};var lx=e=>{let{simulation:l,boundaryCondition:t,swr:n,onError:s,onClose:u}=e,[o,r]=(0,i.useState)(!1),{dispatch:d}=(0,i.useContext)(p.uj),c=(0,i.useCallback)(()=>{(async()=>{r(!0);try{var e,a;if(!t.name){s(lp.name),r(!1);return}if(!(null===(e=t.type)||void 0===e?void 0:e.key)){s(lp.type),r(!1);return}if(!(null===(a=t.selected)||void 0===a?void 0:a.length)){s(lp.selected),r(!1);return}s(),await lf(l,t,n,d),r(!1),u()}catch(e){r(!1)}})()},[l,t,n,s,u,d]);return(0,a.jsx)(g.HS,{loading:o,onAdd:c,needMargin:!0,children:"Add"})};let lb={name:"You need to define a name",type:"You need to select a type",selected:"You need to select a face",update:"Unable to edit boundary condition"},lg=async(e,l,t,a,i)=>{try{let i=C.Z.deepCopy(e),s=i.scheme.configuration.boundaryConditions,u=l.type.key,o=t.type.key;if(o!==u){let e=s[o],l=e.values.findIndex(e=>e.uuid===t.uuid);e.values=[...e.values.slice(0,l),...e.values.slice(l+1)]}if(o!==u){var n;let e=s[u];e.values=[...null!==(n=e.values)&&void 0!==n?n:[],l]}else{let e=s[u],t=e.values.findIndex(e=>e.uuid===l.uuid);e.values=[...e.values.slice(0,t),l,...e.values.slice(t+1)]}let r={...s};await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","boundaryConditions"],value:r}]),await a.mutateOneSimulation(i)}catch(e){throw i((0,f.iT)({title:lb.update,err:e})),e}};var lj=e=>{let{simulation:l,boundaryCondition:t,oldBoundaryCondition:n,swr:s,onError:u,onClose:o}=e,[r,d]=(0,i.useState)(!1),{dispatch:c}=(0,i.useContext)(p.uj),m=(0,i.useCallback)(()=>{(async()=>{d(!0);try{var e,a;if(!t.name){u(lb.name),d(!1);return}if(!(null===(e=t.type)||void 0===e?void 0:e.key)){u(lb.type),d(!1);return}if(!(null===(a=t.selected)||void 0===a?void 0:a.length)){u(lb.selected),d(!1);return}u(),await lg(l,t,n,s,c),d(!1),o()}catch(e){d(!1)}})()},[l,t,n,s,u,o,c]);return(0,a.jsx)(g.w6,{loading:r,onEdit:m,primary:!0,needMargin:!0,children:"Edit"})};let lC=e=>{let{dimension:l,variables:t,boundaryCondition:n,index:s,value:u,checked:o,unit:r,_onValueChange:d,_onCheckedChange:c,_onUnitChange:m}=e,h=(0,i.useCallback)(e=>d(s,e),[s,d]),v=(0,i.useCallback)(e=>c(s,e),[s,c]),y=(0,i.useCallback)(e=>m(s,e),[s,m]);return(0,a.jsx)(ea,{label:n.label,dimension:l,defaultValue:u,defaultChecked:o,additionalKeywords:t,onValueChange:h,onCheckedChange:v,onUnitChange:y,units:n.units,unit:r})};var lk=e=>{var l,t,n,s,u,o,d,m;let{visible:h,geometries:v,simulation:y,boundaryCondition:p,swr:f,onClose:b}=e,[j,C]=(0,i.useState)([]),[k,Z]=(0,i.useState)([]),[w,E]=(0,i.useState)(),[N,P]=(0,i.useState)(),[M,L]=(0,i.useState)(),[I,R]=(0,i.useState)(),{dispatch:Y}=(0,i.useContext)(ec.ZB),z=(0,i.useMemo)(()=>y.scheme.variables,[y]),B=(0,i.useMemo)(()=>y.scheme.configuration.boundaryConditions,[y]),V=(0,i.useMemo)(()=>y.scheme.configuration.dimension,[y]);(0,x.Z)(()=>{let e=v.find(e=>e.id===(null==p?void 0:p.geometry));if(e)Y((0,em.rx)(e.summary.uuid)),L(e.id);else{var l,t;Y((0,em.rx)(null===(l=v[0])||void 0===l?void 0:l.summary.uuid)),L(null===(t=v[0])||void 0===t?void 0:t.id)}},[h,v,p],[Y]),(0,x.Z)(()=>{!h&&N&&P(void 0)},[h,N]),(0,x.Z)(()=>{let e=Object.keys(B).map(e=>{if("index"===e||"title"===e||"done"===e)return;let l=B[e];return{key:e,label:l.label,children:l.children,values:l.values}}).filter(e=>e);Z(e)},[B]),(0,x.Z)(()=>{let e=null==k?void 0:k.map(e=>{var l;return null===(l=e.values)||void 0===l?void 0:l.length}).filter(e=>e).reduce((e,l)=>e+l,0);E(e)},[k]),(0,x.Z)(()=>{h&&!N&&p?P(p):!h||N||p||void 0===w||P(e=>{var l;return{...e,name:"Boundary condition "+(w+1),geometry:null===(l=v[0])||void 0===l?void 0:l.id}})},[h,p,N,w]),(0,x.Z)(()=>{let e=Object.keys(B).map(e=>{var l;if("index"===e||"title"===e||"done"===e)return;let t=B[e];return null==t?void 0:null===(l=t.values)||void 0===l?void 0:l.map(e=>{if(e.uuid!==(null==p?void 0:p.uuid))return{label:e.name,selected:e.selected}}).filter(e=>e)}).flat().filter(e=>e);C(e)},[B,p]);let H=(0,i.useCallback)(e=>{let l=e.target.value;P(e=>({...e,name:l}))},[]),F=(0,i.useCallback)(e=>{var l;let t=e.target.value,a=k.find(e=>e.key===t),i=B[t],n=null===(l=i.children)||void 0===l?void 0:l.map(e=>({checked:!0,value:e.default}));P(e=>({...e,type:{key:a.key,label:a.label,children:a.children},values:n}))},[B,k]),W=(0,i.useCallback)((e,l)=>{P(t=>({...t,values:[...t.values.slice(0,e),{...t.values[e],value:l},...t.values.slice(e+1)]}))},[]),D=(0,i.useCallback)((e,l)=>{P(t=>({...t,values:[...t.values.slice(0,e),{...t.values[e],checked:l},...t.values.slice(e+1)]}))},[]),K=(0,i.useCallback)((e,l)=>{P(t=>({...t,values:[...t.values.slice(0,e),{...t.values[e],unit:l},...t.values.slice(e+1)]}))},[]),G=(0,i.useCallback)(e=>{P(l=>({...l,selected:e}))},[]),q=(0,i.useMemo)(()=>{var e;return(null==N?void 0:N.type)&&(null===(e=N.type)||void 0===e?void 0:e.children)?(0,a.jsx)(S.Z,{children:N.type.children.map((e,l)=>{var t;if(2!==V||!e.only3D)return(0,a.jsx)(lC,{dimension:V,variables:z,boundaryCondition:e,index:l,value:String(N.values[l].value),checked:N.type.children.length>1?N.values[l].checked:void 0,unit:null!==(t=N.values[l].unit)&&void 0!==t?t:e.unit,_onValueChange:W,_onCheckedChange:D,_onUnitChange:K},e.label)})}):null},[N,V,z,D,W,K]),$=(0,i.useCallback)(e=>{L(e);let l=v.find(l=>l.id===e);Y((0,em.rx)(null==l?void 0:l.summary.uuid)),P(l=>({...l,geometry:e}))},[v,Y]),Q=(0,i.useCallback)(()=>{P(void 0),b()},[b]);return(0,a.jsx)(eg.Z,{className:eG().subPanel,title:"Boundary condition",placement:"left",closable:!1,open:h,mask:!1,maskClosable:!1,width:300,extra:(0,a.jsx)(O(),{type:"text",icon:(0,a.jsx)(ej.default,{}),onClick:Q}),footer:(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end"},children:[(0,a.jsx)(g.Lw,{onCancel:Q}),p?(0,a.jsx)(lj,{boundaryCondition:{uuid:null!==(t=null==N?void 0:N.uuid)&&void 0!==t?t:p.uuid,name:null!==(n=null==N?void 0:N.name)&&void 0!==n?n:p.name,type:null!==(s=null==N?void 0:N.type)&&void 0!==s?s:p.type,geometry:null!==(u=null==N?void 0:N.geometry)&&void 0!==u?u:p.geometry,selected:null!==(o=null==N?void 0:N.selected)&&void 0!==o?o:p.selected,values:null!==(d=null==N?void 0:N.values)&&void 0!==d?d:p.values},oldBoundaryCondition:{uuid:p.uuid,name:p.name,type:p.type,geometry:p.geometry,selected:p.selected,values:p.values},simulation:{id:y.id,scheme:y.scheme},swr:{mutateOneSimulation:f.mutateOneSimulation},onError:R,onClose:b}):(0,a.jsx)(lx,{boundaryCondition:{name:null==N?void 0:N.name,type:null==N?void 0:N.type,geometry:null==N?void 0:N.geometry,selected:null==N?void 0:N.selected,values:null==N?void 0:N.values},simulation:{id:y.id,scheme:y.scheme},swr:{mutateOneSimulation:f.mutateOneSimulation},onError:R,onClose:b})]}),children:(0,a.jsxs)(T.default,{direction:"vertical",className:A().fullWidth,children:[(0,a.jsx)(S.Z,{size:"small",children:(0,a.jsx)(_.Z,{layout:"vertical",children:(0,a.jsx)(_.Z.Item,{label:(0,a.jsx)(c.Z.Text,{strong:!0,children:"Boundary condition name"}),children:(0,a.jsx)(U.default,{value:null!==(m=null==N?void 0:N.name)&&void 0!==m?m:"",onChange:H,maxLength:50})})})}),(0,a.jsx)(S.Z,{size:"small",children:(0,a.jsx)(_.Z,{layout:"vertical",children:(0,a.jsx)(_.Z.Item,{label:(0,a.jsx)(c.Z.Text,{strong:!0,children:"Boundary condition type"}),children:(0,a.jsx)(J.default.Group,{optionType:"button",buttonStyle:"solid",value:null==N?void 0:null===(l=N.type)||void 0===l?void 0:l.key,onChange:F,children:null==k?void 0:k.map(e=>(0,a.jsx)(J.default.Button,{value:e.key,children:e.label},e.key))})})})}),q,(0,a.jsx)(r.default,{items:v.map(e=>({key:e.id,label:e.name,children:(0,a.jsx)(eI,{geometry:e,alreadySelected:j,updateSelected:G})})),activeKey:M,onChange:$}),I&&(0,a.jsxs)(c.Z.Text,{children:[(0,a.jsx)(eC.Z,{style:{color:"red"}})," ",I]})]})})},lZ=t(94704),lw=t(46650),lS=t(25256),lT=t(97935),lE=t(9470);let lN={name:"You need to define a name",point:"You need to select a point",formula:"You need to define a formula",update:"Unable to update simulation"},lO=async(e,l,t,a)=>{try{let a=C.Z.deepCopy(e),i=a.scheme.configuration.run,n=l.index;delete l.index,i.sensors[n]=l,await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","run"],value:i}]),await t.mutateOneSimulation(a)}catch(e){throw a((0,f.iT)({title:lN.update,err:e})),e}};var lP=e=>{let{simulation:l,sensor:t,onError:n,onClose:s,swr:u}=e,[o,r]=(0,i.useState)(),{dispatch:d}=(0,i.useContext)(p.uj),c=(0,i.useCallback)(()=>{(async()=>{r(!0);try{if(!t.name){n(lN.name),r(!1);return}if(!t.point){n(lN.point),r(!1);return}if(!t.formula){n(lN.formula),r(!1);return}n(),await lO(l,t,u,d),r(!1),s()}catch(e){r(!1)}})()},[l,t,n,s,u,d]);return(0,a.jsx)(g.w6,{loading:o,primary:!0,needMargin:!0,onEdit:c,children:"Edit"})};let lM={name:"You need to define a name",point:"You need to select a point",formula:"You need to define a formula",update:"Unable to update simulation"},lA=async(e,l,t,a)=>{try{var i;let a=C.Z.deepCopy(e),n=a.scheme.configuration.run,s={...n,sensors:[...null!==(i=n.sensors)&&void 0!==i?i:[],l]};await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","run"],value:s}]),await t.mutateOneSimulation(a)}catch(e){throw a((0,f.iT)({title:lM.update,err:e})),e}};var lL=e=>{let{simulation:l,sensor:t,onError:n,onClose:s,swr:u}=e,[o,r]=(0,i.useState)(),{dispatch:d}=(0,i.useContext)(p.uj),c=(0,i.useCallback)(()=>{(async()=>{r(!0);try{if(!t.name){n(lM.name),r(!1);return}if(!t.point){n(lM.point),r(!1);return}if(!t.formula){n(lM.formula),r(!1);return}n(),await lA(l,t,u,d),r(!1),s()}catch(e){r(!1)}})()},[l,t,n,s,u,d]);return(0,a.jsx)(g.HS,{loading:o,needMargin:!0,onAdd:c,children:"Add"})},lI=e=>{var l,t,n;let{visible:s,geometries:u,simulation:o,sensor:m,onClose:h,swr:v}=e,[y,p]=(0,i.useState)(),[f,b]=(0,i.useState)(),[j,C]=(0,i.useState)(),[k,Z]=(0,i.useState)(),w=(0,i.useMemo)(()=>o.scheme.configuration.dimension,[o]),E=(0,i.useMemo)(()=>o.scheme.variables,[o]),{point:N,dispatch:P}=(0,i.useContext)(ec.ZB);(0,x.Z)(()=>{var e;P((0,em.rx)(null===(e=u[0])||void 0===e?void 0:e.summary.uuid)),C(null==m?void 0:m.geometry)},[u,m],[P]),(0,x.Z)(()=>{P((0,em.Cw)("point"))},[P]),(0,x.Z)(()=>{if(!m){let e=o.scheme.configuration.run;b(l=>({...l,name:"Sensor "+(e.sensors?e.sensors.length+1:1)}))}},[o,m]),(0,x.Z)(()=>{m&&(b(m),P((0,em.N7)({x:m.point.x,y:m.point.y,z:m.point.z})))},[m],[P]),(0,x.Z)(()=>{N&&b(e=>({...e,point:N}))},[N]);let M=(0,i.useCallback)(()=>{p(!1),P((0,em.h$)()),window.removeEventListener("click",M)},[P]),L=(0,i.useCallback)(()=>{y?M():(p(!0),P((0,em.wp)()),setTimeout(()=>window.addEventListener("click",M),50))},[y,M,P]),I=(0,i.useCallback)(e=>{C(e);let l=u.find(l=>l.id===e);P((0,em.rx)(l.summary.uuid)),b(l=>({...l,geometry:e}))},[u,P]),R=(0,i.useCallback)((e,l,t)=>{P((0,em.N7)({x:e,y:l,z:t}))},[P]),_=(0,i.useCallback)(e=>{b(l=>({...l,formula:e}))},[]),Y=(0,i.useCallback)(()=>{b(void 0),Z(void 0),P((0,em.N7)()),P((0,em.h$)()),h()},[P,h]),z=(0,i.useCallback)(e=>{b(l=>({...l,name:e.target.value}))},[]),B=(0,i.useCallback)(e=>{var l,t;return R(+e,null!==(l=null==N?void 0:N.y)&&void 0!==l?l:0,null!==(t=null==N?void 0:N.z)&&void 0!==t?t:0)},[N,R]),V=(0,i.useCallback)(e=>{var l,t;return R(null!==(l=null==N?void 0:N.x)&&void 0!==l?l:0,+e,null!==(t=null==N?void 0:N.z)&&void 0!==t?t:0)},[N,R]),H=(0,i.useCallback)(e=>{var l,t;return R(null!==(l=null==N?void 0:N.x)&&void 0!==l?l:0,null!==(t=null==N?void 0:N.y)&&void 0!==t?t:0,+e)},[N,R]);return(0,a.jsx)(eg.Z,{title:"Sensor",placement:"left",closable:!1,open:s,mask:!1,maskClosable:!1,width:300,extra:(0,a.jsx)(O(),{type:"text",icon:(0,a.jsx)(ej.default,{}),onClick:Y}),footer:(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end"},children:[(0,a.jsx)(g.Lw,{onCancel:Y}),m?(0,a.jsx)(lP,{simulation:o,sensor:{...m,...f},onError:Z,onClose:Y,swr:v}):(0,a.jsx)(lL,{simulation:o,sensor:f,onError:Z,onClose:Y,swr:v})]}),children:(0,a.jsxs)(T.default,{direction:"vertical",className:A().fullWidth,children:[(0,a.jsxs)(S.Z,{size:"small",children:[(0,a.jsx)(c.Z.Text,{children:"Name"}),(0,a.jsx)(U.default,{value:null==f?void 0:f.name,onChange:z})]}),(0,a.jsxs)(S.Z,{size:"small",children:[(0,a.jsx)(r.default,{items:u.map(e=>({key:e.id,label:e.name})),activeKey:j,onChange:I}),(0,a.jsxs)(T.default,{direction:"vertical",className:A().fullWidth,children:[(0,a.jsxs)(T.default,{className:A().fullWidth,style:{justifyContent:"space-between"},children:[(0,a.jsx)(c.Z.Text,{children:"Point selection"}),(0,a.jsx)(d.default,{title:"Pin in the geometry",children:(0,a.jsx)(O(),{size:"small",type:y?"primary":"default",icon:(0,a.jsx)(lE.Z,{}),onClick:L})})]}),(0,a.jsx)(ea,{label:"X",noLarge:!0,defaultValue:null==f?void 0:null===(l=f.point)||void 0===l?void 0:l.x,onValueChange:B}),(0,a.jsx)(ea,{label:"Y",noLarge:!0,defaultValue:null==f?void 0:null===(t=f.point)||void 0===t?void 0:t.y,onValueChange:V}),(0,a.jsx)(ea,{label:"Z",noLarge:!0,defaultValue:null==f?void 0:null===(n=f.point)||void 0===n?void 0:n.z,onValueChange:H})]})]}),(0,a.jsx)(S.Z,{size:"small",className:A().noBorderBottom,children:(0,a.jsx)(ea,{label:"Formula",dimension:w,defaultValue:null==f?void 0:f.formula,additionalKeywords:E,onValueChange:_})}),k&&(0,a.jsxs)(c.Z.Text,{children:[(0,a.jsx)(eC.Z,{style:{color:"red"}})," ",k]})]})})};let lR={update:"Unable to update simulation"},l_=async(e,l,t,a,i)=>{try{let i=C.Z.deepCopy(e),n=i.scheme.configuration.run;a((0,em.N7)()),n.sensors=[...n.sensors.slice(0,l),...n.sensors.slice(l+1)],await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","run"],value:n}]),await t.mutateOneSimulation(i)}catch(e){throw i((0,f.iT)({title:lR.update,err:e})),e}};var lU=e=>{let{simulation:l,index:t,swr:n}=e,[s,u]=(0,i.useState)(),{dispatch:o}=(0,i.useContext)(ec.ZB),{dispatch:r}=(0,i.useContext)(p.uj),d=(0,i.useMemo)(()=>l.scheme.configuration.run,[l]),m=(0,i.useMemo)(()=>d.sensors[t],[t,d]),h=(0,i.useCallback)(async()=>{u(!0);try{await l_(l,t,n,o,r)}finally{u(!1)}},[l,t,n,o,r]);return(0,a.jsx)(g.m1,{loading:s,text:(0,a.jsxs)(a.Fragment,{children:["Are you sure you want to delete the sensor"," ",(0,a.jsx)(c.Z.Text,{strong:!0,children:m.name})]}),onDelete:h})};let lY=e=>{let{simulation:l,sensor:t,index:n,_onEdit:s,swr:u}=e,{dispatch:o}=(0,i.useContext)(ec.ZB),r=(0,i.useCallback)(()=>{o((0,em.wp)()),o((0,em.N7)(t.point))},[t,o]),d=(0,i.useCallback)(()=>{o((0,em.h$)()),o((0,em.N7)())},[o]),m=(0,i.useCallback)(()=>s({...t,index:n}),[t,n,s]);return(0,a.jsx)(S.Z,{className:"".concat(A().textAlignCenter," ").concat(ef().listItem),hoverable:!0,onMouseEnter:r,onMouseLeave:d,actions:[(0,a.jsx)(g.w6,{onEdit:m},"edit"),(0,a.jsx)(lU,{simulation:l,index:n,swr:u},"delete")],children:(0,a.jsx)(c.Z.Text,{strong:!0,className:A().textAlignCenter,children:t.name})})};var lz=e=>{var l;let{simulation:t,onEdit:n,swr:s}=e,u=(0,i.useMemo)(()=>t.scheme.configuration.run,[t]);return(0,a.jsx)(a.Fragment,{children:null===(l=u.sensors)||void 0===l?void 0:l.map((e,l)=>(0,a.jsx)(lY,{simulation:t,sensor:e,index:l,_onEdit:n,swr:s},e.name))})},lB=e=>{let{geometries:l,simulation:t,setVisible:n,setResults:s,setPostprocessing:u,swr:o}=e,[r,d]=(0,i.useState)(),[c,m]=(0,i.useState)(),h=(0,i.useCallback)(()=>{s([]),u(void 0),m(void 0),n(!1),d(!0)},[n,s,u]),v=(0,i.useCallback)(e=>{s([]),u(void 0),m(e),n(!1),d(!0)},[n,s,u]),y=(0,i.useCallback)(()=>{m(void 0),n(!0),d(!1)},[n]);return(0,a.jsxs)(S.Z,{size:"small",title:"Sensors",children:[(0,a.jsx)(lI,{visible:r,geometries:l,simulation:t,sensor:c,onClose:y,swr:o}),(0,a.jsxs)(T.default,{direction:"vertical",className:A().fullWidth,children:[(0,a.jsx)(O(),{className:A().fullWidth,disabled:!1,type:"primary",icon:(0,a.jsx)(lT.Z,{}),onClick:h,children:"Add a sensor"}),(0,a.jsx)(lz,{simulation:t,onEdit:v,swr:o})]})]})},lV=t(5152),lH=t.n(lV),lF=t(11163),lW=t(72078),lD=t(9160),lK=t(66769);let lG={plugins:"Plugins error",pluginsLoad:"Unable to load plugins",extra:"Unable to execute extra action"},lq=async(e,l,t)=>{try{await lK.Z.extra(e,l)}catch(e){t((0,f.iT)({title:lG.extra,err:e}))}},Plugin=e=>{let{plugin:l,parallel:n,onOk:s,setVisible:u}=e,o=lH()(()=>t(64546)("./".concat(l.key,"/src/components"))),r=(0,i.useCallback)(e=>{(async()=>{y()(l,e),await s(l),u(!1)})()},[l,s,u]);return(0,a.jsx)(S.Z,{title:l.configuration.name.value,children:(0,a.jsx)(o,{data:l.data,parallel:n,onSelect:r})},l.uuid)},lJ=e=>{let{pluginsList:l,plugins:t,parallel:i,onOk:n,setVisible:s}=e;return(null==t?void 0:t.length)?(0,a.jsx)(T.default,{align:"start",direction:"horizontal",wrap:!0,children:t.map(e=>{let t=l.find(l=>l.key===e.key);return t?(0,a.jsx)(Plugin,{plugin:e,parallel:i,onOk:n,setVisible:s},e.uuid):null})}):null};var l$=e=>{var l;let{disabled:t,parallel:n,cloudServer:s,onOk:o}=e,[r,m]=(0,i.useState)(!1),[h,v]=(0,i.useState)([]),{dispatch:y}=(0,i.useContext)(p.uj),x=(0,lF.useRouter)(),[b,{errorPlugins:j}]=lK.Z.usePlugins();(0,i.useEffect)(()=>{j&&y((0,f.iT)({title:lG.plugins,err:j}))},[j,y]),(0,i.useEffect)(()=>{(async()=>{try{let e=await Z.Z.list(),l=e.filter(e=>"HPC"===e.category);v(l)}catch(e){y((0,f.iT)({title:lG.pluginsLoad,err:e}))}})()},[y]);let C=(0,i.useCallback)(()=>m(!0),[]),k=(0,i.useCallback)(()=>m(!1),[]),w=(0,i.useCallback)(()=>{(async()=>{await x.push({pathname:"/dashboard",query:{page:"account",tab:"hpc"}})})()},[x]),E=(0,i.useCallback)(e=>{(async()=>{await lq(s,e,y)})()},[s,y]),N=(0,i.useMemo)(()=>{let e=null==s?void 0:s.extra;if(!e)return(0,a.jsx)(a.Fragment,{});let l=Object.keys(e).map(l=>{let t=e[l],i="cloud-download"===t.icon?(0,a.jsx)(lW.Z,{}):null;if("button"===t.type)return(0,a.jsx)(d.default,{title:t.label,children:(0,a.jsx)(O(),{icon:i,onClick:()=>E(t.action)})},t.action)});return(0,a.jsxs)("div",{children:["Custom plugin actions:",(0,a.jsx)("br",{}),l]})},[null==s?void 0:s.extra,E]);return(0,a.jsxs)(S.Z,{size:"small",title:"Computational resource",children:[(0,a.jsx)(u.Z,{open:r,title:"Computational resource",okButtonProps:{disabled:!0,style:{display:"none"}},onCancel:k,style:{width:"unset"},children:(0,a.jsxs)(T.default,{direction:"vertical",children:[(0,a.jsxs)(c.Z.Text,{children:["Your computational resource does not appear in this list? Create one in your"," ",(0,a.jsx)(g.Qj,{onClick:w,children:"account settings"})]}),(0,a.jsx)(lJ,{pluginsList:h,plugins:b,parallel:n,onOk:o,setVisible:m})]})}),(0,a.jsxs)(T.default,{direction:"vertical",className:A().fullWidth,children:[s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(c.Z.Text,{children:[(0,a.jsx)("span",{className:A().textLight,children:"Plugin:"})," ",s.name]}),(0,a.jsxs)(c.Z.Text,{children:[(0,a.jsx)("span",{className:A().textLight,children:"Name:"})," ",s.configuration.name.value]}),Object.keys(null!==(l=s.inUseConfiguration)&&void 0!==l?l:{}).map(e=>{let l=s.inUseConfiguration[e],t=l.parallelOnly;if(t&&!n)return;let i=l.value;return"boolean"==typeof i&&(i=i?"yes":"no"),(0,a.jsxs)(c.Z.Text,{children:[(0,a.jsxs)("span",{className:A().textLight,children:[l.label,":"]})," ",i]},e)})]}),(0,a.jsx)(O(),{className:A().fullWidth,disabled:t,type:s?"link":"primary",icon:(0,a.jsx)(lD.Z,{}),onClick:C,children:s?"Modify the resource":"Select a resource"}),N]})]})},lQ=t(75624),lX=t(47311),l0=t(48764).lW;let l1={log:"Unable to get system log"},l5=async(e,l,t)=>{try{let t=await k.Z.log({id:e.id},l.systemLog),i=l0.from(t.log).toString();u.Z.info({title:"System log",width:"unset",content:(0,a.jsx)("div",{style:{maxHeight:"70vh",overflow:"auto"},children:(0,a.jsx)("pre",{children:(0,a.jsx)("code",{children:(0,lX.ZP)(i.replace(/\n\n/g,"\n").replace(/\n/g,"<br />"))})})})})}catch(e){t((0,f.iT)({title:l1.log,err:e}))}},l2=e=>{var l,t,n,s;let{simulation:u,step:o,loading:r,setLoading:d}=e,{dispatch:m}=(0,i.useContext)(p.uj),h=(0,i.useCallback)(()=>{(async()=>{d(!0);try{await l5(u,o,m)}catch(e){}finally{d(!1)}})()},[u,o,d,m]),v=(0,i.useMemo)(()=>{let e=[];return o.warning&&e.push({key:"warnings",className:ef().warning,label:(0,a.jsx)(c.Z.Text,{type:"warning",children:"Warnings"}),children:(0,lX.ZP)(o.warning.replace(/\n\n/g,"\n").replace(/\n/g,"<br />"))}),o.error&&e.push({key:"errors",className:ef().error,label:(0,a.jsx)(c.Z.Text,{type:"danger",children:"Errors"}),children:(0,lX.ZP)(o.error.replace(/\n\n/g,"\n").replace(/\n/g,"<br />"))}),e},[o]);return(0,a.jsxs)(a.Fragment,{children:[o.systemLog&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(O(),{loading:r,onClick:h,children:"Complete log"}),(0,a.jsx)("br",{})]}),o.link&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("a",{href:"https://"+o.link.href,target:"_blank",rel:"noreferrer",children:(0,a.jsx)(O(),{type:"primary",children:o.link.label})}),(0,a.jsx)("br",{})]}),(0,a.jsx)(D.Z,{ghost:!0,items:v}),(0,lX.ZP)(null!==(n=null===(l=o.pluginLog)||void 0===l?void 0:l.replace(/\n\n/g,"\n").replace(/\n/g,"<br />").replace(/Warning:/g,'<span style="color: orange; font-weight: bold;">Info: </span>').replace(/Error:/g,'<span style="color: red; font-weight: bold;">Error:</span>'))&&void 0!==n?n:""),(0,lX.ZP)(null!==(s=null===(t=o.log)||void 0===t?void 0:t.replace(/^PERCENT.*\n?/gm,"").replace(/Info\s*:/g,'<span style="color: blue; font-weight: bold;">Info: </span>').replace(/Error:/g,'<span style="color: red; font-weight: bold;">Error:</span>').replace(/\n\n/g,"\n").replace(/\n/g,"<br />"))&&void 0!==s?s:"")]})};var l3=e=>{let{simulation:l,steps:t}=e,[n,s]=(0,i.useState)(!1),[u,o]=(0,i.useState)(!1),c=(0,i.useCallback)(()=>s(!0),[]),m=(0,i.useCallback)(()=>s(!1),[]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eg.Z,{title:"Log",open:n,onClose:m,width:"50%",children:(0,a.jsx)(r.default,{items:null==t?void 0:t.map((e,t)=>({key:""+t,label:e.label,children:(0,a.jsx)(l2,{simulation:l,step:e,loading:u,setLoading:o})}))})}),(0,a.jsx)(d.default,{title:"Log",children:(0,a.jsx)(O(),{disabled:!(null==t?void 0:t.length),icon:(0,a.jsx)(lQ.Z,{}),onClick:c})})]})},l6=t(42419),l4=t(34265),l9=t(30744),l7=t(85615);let l8={download:"Unable to download file"},te=async(e,l,t)=>{try{let t=await l7.Z.download({id:e.id},{originPath:l.originPath,fileName:l.fileName}),a=await t.blob(),i=window.URL.createObjectURL(new Blob([a])),n=document.createElement("a");n.href=i,n.setAttribute("download",l.name+"."+l.fileName.split(".").pop()),n.click()}catch(e){t((0,f.iT)({title:l8.download,err:e}))}};var tl=e=>{let{simulation:l,file:t}=e,[n,s]=(0,i.useState)(!1),{dispatch:u}=(0,i.useContext)(p.uj),o=(0,i.useCallback)(()=>{(async()=>{s(!0);try{await te(l,t,u)}catch(e){}finally{s(!1)}})()},[l,t,u]);return(0,a.jsx)(d.default,{title:"Download",children:(0,a.jsx)(O(),{loading:n,icon:(0,a.jsx)(l9.default,{}),onClick:o})})};let tt={archive:"Unable to download archive"},ta=async(e,l)=>{try{let l=await l7.Z.archive({id:e.id}),t=await l.blob(),a=window.URL.createObjectURL(new Blob([t])),i=document.createElement("a");i.href=a,i.setAttribute("download",e.scheme.name+".zip"),i.click()}catch(e){l((0,f.iT)({title:tt.archive,err:e}))}};var ti=e=>{let{simulation:l}=e,[t,n]=(0,i.useState)(!1),{dispatch:s}=(0,i.useContext)(p.uj),u=(0,i.useCallback)(()=>{(async()=>{n(!0);try{await ta(l,s)}catch(e){}finally{n(!1)}})()},[l,s]);return(0,a.jsx)(g.o6,{loading:t,onDownload:u})};let tn=e=>{var l;let{simulation:t,results:n,file:s,setResults:u}=e,o=(0,i.useCallback)(()=>{let e=n.findIndex(e=>e.fileName===s.fileName&&e.name===s.name);if(-1===e){let e=s.geometry,l=n.filter(l=>l.geometry!==e);u([...l,s])}else u([...n.slice(0,e),...n.slice(e+1)])},[n,s,u]),r=(0,i.useMemo)(()=>n.find(e=>e.fileName===s.fileName&&e.name===s.name),[n,s]);return(0,a.jsxs)(T.default,{style:{alignItems:"center"},children:[(0,a.jsx)(O(),{icon:r?(0,a.jsx)(l6.default,{style:{color:"#fad114"}}):(0,a.jsx)(l4.default,{}),onClick:o}),(0,a.jsx)(tl,{simulation:{id:t.id},file:{name:s.name,fileName:s.fileName,originPath:s.originPath}}),null===(l=s.name)||void 0===l?void 0:l.replaceAll("_"," ")]})};var ts=e=>{let{simulation:l,results:t,setResults:n}=e,[s,u]=(0,i.useState)(),[r,d]=(0,i.useState)(),[c,m]=(0,i.useState)(),h=(0,i.useMemo)(()=>{var e;return null==l?void 0:null===(e=l.scheme)||void 0===e?void 0:e.configuration},[l]);(0,x.Z)(()=>{var e;if(!(null==l?void 0:l.tasks)){u([]),d(void 0);return}let t=[],a=null==h?void 0:null===(e=h.run)||void 0===e?void 0:e.resultsFilter;l.tasks.forEach(e=>{if(e.file&&t.push(e.file),e.files){if(a){let{filteredFiles:l,notFilteredFiles:i}=le(e.files,a),n=ll(l,a),s=n.map(e=>e.number).filter((e,l,t)=>t.indexOf(e)===l).sort((e,l)=>e-l),u=lt(h,a),o=s.map((e,l)=>({label:Math.round(1e15*(u?e*u:l))/1e15,value:e}));t.push(...i),d({filtered:!0,name:a.name,files:n,options:o})}else t.push(...e.files)}}),u(t)},[l,h]),(0,x.Z)(()=>{!c&&r&&m(null==r?void 0:r.options[0].value)},[r,c]);let v=(0,i.useCallback)(e=>{let l=r.files.filter(l=>l.number===e&&t.find(e=>e.name===l.name));n(l),m(e)},[t,r,n]);return s||r?(null==s?void 0:s.length)||r?(0,a.jsx)(S.Z,{size:"small",title:"Results",extra:(0,a.jsx)(ti,{simulation:l&&{id:l.id,scheme:l.scheme}}),children:(0,a.jsxs)(T.default,{direction:"vertical",className:A().fullWidth,children:[null==s?void 0:s.map(e=>(0,a.jsx)(tn,{simulation:l,results:t,file:e,setResults:n},e.name)),r&&(0,a.jsxs)(a.Fragment,{children:[r.name,(0,a.jsx)(o.default,{className:A().fullWidth,options:r.options,value:c,onChange:v}),r.files.map(e=>{if(e.number===c)return(0,a.jsx)(tn,{simulation:l,results:t,file:e,setResults:n},e.name)})]})]})}):(0,a.jsx)(S.Z,{size:"small",children:"No results yet"}):(0,a.jsx)(E.default,{})};let tu={run:"Unable to run simulation",stop:"Unable to stop simulation",update:"Unable to update simulation"},to=async(e,l,t,a)=>{try{let a=C.Z.deepCopy(e),i=e.scheme.configuration;i.run.cloudServer=l,a.scheme.configuration=i,await k.Z.update({id:e.id},[{key:"scheme",type:"json",method:"set",path:["configuration","run"],value:i.run}]),await t.mutateOneSimulation(a),await t.mutateSimulation(a)}catch(e){a((0,f.iT)({title:tu.update,err:e}))}},tr=async(e,l,t)=>{try{await k.Z.run({id:e.id},t)}catch(e){throw l((0,f.iT)({title:tu.run,err:e})),e}},td=async(e,l)=>{try{await k.Z.stop({id:e.id})}catch(e){throw l((0,f.iT)({title:tu.stop,err:e})),e}};var tc=[{key:"warpByVector",label:"Warp by vector",parameters:[{key:"Vectors",label:"Vectors",rules:[{required:!0,message:"Vectors is required"}]},{key:"ScaleFactor",label:"Scale factor",default:"1",rules:[{required:!0,message:"Scale factor is required"}]}]},{key:"contour",label:"Contour",parameters:[{key:"ContourBy",label:"Contour by",rules:[{required:!0,message:"ContourBy by is required"}]},{key:"isosurface",label:"Isosurface",default:"0",rules:[{required:!0,message:"Isosurface is required"}]}]},{key:"streamTracer",label:"Stream tracer",parameters:[{key:"Vectors",label:"Vectors",rules:[{required:!0,message:"Vectors is required"}]}]}],tm=t(948);let th=async(e,l,t,a)=>{let i=await (0,tm.R)("/api/postprocessing",{method:"POST",headers:{Accept:"application/json"},body:JSON.stringify({simulation:e,result:l,filter:t,parameters:a})});return i.json()};var tv={run:th};let ty={run:"Unable to run filter"},tp=async(e,l,t,a,i)=>{try{return await tv.run(e,l,t,a)}catch(e){throw i((0,f.iT)({title:ty.run,err:e})),e}},tf=e=>{let{simulation:l,postprocessing:t,result:n,setResult:s}=e,u=(0,i.useCallback)(()=>s((null==t?void 0:t.fileName)===n.fileName&&(null==t?void 0:t.name)===n.name?void 0:{type:"postprocessing",...n}),[t,n,s]);return(0,a.jsxs)(T.default,{children:[(0,a.jsx)(O(),{icon:(null==t?void 0:t.fileName)===n.fileName&&(null==t?void 0:t.name)===n.name?(0,a.jsx)(l6.default,{className:A().primaryColor}):(0,a.jsx)(l4.default,{}),onClick:u}),(0,a.jsx)(tl,{simulation:{id:l.id},file:{name:n.name,fileName:n.fileName,originPath:n.originPath}}),n.name]},n.glb)},tx=e=>{let{simulation:l,postprocessing:t,results:i,setResult:n}=e;return i.length?(0,a.jsx)(T.default,{direction:"vertical",className:A().fullWidth,children:i.map(e=>(0,a.jsx)(tf,{simulation:l,postprocessing:t,result:e,setResult:n},e.glb))}):(0,a.jsx)(a.Fragment,{children:"No results"})},tb={plugins:"Unable to load plugins",update:"Unable to update simulation"},tg=async(e,l)=>{try{let l=await Z.Z.list();return tj(e,j.Z,l)}catch(e){return l((0,f.iT)({title:tb.plugins,err:e})),[]}},tj=(e,l,t)=>{let a=l;return t.forEach(l=>{var t;(null===(t=e.authorizedplugins)||void 0===t?void 0:t.includes(l.key))&&"Model"===l.category&&(a=[...a,...l.models])}),a},tC=(e,l)=>{if(!(null==l?void 0:l.length))return!0;if(Array.isArray(e)){let t=l.filter(l=>e.includes(l));return t.length==l.length}return!!(1===l.length&&l.includes(e))},tk=async(e,l,t,a)=>{try{let a=l.find(l=>{var t;return l.algorithm===(null==e?void 0:null===(t=e.scheme)||void 0===t?void 0:t.algorithm)}),i=C.Z.deepCopy(e);y()(i.scheme,a),await k.Z.update({id:e.id},[{key:"scheme",value:i.scheme}]),await t.mutateOneSimulation(i)}catch(e){a((0,f.iT)({title:tb.update,err:e}))}};var tZ={Selector:e=>{let{visible:l,user:t,title:m,okText:h,onOk:v,onCancel:y,onDelete:f}=e,[j,k]=(0,i.useState)(),[Z,w]=(0,i.useState)(),[S,T]=(0,i.useState)(!1),[E,N]=(0,i.useState)([]),[O,P]=(0,i.useState)(),[M,L]=(0,i.useState)([]),{dispatch:I}=(0,i.useContext)(p.uj);(0,x.Z)(()=>{(async()=>{let e=await tg(t,I);N(e)})()},[t],[I]),(0,x.Z)(()=>{let e=E.map(e=>e.category).flat().filter((e,l,t)=>t.indexOf(e)===l).map(e=>({key:e,value:e}));P(e)},[E]);let R=(0,i.useCallback)(e=>{let{key:l}=e;k(l);let t=E.find(e=>e.algorithm===l);w({model:t})},[E]),_=(0,i.useCallback)(e=>{let{key:l}=e,a=l.split("&").pop();k(a);let i=t.usermodels.find(e=>e.model.algorithm===a);w(C.Z.deepCopy(i))},[t]),U=(0,i.useCallback)(()=>{(async()=>{if(T(!0),Z)try{await v(Z)}catch(e){}T(!1),w(void 0),k(void 0)})()},[Z,v]),Y=(0,i.useCallback)(()=>{w(void 0),k(void 0),y()},[y]),z=(0,i.useMemo)(()=>{let e=[{key:"category",disabled:!0,label:(0,a.jsx)(o.default,{mode:"multiple",className:A().fullWidth,options:O,allowClear:!0,suffixIcon:null,placeholder:"Category filter",onChange:L,value:M,style:{textOverflow:"ellipsis"}})}];return E.forEach(l=>{tC(l.category,M)&&e.push({key:l.algorithm,label:l.name})}),e},[E,O,M]),B=(0,i.useMemo)(()=>{let e=[{key:"category",disabled:!0,label:(0,a.jsx)(o.default,{mode:"multiple",className:A().fullWidth,options:O,allowClear:!0,suffixIcon:null,placeholder:"Category filter",onChange:L,value:M})}];return t.usermodels.forEach((l,i)=>{tC(l.model.category,M)&&e.push({key:l.id+"&"+l.model.algorithm,label:(0,a.jsxs)(a.Fragment,{children:[f?(0,a.jsx)(g.m1,{onDelete:async()=>f(i)}):null,(0,a.jsx)(d.default,{title:l.model.name,children:(0,a.jsx)(c.Z.Text,{ellipsis:!0,children:l.model.name})}),l.owners.find(e=>e.id===t.id)?null:(0,a.jsx)("div",{className:"shared",children:C.Z.userToAvatar(l.owners[0])})]})})}),e},[t,O,M,f]);return(0,a.jsx)(u.Z,{open:l,title:null!=m?m:"Create simulation",okText:null!=h?h:"Create",okButtonProps:{loading:S},onOk:U,onCancel:Y,width:"80%",children:(0,a.jsxs)(n.Z,{className:ef().selectorContent,children:[(0,a.jsx)(n.Z.Sider,{theme:"light",width:300,className:ef().selectorSider,children:(0,a.jsx)(r.default,{defaultActiveKey:"tanatloc",items:[{key:"tanatloc",label:"Tanatloc algorithm",children:(0,a.jsx)(s.default,{selectedKeys:j?[j]:void 0,mode:"inline",items:z,onClick:R})},{key:"personal",label:"User algorithm",children:(0,a.jsx)(s.default,{selectedKeys:j?[j]:void 0,mode:"inline",className:ef().userMenu,items:B,onClick:_})}]})}),(0,a.jsx)(n.Z.Content,{className:ef().selector,children:(0,a.jsx)(b.Z.Html,{html:null==Z?void 0:Z.model.description})})]})})},Updater:e=>{let{user:l,simulation:t,swr:a}=e,[n,s]=(0,i.useState)([]),{dispatch:o}=(0,i.useContext)(p.uj);return(0,x.Z)(()=>{(async()=>{let e=await tg(l,o);s(e)})()},[l],[o]),(0,x.Z)(()=>{let e=n.find(e=>{var l;return e.algorithm===(null==t?void 0:null===(l=t.scheme)||void 0===l?void 0:l.algorithm)});if(e&&(null==t?void 0:t.scheme)){let l=(0,m.Z)(t.scheme,e,{excludedKeys:["value","unit"]}),i=(0,h.Z)(t.scheme,e,{excludedKeys:["value","unit"]});(Object.keys(l).length||Object.keys(i).length)&&(u.Z.info({title:"Update",content:"Your model need an update, please wait.",closable:!1,okButtonProps:{hidden:!0}}),tk(t,n,a,o).finally(()=>u.Z.destroyAll()))}},[t,n,a]),null},About:e=>{let{project:l,simulation:t,swr:i}=e;return l&&t?(0,a.jsx)(n.Z,{children:(0,a.jsx)(n.Z.Content,{children:(0,a.jsx)(S.Z,{size:"small",title:(0,a.jsx)(c.Z.Title,{level:5,ellipsis:!0,children:t.name}),actions:[(0,a.jsx)(R,{project:{id:l.id,simulations:l.simulations},simulation:t,swr:{mutateProject:i.mutateProject,addOneSimulation:i.addOneSimulation}},"copy"),(0,a.jsx)(V,{simulation:{id:t.id,name:t.name},swr:{mutateOneSimulation:i.mutateOneSimulation}},"edit"),(0,a.jsx)(W,{project:{id:l.id,simulations:l.simulations},simulation:{id:t.id,name:t.name},swr:{mutateProject:i.mutateProject,delOneSimulation:i.delOneSimulation}},"delete")],children:(0,a.jsxs)(T.default,{direction:"vertical",className:A().fullWidth,children:[t.scheme.userModelId&&(0,a.jsx)(w.Z,{message:"User algorithm",type:"info",showIcon:!0}),(0,a.jsxs)(c.Z.Text,{children:[(0,a.jsx)("span",{className:A().textLight,children:"Category:"})," ",t.scheme.category]}),(0,a.jsxs)(c.Z.Text,{children:[(0,a.jsx)("span",{className:A().textLight,children:"Algorithm:"})," ",t.scheme.algorithm]}),(0,a.jsxs)(c.Z.Text,{children:[(0,a.jsx)("span",{className:A().textLight,children:"Code:"})," ",t.scheme.code]}),(0,a.jsxs)(c.Z.Text,{children:[(0,a.jsx)("span",{className:A().textLight,children:"Version:"})," ",t.scheme.version]}),(0,a.jsx)("div",{className:"".concat(A().fullWidth," ").concat(A().scroll),children:(0,a.jsx)(b.Z.Html,{html:t.scheme.description})})]})})})}):(0,a.jsx)(S.Z,{children:(0,a.jsx)(E.default,{})})},Geometry:e=>{let{geometries:l,simulation:t,setGeometries:n,swr:s}=e,u=(0,i.useMemo)(()=>t.scheme.configuration.geometry.children,[t.scheme.configuration.geometry.children]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(S.Z,{size:"small",children:(0,a.jsx)(c.Z.Text,{children:"When changing the simulation domain, you might lose your topological entity assignments"})}),u.map((e,i)=>(0,a.jsx)(er,{geometries:l,simulation:t,child:e,index:i,setGeometries:n,swr:s},e.label))]})},Materials:e=>{let{geometries:l,simulation:t,swr:s,setVisible:u}=e,[o,r]=(0,i.useState)(),[d,c]=(0,i.useState)(!1),{dispatch:m}=(0,i.useContext)(ec.ZB),h=(0,i.useMemo)(()=>t.scheme.configuration.materials,[t]),v=(0,i.useMemo)(()=>{let e=l.reduce((e,l)=>(e.find(e=>e.id===l.id)||e.push(l),e),[]);return e},[l]);(0,x.Z)(()=>{var e;(null===(e=v[0])||void 0===e?void 0:e.summary)&&m((0,em.Cw)(2===v[0].summary.dimension?"faces":"solids"))},[v],[m]);let y=(0,i.useCallback)(()=>{r(void 0),c(!0),u(!1),m((0,em.wp)())},[m,u]),p=(0,i.useCallback)(e=>{let l=h.values[e];r(l),c(!0),u(!1),m((0,em.wp)())},[h,m,u]),f=(0,i.useCallback)(()=>{m((0,em.h$)()),c(!1),r(void 0),u(!0)},[m,u]);return v.length?(0,a.jsx)(n.Z,{children:(0,a.jsx)(n.Z.Content,{children:(0,a.jsxs)(S.Z,{size:"small",children:[(0,a.jsx)(g.HS,{onAdd:y,fullWidth:!0,primary:!1,children:"Add material"}),(0,a.jsx)(eb,{geometries:v.map(e=>({id:e.id,summary:e.summary})),simulation:{id:t.id,scheme:t.scheme},swr:s,onEdit:p}),(0,a.jsx)(eJ,{visible:d,geometries:v.map(e=>({id:e.id,name:e.name,summary:e.summary})),simulation:{id:t.id,scheme:t.scheme},material:o&&{uuid:o.uuid,material:o.material,geometry:o.geometry,selected:o.selected},swr:{mutateOneSimulation:s.mutateOneSimulation},onClose:f})]})})}):(0,a.jsx)(ed.Z.Simple,{})},Parameters:e=>{let{simulation:l,swr:t}=e,{dispatch:s}=(0,i.useContext)(p.uj),u=(0,i.useMemo)(()=>null==l?void 0:l.scheme.configuration.parameters,[l]),o=(0,i.useMemo)(()=>null==l?void 0:l.scheme.configuration.dimension,[l]);(0,i.useEffect)(()=>{(async()=>{(null==u?void 0:u.done)||await e6(l,t,s)})()},[l,u,t,s]);let r=(0,i.useMemo)(()=>Object.keys(u).map(e=>{if("index"===e||"title"===e||"done"===e)return null;let i=u[e];return i.advanced?null:(0,a.jsx)(e8,{simulation:l,dimension:o,pkey:e,parameter:i,swr:t},e)}).filter(e=>e),[l,o,u,t]),d=(0,i.useMemo)(()=>Object.keys(u).map(e=>{if("index"===e||"title"===e||"done"===e)return null;let i=u[e];return i.advanced?(0,a.jsx)(e8,{simulation:l,dimension:o,pkey:e,parameter:i,swr:t},e):null}).filter(e=>e),[l,o,u,t]);return(0,a.jsx)(n.Z,{children:(0,a.jsx)(n.Z.Content,{children:(0,a.jsxs)(T.default,{direction:"vertical",children:[r,d.length?(0,a.jsx)(D.Z,{items:[{key:"advanced",label:"Advanced",children:(0,a.jsx)(T.default,{direction:"vertical",children:d})}]}):null]})})})},Initialization:e=>{let{simulations:l,simulation:t,swr:s}=e,[u,r]=(0,i.useState)(!1),[d,m]=(0,i.useState)(),[h,v]=(0,i.useState)(),[y,f]=(0,i.useState)(),{dispatch:b}=(0,i.useContext)(p.uj),g=(0,i.useMemo)(()=>null==t?void 0:t.scheme.configuration.initialization,[t]),j=(0,i.useMemo)(()=>null==t?void 0:t.scheme.configuration.dimension,[t]),C=(0,i.useCallback)(e=>{let t=l.find(l=>l.id===e);v(t)},[l]);(0,x.Z)(()=>{var e,l;!d&&g.value&&m(g.value.type),!h&&(null===(e=g.value)||void 0===e?void 0:e.simulation)&&C(null===(l=g.value)||void 0===l?void 0:l.simulation)},[g,d,h],[C]),(0,x.Z)(()=>{(async()=>{if(h){let e=await lr(l,h.id);f(e)}})()},[l,h]);let k=(0,i.useMemo)(()=>{let e=[{label:"None",value:"none"}];return g.coupling&&e.push({label:g.coupling.label,value:"coupling"}),g.direct&&e.push({label:g.direct.label,value:"direct"}),e},[g]),Z=g.value,w=(0,i.useCallback)(e=>{(async()=>{r(!0);try{await ln(l,t,e,s,b),C(e)}catch(e){}finally{r(!1)}})()},[l,t,s,C,b]),N=(0,i.useCallback)((e,l)=>{(async()=>{await ls(t,e,l,s,b)})()},[t,s,b]),O=(0,i.useCallback)((e,l)=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.Z.Text,{children:"If you use coupling, the selected simulation mesh will be used, at least for the first iteration."}),(0,a.jsxs)(T.default,{direction:"vertical",className:A().fullWidth,style:{marginTop:"10px"},children:[(0,a.jsx)(o.default,{className:A().fullWidth,options:e,placeholder:"Select a simulation",value:null==Z?void 0:Z.simulation,onChange:w}),u&&(0,a.jsx)(E.default,{}),(null==y?void 0:y.length)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(c.Z.Text,{children:[null==l?void 0:l.name,":"]},"simulation"),(0,a.jsx)(o.default,{className:A().fullWidth,options:y,placeholder:"Select a "+l.name,value:null==Z?void 0:Z.result,onChange:N})]}):(0,a.jsx)(c.Z.Text,{type:"danger",children:"No results, please select an other simulation."})]})]}),[Z,y,u,w,N]),P=(0,i.useCallback)(e=>(0,a.jsx)(T.default,{direction:"vertical",className:A().fullWidth,children:e.children.map((e,l)=>{var i;if(2!==j||!e.only3D)return(0,a.jsx)(ld,{simulation:t,child:e,index:l,value:null==Z?void 0:null===(i=Z.values)||void 0===i?void 0:i[l],swr:s,dispatch:b},e.label)})}),[Z,j,t,s,b]),M=(0,i.useMemo)(()=>{let e={none:(0,a.jsx)("div",{})},i=g.coupling;if(null==i?void 0:i.compatibility){let a=l.map(e=>{let l=e.id===t.id||!i.compatibility.find(l=>l.algorithm===e.scheme.algorithm);return{label:e.name,value:e.id,disabled:l}}),n=i.compatibility.find(e=>{var l;return e.algorithm===(null==h?void 0:null===(l=h.scheme)||void 0===l?void 0:l.algorithm)}),s=null==n?void 0:n.filter;e.coupling=O(a,s)}let n=g.direct;return(null==n?void 0:n.children)&&(e.direct=P(n)),e},[l,t,h,g,O,P]),L=(0,i.useCallback)(e=>{(async()=>{try{await li(t,e,s,b),m(e)}catch(e){}})()},[t,s,b]);return(0,a.jsx)(n.Z,{children:(0,a.jsx)(n.Z.Content,{children:(0,a.jsxs)(S.Z,{size:"small",children:[(0,a.jsx)(o.default,{className:A().fullWidth,style:{marginTop:"10px"},defaultValue:"none",value:d,options:k,onChange:L}),M[null!=d?d:"none"]]})})})},BoundaryConditions:e=>{let{simulation:l,geometries:t,swr:s,setVisible:u}=e,[o,r]=(0,i.useState)(),[d,c]=(0,i.useState)(!1),{dispatch:m}=(0,i.useContext)(ec.ZB),h=(0,i.useMemo)(()=>l.scheme.configuration.boundaryConditions,[l]),v=(0,i.useMemo)(()=>{let e=t.reduce((e,l)=>(e.find(e=>e.id===l.id)||e.push(l),e),[]);return e},[t]);(0,x.Z)(()=>{var e;(null===(e=v[0])||void 0===e?void 0:e.summary)&&m((0,em.Cw)(2===v[0].summary.dimension?"edges":"faces"))},[v],[m]);let y=(0,i.useCallback)(()=>{r(void 0),c(!0),u(!1),m((0,em.wp)())},[m,u]),p=(0,i.useCallback)((e,l)=>{let t=h[e],a=t.values[l];r(a),c(!0),u(!1),m((0,em.wp)())},[h,m,u]),f=(0,i.useCallback)(()=>{m((0,em.h$)()),c(!1),r(void 0),u(!0)},[m,u]);return v.length?(0,a.jsx)(n.Z,{children:(0,a.jsx)(n.Z.Content,{children:(0,a.jsxs)(S.Z,{size:"small",children:[(0,a.jsx)(g.HS,{onAdd:y,fullWidth:!0,primary:!1,children:"Add boundary condition"}),(0,a.jsx)(ly,{geometries:v.map(e=>({id:e.id,summary:e.summary})),simulation:{id:l.id,scheme:l.scheme},swr:{mutateOneSimulation:s.mutateOneSimulation},onEdit:p}),(0,a.jsx)(lk,{visible:d,geometries:v.map(e=>({id:e.id,name:e.name,summary:e.summary})),simulation:{id:l.id,scheme:l.scheme},boundaryCondition:o&&{uuid:o.uuid,name:o.name,type:o.type,geometry:o.geometry,selected:o.selected,values:o.values},swr:{mutateOneSimulation:s.mutateOneSimulation},onClose:f})]})})}):(0,a.jsx)(ed.Z.Simple,{})},Run:e=>{var l;let{geometries:t,simulation:s,results:u,setResults:o,setPostprocessing:r,setVisible:d,swr:c}=e,[m,h]=(0,i.useState)(!1),[v,y]=(0,i.useState)(!1),[f,b]=(0,i.useState)(!1),[g,j]=(0,i.useState)(!1),[C,Z]=(0,i.useState)([]),[w,N]=(0,i.useState)(0),{dispatch:P}=(0,i.useContext)(p.uj),[M,{mutateSimulation:L}]=k.Z.useSimulation(s.id,2e3),I=(0,i.useMemo)(()=>s.scheme.configuration,[s]),R=(0,i.useMemo)(()=>{var e;return null==M?void 0:null===(e=M.scheme)||void 0===e?void 0:e.configuration},[M]);(0,x.Z)(()=>{if(!I){h(!0);return}let e=!0;Object.keys(I).forEach(l=>{if("dimension"!==l&&"run"!==l){let t=I[l];t.done||(e=!1)}}),I.run.cloudServer||(e=!1),h(!e)},[I]),(0,i.useEffect)(()=>{if(!I)return;let e=I.geometry,l=!0;e.children.forEach(e=>{e.mesh||(l=!1)}),l?b(!0):(b(!1),j(!1))},[I]),(0,x.Z)(()=>{var e,l,t;(null==M?void 0:null===(e=M.tasks)||void 0===e?void 0:e.find(e=>(null==e?void 0:e.status)==="error"))?y(!1):(null==M?void 0:null===(l=M.tasks)||void 0===l?void 0:l.find(e=>e&&"finish"!==e.status))?y(!0):y(!1);let a=[];null==M||null===(t=M.tasks)||void 0===t||t.forEach((e,l)=>{if(e){if(l===M.tasks.length-1){var t,i;let l=null!==(i=null===(t=e.log)||void 0===t?void 0:t.split("\n"))&&void 0!==i?i:[],a=l.filter(e=>e.startsWith("PERCENT:")).filter(e=>e),n=null==a?void 0:a.pop(),s=n?parseFloat(n.replace("PERCENT: ","").replace("%","")):0;s&&N(s)}a[e.index]={index:e.index,label:e.label,status:e.status,log:e.log,pluginLog:e.pluginLog,warning:e.warning,error:e.error,systemLog:e.systemLog,link:e.link}}}),Z(a)},[null==M?void 0:M.tasks]);let _=(0,i.useCallback)(async e=>to(s,e,{...c,mutateSimulation:L},P),[s,c,L,P]),U=(0,i.useCallback)(e=>{j(e.target.checked)},[]),Y=(0,i.useCallback)(()=>{(async()=>{y(!0);try{await tr(s,P,g)}catch(e){y(!1)}})()},[s,g,P]),z=(0,i.useCallback)(()=>{(async()=>{try{await td(s,P),y(!1)}catch(e){}})()},[s,P]);return s&&M&&(null==M?void 0:M.id)!=="0"?(0,a.jsx)(n.Z,{children:(0,a.jsx)(n.Z.Content,{children:(0,a.jsxs)(T.default,{direction:"vertical",className:A().fullWidth,children:[(0,a.jsx)(lB,{geometries:t,simulation:s,setVisible:d,setResults:o,setPostprocessing:r,swr:{mutateOneSimulation:c.mutateOneSimulation}}),(0,a.jsx)(l$,{disabled:v,parallel:s.scheme.parallel,cloudServer:null==R?void 0:null===(l=R.run)||void 0===l?void 0:l.cloudServer,onOk:_}),(0,a.jsx)(S.Z,{size:"small",title:"Run",children:(0,a.jsxs)(T.default,{direction:"vertical",className:A().fullWidth,size:20,children:[f?(0,a.jsx)(K.default,{checked:g,onChange:U,children:"Keep mesh(es)?"}):null,(0,a.jsxs)("div",{className:A().fullWidth,style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,a.jsxs)(T.default,{children:[(0,a.jsx)(O(),{disabled:m,type:"primary",icon:(0,a.jsx)(lw.Z,{}),loading:v,onClick:Y,children:"Run"}),(0,a.jsx)(O(),{disabled:!v,danger:!0,icon:(0,a.jsx)(lS.Z,{}),shape:"circle",onClick:z})]}),(0,a.jsx)(l3,{simulation:{id:s.id},steps:C})]}),(0,a.jsx)(lZ.Z,{direction:"vertical",current:C.length-1,percent:w,items:C.map((e,l)=>({key:l,title:e.label,description:"("+(l+1)+"/"+C.length+")",status:e.status}))})]})}),(0,a.jsx)(ts,{simulation:M&&{id:M.id,scheme:M.scheme,tasks:M.tasks},results:u,setResults:o})]})})}):(0,a.jsx)(n.Z,{children:(0,a.jsx)(n.Z.Content,{children:(0,a.jsx)(S.Z,{size:"small",children:(0,a.jsx)(E.default,{})})})})},Postprocessing:e=>{let{simulation:l,results:t,postprocessing:n,setResult:s}=e,[u,r]=(0,i.useState)(),[d,c]=(0,i.useState)(),[m,h]=(0,i.useState)(),{postProcessing:v,dispatch:y}=(0,i.useContext)(ec.ZB),{dispatch:f}=(0,i.useContext)(p.uj),x=(0,i.useMemo)(()=>t[0],[t]);(0,i.useEffect)(()=>{l||(r(void 0),h(void 0))},[l]);let b=(0,i.useMemo)(()=>null==l?void 0:l.scheme.configuration.run.postprocessing,[l]),g=(0,i.useMemo)(()=>tc.map(e=>{if(null==b?void 0:b.find(l=>l.key===e.key))return{label:e.label,value:e.key}}).filter(e=>e),[b]),j=(0,i.useMemo)(()=>{if(!b||!u)return;let e=tc.find(e=>e.key===u),l=b.find(e=>e.key===u);if(null==e?void 0:e.parameters)return e.parameters.map((e,t)=>{var i;let n=null==l?void 0:null===(i=l.parameters)||void 0===i?void 0:i.find(l=>l.key===e.key);return(null==n?void 0:n.value)?(0,a.jsx)(_.Z.Item,{label:e.label,name:["parameters",t],initialValue:n.value,rules:e.rules,children:(0,a.jsx)(U.default,{disabled:!0})},e.key):(null==n?void 0:n.options)?(0,a.jsx)(_.Z.Item,{label:e.label,name:["parameters",t],rules:e.rules,children:(0,a.jsx)(o.default,{options:n.options.map(e=>({label:e,value:e}))})},e.key):(0,a.jsx)(_.Z.Item,{label:e.label,name:["parameters",t],rules:e.rules,initialValue:e.default,children:(0,a.jsx)(U.default,{})},e.key)})},[b,u]),C=(0,i.useCallback)(()=>y((0,em.Ud)(!1)),[y]),k=(0,i.useCallback)(e=>{(async()=>{c(!0);try{var t;let a=await tp({id:l.id},x,u,null!==(t=e.parameters)&&void 0!==t?t:[],f);h({filter:u,results:a})}catch(e){}c(!1)})()},[l,x,u,f]);return((0,i.useEffect)(()=>{1!==t.length&&v&&C()},[t,v,C]),l&&1===t.length&&b&&g.length)?(0,a.jsxs)(eg.Z,{title:"Post-processing",closable:!0,onClose:C,open:v,mask:!1,maskClosable:!1,children:[(0,a.jsx)(_.Z,{children:(0,a.jsx)(_.Z.Item,{name:"filter",label:"Filter",children:(0,a.jsx)(o.default,{placeholder:"Select a filter",options:g,onChange:r})})}),(0,a.jsxs)(_.Z,{layout:"vertical",style:{margin:"24px 0"},onFinish:k,children:[j,(0,a.jsx)(_.Z.Item,{children:(0,a.jsx)(O(),{type:"primary",loading:d,htmlType:"submit",icon:(0,a.jsx)(lw.Z,{}),children:"Run"})})]}),m&&(0,a.jsx)(S.Z,{size:"small",title:"Post-processing",extra:m.filter,children:(0,a.jsx)(tx,{simulation:l,postprocessing:n,results:m.results,setResult:s})})]}):null}}},78804:function(e,l,t){"use strict";t.d(l,{CH:function(){return o},Cw:function(){return s},N7:function(){return d},Ud:function(){return m},Ys:function(){return r},a_:function(){return c},h$:function(){return n},rx:function(){return u},wp:function(){return i}});var a=t(54523);let i=()=>({type:a.Hp.ENABLE}),n=()=>({type:a.Hp.DISABLE}),s=e=>({type:a.Hp.SETTYPE,value:e}),u=e=>({type:a.Hp.SETPART,value:e}),o=e=>({type:a.Hp.HIGHLIGHT,value:e}),r=e=>({type:a.Hp.SELECT,value:e}),d=e=>({type:a.Hp.SETPOINT,value:e}),c=e=>({type:a.Hp.SETDATA,value:e}),m=e=>({type:a.Hp.SETPOSTPROCESSING,value:e})},54523:function(e,l,t){"use strict";t.d(l,{Hp:function(){return s},ZB:function(){return u}});var a=t(85893),i=t(67294);let n={enabled:!1,type:void 0,part:void 0,highlighted:void 0,selected:[],point:void 0,data:void 0,postProcessing:void 0,dispatch:()=>void 0},s={ENABLE:"ENABLE",DISABLE:"DISABLE",CLEAR:"CLEAR",SETTYPE:"SETTYPE",SETPART:"SETPART",HIGHLIGHT:"HIGHLIGHT",SELECT:"SELECT",SETPOINT:"SETPOINT",SETDATA:"SETDATA",SETPOSTPROCESSING:"SETPOSTPROCESSING"},u=(0,i.createContext)(n),o=(e,l)=>{switch(l.type){case s.ENABLE:return{...e,enabled:!0};case s.DISABLE:return{...e,enabled:!1,highlighted:void 0,selected:[]};case s.CLEAR:return{...n};case s.SETTYPE:return{...e,type:l.value};case s.SETPART:return{...e,part:l.value};case s.HIGHLIGHT:return{...e,highlighted:l.value};case s.SELECT:return{...e,selected:l.value};case s.SETPOINT:return{...e,point:l.value};case s.SETDATA:return{...e,data:l.value};case s.SETPOSTPROCESSING:return{...e,postProcessing:l.value};default:return e}};l.ZP=e=>{let{children:l}=e,[t,s]=(0,i.useReducer)(o,n),r=(0,i.useMemo)(()=>({...t,dispatch:s}),[t]);return(0,a.jsx)(u.Provider,{value:r,children:l})}},2594:function(e){e.exports={formula:"formula_formula__5J08n",select:"formula_select__yg4qe"}},64098:function(e){e.exports={panel:"panel_panel__0UqOC",subPanel:"panel_subPanel__xW1ud"}},29040:function(e){e.exports={userMenu:"simulation_userMenu__B0_qd",selectorContent:"simulation_selectorContent__NJ9PO",selectorSider:"simulation_selectorSider__gozkv",selector:"simulation_selector__y2Udd",geometriesList:"simulation_geometriesList__Lzj7P",waring:"simulation_waring___VG9C",error:"simulation_error__E54cQ",listItem:"simulation_listItem__PQKrU"}},64546:function(e,l,t){var a={"./local/src/components":[13534,1059,8799,3534]};function i(e){if(!t.o(a,e))return Promise.resolve().then(function(){var l=Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l});var l=a[e],i=l[0];return Promise.all(l.slice(1).map(t.e)).then(function(){return t(i)})}i.keys=function(){return Object.keys(a)},i.id=64546,e.exports=i}}]);