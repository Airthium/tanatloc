"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7317],{7317:function(e,t,a){a.r(t),a.d(t,{errors:function(){return E},exportCSV:function(){return M},onCheck:function(){return Z}});var l=a(85893),n=a(67294),i=a(26713),o=a(32808),s=a(97183),r=a(84908),d=a(71577),c=a(63463),u=a(13013),h=a(69317),x=a(56299),m=a(18870),f=a(9253),p=a(51584),y=a(14195),k=a(3023),b=a(75358),v=a(14888),j=a(44141),g=a(96486),C=a(67582),w=a(64376),S=a(23853);let E={download:"Unable to download CSV"},Z=(e,t,a)=>{let l=e.target.checked,n=[...a];return n[t]=l,n},M=function(e,t,a,l){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:";",i="";i="x"+n+a.join(n)+"\n",t.forEach(e=>{i+=e.x,null==l||l.forEach(t=>{void 0!==e[t]&&(i+=n+e[t])}),i+="\n"});let o=e.name+".csv",s=new File([i],o,{type:"text/csv"}),r=window.URL.createObjectURL(s),d=document.createElement("a");d.href=r,d.setAttribute("download",o),d.click(),d.remove()},D=e=>{let{simulation:t}=e,[a,D]=(0,n.useState)(!1),[z,I]=(0,n.useState)(),[N,_]=(0,n.useState)(),[B,F]=(0,n.useState)(),[K,R]=(0,n.useState)(),[U,V]=(0,n.useState)([!0]),[A,L]=(0,n.useState)(),[q,O]=(0,n.useState)(!1),[T]=S.Z.useSimulation(null==t?void 0:t.id);return((0,n.useEffect)(()=>{let e=null==T?void 0:T.tasks;if(!e){I(void 0),_(void 0),F(void 0);return}let t=e.map(e=>e.datas).filter(e=>e).flatMap(e=>e);if(!t.length||!t[0].names){_(void 0),F(void 0);return}t.sort((e,t)=>e.x-t.x);let a=t.map(e=>e.names).flatMap(e=>e).filter((e,t,a)=>a.findIndex(t=>t===e)===t),l=a.map(e=>(0,g.camelCase)(e)),n=[];t.forEach((e,t)=>{e.names.forEach((a,l)=>{let i=n.find(t=>t.x===e.x);i?i[(0,g.camelCase)(a)]=e.ys[l]:n.push({key:t,x:e.x,[(0,g.camelCase)(a)]:e.ys[l]})})}),I(n),_(a),F(l)},[T]),(0,n.useEffect)(()=>{if(!z||!N||!B){R(void 0);return}let e=N.map((e,t)=>({align:"center",className:"Data-column"+(U[t]?" Data-column-selected":""),title:(0,l.jsxs)(i.Z,{children:[e,(0,l.jsx)(o.Z,{"data-testid":"table-checkbox",checked:U[t],onChange:e=>V(Z(e,t,U)),children:(0,l.jsx)(x.Z,{style:{fontSize:20}})})]}),dataIndex:B[t],key:B[t]}));e.unshift({title:"",dataIndex:"x",key:"x",fixed:"left"}),R(e)},[z,N,B,U]),(0,n.useEffect)(()=>{if(!z||!N||!B){L(void 0);return}let e=[],t=U.map((t,a)=>{if(!t)return;let n=B[a],i=N[a];return e.push(n),(0,l.jsx)(m.x,{name:i,type:"monotone",dataKey:n,stroke:w.Z.stringToColor(n),strokeWidth:2},a)}).filter(e=>e),a=z.map(t=>{let a={x:t.x};return e.forEach(e=>{t[e]&&(a[e]=t[e])}),a}).filter(e=>e),n=Math.min(...e.flatMap(e=>a.map(t=>t[e]))),i=Math.max(...e.flatMap(e=>a.map(t=>t[e]))),o=i-n;L({data:a,min:n,max:i,domainMin:n-.1*o,domainMax:i+.1*o,lines:t})},[z,N,B,U]),t&&z&&N&&B)?(0,l.jsx)(s.Z,{style:{position:"absolute",zIndex:100,right:50,bottom:25,backgroundColor:"rgba(255, 255, 255, 0)"},children:(0,l.jsxs)(s.Z.Content,{children:[(0,l.jsx)(r.Z,{title:"Data visualization",children:(0,l.jsx)(d.Z,{type:"primary",icon:(0,l.jsx)(x.Z,{}),onClick:()=>D(!0),style:{width:40,height:40,border:"1px solid #5E14FA",borderRadius:20,marginBottom:-20}})}),(0,l.jsx)(c.Z,{title:"Data visualization",placement:"bottom",closable:!0,onClose:()=>D(!1),open:a,mask:!1,maskClosable:!1,height:"50vh",bodyStyle:{height:"100%",overflow:"hidden"},extra:(0,l.jsx)(u.Z.Button,{loading:q,disabled:!z,menu:{items:[{label:"Default separator: semicolon",key:"semicolon",disabled:!0},{label:"Separator: tab",key:"tab",onClick(){O(!0);try{M(t,z,N,B,"	")}catch(e){(0,C.lt)(E.download,e)}finally{O(!1)}}},{label:"Separator: comma",key:",",onClick(){O(!0);try{M(t,z,N,B,",")}catch(e){(0,C.lt)(E.download,e)}finally{O(!1)}}}]},onClick(){O(!0);try{M(t,z,N,B)}catch(e){(0,C.lt)(E.download,e)}finally{O(!1)}},children:"Export CSV"}),children:(0,l.jsxs)("div",{style:{display:"flex",height:"100%",padding:"10px",justifyContent:"space-between"},children:[(0,l.jsx)("div",{style:{display:"flex",height:"100%",width:"49%",overflow:"auto"},children:(0,l.jsx)(h.Z,{size:"small",sticky:!0,pagination:!1,dataSource:z,columns:K,scroll:{x:"calc(60vw)"}})}),(0,l.jsx)(f.h,{width:"49%",height:"100%",children:(0,l.jsxs)(p.w,{data:null==A?void 0:A.data,margin:{top:0,right:40,left:40,bottom:0},children:[(0,l.jsx)(y.q,{strokeDasharray:"3 3"}),(0,l.jsx)(k.K,{dataKey:"x"}),(0,l.jsx)(b.B,{domain:A?[A.domainMin,A.domainMax]:[-1,1],tickFormatter:e=>Number(e).toExponential(3)}),(0,l.jsx)(v.u,{}),(0,l.jsx)(j.D,{}),null==A?void 0:A.lines]})})]})})]})}):null};t.default=D}}]);