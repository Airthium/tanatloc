"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7317],{7317:function(e,t,a){a.r(t),a.d(t,{errors:function(){return E},exportCSV:function(){return D},onCheck:function(){return Z}});var l=a(85893),n=a(67294),i=a(26713),o=a(32808),s=a(97183),r=a(84908),d=a(71577),u=a(63463),c=a(5027),h=a(56299),x=a(18870),f=a(9253),m=a(51584),p=a(14195),v=a(3023),j=a(75358),y=a(14888),g=a(44141),k=a(96486),b=a(18436),w=a(67582),C=a(64376),S=a(23853);let E={download:"Unable to download CSV"},Z=(e,t,a)=>{let l=e.target.checked,n=[...a];return n[t]=l,n},D=(e,t,a,l)=>{let n="";n="x,"+a.join(",")+"\n",t.forEach(e=>{n+=e.x,null==l||l.forEach(t=>{void 0!==e[t]&&(n+=","+e[t])}),n+="\n"});let i=e.name+".csv",o=new File([n],i,{type:"text/csv"}),s=window.URL.createObjectURL(o),r=document.createElement("a");r.href=s,r.setAttribute("download",i),r.click(),r.remove()},M=e=>{let{simulation:t}=e,[a,M]=(0,n.useState)(!1),[z,I]=(0,n.useState)(),[_,K]=(0,n.useState)(),[N,R]=(0,n.useState)(),[U,V]=(0,n.useState)(),[A,B]=(0,n.useState)([!0]),[F,L]=(0,n.useState)(),[q,O]=(0,n.useState)(!1),[T]=S.Z.useSimulation(null==t?void 0:t.id);return((0,n.useEffect)(()=>{let e=null==T?void 0:T.tasks;if(!e){I(void 0),K(void 0),R(void 0);return}let t=e.map(e=>e.datas).filter(e=>e).flatMap(e=>e);if(!t.length||!t[0].names){K(void 0),R(void 0);return}t.sort((e,t)=>e.x-t.x);let a=t.map(e=>e.names).flatMap(e=>e).filter((e,t,a)=>a.findIndex(t=>t===e)===t),l=a.map(e=>(0,k.camelCase)(e)),n=[];t.forEach((e,t)=>{e.names.forEach((a,l)=>{let i=n.find(t=>t.x===e.x);i?i[(0,k.camelCase)(a)]=e.ys[l]:n.push({key:t,x:e.x,[(0,k.camelCase)(a)]:e.ys[l]})})}),I(n),K(a),R(l)},[T]),(0,n.useEffect)(()=>{if(!z||!_||!N){V(void 0);return}let e=_.map((e,t)=>({align:"center",className:"Data-column"+(A[t]?" Data-column-selected":""),title:(0,l.jsxs)(i.Z,{children:[e,(0,l.jsx)(o.Z,{checked:A[t],onChange:e=>B(Z(e,t,A)),children:(0,l.jsx)(h.Z,{style:{fontSize:20}})})]}),dataIndex:N[t],key:N[t]}));e.unshift({title:"",dataIndex:"x",key:"x"}),V(e)},[z,_,N,A]),(0,n.useEffect)(()=>{if(!z||!_||!N){L(void 0);return}let e=[],t=A.map((t,a)=>{if(!t)return;let n=N[a],i=_[a];return e.push(n),(0,l.jsx)(x.x,{name:i,type:"monotone",dataKey:n,stroke:C.Z.stringToColor(n),strokeWidth:2},a)}).filter(e=>e),a=z.map(t=>{let a={x:t.x};return e.forEach(e=>{t[e]&&(a[e]=t[e])}),a}).filter(e=>e),n=Math.min(...e.flatMap(e=>a.map(t=>t[e]))),i=Math.max(...e.flatMap(e=>a.map(t=>t[e])));L({data:a,min:n,max:i,lines:t})},[z,_,N,A]),t&&z&&_&&N)?(0,l.jsx)(s.Z,{style:{position:"absolute",zIndex:100,right:50,bottom:25,backgroundColor:"rgba(255, 255, 255, 0)"},children:(0,l.jsxs)(s.Z.Content,{children:[(0,l.jsx)(r.Z,{title:"Data visualization",children:(0,l.jsx)(d.Z,{type:"primary",icon:(0,l.jsx)(h.Z,{}),onClick:()=>M(!0),style:{width:40,height:40,border:"1px solid #5E14FA",borderRadius:20,marginBottom:-20}})}),(0,l.jsx)(u.Z,{title:"Data visualization",placement:"bottom",closable:!0,onClose:()=>M(!1),open:a,mask:!1,maskClosable:!1,height:"50vh",bodyStyle:{height:"100%",overflow:"hidden"},extra:(0,l.jsx)(b.o6,{bordered:!0,loading:q,disabled:!z,onDownload(){O(!0);try{D(t,z,_,N)}catch(e){(0,w.lt)(E.download,e)}finally{O(!1)}},children:"Export CSV"}),children:(0,l.jsxs)("div",{style:{display:"flex",height:"100%",padding:"10px"},children:[(0,l.jsx)("div",{style:{display:"flex",height:"100%",width:"50%",overflow:"auto"},children:(0,l.jsx)(c.Z,{size:"small",dataSource:z,columns:U,pagination:!1})}),(0,l.jsx)(f.h,{width:"50%",height:"100%",children:(0,l.jsxs)(m.w,{data:null==F?void 0:F.data,margin:{top:0,right:40,left:40,bottom:0},children:[(0,l.jsx)(p.q,{strokeDasharray:"3 3"}),(0,l.jsx)(v.K,{dataKey:"x"}),(0,l.jsx)(j.B,{domain:[(null==F?void 0:F.min)||-1,(null==F?void 0:F.max)||1]}),(0,l.jsx)(y.u,{}),(0,l.jsx)(g.D,{}),null==F?void 0:F.lines]})})]})})]})}):null};t.default=M}}]);