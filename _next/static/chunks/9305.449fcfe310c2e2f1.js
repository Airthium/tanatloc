(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9305],{29305:function(e,t,a){"use strict";a.r(t),a.d(t,{_exportCSV:function(){return E},errors:function(){return S}});var l=a(85893),n=a(67294),i=a(31059),o=a(1825),r=a(77834),s=a(36671),d=a(74048),c=a(2307),u=a(34700),m=a(56880),x=a(29009),h=a(75244),f=a(14195),y=a(3023),b=a(75358),k=a(26050),p=a(33558),j=a(8061),C=a(54509),_=a(54523),v=a(78804),g=a(97221),w=a(81229),M=a(85274),N=a.n(M);let S={download:"Unable to download CSV"},E=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:";",l="";l="x"+a+t.yNames.join(a)+"\n",t.points.forEach(e=>{l+=e.x,t.yNames.forEach(t=>{l+=a+e[t]}),l+="\n"});let n=e+".csv",i=new File([l],n,{type:"text/csv"}),o=window.URL.createObjectURL(i),r=document.createElement("a");r.href=o,r.setAttribute("download",n),r.click(),r.remove()},Z=e=>{let{name:t,index:a,selection:o,setSelection:r}=e,s=(0,n.useCallback)(e=>{let t=e.target.checked,l=[...o];l[a]=t,r(l)},[a,o,r]);return(0,l.jsxs)(d.default,{className:N().tableHead,children:[t,(0,l.jsx)(i.default,{"data-testid":"table-checkbox",checked:o[a],onChange:s,children:(0,l.jsx)(u.Z,{style:{fontSize:20}})})]})};t.default=e=>{let{simulation:t}=e,[a,i]=(0,n.useState)([!0]),[d,u]=(0,n.useState)(!1),{data:M,dispatch:D}=(0,n.useContext)(_.ZB),{dispatch:T}=(0,n.useContext)(j.uj),[q]=w.Z.useSimulation(null==t?void 0:t.id),z=(0,n.useMemo)(()=>{if("0"===q.id)return;let e=q.tasks;if(!e.length)return;let t=e.map(e=>e.datas).filter(e=>e).flat();if(!t.length)return;t.sort((e,t)=>e.x-t.x);let a=t[0].title,l=[];t.forEach(e=>l=[...new Set([...l,...e.names])]);let n=t.map(e=>{let t={x:e.x};for(let a of l){let l=e.names.indexOf(a);t[a]=-1===l?0:e.ys[l]}return t}),i={xName:a,yNames:l,points:n};return i},[q]),B=(0,n.useMemo)(()=>{if(!z)return;let e=z.yNames.map((e,t)=>({key:e,dataIndex:e,title:(0,l.jsx)(Z,{name:e,index:t,selection:a,setSelection:i}),align:"center"}));return e.unshift({key:"x",dataIndex:"x",title:z.xName,align:"center",fixed:"left"}),e},[z,a,i]),H=(0,n.useMemo)(()=>{if(!z)return;let e=g.Z.colorGenerator(a.length),t=a.map((t,a)=>{if(!t)return;let n=z.yNames[a],i=e[a];return(0,l.jsx)(m.x,{name:n,type:"monotone",dataKey:n,stroke:i,strokeWidth:2},n)}).filter(e=>e),n=z.points.map(e=>e.x),i=a.map((e,t)=>{if(!e)return;let a=z.yNames[t],l=z.points.map(e=>e[a]);return l}).filter(e=>e).flat(),o=Math.min(...i),r=Math.max(...i),s=r-o;return{xMin:Math.min(...n),xMax:Math.max(...n),yMin:o-.1*s,yMax:r+.1*s,lines:t}},[z,a]),I=(0,n.useCallback)(()=>D((0,v.a_)(!1)),[D]),K=(0,n.useCallback)(()=>{u(!0);try{E(null==t?void 0:t.name,z,"	")}catch(e){T((0,C.iT)({title:S.download,err:e}))}finally{u(!1)}},[t,z,T]),L=(0,n.useCallback)(()=>{u(!0);try{E(null==t?void 0:t.name,z,",")}catch(e){T((0,C.iT)({title:S.download,err:e}))}finally{u(!1)}},[t,z,T]),O=(0,n.useCallback)(()=>{u(!0);try{E(null==t?void 0:t.name,z)}catch(e){T((0,C.iT)({title:S.download,err:e}))}finally{u(!1)}},[null==t?void 0:t.name,z,T]),U=(0,n.useCallback)(e=>Number(e).toExponential(3),[]);return t&&z&&B?(0,l.jsx)(o.Z,{title:"Data visualization",placement:"bottom",closable:!0,onClose:I,open:M,mask:!1,maskClosable:!1,height:"50vh",styles:{body:{height:"100%",overflow:"hidden"}},extra:(0,l.jsx)(r.default.Button,{loading:d,menu:{items:[{label:"Default separator: semicolon",key:"semicolon",disabled:!0},{label:"Separator: tab",key:"tab",onClick:K},{label:"Separator: comma",key:",",onClick:L}]},onClick:O,children:"Export CSV"}),children:(0,l.jsxs)("div",{className:N().container,children:[(0,l.jsx)("div",{className:N().tableContainer,children:(0,l.jsx)(c.Z,{size:"small",sticky:!0,pagination:!1,dataSource:z.points,columns:B,scroll:{x:(B.length-1)*200}})}),(0,l.jsx)(x.h,{width:"49%",height:"100%",children:(null==H?void 0:H.lines.length)?(0,l.jsxs)(h.w,{data:z.points,margin:{top:0,right:40,left:40,bottom:0},children:[(0,l.jsx)(f.q,{strokeDasharray:"3 3"}),(0,l.jsx)(y.K,{dataKey:"x",domain:[H.xMin,H.xMax]}),(0,l.jsx)(b.B,{domain:[H.yMin,H.yMax],tickFormatter:U}),(0,l.jsx)(k.u,{}),(0,l.jsx)(p.D,{}),H.lines]}):(0,l.jsx)(s.default,{description:"No data to display"})})]})}):null}},85274:function(e){e.exports={variables:'"@/styles/variables.css"',colorPrimary:"#fad114",colorPrimary55:"#fad11455",data:"data_data__6TY8E",button:"data_button__WZosy",container:"data_container__qk8DL",tableContainer:"data_tableContainer__jfr5q",tableHead:"data_tableHead__OyI2w"}}}]);