(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{40528:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return r(73336)}])},15479:function(e,n,r){"use strict";r.d(n,{JT:function(){return i},ah:function(){return o},nq:function(){return a},tE:function(){return s},yL:function(){return t}});r(83454).env.AUTH_SECRET||new Array(33).join("a");var t=6,a=16,i=!0,s=!0,o=!0},81891:function(e,n,r){"use strict";r.d(n,{H:function(){return o}});var t=r(51438),a=r(28668),i=r(25892),s=r(91224),o=function(e){(0,a.Z)(r,e);var n=(0,s.Z)(r);function r(e){var a;return(0,t.Z)(this,r),(a=n.call(this,e.title)).title=e.title,a.name="APIError",a.render=e.render,a.err=e.err,a.type=e.type||"error",a}return r}((0,i.Z)(Error))},36574:function(e,n,r){"use strict";r.d(n,{Z:function(){return d}});var t=r(26042),a=r(8100),i=r(67294),s=r(87492),o=r(47568),u=r(20414),l=function(){var e=(0,o.Z)((function(e){var n;return(0,u.__generator)(this,(function(r){switch(r.label){case 0:return n={},[4,(0,s.R)("/api/system",(n.method="PUT",n.body=JSON.stringify(e),n))];case 1:return r.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),c={useSystem:function(){var e=(0,a.ZP)("/api/system",s._),n=e.data,r=e.error,o=e.mutate,u=!n,l=(null===n||void 0===n?void 0:n.system)||{},c=(0,i.useCallback)((function(e){o({system:(0,t.Z)({},l,e)})}),[l,o]);return[l,{mutateSystem:c,errorSystem:r,loadingSystem:u}]},update:l},d=c},51986:function(e,n,r){"use strict";r.d(n,{o:function(){return v}});var t=r(828),a=r(85893),i=r(81579),s=r(69677),o=r(15479),u=r(36574),l="Please enter a password",c=function(e){return"Your password is too small (minimum "+e+" characters)"},d=function(e){return"Your password is too long (maximum "+e+" characters)"},p="Your password must contain a letter",h="Your password must contain a number",f="Your password must contain a symbol",m=function(e,n){return-1!==e.search(n)},g=function(e,n,r){(function(e,n){var r,t;return!(null!==(t=null===e||void 0===e||null===(r=e.password)||void 0===r?void 0:r.requireLetter)&&void 0!==t?t:o.JT)||m(n,/[a-zA-Z]/)})(e,n)||r.push(p),function(e,n){var r,t;return!(null!==(t=null===e||void 0===e||null===(r=e.password)||void 0===r?void 0:r.requireNumber)&&void 0!==t?t:o.tE)||m(n,/\d/)}(e,n)||r.push(h),function(e,n){var r,t;return!(null!==(t=null===e||void 0===e||null===(r=e.password)||void 0===r?void 0:r.requireSymbol)&&void 0!==t?t:o.ah)||m(n,/[!@#$%^&*(){}[\]<>?/|.:;_-]/)}(e,n)||r.push(f)},v=function(e){var n,r,p,h,f=e.labelCol,m=e.wrapperCol,v=e.name,j=e.label,x=e.inputPlaceholder,w=e.inputAutoComplete,Z=e.edit,y=e.style,b=e.required,k=e.className,O=(0,t.Z)(u.Z.useSystem(),1)[0],z=null!==(p=null===O||void 0===O||null===(n=O.password)||void 0===n?void 0:n.min)&&void 0!==p?p:o.yL,_=null!==(h=null===O||void 0===O||null===(r=O.password)||void 0===r?void 0:r.max)&&void 0!==h?h:o.nq;return(0,a.jsx)(i.Z.Item,{className:k,labelCol:f,wrapperCol:m,name:v||"password",label:j||"Password",rules:[function(){return{validator:function(e,n){var r=[];return Z&&"******"===n?Promise.resolve():n?(function(e,n,r,t){(function(e,n){return!(n.length<e)})(e,r)||t.push(c(e)),function(e,n){return!(n.length>e)}(n,r)||t.push(d(n))}(z,_,n,r),g(O,n,r),r.length?Promise.reject(r):Promise.resolve()):Promise.reject(l)}}},{required:!!b,message:""}],style:y,children:(0,a.jsx)(s.Z.Password,{placeholder:x,autoComplete:w})})}},73336:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return Rt}});var t=r(85893),a=r(47568),i=r(828),s=r(20414),o=r(11163),u=r(67294),l=r(97183),c=r(66516),d=r(6880),p=r(41156),h=r(42952),f=r(55355),m=r(11186),g=r(25035),v=r(92443),j=r(59134),x=r.n(j),w=r(4147),Z=r(96844),y=r(75107),b=r(7614),k=r(27049),O=r(81579),z=r(69677),_=r(2944),P=r(62986),C=50,S=r(32834),N=r(26042),T=r(29815),U=r(8100),E=r(87492),q=function(){var e=(0,a.Z)((function(e){var n;return(0,s.__generator)(this,(function(r){switch(r.label){case 0:return n={},[4,(0,E.R)("/api/workspace",(n.method="POST",n.headers={Accept:"application/json"},n.body=JSON.stringify(e),n))];case 1:return[2,r.sent().json()]}}))}));return function(n){return e.apply(this,arguments)}}(),I=function(){var e=(0,a.Z)((function(e,n){var r;return(0,s.__generator)(this,(function(t){switch(t.label){case 0:return r={},[4,(0,E.R)("/api/workspace",(r.method="PUT",r.body=JSON.stringify({workspace:e,data:n}),r))];case 1:return t.sent(),[2]}}))}));return function(n,r){return e.apply(this,arguments)}}(),R=function(){var e=(0,a.Z)((function(e){var n;return(0,s.__generator)(this,(function(r){switch(r.label){case 0:return n={},[4,(0,E.R)("/api/workspace",(n.method="DELETE",n.body=JSON.stringify(e),n))];case 1:return r.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),A={useWorkspaces:function(){var e=(0,U.ZP)("/api/workspace",E._),n=e.data,r=e.error,t=e.mutate,a=!n,i=(null===n||void 0===n?void 0:n.workspaces)||[],s=(0,u.useCallback)((function(e){var n=(0,T.Z)(i).concat([e]);t({workspaces:n})}),[i,t]),o=(0,u.useCallback)((function(e){var n=i.filter((function(n){return n.id!==e.id}));t({workspaces:n})}),[i,t]),l=(0,u.useCallback)((function(e){var n=i.map((function(n){return n.id===e.id&&(n=(0,N.Z)({},n,e)),n}));t({workspaces:n})}),[i,t]);return[i,{addOneWorkspace:s,delOneWorkspace:o,mutateOneWorkspace:l,errorWorkspaces:r,loadingWorkspaces:a}]},add:q,update:I,del:R},D=A,W=r(26713),F=r(24093),H=r(68795),L=r(45278),G=r(84908),M=r(71577),B=r(20046),J=r(41641),Y=r(60877),V=r(94370),X="Unable to share",K=function(){var e=(0,a.Z)((function(e,n,r,t,a){var i,o,u,l,c,d,p,h,f;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,5,,6]),e?(i={},o={},u={},[4,D.update((i.id=e.id,i),[(o.key="groups",o.value=r,o),(u.key="users",u.value=t,u)])]):[3,2];case 1:return s.sent(),(l=Y.Z.deepCopy(e)).groups=r.map((function(e){return{id:e}})),l.users=t.map((function(e){return{id:e}})),a.mutateOneWorkspace(l),[3,4];case 2:return c={},d={},p={},[4,V.Z.update((c.id=n.id,c),[(d.key="groups",d.value=r,d),(p.key="users",p.value=t,p)])];case 3:s.sent(),(h=Y.Z.deepCopy(n)).groups=r.map((function(e){return{id:e}})),h.users=t.map((function(e){return{id:e}})),a.mutateOneProject(h),s.label=4;case 4:return[3,6];case 5:throw f=s.sent(),(0,Z.lt)(X,f),f;case 6:return[2]}}))}));return function(n,r,t,a,i){return e.apply(this,arguments)}}(),Q=function(e){var n=e.email;return(e.lastname||e.firstname)&&(n=e.lastname?e.lastname+" ":"",n+=e.firstname||""),n},$=function(e){var n=e.disabled,r=e.workspace,i=e.project,l=e.organizations,c=e.swr,p=e.style,h=(0,u.useState)(!1),f=h[0],m=h[1],g=(0,u.useState)(!1),v=g[0],j=g[1],w=(0,u.useState)([]),Z=w[0],y=w[1],b=(0,u.useState)([]),k=b[0],z=b[1],_=(0,u.useState)([]),P=_[0],C=_[1],N=(0,u.useState)([]),T=N[0],U=N[1],E=(0,o.useRouter)();(0,u.useEffect)((function(){var e=r||i,n=null===e||void 0===e?void 0:e.groups.map((function(e){return e.id})),t=null===e||void 0===e?void 0:e.users.map((function(e){return e.id}));C(n||[]),U(t||[])}),[r,i]),(0,u.useEffect)((function(){var e=l.map((function(e){var n=e.groups.map((function(e){return{key:e.id,title:e.name,value:e.id,type:"group"}}));return{key:e.id,title:e.name,value:e.id,disabled:!0,checkable:!1,children:n}})),n=[];l.forEach((function(e){e.owners.forEach((function(e){n.push({key:e.id,title:Q(e),value:e.id,type:"user"})})),e.users.forEach((function(e){n.push({key:e.id,title:Q(e),value:e.id,type:"user"})})),e.groups.forEach((function(e){e.users.forEach((function(e){n.push({key:e.id,title:Q(e),value:e.id,type:"user"})}))}))}));var r=n.filter((function(e,n,r){return r.findIndex((function(n){return n.key===e.key}))===n}));y(e),z(r)}),[l]);var q=null;return q=Z.length?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(O.Z.Item,{label:(0,t.jsxs)(t.Fragment,{children:["Share this ",r?"workspace":"project"," with organizations groups"]}),children:(0,t.jsx)(L.Z,{multiple:!0,treeCheckable:!0,treeDefaultExpandAll:!0,showCheckedStrategy:L.Z.SHOW_ALL,placeholder:"Select groups",dropdownStyle:{maxHeight:400,overflow:"auto"},className:"full-width",treeData:Z,value:P,onChange:function(e){return C(e)}})}),(0,t.jsx)(O.Z.Item,{label:(0,t.jsxs)(t.Fragment,{children:["Share this ",r?"workspace":"project"," with organizations users"]}),children:(0,t.jsx)(L.Z,{multiple:!0,treeCheckable:!0,treeDefaultExpandAll:!0,showCheckedStrategy:L.Z.SHOW_ALL,placeholder:"Select users",dropdownStyle:{maxHeight:400,overflow:"auto"},className:"full-width",treeData:k,value:T,onChange:function(e){return U(e)}})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("br",{}),(0,t.jsx)(d.Z.Text,{strong:!0,children:"There is no organization for now"}),(0,t.jsx)("br",{}),(0,t.jsxs)(d.Z.Text,{children:["You can create organizations and groups in the"," ",(0,t.jsx)(J.Qj,{onClick:function(){return E.push({pathname:"/dashboard",query:{page:"organizations"}})},children:"Organization menu"}),"."]})]}),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(G.Z,{title:"Share",children:(0,t.jsx)(M.Z,{className:"no-background "+((null===p||void 0===p?void 0:p.buttonLight)?"text-light ":"")+((null===p||void 0===p?void 0:p.buttonDark)?" text-dark ":"")+((null===p||void 0===p?void 0:p.buttonBordered)?" ":"no-border ")+(x()()?"display-none ":" "),disabled:n,type:n?"link":void 0,icon:(0,t.jsx)(B.Z,{}),onClick:function(){return m(!0)}},"share")}),(0,t.jsxs)(S.ZP,{title:"Share "+(r?"workspace":"project"),visible:f,onCancel:function(){return m(!1)},onOk:(0,a.Z)((function(){var e;return(0,s.__generator)(this,(function(n){switch(n.label){case 0:j(!0),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,K(r,i,P,T,c)];case 2:return n.sent(),j(!1),m(!1),[3,4];case 3:throw e=n.sent(),j(!1),e;case 4:return[2]}}))})),loading:v,children:[(0,t.jsxs)(d.Z.Title,{level:5,children:[r?"Workspace: ":"Project: ",(null===r||void 0===r?void 0:r.name)||(null===i||void 0===i?void 0:i.title)]}),q]})]})},ee=r(69396),ne="Unable to add a project",re=function(){var e=(0,a.Z)((function(e,n,r){var t,a,i,o,u;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),a={},[4,V.Z.add((a.id=e.id,a),n)];case 1:return t=s.sent(),r.addOneProject(t),i={},o={},r.mutateOneWorkspace((0,ee.Z)((0,N.Z)(i,e),(o.projects=(0,T.Z)(e.projects).concat([t.id]),o))),[2,t];case 2:throw u=s.sent(),(0,Z.lt)(ne,u),u;case 3:return[2]}}))}));return function(n,r,t){return e.apply(this,arguments)}}(),te=function(e){var n=e.workspace,r=e.swr,i=(0,u.useState)(!1),l=i[0],c=i[1],d=(0,u.useState)(!1),p=d[0],h=d[1],f=(0,o.useRouter)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(J.HS,{primary:!1,dark:!0,onAdd:function(){return c(!0)},children:"Create a new project"}),(0,t.jsxs)(S.ZP,{title:"Create a new project",visible:l,onCancel:function(){return c(!1)},onOk:function(){var e=(0,a.Z)((function(e){var t,a,i;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:h(!0),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,re(n,e,r)];case 2:return t=s.sent(),h(!1),c(!1),a={},f.push((a.pathname="/project",a.query={page:"workspaces",workspaceId:n.id,projectId:t.id},a)),[3,4];case 3:throw i=s.sent(),h(!1),i;case 4:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),loading:p,children:[(0,t.jsx)(O.Z.Item,{label:"Name",name:"title",rules:[{required:!0,message:"Name is required"},{max:C,message:"Max 50 characters"}],children:(0,t.jsx)(z.Z,{placeholder:"Project's name"})}),(0,t.jsx)(O.Z.Item,{label:"Description",name:"description",children:(0,t.jsx)(z.Z.TextArea,{showCount:!0,maxLength:120,placeholder:"Project's description"})})]})]})},ae=r(81474),ie=r(20550),se=r(61980),oe="Unable to edit a project",ue=function(){var e=(0,a.Z)((function(e,n,r){var t,a,i,o;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),t={},a={},i={},[4,V.Z.update((t.id=e.id,t),[(a.key="title",a.value=n.title,a),(i.key="description",i.value=n.description,i)])];case 1:return s.sent(),r.mutateOneProject(e),[3,3];case 2:throw o=s.sent(),(0,Z.lt)(oe,o),o;case 3:return[2]}}))}));return function(n,r,t){return e.apply(this,arguments)}}(),le=function(e){var n=e.disabled,r=e.project,i=e.swr,o=(0,u.useState)(!1),l=o[0],c=o[1],d=(0,u.useState)(!1),p=d[0],h=d[1];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(J.w6,{disabled:n,dark:!0,onEdit:function(){return c(!0)}}),(0,t.jsxs)(S.ZP,{title:'Edit "'+r.title+'" project',visible:l,onCancel:function(){return c(!1)},onOk:function(){var e=(0,a.Z)((function(e){var n;return(0,s.__generator)(this,(function(t){switch(t.label){case 0:h(!0),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,ue(r,e,i)];case 2:return t.sent(),h(!1),c(!1),[3,4];case 3:throw n=t.sent(),h(!1),n;case 4:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),loading:p,initialValues:{title:r.title,description:r.description},children:[(0,t.jsx)(O.Z.Item,{label:"Name",name:"title",rules:[{required:!0,message:"Name is required"},{max:C,message:"Max 50 characters"}],children:(0,t.jsx)(z.Z,{placeholder:"Project's name"})}),(0,t.jsx)(O.Z.Item,{label:"Description",name:"description",children:(0,t.jsx)(z.Z.TextArea,{placeholder:"Project's description",showCount:!0,maxLength:120})})]})]})},ce=r(14670),de="Unable to delete the project",pe=function(){var e=(0,a.Z)((function(e,n,r){var t,a,i,o,u;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),t={},a={},[4,V.Z.del((t.id=e.id,t),(a.id=n.id,a))];case 1:return s.sent(),i=e.projects.findIndex((function(e){return e===n.id})),e.projects=(0,T.Z)(e.projects.slice(0,i)).concat((0,T.Z)(e.projects.slice(i+1))),r.mutateOneWorkspace(e),o={},r.delOneProject((o.id=n.id,o)),[3,3];case 2:throw u=s.sent(),(0,Z.lt)(de,u),u;case 3:return[2]}}))}));return function(n,r,t){return e.apply(this,arguments)}}(),he=function(e){var n=e.disabled,r=e.workspace,i=e.project,o=e.swr,l=(0,u.useState)(!1),c=l[0],p=l[1];return(0,t.jsx)(J.m1,{disabled:n,loading:c,title:"Delete the project",text:(0,t.jsxs)(t.Fragment,{children:["Are you sure you want to delete the project"," ",(0,t.jsx)(d.Z.Text,{strong:!0,children:i.title}),"?",(0,t.jsx)(ce.Z,{type:"error",message:"If you delete the project, you will no longer be able to restore the archive"})]}),onDelete:(0,a.Z)((function(){return(0,s.__generator)(this,(function(e){switch(e.label){case 0:p(!0),e.label=1;case 1:return e.trys.push([1,,3,4]),[4,pe(r,i,o)];case 2:return e.sent(),[3,4];case 3:return p(!1),[7];case 4:return[2]}}))}))})},fe=r(78116),me=r(57546),ge=r(238),ve=r(48764).lW,je="Unable to archive project",xe="Unable to unarchive project on server",we="Unable to delete archive",Ze="Unable to upload archive",ye=function(){var e=(0,a.Z)((function(e,n,r){var t,a,i,o,u,l,c;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),t={},[4,V.Z.archive((t.id=n.id,t))];case 1:return[4,s.sent().blob()];case 2:return a=s.sent(),i=window.URL.createObjectURL(new Blob([a])),(o=document.createElement("a")).href=i,o.setAttribute("download",n.id+".tanatlocarchive"),o.click(),u={},l={},r.mutateOneProject((0,ee.Z)((0,N.Z)(u,n),(l.archived=!0,l))),r.mutateOneWorkspace(e),[3,4];case 3:throw c=s.sent(),(0,Z.lt)(je,c),c;case 4:return[2]}}))}));return function(n,r,t){return e.apply(this,arguments)}}(),be=function(){var e=(0,a.Z)((function(e,n,r){var t,a,i,o;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),t={},[4,V.Z.unarchiveFromServer((t.id=n.id,t))];case 1:return s.sent(),a={},i={},r.mutateOneProject((0,ee.Z)((0,N.Z)(a,n),(i.archived=!1,i))),r.mutateOneWorkspace(e),[3,3];case 2:throw o=s.sent(),(0,Z.lt)(xe,o),o;case 3:return[2]}}))}));return function(n,r,t){return e.apply(this,arguments)}}(),ke=function(){var e=(0,a.Z)((function(e){var n,r;return(0,s.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),n={},[4,V.Z.deleteArchiveFile((n.id=e.id,n))];case 1:return t.sent(),[3,3];case 2:return r=t.sent(),(0,Z.lt)(we,r),[3,3];case 3:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),Oe=function(){var e=(0,a.Z)((function(e){var n;return(0,s.__generator)(this,(function(r){return n=new FileReader,[2,new Promise((function(r){n.addEventListener("load",(function(){r(n.result)})),n.readAsArrayBuffer(e)}))]}))}));return function(n){return e.apply(this,arguments)}}(),ze=function(){var e=(0,a.Z)((function(e,n,r,t){var a,i,o,u,l;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:if("uploading"===r.file.status)return[2,!0];if("done"!==r.file.status)return[3,6];s.label=1;case 1:return s.trys.push([1,4,,5]),[4,Oe(r.file.originFileObj)];case 2:return a=s.sent(),i={},[4,V.Z.unarchiveFromFile((i.id=n.id,i),ve.from(a))];case 3:return s.sent(),o={},u={},t.mutateOneProject((0,ee.Z)((0,N.Z)(o,n),(u.archived=!1,u))),t.mutateOneWorkspace(e),[3,5];case 4:return l=s.sent(),(0,Z.lt)(Ze,l),[3,5];case 5:case 6:return[2,!1]}}))}));return function(n,r,t,a){return e.apply(this,arguments)}}(),_e=function(e){var n=e.disabled,r=e.workspace,i=e.project,o=e.swr,l=(0,u.useState)(!1),c=l[0],p=l[1],h=(0,u.useState)(!1),f=h[0],m=h[1];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S.ZP,{visible:c,loading:f,title:"Archive",onCancel:function(){return p(!1)},onOk:i.archived?void 0:(0,a.Z)((function(){var e;return(0,s.__generator)(this,(function(n){switch(n.label){case 0:m(!0),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,ye(r,i,o)];case 2:return n.sent(),m(!1),p(!1),[3,4];case 3:throw e=n.sent(),m(!1),e;case 4:return[2]}}))})),okButtonText:"Archive",children:i.archived?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(O.Z.Item,{label:"Restore archive from the server",tooltip:"This will restore the project from the server archive file.",children:(0,t.jsx)(M.Z,{loading:f,onClick:(0,a.Z)((function(){return(0,s.__generator)(this,(function(e){switch(e.label){case 0:m(!0),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,be(r,i,o)];case 2:return e.sent(),m(!1),p(!1),[3,4];case 3:return e.sent(),m(!1),[3,4];case 4:return[2]}}))})),children:"Restore archive from the server"})}),(0,t.jsx)(O.Z.Item,{label:"Restore archive from local file",tooltip:"This will restore the project from your local archive file (.tanatlocarchive file).",children:(0,t.jsx)(fe.Z,{action:"/api/noop",accept:".tanatlocarchive",showUploadList:!1,onChange:function(){var e=(0,a.Z)((function(e){var n;return(0,s.__generator)(this,(function(t){switch(t.label){case 0:return[4,ze(r,i,e,o)];case 1:return n=t.sent(),m(n),p(n),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),children:(0,t.jsx)(M.Z,{children:"Restore archive from archive file"})})}),(0,t.jsx)(O.Z.Item,{label:"Delete archive from the server",tooltip:"This will delete the archive file from the server, you will have to use a local copy to restore the project.",children:(0,t.jsx)(J.m1,{loading:f,bordered:!0,title:"Delete server archive",text:"Are you sure your want to delete the archive from the server?",onDelete:(0,a.Z)((function(){return(0,s.__generator)(this,(function(e){return[2,ke(i)]}))})),children:"Delete server archive"})})]}):(0,t.jsxs)(d.Z.Text,{children:["An archive will be downloaded and the project will not be editable anymore, archive the project \xab",i.title,"\xbb?"]})}),(0,t.jsx)(G.Z,{title:i.archived?"Manage archive":"Archive",children:(0,t.jsx)(M.Z,{disabled:n,type:"link",icon:i.archived?(0,t.jsx)(me.Z,{}):(0,t.jsx)(ge.Z,{}),onClick:function(){return p(!0)}})})]})},Pe=r(48764).lW,Ce=function(e){var n=e.user,r=e.page,a=e.workspace,i=e.projects,s=e.organizations,l=e.filter,c=e.sorter,p=e.swr,h=(0,u.useState)(!0),f=h[0],m=h[1],g=(0,u.useState)([]),v=g[0],j=g[1],x=(0,o.useRouter)();(0,u.useEffect)((function(){var e=i.map((function(e){var n,r,a,i,s;if(!l||(null===(r=null===(n=e.title)||void 0===n?void 0:n.toLowerCase())||void 0===r?void 0:r.includes(l.toLowerCase()))){var o;o=e.archived?(0,t.jsx)(P.Z,{description:"Archived project"}):e.avatar?(0,t.jsx)("img",{src:e&&Pe.from(e.avatar).toString(),alt:"Tanatloc"}):(0,t.jsx)(P.Z,{image:"images/empty.svg",description:"No preview yet."});var u=(0,t.jsxs)(W.Z,{direction:"vertical",className:"full-width text-left",children:[(0,t.jsxs)(d.Z.Text,{children:[(0,t.jsx)("b",{children:"Created:"})," ",new Date(e.createddate).toLocaleDateString()]}),(0,t.jsxs)(d.Z.Text,{children:[(0,t.jsx)("b",{children:"Last modified:"})," ",new Date(e.lastaccess).toLocaleDateString()]}),e.description&&(0,t.jsx)(d.Z.Paragraph,{ellipsis:{rows:4,tooltip:!0},children:e.description})]}),c=null===e||void 0===e||null===(a=e.owners)||void 0===a?void 0:a.map((function(e){return Y.Z.userToAvatar(e)})),p=null===e||void 0===e||null===(i=e.users)||void 0===i?void 0:i.map((function(e){return Y.Z.userToAvatar(e)})),h=null===e||void 0===e||null===(s=e.groups)||void 0===s?void 0:s.map((function(e){return Y.Z.groupToAvatar(e)}));return(0,ee.Z)((0,N.Z)({},e),{snapshotRender:o,descriptionRender:u,ownersRender:c,usersRender:p,groupsRender:h})}})).filter((function(e){return e}));switch(c){case"alphaAsc":e.sort((function(e,n){return e.title.localeCompare(n.title)}));break;case"alphaDesc":e.sort((function(e,n){return-1*e.title.localeCompare(n.title)}));break;case"modifiedDesc":e.sort((function(e,n){return new Date(n.lastaccess).getTime()-new Date(e.lastaccess).getTime()}))}j(e),m(!1)}),[i,l,c]);var w=function(e){x.push({pathname:"/project",query:{page:r,workspaceId:a.id,projectId:e.id}})};return f||p.loadingProjects?(0,t.jsx)(y.Z.Simple,{}):v.length?(0,t.jsx)(W.Z,{className:"marginBottom-20",wrap:!0,align:"start",size:20,children:v.map((function(e){var r,i,o,u;return(0,t.jsx)(ae.Z,{title:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Z.Paragraph,{ellipsis:{rows:2,tooltip:!0},children:e.title}),e.archived&&(0,t.jsx)(ie.Z,{children:"Archived"})]}),className:"Project-Card"+(e.archived?" archive":""),cover:(0,t.jsxs)(se.Z,{className:"Project-Carousel",dots:{className:"Project-Carousel-dots"},children:[(0,t.jsx)("div",{className:"Project-Carousel-snapshot"+(e.archived?" archive":""),onClick:function(){return!e.archived&&w({id:e.id})},children:e.snapshotRender}),(0,t.jsx)("div",{className:"Project-Carousel-description"+(e.archived?" archive":""),onClick:function(){return!e.archived&&w({id:e.id})},children:e.descriptionRender})]}),actions:[(0,t.jsx)(he,{disabled:!(null===e||void 0===e||null===(r=e.owners)||void 0===r?void 0:r.find((function(e){return e.id===(null===n||void 0===n?void 0:n.id)}))),workspace:{id:a.id,projects:a.projects},project:{id:e.id,title:e.title},swr:{mutateOneWorkspace:p.mutateOneWorkspace,delOneProject:p.delOneProject}},"delete"),(0,t.jsx)(_e,{disabled:!(null===e||void 0===e||null===(i=e.owners)||void 0===i?void 0:i.find((function(e){return e.id===(null===n||void 0===n?void 0:n.id)}))),workspace:{id:a.id},project:{archived:e.archived,id:e.id,title:e.title},swr:{mutateOneWorkspace:p.mutateOneWorkspace,mutateOneProject:p.mutateOneProject}},"archive"),(0,t.jsx)($,{disabled:!(null===e||void 0===e||null===(o=e.owners)||void 0===o?void 0:o.find((function(e){return e.id===(null===n||void 0===n?void 0:n.id)}))),project:{id:e.id,title:e.title,groups:e.groups,users:e.users},organizations:s,swr:{mutateOneProject:p.mutateOneProject},style:{buttonDark:!0}},"share"),(0,t.jsx)(le,{disabled:!(null===e||void 0===e||null===(u=e.owners)||void 0===u?void 0:u.find((function(e){return e.id===(null===n||void 0===n?void 0:n.id)}))),project:{id:e.id,title:e.title,description:e.description},swr:{mutateOneProject:p.mutateOneProject}},"edit")],children:(0,t.jsxs)("div",{style:{padding:"6px 0",display:"grid",gridTemplateColumns:"10fr 1fr 20fr",gridTemplateRows:"auto auto"},children:[(0,t.jsx)("div",{children:"Admin:"}),(0,t.jsx)("div",{}),(0,t.jsx)("div",{children:"Shared with:"}),(0,t.jsx)(F.C.Group,{maxCount:5,children:e.ownersRender}),(0,t.jsx)(k.Z,{type:"vertical",style:{height:"80%",borderColor:"#f0f0f0"}}),(0,t.jsxs)(F.C.Group,{children:[e.usersRender,e.groupsRender]})]})},e.id)}))}):(0,t.jsx)(P.Z,{image:"images/empty.svg",className:"Project-Empty",description:l?(0,t.jsxs)(t.Fragment,{children:["No project found with the current search"," ",(0,t.jsx)("span",{className:"Project-Empty-search-value",children:l}),"..."]}):(0,t.jsx)(t.Fragment,{children:"No project for now... Get started!"})})},Se="Unable to update the workspace",Ne=function(){var e=(0,a.Z)((function(e,n,r){var t,a,i,o;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),t=Y.Z.deepCopy(e),e.name=n.name,a={},i={},[4,D.update((a.id=e.id,a),[(i.key="name",i.value=n.name,i)])];case 1:return s.sent(),r.mutateOneWorkspace(t),[3,3];case 2:throw o=s.sent(),(0,Z.lt)(Se,o),o;case 3:return[2]}}))}));return function(n,r,t){return e.apply(this,arguments)}}(),Te=function(e){var n=e.workspace,r=e.swr,i=(0,u.useState)(!1),o=i[0],l=i[1],c=(0,u.useState)(!1),d=c[0],p=c[1];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(J.w6,{bordered:!0,dark:!0,onEdit:function(){return l(!0)}}),(0,t.jsx)(S.ZP,{visible:o,loading:d,title:"Edit a workspace",initialValues:{name:n.name},onCancel:function(){return l(!1)},onOk:function(){var e=(0,a.Z)((function(e){var t;return(0,s.__generator)(this,(function(a){switch(a.label){case 0:p(!0),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,Ne(n,e,r)];case 2:return a.sent(),p(!1),l(!1),[3,4];case 3:throw t=a.sent(),p(!1),t;case 4:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),children:(0,t.jsx)(O.Z.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Name is required"},{max:C,message:"Max 50 characters"}],children:(0,t.jsx)(z.Z,{placeholder:"Workspace's name"})})})]})},Ue="Unable to delete the workspace",Ee=function(){var e=(0,a.Z)((function(e,n){var r,t,a;return(0,s.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),r={},[4,D.del((r.id=e.id,r))];case 1:return i.sent(),t={},n.delOneWorkspace((t.id=e.id,t)),[3,3];case 2:throw a=i.sent(),(0,Z.lt)(Ue,a),a;case 3:return[2]}}))}));return function(n,r){return e.apply(this,arguments)}}(),qe=function(e){var n=e.workspace,r=e.swr,i=(0,u.useState)(!1),o=i[0],l=i[1];return(0,t.jsx)(J.m1,{bordered:!0,loading:o,text:"The projects contained in this workspace will be lost.",onDelete:(0,a.Z)((function(){return(0,s.__generator)(this,(function(e){switch(e.label){case 0:l(!0),e.label=1;case 1:return e.trys.push([1,,3,4]),[4,Ee(n,r)];case 2:return e.sent(),[3,4];case 3:return l(!1),[7];case 4:return[2]}}))}))})},Ie="Projects error",Re=function(e){var n,r,a,s,o,c,d=e.user,p=e.page,h=e.workspace,f=e.organizations,m=e.swr,g=(0,u.useState)(),v=g[0],j=g[1],x=(0,u.useState)(),w=x[0],y=x[1],k=(0,i.Z)(V.Z.useProjects(null===h||void 0===h?void 0:h.projects),2),O=k[0],P=k[1],C=P.addOneProject,S=P.delOneProject,N=P.mutateOneProject,T=P.errorProjects,U=P.loadingProjects;return(0,u.useEffect)((function(){T&&(0,Z.lt)(Ie,T)}),[T]),(0,t.jsxs)(l.Z,{className:"no-scroll",children:[(0,t.jsx)(b.Z,{className:"inWorkspace-PageHeader",backIcon:!1,footer:(0,t.jsxs)(W.Z,{direction:"horizontal",size:"large",className:"full-width lastchild-marginLeft-auto",children:[(0,t.jsx)(z.Z,{placeholder:"Enter a project name (case sensitive)",value:v,onChange:function(e){return j(e.target.value)},style:{width:500},suffix:(0,t.jsx)(H.Z,{className:"text-light"})}),(null===h||void 0===h||null===(n=h.owners)||void 0===n?void 0:n.find((function(e){return e.id===d.id})))?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(te,{workspace:{id:h.id,projects:h.projects},swr:{mutateOneWorkspace:m.mutateOneWorkspace,addOneProject:C}}),(0,t.jsxs)(W.Z,{size:8,children:[(0,t.jsx)(Te,{workspace:{id:h.id,name:h.name},swr:{mutateOneWorkspace:m.mutateOneWorkspace}}),(0,t.jsx)($,{workspace:{id:h.id,name:h.name,groups:h.groups,users:h.users},organizations:f,swr:{mutateOneWorkspace:m.mutateOneWorkspace},style:{buttonDark:!0,buttonBordered:!0}}),(0,t.jsx)(qe,{workspace:{id:h.id},swr:{delOneWorkspace:m.delOneWorkspace}})]})]}):(0,t.jsx)("div",{})]}),children:(null===(r=h.users)||void 0===r?void 0:r.length)||(null===(a=h.groups)||void 0===a?void 0:a.length)?(0,t.jsxs)("div",{className:"inWorkspace-shared",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"marginRight-10",children:"Admin:"}),(0,t.jsx)(F.C.Group,{maxCount:5,children:null===(s=h.owners)||void 0===s?void 0:s.map((function(e){return Y.Z.userToAvatar(e)}))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"marginRight-10",children:"Shared with:"}),(0,t.jsx)(F.C.Group,{maxCount:5,children:null===(o=h.users)||void 0===o?void 0:o.map((function(e){return Y.Z.userToAvatar(e)}))}),(0,t.jsx)(F.C.Group,{maxCount:5,children:null===(c=h.groups)||void 0===c?void 0:c.map((function(e){return Y.Z.groupToAvatar(e)}))})]})]}):null}),(0,t.jsxs)(_.Z,{className:"inWorkspace-Tabs",defaultActiveKey:"modifiedDesc",onChange:function(e){return y(e)},children:[(0,t.jsx)(_.Z.TabPane,{tab:"Last modified"},"modifiedDesc"),(0,t.jsx)(_.Z.TabPane,{tab:"Name (A-Z)"},"alphaAsc"),(0,t.jsx)(_.Z.TabPane,{tab:"Name (Z-A)"},"alphaDesc")]}),(0,t.jsx)(l.Z.Content,{className:"scroll",children:(0,t.jsx)(Ce,{user:d,page:p,workspace:{id:h.id,projects:h.projects},projects:O,organizations:f,filter:v,sorter:w,swr:{mutateOneWorkspace:m.mutateOneWorkspace,delOneProject:S,mutateOneProject:N,loadingProjects:U}})})]})},Ae="Unable to add the workspace",De=function(){var e=(0,a.Z)((function(e,n){var r,t;return(0,s.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,D.add(e)];case 1:return r=a.sent(),n.addOneWorkspace(r),[3,3];case 2:throw t=a.sent(),(0,Z.lt)(Ae,t),t;case 3:return[2]}}))}));return function(n,r){return e.apply(this,arguments)}}(),We=function(e){var n=e.swr,r=(0,u.useState)(!1),i=r[0],o=r[1],l=(0,u.useState)(!1),c=l[0],d=l[1];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(J.HS,{onAdd:function(){return d(!0)},children:"Create a new workspace"}),(0,t.jsx)(S.ZP,{visible:c,loading:i,title:"Create a new workspace",onCancel:function(){return d(!1)},onOk:function(){var e=(0,a.Z)((function(e){var r;return(0,s.__generator)(this,(function(t){switch(t.label){case 0:o(!0),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,De(e,n)];case 2:return t.sent(),o(!1),d(!1),[3,4];case 3:throw r=t.sent(),o(!1),r;case 4:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),children:(0,t.jsx)(O.Z.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Name is required"},{max:C,message:"Max 50 characters"}],children:(0,t.jsx)(z.Z,{placeholder:"Workspace's name"})})})]})},Fe="Unable to add the workspace",He=function(){var e=(0,a.Z)((function(e,n,r){var t,a,i;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,D.add(n)];case 1:return t=s.sent(),r.addOneWorkspace(t),a={},e.push((a.pathname="/dashboard",a.query={page:"workspaces",workspaceId:t.id},a)),[3,3];case 2:throw i=s.sent(),(0,Z.lt)(Fe,i),i;case 3:return[2]}}))}));return function(n,r,t){return e.apply(this,arguments)}}(),Le=function(e){var n=e.user,r=e.workspaces,i=e.organizations,c=e.swr,p=(0,u.useState)(!1),h=p[0],f=p[1],m=(0,u.useState)(!1),g=m[0],v=m[1],j=(0,o.useRouter)(),x=j.query,w=x.page,Z=x.workspaceId;return(0,t.jsxs)(l.Z,{className:"inDashboard Workspace no-scroll",children:[(0,t.jsx)(b.Z,{className:"inDashboard-PageHeader",backIcon:!1,title:(0,t.jsx)(d.Z.Title,{level:2,className:"inDashboard-PageHeader-title",children:"Workspaces"}),footer:(0,t.jsx)(k.Z,{})}),(0,t.jsx)(l.Z.Content,{className:"no-scroll",children:r.length?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S.ZP,{visible:h,loading:g,title:"Create a new workspace",onCancel:function(){return f(!1)},onOk:function(){var e=(0,a.Z)((function(e){var n;return(0,s.__generator)(this,(function(r){switch(r.label){case 0:v(!0),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,He(j,e,c)];case 2:return r.sent(),v(!1),f(!1),[3,4];case 3:throw n=r.sent(),v(!1),n;case 4:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),children:(0,t.jsx)(O.Z.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Name is required"},{max:C,message:"Max 50 characters"}],children:(0,t.jsx)(z.Z,{placeholder:"Workspace's name"})})}),(0,t.jsx)(_.Z,{type:"editable-card",className:"inDashboard-Tabs no-scroll",defaultActiveKey:Z||"1",onEdit:function(){return f(!0)},children:r.map((function(e){return(0,t.jsx)(_.Z.TabPane,{className:"no-scroll",tab:e.name,closable:!1,children:(0,t.jsx)(Re,{user:n,page:w||Ut.workspaces.key,workspace:{id:e.id,name:e.name,projects:e.projects,owners:e.owners,users:e.users,groups:e.groups},organizations:i,swr:{delOneWorkspace:c.delOneWorkspace,mutateOneWorkspace:c.mutateOneWorkspace}})},e.id)}))})]}):(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(P.Z,{image:"images/empty.svg",description:"No workspace for now. Get started !",children:(0,t.jsx)(We,{swr:{addOneWorkspace:c.addOneWorkspace}})})})})]})},Ge=r(87547),Me=r(88484),Be=r(81891),Je=r(67169),Ye=r(41686),Ve=r(48764).lW,Xe="Unable to update informations",Ke="Unable to upload image",Qe="Supported format: jpg, png",$e="Image must be smaller than 5MB",en=function(e){var n="image/jpeg"===e.type||"image/png"===e.type;n||(0,Z.lt)(Qe);var r=e.size/1024/1024<1;return r||(0,Z.lt)($e),n&&r},nn=function(){var e=(0,a.Z)((function(e){var n;return(0,s.__generator)(this,(function(r){return n=new FileReader,[2,new Promise((function(r){n.addEventListener("load",(function(){r(n.result)})),n.readAsDataURL(e)}))]}))}));return function(n){return e.apply(this,arguments)}}(),rn=function(){var e=(0,a.Z)((function(e,n,r){var t,a,i,o,u;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return"uploading"!==n.file.status?[3,1]:[2,!0];case 1:if("done"!==n.file.status)return[3,7];s.label=2;case 2:return s.trys.push([2,5,,6]),[4,nn(n.file.originFileObj)];case 3:return t=s.sent(),a={},[4,Ye.Z.add((a.name=n.file.name,a.uid=n.file.uid,a.data=t,a))];case 4:return s.sent(),i={},o={},r.mutateUser((0,ee.Z)((0,N.Z)(i,e),(o.avatar=Ve.from(t),o))),[3,6];case 5:return u=s.sent(),(0,Z.lt)(Ke,u),[3,6];case 6:case 7:return[2,!1];case 8:return[2]}}))}));return function(n,r,t){return e.apply(this,arguments)}}(),tn=function(){var e=(0,a.Z)((function(e,n,r){var t,a,i,o,u,l,c;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),t=[],a={},e.email!==n.email&&t.push((a.key="email",a.value=n.email,a)),i={},e.firstname!==n.firstname&&t.push((i.key="firstname",i.value=n.firstname,i)),o={},e.lastname!==n.lastname&&t.push((o.key="lastname",o.value=n.lastname,o)),t.length?[4,Je.Z.update(t)]:[2];case 1:return s.sent(),u={},r.mutateUser((u.email=n.email,u.firstname=n.firstname,u.lastname=n.lastname,u)),t.find((function(e){return"email"===e.key}))&&(0,Z.Ur)("Changes saved","A validation email has been send to "+n.email),[3,3];case 2:throw l=s.sent(),c={},new Be.H((c.title=Xe,c.err=l,c));case 3:return[2]}}))}));return function(n,r,t){return e.apply(this,arguments)}}(),an=function(e){var n=e.user,r=e.swr,i=(0,u.useState)(!1),o=i[0],l=i[1],c=(0,u.useState)(!1),d=c[0],p=c[1],h=(0,u.useState)(),f=h[0],m=h[1];return(0,t.jsx)(ae.Z,{title:"Contact Details",children:(0,t.jsxs)(W.Z,{direction:"horizontal",className:"Account-Information",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(F.C,{size:128,src:n.avatar&&Ve.from(n.avatar).toString(),icon:(0,t.jsx)(Ge.Z,{})}),(0,t.jsx)(fe.Z,{action:"/api/noop",accept:".jpg,.png",showUploadList:!1,beforeUpload:en,onChange:function(){var e=(0,a.Z)((function(e){var t;return(0,s.__generator)(this,(function(a){switch(a.label){case 0:return[4,rn(n,e,r)];case 1:return t=a.sent(),l(t),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),children:(0,t.jsx)(M.Z,{loading:o,icon:(0,t.jsx)(Me.Z,{}),children:"Upload new"})})]}),(0,t.jsx)("div",{children:(0,t.jsxs)(O.Z,(0,ee.Z)((0,N.Z)({},{labelCol:{span:4}}),{className:"max-width-500",initialValues:{email:n.email,firstname:n.firstname||"",lastname:n.lastname||""},onFinish:function(){var e=(0,a.Z)((function(e){var t;return(0,s.__generator)(this,(function(a){switch(a.label){case 0:p(!0),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,tn(n,e,r)];case 2:return a.sent(),m(null),[3,5];case 3:return t=a.sent(),m(t),[3,5];case 4:return p(!1),[7];case 5:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),children:[(0,t.jsx)(O.Z.Item,{label:"Email",name:"email",rules:[{type:"email",message:"This is not a valid email"},{max:C,message:"Max 50 characters"}],children:(0,t.jsx)(z.Z,{disabled:x()()})}),(0,t.jsx)(O.Z.Item,{label:"First name",name:"firstname",rules:[{max:C,message:"Max 50 characters"}],children:(0,t.jsx)(z.Z,{})}),(0,t.jsx)(O.Z.Item,{label:"Last name",name:"lastname",rules:[{max:C,message:"Max 50 characters"}],children:(0,t.jsx)(z.Z,{})}),(0,t.jsx)(Z.Xq,{error:f}),(0,t.jsx)(O.Z.Item,(0,ee.Z)((0,N.Z)({},{wrapperCol:{offset:4}}),{children:(0,t.jsx)(M.Z,{loading:d,type:"primary",htmlType:"submit",children:"Save changes"})}))]}))})]})})},sn=r(51986),on="Unable to check the password",un="Unable to update the password",ln="Password and confirmation mismatch",cn="Current password not valid",dn=function(){var e=(0,a.Z)((function(e,n){var r,t,a,i,o,u,l,c;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),t={},[4,Je.Z.check((t.email=e.email,t.password=n.password,t))];case 1:return r=s.sent(),[3,3];case 2:throw a=s.sent(),i={},new Be.H((i.title=on,i.err=a,i));case 3:if(o={},!r.valid)throw new Be.H((o.title=cn,o));s.label=4;case 4:return s.trys.push([4,6,,7]),u={},[4,Je.Z.update([(u.type="crypt",u.key="password",u.value=n.newPassword,u)])];case 5:return s.sent(),(0,Z.Ur)("Your password has been changed successfully"),[3,7];case 6:throw l=s.sent(),c={},new Be.H((c.title=un,c.err=l,c));case 7:return[2]}}))}));return function(n,r){return e.apply(this,arguments)}}(),pn=function(e){var n=e.user,r=(0,u.useState)(!1),i=r[0],o=r[1],l=(0,u.useState)(),c=l[0],d=l[1];return(0,t.jsx)(ae.Z,{title:"Your Password",children:(0,t.jsxs)(O.Z,(0,ee.Z)((0,N.Z)({},{labelCol:{offset:2},wrapperCol:{offset:2}}),{className:"max-width-500",layout:"vertical",onFinish:function(){var e=(0,a.Z)((function(e){var r;return(0,s.__generator)(this,(function(t){switch(t.label){case 0:o(!0),t.label=1;case 1:return t.trys.push([1,3,4,5]),[4,dn(n,e)];case 2:return t.sent(),d(null),[3,5];case 3:return r=t.sent(),d(r),[3,5];case 4:return o(!1),[7];case 5:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),name:"passwordForm",children:[(0,t.jsx)(O.Z.Item,{label:"Current password",name:"password",rules:[{required:!0,message:"Current password is required"}],children:(0,t.jsx)(z.Z.Password,{placeholder:"Current password"})}),(0,t.jsx)(sn.o,{name:"newPassword",label:"New password",inputPlaceholder:"Enter a new password",required:!0}),(0,t.jsx)(O.Z.Item,{label:"Password confirmation",name:"passwordConfirm",rules:[{required:!0,message:"Password confirmation is required"},function(e){var n=e.getFieldValue;return{validator:function(e,r){return r&&n("newPassword")!==r?Promise.reject(ln):Promise.resolve()}}}],children:(0,t.jsx)(z.Z.Password,{placeholder:"Confirm your new password"})}),(0,t.jsx)(Z.Xq,{error:c}),(0,t.jsx)(O.Z.Item,{children:(0,t.jsx)(W.Z,{children:(0,t.jsx)(M.Z,{type:"primary",htmlType:"submit",loading:i,children:"Modify password"})})})]}))})},hn=x()()?"http://localhost:3000":"",fn=function(){var e=(0,a.Z)((function(){return(0,s.__generator)(this,(function(e){switch(e.label){case 0:return[4,fetch(hn+"/api/logout")];case 1:return e.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),mn="Unable to delete the user",gn=function(){var e=(0,a.Z)((function(e){var n;return(0,s.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,Je.Z.del()];case 1:return r.sent(),[4,fn()];case 2:return r.sent(),e.clearUser(),[3,4];case 3:throw n=r.sent(),(0,Z.lt)(mn,n),n;case 4:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),vn=function(e){var n=e.swr,r=(0,u.useState)(!1),i=r[0],o=r[1];return(0,t.jsx)(ae.Z,{title:"Delete your account",children:(0,t.jsx)(J.m1,{title:"Delete your account",text:"This action cannot be undone. If you delete your account, you will permanently lose your workspaces and projects.",bordered:!0,loading:i,onDelete:(0,a.Z)((function(){return(0,s.__generator)(this,(function(e){switch(e.label){case 0:o(!0),e.label=1;case 1:return e.trys.push([1,,3,4]),[4,gn(n)];case 2:return e.sent(),[3,4];case 3:return o(!1),[7];case 4:return[2]}}))})),children:"Delete your account"})})},jn=r(11382),xn=r(4687),wn=r(45697),Zn=r.n(wn),yn=r(34041),bn=r(24443),kn="Unable to update plugins",On=function(){var e=(0,a.Z)((function(e,n,r,t){var a,i,o,u,l;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,5,,6]),n?(i=Y.Z.deepCopy(e),Object.keys(r).forEach((function(e){i.configuration[e].value=r[e]})),i.needReInit=!0,[4,bn.Z.update(i)]):[3,2];case 1:return s.sent(),null===(a=t.mutateOnePlugin)||void 0===a||a.call(t,i),[3,4];case 2:return u=Y.Z.deepCopy(e),Object.keys(r).forEach((function(e){u.configuration[e].value=r[e]})),[4,bn.Z.add(u)];case 3:s.sent(),null===(o=t.addOnePlugin)||void 0===o||o.call(t,u),s.label=4;case 4:return[3,6];case 5:throw l=s.sent(),(0,Z.lt)(kn,l),l;case 6:return[2]}}))}));return function(n,r,t,a){return e.apply(this,arguments)}}(),zn=function(e){var n=e.plugin,r=e.swr,i=e.edit,o=(0,u.useState)(!1),l=o[0],c=o[1],d=(0,u.useState)(!1),p=d[0],h=d[1],f=(0,u.useState)({}),m=f[0],g=f[1];return(0,u.useEffect)((function(){var e={};Object.keys(n.configuration).forEach((function(r){var t;e[r]=null!==(t=n.configuration[r].value)&&void 0!==t?t:n.configuration[r].default})),g(e)}),[null===n||void 0===n?void 0:n.configuration]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S.ZP,{title:n.name,visible:l,initialValues:m,onCancel:function(){return c(!1)},onOk:function(){var e=(0,a.Z)((function(e){var t;return(0,s.__generator)(this,(function(a){switch(a.label){case 0:h(!0),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,On(n,!!i,e,r)];case 2:return a.sent(),h(!1),c(!1),[3,4];case 3:throw t=a.sent(),h(!1),t;case 4:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),loading:p,children:Object.keys(n.configuration).map((function(e){var r=n.configuration[e];return"input"===r.type?function(e,n){return(0,t.jsx)(O.Z.Item,{name:n,label:e.label,htmlFor:"input-"+n,tooltip:e.tooltip,rules:e.rules,children:(0,t.jsx)(z.Z,(0,N.Z)({id:"input-"+n,autoComplete:"off"},e.props||{}))},e.label)}(r,e):"textarea"===r.type?function(e,n){return(0,t.jsx)(O.Z.Item,{name:n,label:e.label,htmlFor:"input-"+n,tooltip:e.tooltip,rules:e.rules,children:(0,t.jsx)(z.Z.TextArea,(0,N.Z)({id:"input-"+n,autoComplete:"off"},e.props||{}))},e.label)}(r,e):"password"===r.type?function(e,n){return(0,t.jsx)(O.Z.Item,{name:n,label:e.label,htmlFor:"input-"+n,tooltip:e.tooltip,rules:e.rules,children:(0,t.jsx)(z.Z,(0,N.Z)({id:"input-"+n,type:"password",autoComplete:"off"},e.props||{}))},e.label)}(r,e):"select"===r.type?function(e,n){return(0,t.jsx)(O.Z.Item,{name:n,label:e.label,htmlFor:"select-"+n,tooltip:e.tooltip,rules:e.rules,children:(0,t.jsx)(yn.Z,{id:"select-"+n,children:e.options.map((function(n){return(0,t.jsx)(yn.Z.Option,(0,ee.Z)((0,N.Z)({value:n},e.props||{}),{children:n}),n)}))})},e.label)}(r,e):(0,t.jsx)(t.Fragment,{})}))}),i?(0,t.jsx)(J.w6,{onEdit:function(){return c(!0)},children:"Edit"}):(0,t.jsxs)(J.HS,{onAdd:function(){return c(!0)},children:["Add a new \xab",n.name,"\xbb configuration"]})]})};zn.propTypes={plugin:Zn().exact({uuid:Zn().string,key:Zn().string.isRequired,name:Zn().string.isRequired,needInit:Zn().bool,configuration:Zn().object.isRequired,inUseConfiguration:Zn().object}).isRequired,swr:Zn().exact({addOnePlugin:Zn().func,mutateOnePlugin:Zn().func}).isRequired,edit:Zn().bool};var _n=zn,Pn="Unable to delete plugin",Cn=function(){var e=(0,a.Z)((function(e,n){var r,t;return(0,s.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),r={},[4,bn.Z.del((r.uuid=e.uuid,r))];case 1:return a.sent(),n.delOnePlugin(e),[3,3];case 2:throw t=a.sent(),(0,Z.lt)(Pn,t),t;case 3:return[2]}}))}));return function(n,r){return e.apply(this,arguments)}}(),Sn=function(e){var n,r=e.plugin,i=e.swr,o=(0,u.useState)(!1),l=o[0],c=o[1];return(0,t.jsx)(J.m1,{loading:l,title:"Delete plugin",text:(0,t.jsxs)(t.Fragment,{children:["Are you sure you want to delete the plugin"," ",(0,t.jsx)(d.Z.Text,{strong:!0,children:null===(n=r.configuration.name)||void 0===n?void 0:n.value}),"?"]}),onDelete:(0,a.Z)((function(){return(0,s.__generator)(this,(function(e){switch(e.label){case 0:c(!0),e.label=1;case 1:return e.trys.push([1,,3,4]),[4,Cn(r,i)];case 2:return e.sent(),[3,4];case 3:return c(!1),[7];case 4:return[2]}}))})),children:"Delete"})};Sn.propTypes={plugin:Zn().exact({uuid:Zn().string.isRequired,configuration:Zn().object.isRequired}).isRequired,swr:Zn().exact({delOnePlugin:Zn().func.isRequired}).isRequired};var Nn=Sn,Tn=function(e){var n=e.plugin,r=e.plugins,a=e.swr,i=(0,u.useState)([]),s=i[0],o=i[1];return(0,u.useEffect)((function(){var e=r.map((function(e){var r;if(e.key===n.key){var i=e.configuration,s=Object.keys(i).map((function(e){if("name"!==e){var n;if("textarea"===i[e].type){var r=i[e].value;n=(0,t.jsx)(d.Z.Paragraph,{children:(0,t.jsx)("pre",{children:(0,t.jsx)("code",{children:r})})})}else n="password"===i[e].type?(0,t.jsx)(d.Z.Text,{children:"******"}):(0,t.jsx)(d.Z.Text,{children:i[e].value});return(0,t.jsxs)(d.Z.Paragraph,{children:[(0,t.jsxs)(d.Z.Text,{strong:!0,children:[i[e].label,":"]})," ",n]},e)}})).filter((function(e){return e}));return(0,t.jsx)(ae.Z,{title:null===(r=i.name)||void 0===r?void 0:r.value,actions:[(0,t.jsx)(Nn,{plugin:{uuid:e.uuid,configuration:e.configuration},swr:{delOnePlugin:a.delOnePlugin}},"delete"),(0,t.jsx)(_n,{plugin:{uuid:e.uuid,key:e.key,name:e.name,needInit:e.needInit,configuration:e.configuration,inUseConfiguration:e.inUseConfiguration},swr:{mutateOnePlugin:a.mutateOnePlugin},edit:!0},"plugin")],children:s.length?s:(0,t.jsx)(d.Z.Text,{children:"No configuration data"})},e.uuid)}})).filter((function(e){return e}));o(e)}),[n,r,a]),(0,t.jsx)(W.Z,{direction:"horizontal",wrap:!0,size:20,children:s})};Tn.propTypes={plugin:Zn().exact({key:Zn().string.isRequired}).isRequired,plugins:Zn().arrayOf(Zn().exact({key:Zn().string.isRequired,uuid:Zn().string.isRequired,name:Zn().string.isRequired,configuration:Zn().object.isRequired,inUseConfiguration:Zn().object,data:Zn().object,needInit:Zn().bool,needReInit:Zn().bool}).isRequired).isRequired,swr:Zn().exact({delOnePlugin:Zn().func.isRequired,mutateOnePlugin:Zn().func.isRequired}).isRequired};var Un=Tn,En="Plugins error",qn=function(e){var n=e.plugin,r=(0,i.Z)(bn.Z.usePlugins(),2),a=r[0],s=r[1],o=s.addOnePlugin,l=s.delOnePlugin,c=s.mutateOnePlugin,d=s.errorPlugins,p=s.loadingPlugins;return(0,u.useEffect)((function(){d&&(0,Z.lt)(En,d)}),[d]),p?(0,t.jsx)(jn.Z,{}):(0,t.jsxs)(W.Z,{direction:"vertical",className:"full-width",children:[(0,t.jsx)(_n,{plugin:{uuid:n.uuid,key:n.key,name:n.name,needInit:n.needInit,configuration:n.configuration,inUseConfiguration:n.inUseConfiguration},swr:{addOnePlugin:o}}),(0,t.jsx)(Un,{plugin:{key:n.key},plugins:a,swr:{delOnePlugin:l,mutateOnePlugin:c}})]})};qn.propTypes={plugin:Zn().exact({key:Zn().string.isRequired,name:Zn().string.isRequired,needInit:Zn().bool,configuration:Zn().object.isRequired,inUseConfiguration:Zn().object}).isRequired};var In=qn,Rn="Unable to load plugins",An=function(){var e=(0,a.Z)((function(){var e,n,r,a,i;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,xn.Z.list()];case 1:return e=s.sent(),n=e.filter((function(e){return"HPC"===e.category})),r={},n.length?[2,n.map((function(e){return(0,t.jsx)(ae.Z,{title:e.name,children:(0,t.jsx)(In,{plugin:{key:e.key,name:e.name,needInit:!!e.needInit,configuration:e.configuration,inUseConfiguration:e.inUseConfiguration}})},e.key)}))]:[2,[(0,t.jsx)(ae.Z,(r.title="No access",r.children="You do not have access to any HPC plugin. Request it.",r),"no-access")]];case 2:return a=s.sent(),(0,Z.lt)(Rn,a),i={},[2,[(0,t.jsx)(ae.Z,(i.title="Error",i.children="Something led to an error. Please try again later.",i),"error")]];case 3:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),Dn=function(){var e=(0,u.useState)([(0,t.jsx)(ae.Z,{title:"Loading",children:(0,t.jsx)(jn.Z,{})},"loading")]),n=e[0],r=e[1];return(0,u.useEffect)((function(){An().then(r)}),[]),(0,t.jsx)(W.Z,{direction:"vertical",className:"full-width scroll",size:20,children:n})},Wn=function(e){var n=e.user,r=e.swr,a=(0,o.useRouter)(),i=a.query.tab;return(0,t.jsxs)(l.Z,{className:"inDashboard Account no-scroll",children:[(0,t.jsx)(b.Z,{className:"inDashboard-PageHeader",backIcon:!1,title:(0,t.jsx)(d.Z.Title,{level:2,className:"inDashboard-PageHeader-title",children:"Account Settings"}),footer:(0,t.jsx)(k.Z,{})}),(0,t.jsx)(l.Z.Content,{className:"no-scroll",children:(0,t.jsxs)(_.Z,{className:"inDashboard-Tabs no-scroll",type:"card",defaultActiveKey:i||"personal",onChange:function(e){return function(e,n){e.replace({pathname:"/dashboard",query:{page:"account",tab:n}})}(a,e)},children:[(0,t.jsx)(_.Z.TabPane,{tab:"Personal Information",children:(0,t.jsxs)(W.Z,{direction:"vertical",className:"full-width",size:20,children:[(0,t.jsx)(an,{user:{email:n.email,firstname:n.firstname,lastname:n.lastname,avatar:n.avatar},swr:{mutateUser:r.mutateUser}}),(0,t.jsx)(vn,{swr:{clearUser:r.clearUser}})]})},"personal"),!x()()&&(0,t.jsx)(_.Z.TabPane,{tab:"Security",children:(0,t.jsx)(W.Z,{direction:"vertical",className:"full-width",size:20,children:(0,t.jsx)(pn,{user:{email:n.email}})})},"security"),(0,t.jsx)(_.Z.TabPane,{className:"no-scroll",tab:"HPC Providers",children:(0,t.jsx)(Dn,{})},"hpc")]})})]})},Fn=r(82826),Hn=function(){var e=(0,a.Z)((function(e){var n;return(0,s.__generator)(this,(function(r){switch(r.label){case 0:return n={},[4,(0,E.R)("/api/organization",(n.method="POST",n.headers={Accept:"application/json"},n.body=JSON.stringify(e),n))];case 1:return[2,r.sent().json()]}}))}));return function(n){return e.apply(this,arguments)}}(),Ln=function(){var e=(0,a.Z)((function(e,n){var r;return(0,s.__generator)(this,(function(t){switch(t.label){case 0:return r={},[4,(0,E.R)("/api/organization",(r.method="PUT",r.body=JSON.stringify({organization:e,data:n}),r))];case 1:return t.sent(),[2]}}))}));return function(n,r){return e.apply(this,arguments)}}(),Gn=function(){var e=(0,a.Z)((function(e){var n;return(0,s.__generator)(this,(function(r){switch(r.label){case 0:return n={},[4,(0,E.R)("/api/organization",(n.method="DELETE",n.body=JSON.stringify(e),n))];case 1:return r.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),Mn=function(){var e=(0,a.Z)((function(e){var n;return(0,s.__generator)(this,(function(r){switch(r.label){case 0:return n={},[4,(0,E.R)("/api/organization/"+e.id,(n.method="PUT",n))];case 1:return r.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),Bn=function(){var e=(0,a.Z)((function(e){var n;return(0,s.__generator)(this,(function(r){switch(r.label){case 0:return n={},[4,(0,E.R)("/api/organization/"+e.id,(n.method="POST",n))];case 1:return r.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),Jn=function(){var e=(0,a.Z)((function(e){var n;return(0,s.__generator)(this,(function(r){switch(r.label){case 0:return n={},[4,(0,E.R)("/api/organization/"+e.id,(n.method="DELETE",n))];case 1:return r.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),Yn={useOrganizations:function(){var e=(0,U.ZP)("/api/organizations",E._),n=e.data,r=e.error,t=e.mutate,a=!n,i=(null===n||void 0===n?void 0:n.organizations)||[],s=(0,u.useCallback)((function(e){var n=(0,T.Z)(i).concat([(0,ee.Z)((0,N.Z)({},e),{pendingowners:[],users:[],pendingusers:[],groups:[]})]);t({organizations:n})}),[i,t]),o=(0,u.useCallback)((function(e){var n=i.filter((function(n){return n.id!==e.id}));t({organizations:n})}),[i,t]),l=(0,u.useCallback)((function(e){var n=i.map((function(n){return n.id===e.id&&(n=(0,N.Z)({},n,e)),n}));t({organizations:n})}),[i,t]);return[i,{addOneOrganization:s,delOneOrganization:o,mutateOneOrganization:l,errorOrganizations:r,loadingOrganizations:a}]},add:Hn,update:Ln,del:Gn,accept:Mn,decline:Bn,quit:Jn},Vn=Yn,Xn=r(25025),Kn="Unable to add user",Qn="This user already exists or its invite is pending",$n=function(){var e=(0,a.Z)((function(e,n,r,t){var a,i,o,u;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:if(a=function(e,n){var r,t,a,i,s=null===(r=n.owners)||void 0===r?void 0:r.find((function(n){return n.email===e.email})),o=null===(t=n.pendingowners)||void 0===t?void 0:t.find((function(n){return n.email===e.email})),u=null===(a=n.users)||void 0===a?void 0:a.find((function(n){return n.email===e.email})),l=null===(i=n.pendingusers)||void 0===i?void 0:i.find((function(n){return n.email===e.email}));return s||o||u||l}(r,e),a)throw(0,Z.lt)(Qn),new Error(Qn);s.label=1;case 1:return s.trys.push([1,3,,4]),i={},[4,Vn.update(e,[(i.key=n,i.type="array",i.method="append",i.value=r.email.trim(),i)])];case 2:return s.sent(),(o=Y.Z.deepCopy(e))[n]=(0,T.Z)(o[n]).concat([{email:r.email}]),t.mutateOneOrganization(o),[3,4];case 3:throw u=s.sent(),(0,Z.lt)(Kn,u),u;case 4:return[2]}}))}));return function(n,r,t,a){return e.apply(this,arguments)}}(),er=function(e){var n=e.title,r=e.organization,i=e.dBkey,o=e.swr,l=(0,u.useState)(!1),c=l[0],d=l[1],p=(0,u.useState)(!1),h=p[0],f=p[1];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S.ZP,{visible:c,loading:h,title:n,onCancel:function(){return d(!1)},onOk:function(){var e=(0,a.Z)((function(e){var n;return(0,s.__generator)(this,(function(t){switch(t.label){case 0:f(!0),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,$n(r,i,e,o)];case 2:return t.sent(),f(!1),d(!1),[3,4];case 3:throw n=t.sent(),f(!1),n;case 4:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),children:(0,t.jsx)(O.Z.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Email is required"}],children:(0,t.jsx)(z.Z,{})})}),(0,t.jsx)(J.HS,{onAdd:function(){return d(!0)},children:n})]})},nr="Unable to delete user",rr=function(){var e=(0,a.Z)((function(e,n,r,t){var a,i,o;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),a={},[4,Vn.update(e,[(a.key=r,a.type="array",a.method="remove",a.value=n.id,a)])];case 1:return s.sent(),(i=Y.Z.deepCopy(e))[r]=i[r].filter((function(e){return e.id!==n.id})),t.mutateOneOrganization(i),[3,3];case 2:throw o=s.sent(),(0,Z.lt)(nr,o),o;case 3:return[2]}}))}));return function(n,r,t,a){return e.apply(this,arguments)}}(),tr=function(e){var n=e.disabled,r=e.user,i=e.organization,o=e.dBkey,l=e.swr,c=(0,u.useState)(!1),p=c[0],h=c[1],f=(0,u.useCallback)((function(e){return e.firstname||e.lastname?e.firstname+" "+e.lastname:e.email}),[]);return(0,t.jsx)(J.m1,{bordered:!0,disabled:n,title:"Delete organization",text:(0,t.jsxs)(t.Fragment,{children:["Are you sure you want to delete the user"," ",(0,t.jsx)(d.Z.Text,{strong:!0,children:f(r)}),"?"]}),loading:p,onDelete:(0,a.Z)((function(){return(0,s.__generator)(this,(function(e){switch(e.label){case 0:h(!0),e.label=1;case 1:return e.trys.push([1,,3,4]),[4,rr(i,r,o,l)];case 2:return e.sent(),[3,4];case 3:return h(!1),[7];case 4:return[2]}}))}))})},ar=function(e){var n,r,a,i=e.organization,s=e.swr,o=(0,u.useState)(),l=o[0],c=o[1],d=(0,u.useState)(),p=d[0],h=d[1],f=(0,u.useRef)(null),m=(0,u.useRef)(null),g=(0,u.useRef)(null),v=[{key:"avatar",dataIndex:"avatar",render:function(e,n){return Y.Z.userToAvatar(n)}},{key:"lastname",title:"Lastname",dataIndex:"lastname"},{key:"firstname",title:"Firstname",dataIndex:"firstname"},{key:"email",title:"Email",dataIndex:"email"}],j=(0,T.Z)(v).concat([{key:"actions",title:"Actions",align:"center",fixed:"right",width:75,render:function(e){return(0,t.jsx)(tr,{disabled:i.owners.length<2&&!e.pending,user:{id:e.id,email:e.email},organization:{id:i.id,owners:i.owners,pendingowners:i.pendingowners,users:i.users,pendingusers:i.pendingusers},dBkey:e.pending?"pendingowners":"owners",swr:{mutateOneOrganization:s.mutateOneOrganization}})}}]),x=(0,T.Z)(v).concat([{key:"actions",title:"Actions",align:"center",fixed:"right",width:75,render:function(e){return(0,t.jsx)(tr,{user:{id:e.id,email:e.email,firstname:e.firstname,lastname:e.lastname},organization:{id:i.id,owners:i.owners,pendingowners:i.pendingowners,users:i.users,pendingusers:i.pendingusers},dBkey:e.pending?"pendingusers":"users",swr:{mutateOneOrganization:s.mutateOneOrganization}})}}]),w=(0,u.useCallback)((function(){var e=f.current;if(e){var n=(e.clientHeight-15)/2-39-12-32-20-75,r=e.clientHeight,t=e.clientHeight;c(r>n?{y:n}:void 0),h(t>n?{y:n}:void 0)}}),[]);return(0,u.useEffect)((function(){return window.addEventListener("resize",w),function(){window.removeEventListener("resize",w)}}),[w]),(0,u.useEffect)((function(){w()}),[i,w]),(0,t.jsx)("div",{ref:f,style:{height:"calc(100vh - 228px)"},children:(0,t.jsxs)(W.Z,{direction:"vertical",className:"full-width",size:20,children:[(0,t.jsx)(ae.Z,{title:"Administrators",size:"small",children:(0,t.jsxs)(W.Z,{direction:"vertical",className:"full-width",size:20,children:[(0,t.jsx)(er,{title:"New administrator",organization:{id:i.id,owners:i.owners,pendingowners:i.pendingowners,pendingusers:i.pendingusers,users:i.users},dBkey:"owners",swr:{mutateOneOrganization:s.mutateOneOrganization}}),(0,t.jsx)(Xn.Z,{loading:s.loadingOrganizations,pagination:!1,size:"small",columns:j,dataSource:(0,T.Z)(i.owners.map((function(e){return(0,ee.Z)((0,N.Z)({},e),{key:e.id})}))).concat((0,T.Z)(null===(n=i.pendingowners)||void 0===n?void 0:n.map((function(e){return(0,ee.Z)((0,N.Z)({},e),{pending:!0,key:e.id})})))),scroll:{y:null===l||void 0===l?void 0:l.y},ref:m})]})}),(0,t.jsx)(ae.Z,{title:"Users",size:"small",children:(0,t.jsxs)(W.Z,{direction:"vertical",className:"full-width",size:20,children:[(0,t.jsx)(er,{title:"New user",organization:{id:i.id,owners:i.owners,pendingowners:i.pendingowners,pendingusers:i.pendingusers,users:i.users},dBkey:"users",swr:{mutateOneOrganization:s.mutateOneOrganization}}),(0,t.jsx)(Xn.Z,{loading:null===s||void 0===s?void 0:s.loadingOrganizations,pagination:!1,size:"small",columns:x,dataSource:(0,T.Z)(null===(r=i.users)||void 0===r?void 0:r.map((function(e){return(0,ee.Z)((0,N.Z)({},e),{key:e.id})}))).concat((0,T.Z)(null===(a=i.pendingusers)||void 0===a?void 0:a.map((function(e){return(0,ee.Z)((0,N.Z)({},e),{pending:!0,key:e.id})})))),scroll:{y:null===p||void 0===p?void 0:p.y},ref:g})]})})]})})},ir=function(){var e=(0,a.Z)((function(e,n){var r;return(0,s.__generator)(this,(function(t){switch(t.label){case 0:return r={},[4,(0,E.R)("/api/group",(r.method="POST",r.body=JSON.stringify({organization:e,group:n}),r))];case 1:return[2,t.sent().json()]}}))}));return function(n,r){return e.apply(this,arguments)}}(),sr=function(){var e=(0,a.Z)((function(e,n){var r;return(0,s.__generator)(this,(function(t){switch(t.label){case 0:return r={},[4,(0,E.R)("/api/group",(r.method="PUT",r.body=JSON.stringify({group:e,data:n}),r))];case 1:return t.sent(),[2]}}))}));return function(n,r){return e.apply(this,arguments)}}(),or=function(){var e=(0,a.Z)((function(e){var n;return(0,s.__generator)(this,(function(r){switch(r.label){case 0:return n={},[4,(0,E.R)("/api/group",(n.method="DELETE",n.body=JSON.stringify(e),n))];case 1:return r.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),ur={useGroups:function(e){var n=(0,U.ZP)("/api/groups/"+e,E._),r=n.data,t=n.error,a=n.mutate,i=!r,s=(null===r||void 0===r?void 0:r.groups)||[],o=(0,u.useCallback)((function(e){var n=(0,T.Z)(s).concat([e]);a({groups:n})}),[s,a]),l=(0,u.useCallback)((function(e){var n=s.filter((function(n){return n.id!==e.id}));a({groups:n})}),[s,a]),c=(0,u.useCallback)((function(e){var n=s.map((function(n){return n.id===e.id&&(n=(0,N.Z)({},n,e)),n}));a({groups:n})}),[s,a]);return[s,{addOneGroup:o,delOneGroup:l,mutateOneGroup:c,errorGroups:t,loadingGroups:i}]},add:ir,update:sr,del:or},lr=ur,cr="Unable to delete group",dr=function(){var e=(0,a.Z)((function(e,n){var r,t,a;return(0,s.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),r={},[4,lr.del((r.id=e.id,r))];case 1:return i.sent(),t={},n.delOneGroup((t.id=e.id,t)),[3,3];case 2:throw a=i.sent(),(0,Z.lt)(cr,a),a;case 3:return[2]}}))}));return function(n,r){return e.apply(this,arguments)}}(),pr=function(e){var n=e.group,r=e.swr,i=(0,u.useState)(!1),o=i[0],l=i[1];return(0,t.jsx)(J.m1,{bordered:!0,title:"Delete group",text:(0,t.jsxs)(t.Fragment,{children:["Are you sure you want to delete the group"," ",(0,t.jsx)(d.Z.Text,{strong:!0,children:n.name}),"?"]}),loading:o,onDelete:(0,a.Z)((function(){return(0,s.__generator)(this,(function(e){switch(e.label){case 0:l(!0),e.label=1;case 1:return e.trys.push([1,,3,4]),[4,dr(n,r)];case 2:return e.sent(),[3,4];case 3:return l(!1),[7];case 4:return[2]}}))}))})},hr="Unable to add group",fr="Unable to update group",mr=function(){var e=(0,a.Z)((function(e,n,r){var t,a,i,o,u,l,c;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),a={},i={},[4,lr.add((a.id=e.id,a),(i.name=n.name,i.users=n.users,i))];case 1:return t=s.sent(),o={},u={},r.addOneGroup((0,ee.Z)((0,N.Z)(o,t),(u.name=n.name,u.users=n.users,u))),l={},r.mutateOneOrganization((l.id=e.id,l.groups=(0,T.Z)(e.groups).concat([t]),l)),[3,3];case 2:throw c=s.sent(),(0,Z.lt)(hr,c),c;case 3:return[2]}}))}));return function(n,r,t){return e.apply(this,arguments)}}(),gr=function(){var e=(0,a.Z)((function(e,n,r,t){var a,i,o,u,l,c,d,p,h,f,m,g;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),l=[],c={},n.name!==r.name&&l.push((c.key="name",c.value=r.name,c)),d={},(null===(a=n.users)||void 0===a?void 0:a.map((function(e){return e.id})).toString())!==r.users.toString()&&l.push((d.key="users",d.value=r.users,d)),l.length?(p={},[4,lr.update((p.id=n.id,p),l)]):[2];case 1:return s.sent(),h={},t.mutateOneGroup((0,N.Z)(h,n,r)),f=null===(i=e.groups)||void 0===i?void 0:i.findIndex((function(e){return e.id===n.id})),m={},t.mutateOneOrganization((m.id=e.id,m.groups=(0,T.Z)(null===(o=e.groups)||void 0===o?void 0:o.slice(0,f)).concat([n],(0,T.Z)(null===(u=e.groups)||void 0===u?void 0:u.slice(f+1))),m)),[3,3];case 2:throw g=s.sent(),(0,Z.lt)(fr,g),g;case 3:return[2]}}))}));return function(n,r,t,a){return e.apply(this,arguments)}}(),vr=function(e){var n,r=e.userOptions,i=e.organization,o=e.group,l=e.swr,c=(0,u.useState)(!1),d=c[0],p=c[1],h=(0,u.useState)(!1),f=h[0],m=h[1];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(S.ZP,{title:o?"Edit group":"New group",visible:d,initialValues:o&&{name:o.name,users:null===(n=o.users)||void 0===n?void 0:n.map((function(e){return e.id}))},onCancel:function(){return p(!1)},onOk:function(){var e=(0,a.Z)((function(e){var n,r,t;return(0,s.__generator)(this,(function(a){switch(a.label){case 0:m(!0),a.label=1;case 1:return a.trys.push([1,6,,7]),o?[4,gr(i,o,e,((n={}).mutateOneOrganization=l.mutateOneOrganization,n.mutateOneGroup=l.mutateOneGroup,n))]:[3,3];case 2:return a.sent(),[3,5];case 3:return[4,mr(i,e,((r={}).mutateOneOrganization=l.mutateOneOrganization,r.addOneGroup=l.addOneGroup,r))];case 4:a.sent(),a.label=5;case 5:return m(!1),p(!1),[3,7];case 6:throw t=a.sent(),m(!1),t;case 7:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),loading:f,children:[(0,t.jsx)(O.Z.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Name is requried"}],children:(0,t.jsx)(z.Z,{})}),(0,t.jsx)(O.Z.Item,{name:"users",label:"Users",rules:[{required:!0,message:"Users selection is required"}],children:(0,t.jsx)(yn.Z,{mode:"multiple",placeholder:"Select users",options:r})})]}),o?(0,t.jsx)(J.w6,{bordered:!0,onEdit:function(){return p(!0)},children:"Edit"}):(0,t.jsx)(J.HS,{onAdd:function(){return p(!0)},children:"New group"})]})},jr="Groups error",xr=function(e){var n=e.organization,r=e.swr,a=(0,u.useState)([]),s=a[0],o=a[1],l=(0,u.useState)(null),c=l[0],d=l[1],p=(0,u.useRef)(null),h=(0,i.Z)(lr.useGroups(n.id),2),f=h[0],m=h[1],g=m.addOneGroup,v=m.mutateOneGroup,j=m.delOneGroup,x=m.errorGroups,w=m.loadingGroups;(0,u.useEffect)((function(){var e=n.owners,r=null===n||void 0===n?void 0:n.users,t=(0,T.Z)(e).concat((0,T.Z)(r)).map((function(e){return{label:e.firstname||e.lastname?e.firstname+" "+e.lastname:e.email,value:e.id}}));o(t)}),[n]),(0,u.useEffect)((function(){x&&(0,Z.lt)(jr,x)}),[x]);var y=[{title:"Group name",dataIndex:"name",key:"name"},{title:"Users",dataIndex:"users",key:"users",render:function(e){return(0,t.jsx)(F.C.Group,{maxCount:5,children:e.map((function(e){return Y.Z.userToAvatar(e)}))})}},{title:"Actions",key:"actions",render:function(e,a){return(0,t.jsxs)(W.Z,{children:[(0,t.jsx)(vr,{userOptions:s,organization:{id:n.id,groups:n.groups},group:{id:a.id,name:a.name,users:a.users},swr:{mutateOneOrganization:r.mutateOneOrganization,mutateOneGroup:v}}),(0,t.jsx)(pr,{group:{id:a.id,name:a.name},swr:{delOneGroup:j}})]})}}],b=(0,u.useCallback)((function(){var e=p.current;e&&(e.clientHeight>window.innerHeight-e.offsetTop-59?d({y:window.innerHeight-e.offsetTop-59}):d(null))}),[]);return(0,u.useEffect)((function(){return window.addEventListener("resize",b),function(){window.removeEventListener("resize",b)}}),[b]),(0,u.useEffect)((function(){b()}),[f,b]),(0,t.jsxs)(W.Z,{direction:"vertical",className:"full-width",size:20,children:[(0,t.jsx)(vr,{userOptions:s,organization:{id:n.id,groups:n.groups},swr:{mutateOneOrganization:r.mutateOneOrganization,addOneGroup:g}}),(0,t.jsx)(Xn.Z,{loading:w,pagination:!1,size:"small",columns:y,dataSource:f.map((function(e){return(0,N.Z)({key:e.id},e)})),scroll:{y:null===c||void 0===c?void 0:c.y},ref:p})]})},wr="Unable to update organization's name",Zr=function(){var e=(0,a.Z)((function(e,n,r){var t,a,i,o;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),t={},[4,Vn.update(e,[(t.key="name",t.value=n,t)])];case 1:return s.sent(),a={},i={},r.mutateOneOrganization((0,ee.Z)((0,N.Z)(a,e),(i.name=n,i))),[3,3];case 2:return o=s.sent(),(0,Z.lt)(wr,o),[3,3];case 3:return[2]}}))}));return function(n,r,t){return e.apply(this,arguments)}}(),yr=function(e){var n=e.organization,r=e.swr,i=e.onClose;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"display-flex",children:[(0,t.jsx)(M.Z,{className:"marginRight-20",icon:(0,t.jsx)(Fn.Z,{}),onClick:function(){return i()}}),(0,t.jsx)(d.Z.Title,{level:3,editable:{onChange:function(){var e=(0,a.Z)((function(e){var t;return(0,s.__generator)(this,(function(a){return[2,Zr(n,e,((t={}).mutateOneOrganization=r.mutateOneOrganization,t))]}))}));return function(n){return e.apply(this,arguments)}}()},children:n.name})]}),(0,t.jsxs)(_.Z,{children:[(0,t.jsx)(_.Z.TabPane,{tab:"Users",children:(0,t.jsx)(ar,{organization:{id:n.id,owners:n.owners,pendingowners:n.pendingowners,users:n.users,pendingusers:n.pendingusers},swr:{mutateOneOrganization:r.mutateOneOrganization,loadingOrganizations:r.loadingOrganizations}})},"users"),(0,t.jsx)(_.Z.TabPane,{tab:"Groups",children:(0,t.jsx)(xr,{organization:{id:n.id,owners:n.owners,users:n.users,groups:n.groups},swr:{mutateOneOrganization:r.mutateOneOrganization}})},"groups")]})]})},br="Unable to add organization",kr=function(){var e=(0,a.Z)((function(e,n){var r,t,a;return(0,s.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),t={},[4,Vn.add((t.name=e.name,t))];case 1:return(r=i.sent()).name=e.name,n.addOneOrganization(r),[3,3];case 2:throw a=i.sent(),(0,Z.lt)(br,a),a;case 3:return[2]}}))}));return function(n,r){return e.apply(this,arguments)}}(),Or=function(e){var n=e.swr,r=(0,u.useState)(!1),i=r[0],o=r[1],l=(0,u.useState)(!1),c=l[0],d=l[1];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S.ZP,{title:"New organization",visible:i,onCancel:function(){return o(!1)},onOk:function(){var e=(0,a.Z)((function(e){var r;return(0,s.__generator)(this,(function(t){switch(t.label){case 0:d(!0),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,kr(e,n)];case 2:return t.sent(),d(!1),o(!1),[3,4];case 3:throw r=t.sent(),d(!1),r;case 4:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),loading:c,children:(0,t.jsx)(O.Z.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Name is required"}],children:(0,t.jsx)(z.Z,{})})}),(0,t.jsx)(J.HS,{onAdd:function(){return o(!0)},children:"New organization"})]})},zr=r(75768),_r=r(8751),Pr=r(18429),Cr="Unable to delete the organization",Sr=function(){var e=(0,a.Z)((function(e,n){var r,t,a;return(0,s.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),r={},[4,Vn.del((r.id=e.id,r))];case 1:return i.sent(),t={},n.delOneOrganization((t.id=e.id,t)),[3,3];case 2:throw a=i.sent(),(0,Z.lt)(Cr,a),a;case 3:return[2]}}))}));return function(n,r){return e.apply(this,arguments)}}(),Nr=function(e){var n=e.organization,r=e.swr,i=(0,u.useState)(!1),o=i[0],l=i[1];return(0,t.jsx)(J.m1,{bordered:!0,title:"Delete organization",text:(0,t.jsxs)(t.Fragment,{children:["Are you sure you want to delete the organization"," ",(0,t.jsx)(d.Z.Text,{strong:!0,children:n.name}),"?"]}),onDelete:(0,a.Z)((function(){return(0,s.__generator)(this,(function(e){switch(e.label){case 0:l(!0),e.label=1;case 1:return e.trys.push([1,,3,4]),[4,Sr(n,r)];case 2:return e.sent(),[3,4];case 3:return l(!1),[7];case 4:return[2]}}))})),loading:o})},Tr="Unable to quit organization",Ur="Unable to accept invitation",Er="Unable to decline invitation",qr=function(){var e=(0,a.Z)((function(e,n,r){var t,a,i,o;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),t={},[4,Vn.quit((t.id=e.id,t))];case 1:return s.sent(),a=Y.Z.deepCopy(e),i=a.users.findIndex((function(e){return e.id===n.id})),a.users.splice(i,1),r.mutateOneOrganization(a),[3,3];case 2:return o=s.sent(),(0,Z.lt)(Tr,o),[3,3];case 3:return[2]}}))}));return function(n,r,t){return e.apply(this,arguments)}}(),Ir=function(){var e=(0,a.Z)((function(e,n,r){var t,a,i,o,u,l;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,Vn.accept(e)];case 1:return s.sent(),t=Y.Z.deepCopy(e),a=t.pendingowners.findIndex((function(e){return e.id===n.id})),i=t.pendingowners[a],-1!==a?(t.pendingowners.splice(a,1),t.owners.push(i)):(o=t.pendingusers.findIndex((function(e){return e.id===n.id})),u=t.pendingusers[o],t.pendingusers.splice(o,1),t.users.push(u)),r.mutateOneOrganization(t),[3,3];case 2:return l=s.sent(),(0,Z.lt)(Ur,l),[3,3];case 3:return[2]}}))}));return function(n,r,t){return e.apply(this,arguments)}}(),Rr=function(){var e=(0,a.Z)((function(e,n,r){var t,a,i,o,u,l,c;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),a={},[4,Vn.decline((a.id=e.id,a))];case 1:return s.sent(),i=Y.Z.deepCopy(e),-1!==(o=null===(t=i.pendingowners)||void 0===t?void 0:t.findIndex((function(e){return e.id===n.id})))?i.pendingowners.splice(o,1):(l=null===(u=i.pendingusers)||void 0===u?void 0:u.findIndex((function(e){return e.id===n.id})),i.pendingusers.splice(l,1)),r.mutateOneOrganization(i),[3,3];case 2:return c=s.sent(),(0,Z.lt)(Er,c),[3,3];case 3:return[2]}}))}));return function(n,r,t){return e.apply(this,arguments)}}(),Ar=function(e){var n,r=e.user,i=e.organizations,o=e.swr,l=e.setOrganization,c=(0,u.useState)(null),d=c[0],p=c[1],h=(0,u.useRef)(null),f=[{title:"Name",dataIndex:"name",key:"name",sorter:function(e,n){var r=e.name||"",t=n.name||"";return r.localeCompare(t)}},{title:"Administrators",dataIndex:"owners",key:"owners",render:function(e){return(0,t.jsx)(F.C.Group,{maxCount:5,children:null===e||void 0===e?void 0:e.map((function(e){return Y.Z.userToAvatar(e)}))})}},{title:"Users",dataIndex:"users",key:"users",render:function(e){return(0,t.jsx)(F.C.Group,{maxCount:5,children:null===e||void 0===e?void 0:e.map((function(e){return Y.Z.userToAvatar(e)}))})}},{title:"Groups",dataIndex:"groups",key:"groups",render:function(e){return(0,t.jsx)(F.C.Group,{maxCount:5,children:null===e||void 0===e?void 0:e.map((function(e){return Y.Z.groupToAvatar(e)}))})}},{title:"Actions",key:"actions",render:function(e){return e.owners.find((function(e){return e.id===r.id}))?(0,t.jsxs)(W.Z,{wrap:!0,children:[(0,t.jsx)(M.Z,{icon:(0,t.jsx)(m.Z,{}),onClick:function(){return l(e)},children:"Manage"}),(0,t.jsx)(Nr,{organization:{id:e.id,name:e.name},swr:{delOneOrganization:o.delOneOrganization}})]}):e.users.find((function(e){return e.id===r.id}))?(0,t.jsx)(W.Z,{wrap:!0,children:(0,t.jsx)(M.Z,{danger:!0,icon:(0,t.jsx)(zr.Z,{}),onClick:function(){return qr({id:e.id,users:e.users},{id:r.id},{mutateOneOrganization:o.mutateOneOrganization})},children:"Quit"})}):e.pendingowners.find((function(e){return e.id===r.id}))||e.pendingusers.find((function(e){return e.id===r.id}))?(0,t.jsxs)(W.Z,{wrap:!0,children:[(0,t.jsx)(M.Z,{type:"primary",icon:(0,t.jsx)(_r.Z,{}),onClick:(0,a.Z)((function(){var n,t,a;return(0,s.__generator)(this,(function(i){return t={},a={},[2,Ir(((n={}).id=e.id,n.owners=e.owners,n.pendingowners=e.pendingowners,n.users=e.users,n.pendingusers=e.pendingusers,n),(t.id=r.id,t),(a.mutateOneOrganization=o.mutateOneOrganization,a))]}))})),children:"Accept invitation"}),(0,t.jsx)(M.Z,{danger:!0,icon:(0,t.jsx)(Pr.Z,{}),onClick:function(){return Rr({id:e.id,pendingowners:e.pendingowners,pendingusers:e.pendingusers},{id:r.id},{mutateOneOrganization:o.mutateOneOrganization})},children:"Decline"})]}):void 0}}],g=(0,u.useCallback)((function(){var e=h.current;e&&(e.clientHeight>window.innerHeight-e.offsetTop-59?p({y:window.innerHeight-e.offsetTop-59}):p(null))}),[]);return(0,u.useEffect)((function(){return window.addEventListener("resize",g),function(){window.removeEventListener("resize",g)}}),[g]),(0,u.useEffect)((function(){g()}),[i,g,null===(n=h.current)||void 0===n?void 0:n.offsetTop]),(0,t.jsx)(Xn.Z,{loading:o.loadingOrganizations,pagination:!1,size:"small",columns:f,dataSource:null===i||void 0===i?void 0:i.map((function(e){return{key:e.id,id:e.id,name:e.name,owners:e.owners,pendingowners:e.pendingowners,users:e.users,pendingusers:e.pendingusers,groups:e.groups}})),ref:h,scroll:{y:null===d||void 0===d?void 0:d.y}})},Dr=function(e){var n=e.user,r=e.organizations,a=e.swr,i=(0,u.useState)(),s=i[0],c=i[1],p=(0,o.useRouter)(),h=p.query.organizationId;return(0,u.useEffect)((function(){if(h){var e=r.find((function(e){return e.id===h}));c(e)}}),[h,r]),(0,u.useEffect)((function(){if(s){var e=r.find((function(e){return e.id===s.id}));JSON.stringify(e)!==JSON.stringify(s)&&c(e)}}),[r,s]),(0,t.jsxs)(l.Z,{className:"inDashboard Organization",children:[(0,t.jsx)(b.Z,{className:"inDashboard-PageHeader",backIcon:!1,title:(0,t.jsx)(d.Z.Title,{level:2,className:"inDashboard-PageHeader-title",children:"Organizations"}),footer:(0,t.jsx)(k.Z,{})}),(0,t.jsx)(l.Z.Content,{className:"no-scroll",children:s?(0,t.jsx)(yr,{organization:{id:s.id,name:s.name,owners:s.owners,pendingowners:s.pendingowners,users:s.users,pendingusers:s.pendingusers,groups:s.groups},swr:{mutateOneOrganization:a.mutateOneOrganization,loadingOrganizations:a.loadingOrganizations},onClose:function(){p.push({pathname:"dashboard",query:{page:"organizations"}}),c(null)}}):(0,t.jsxs)(W.Z,{direction:"vertical",className:"full-width",size:20,children:[(0,t.jsx)(Or,{swr:{addOneOrganization:a.addOneOrganization}}),(0,t.jsx)(Ar,{user:{id:n.id},organizations:r,swr:{mutateOneOrganization:a.mutateOneOrganization,delOneOrganization:a.delOneOrganization,loadingOrganizations:a.loadingOrganizations},setOrganization:function(e){p.push({pathname:"dashboard",query:{page:"organizations",organizationId:e.id}}),c(e)}})]})})]})},Wr=r(63922),Fr=r(10808),Hr=r(63606),Lr=r(32808),Gr=r(36574),Mr="Unable to add user",Br=function(){var e=(0,a.Z)((function(e,n){var r,t,a,i,o,u,l,c,d,p;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),t={},[4,Je.Z.add((t.email=e.email,t.password=e.password,t))];case 1:if((r=s.sent()).alreadyExists)throw new Error("User already exists");return a={},i={},o={},u={},[4,Je.Z.updateById(r.id,[(a.key="firstname",a.value=e.firstname,a),(i.key="lastname",i.value=e.lastname,i),(o.key="authorizedplugins",o.value=e.authorizedplugins,o),(u.key="superuser",u.value=!!e.superuser,u)])];case 2:return s.sent(),c={},d={},l=(0,ee.Z)((0,N.Z)(c,r),(d.email=e.email,d.firstname=e.firstname,d.lastname=e.firstname,d.superuser=e.superuser,d)),n.addOneUser(l),[3,4];case 3:throw p=s.sent(),(0,Z.lt)(Mr,p),p;case 4:return[2]}}))}));return function(n,r){return e.apply(this,arguments)}}(),Jr=function(e){var n=e.plugins,r=e.swr,o=(0,u.useState)(!1),l=o[0],c=o[1],d=(0,u.useState)(!1),p=d[0],h=d[1],f=(0,i.Z)(Gr.Z.useSystem(),1)[0];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(S.ZP,{title:"New user",visible:l,initialValues:f.defaultplugins&&{authorizedplugins:f.defaultplugins},onCancel:function(){return c(!1)},onOk:function(){var e=(0,a.Z)((function(e){var n;return(0,s.__generator)(this,(function(t){switch(t.label){case 0:h(!0),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Br(e,r)];case 2:return t.sent(),h(!1),c(!1),[3,4];case 3:throw n=t.sent(),h(!1),n;case 4:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),loading:p,children:[(0,t.jsx)(O.Z.Item,{name:"firstname",label:"First name",children:(0,t.jsx)(z.Z,{})}),(0,t.jsx)(O.Z.Item,{name:"lastname",label:"Last name",children:(0,t.jsx)(z.Z,{})}),(0,t.jsx)(O.Z.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Email is required"}],children:(0,t.jsx)(z.Z,{})}),(0,t.jsx)(sn.o,{name:"password"}),(0,t.jsx)(O.Z.Item,{name:"authorizedplugins",label:"Plugins",children:(0,t.jsx)(yn.Z,{mode:"multiple",options:n.map((function(e){return{label:e.name,value:e.key}}))})}),(0,t.jsx)(O.Z.Item,{name:"superuser",label:"Administrator",valuePropName:"checked",children:(0,t.jsx)(Lr.Z,{})})]}),(0,t.jsx)(J.HS,{onAdd:function(){return c(!0)},children:"New user"})]})};Jr.propTypes={plugins:Zn().arrayOf(Zn().exact({key:Zn().string.isRequired,name:Zn().string.isRequired})).isRequired,swr:Zn().exact({addOneUser:Zn().func.isRequired}).isRequired};var Yr=Jr,Vr="Unable to update user",Xr=function(){var e=(0,a.Z)((function(e,n,r){var t,a,i,o;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),(t=Object.keys(n).map((function(r){var t=n[r];if(void 0!==t&&"******"!==t&&t!==e[r])return{key:r,value:t,type:"password"===r&&"crypt"}})).filter((function(e){return e}))).length?[4,Je.Z.updateById(e.id,t)]:[2];case 1:return s.sent(),n.password="******",i={},a=(0,N.Z)(i,e,n),r.mutateOneUser(a),[3,3];case 2:throw o=s.sent(),(0,Z.lt)(Vr,o),o;case 3:return[2]}}))}));return function(n,r,t){return e.apply(this,arguments)}}(),Kr=function(e){var n=e.plugins,r=e.user,i=e.swr,o=(0,u.useState)(!1),l=o[0],c=o[1],d=(0,u.useState)(!1),p=d[0],h=d[1];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(S.ZP,{title:"Edit user",visible:l,initialValues:(0,ee.Z)((0,N.Z)({},r),{password:"******",authorizedplugins:r.authorizedplugins}),onCancel:function(){return c(!1)},onOk:function(){var e=(0,a.Z)((function(e){var n;return(0,s.__generator)(this,(function(t){switch(t.label){case 0:h(!0),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Xr(r,e,i)];case 2:return t.sent(),h(!1),c(!1),[3,4];case 3:throw n=t.sent(),h(!1),n;case 4:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),loading:p,children:[(0,t.jsx)(O.Z.Item,{name:"firstname",label:"First name",children:(0,t.jsx)(z.Z,{})}),(0,t.jsx)(O.Z.Item,{name:"lastname",label:"Last name",children:(0,t.jsx)(z.Z,{})}),(0,t.jsx)(O.Z.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Email is required"}],children:(0,t.jsx)(z.Z,{})}),(0,t.jsx)(sn.o,{name:"password",edit:!0}),(0,t.jsx)(O.Z.Item,{name:"authorizedplugins",label:"Plugins",children:(0,t.jsx)(yn.Z,{mode:"multiple",options:n.map((function(e){return{label:e.name,value:e.key}}))})}),(0,t.jsx)(O.Z.Item,{name:"superuser",label:"Administrator",valuePropName:"checked",children:(0,t.jsx)(Lr.Z,{})})]}),(0,t.jsx)(J.w6,{bordered:!0,onEdit:function(){return c(!0)},children:"Edit"})]})};Kr.propTypes={plugins:Zn().arrayOf(Zn().exact({key:Zn().string.isRequired,name:Zn().string.isRequired})).isRequired,user:Zn().exact({id:Zn().string.isRequired,email:Zn().string.isRequired,firstname:Zn().string,lastname:Zn().string,authorizedplugins:Zn().arrayOf(Zn().string).isRequired,superuser:Zn().bool.isRequired}).isRequired,swr:Zn().exact({mutateOneUser:Zn().func.isRequired}).isRequired};var Qr=Kr,$r="Unable to delete user",et=function(){var e=(0,a.Z)((function(e,n){var r,t;return(0,s.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,Je.Z.delById(e.id)];case 1:return a.sent(),r={},n.delOneUser((r.id=e.id,r)),[3,3];case 2:throw t=a.sent(),(0,Z.lt)($r,t),t;case 3:return[2]}}))}));return function(n,r){return e.apply(this,arguments)}}(),nt=function(e){var n=e.user,r=e.swr,i=(0,u.useState)(!1),o=i[0],l=i[1];return(0,t.jsx)(J.m1,{loading:o,bordered:!0,text:(0,t.jsxs)(t.Fragment,{children:["Are you sure you want to delete the user"," ",(0,t.jsx)(d.Z.Text,{strong:!0,children:n.email}),"?"]}),title:"Delete user",onDelete:(0,a.Z)((function(){return(0,s.__generator)(this,(function(e){switch(e.label){case 0:l(!0),e.label=1;case 1:return e.trys.push([1,,3,4]),[4,et(n,r)];case 2:return e.sent(),[3,4];case 3:return l(!1),[7];case 4:return[2]}}))}))})},rt="Unable to load plugins",tt=function(e){var n=e.users,r=e.swr,a=(0,u.useState)(),i=a[0],s=a[1],o=(0,u.useState)(),l=o[0],c=o[1],d=(0,u.useRef)(null),p=[{title:"First name",dataIndex:"firstname",key:"firstname",sorter:function(e,n){var r=e.firstname||"",t=n.firstname||"";return r.localeCompare(t)}},{title:"Last name",dataIndex:"lastname",key:"lastname",sorter:function(e,n){var r=e.lastname||"",t=n.lastname||"";return r.localeCompare(t)}},{title:"Email",dataIndex:"email",key:"email",sorter:function(e,n){var r=e.email,t=n.email;return r.localeCompare(t)}},{title:"Password",key:"password",render:function(){return"******"}},{title:"Plugins",dataIndex:"authorizedplugins",key:"authorizedplugins",render:function(e){e.sort();var n=e.map((function(e){var n=null===i||void 0===i?void 0:i.find((function(n){return n.key===e}));return n?(0,t.jsx)(Wr.Z.Ribbon,{text:n.category,style:{marginTop:"-15px"},children:(0,t.jsx)(ae.Z,{size:"small",children:n.name})},e):void 0})),r=(0,t.jsx)(W.Z,{direction:"vertical",children:n});return(0,t.jsx)(Fr.Z,{content:r,children:(0,t.jsxs)(M.Z,{children:[n.length," plugins"]})})}},{title:"Administrator",dataIndex:"superuser",key:"superuser",render:function(e){return e&&(0,t.jsx)(Hr.Z,{className:"color-green"})}},{title:"Actions",key:"actions",render:function(e,n){return(0,t.jsxs)(W.Z,{children:[(0,t.jsx)(Qr,{plugins:(null===i||void 0===i?void 0:i.map((function(e){return{key:e.key,name:e.name}})))||[],user:{id:n.id,firstname:n.firstname,lastname:n.lastname,email:n.email,authorizedplugins:n.authorizedplugins,superuser:n.superuser},swr:{mutateOneUser:r.mutateOneUser}}),(0,t.jsx)(nt,{user:{id:n.id,email:n.email},swr:{delOneUser:r.delOneUser}})]})}}],h=(0,u.useCallback)((function(){var e=d.current;e&&(e.clientHeight>window.innerHeight-e.offsetTop-59?c({y:window.innerHeight-e.offsetTop-59}):c(void 0))}),[]);return(0,u.useEffect)((function(){xn.Z.completeList().then((function(e){s(e)})).catch((function(e){(0,Z.lt)(rt,e)}))}),[]),(0,u.useEffect)((function(){return window.addEventListener("resize",h),function(){window.removeEventListener("resize",h)}}),[h]),(0,u.useEffect)((function(){h()}),[n,h]),(0,t.jsxs)(W.Z,{direction:"vertical",className:"full-width full-height",size:20,children:[(0,t.jsx)(Yr,{plugins:(null===i||void 0===i?void 0:i.map((function(e){return{key:e.key,name:e.name}})))||[],swr:{addOneUser:r.addOneUser}}),(0,t.jsx)(Xn.Z,{loading:!i,pagination:!1,size:"small",columns:p,dataSource:n.map((function(e){return(0,ee.Z)((0,N.Z)({},e),{key:e.id})})),ref:d,scroll:{y:null===l||void 0===l?void 0:l.y}})]})},at=r(79915),it=r(15479),st="System error",ot="Unable to update system",ut=function(){var e=(0,a.Z)((function(e,n){var r,t,a;return(0,s.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),r={},[4,Gr.Z.update([(r.key="allowsignup",r.value=!e.allowsignup,r)])];case 1:return i.sent(),n(((t={}).allowsignup=!e.allowsignup,t)),(0,Z.Ur)("Changes saved"),[3,3];case 2:return a=i.sent(),(0,Z.lt)(ot,a),[3,3];case 3:return[2]}}))}));return function(n,r){return e.apply(this,arguments)}}(),lt=function(){var e=(0,a.Z)((function(e,n){var r,t,a;return(0,s.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),r={},[4,Gr.Z.update([(r.key="password",r.value=e,r)])];case 1:return i.sent(),n(((t={}).password=e,t)),(0,Z.Ur)("Changes saved"),[3,3];case 2:return a=i.sent(),(0,Z.lt)(ot,a),[3,3];case 3:return[2]}}))}));return function(n,r){return e.apply(this,arguments)}}(),ct=function(){var e=(0,i.Z)(O.Z.useForm(),1)[0],n=(0,i.Z)(Gr.Z.useSystem(),2),r=n[0],o=n[1],l=o.mutateSystem,c=o.errorSystem,d=o.loadingSystem,p={wrapperCol:{offset:8,span:16}};return(0,u.useEffect)((function(){c&&(0,Z.lt)(st,c)}),[c]),(0,u.useEffect)((function(){d||e.setFieldsValue((null===r||void 0===r?void 0:r.password)||{min:it.yL,max:it.nq,requireLetter:it.JT,requireNumber:it.tE,requireSymbol:it.ah})}),[d,e,null===r||void 0===r?void 0:r.password]),d?(0,t.jsx)(y.Z.Simple,{}):(0,t.jsxs)(W.Z,{direction:"vertical",className:"full-width",size:20,children:[(0,t.jsx)(ae.Z,{title:"Signup",children:(0,t.jsx)(Lr.Z,{checked:null===r||void 0===r?void 0:r.allowsignup,onChange:function(){return ut(r,l)},children:"Allow signup"})}),(0,t.jsx)(ae.Z,{title:"Password",children:(0,t.jsxs)(O.Z,(0,ee.Z)((0,N.Z)({},{labelCol:{span:8},wrapperCol:{span:16}}),{form:e,name:"form",onFinish:function(){var e=(0,a.Z)((function(e){return(0,s.__generator)(this,(function(n){return[2,lt(e,l)]}))}));return function(n){return e.apply(this,arguments)}}(),children:[(0,t.jsx)(O.Z.Item,{label:"Minimum number of characters",name:"min",rules:[{required:!0,message:"Minimum number of characters is required"}],children:(0,t.jsx)(at.Z,{min:0,max:64})}),(0,t.jsx)(O.Z.Item,{label:"Maximum number of characters",name:"max",rules:[{required:!0,message:"Maximum number of characters is required"}],children:(0,t.jsx)(at.Z,{min:0,max:64})}),(0,t.jsx)(O.Z.Item,(0,ee.Z)((0,N.Z)({},p),{valuePropName:"checked",name:"requireLetter",children:(0,t.jsx)(Lr.Z,{children:"Require letter"})})),(0,t.jsx)(O.Z.Item,(0,ee.Z)((0,N.Z)({},p),{valuePropName:"checked",name:"requireNumber",children:(0,t.jsx)(Lr.Z,{children:"Require number"})})),(0,t.jsx)(O.Z.Item,(0,ee.Z)((0,N.Z)({},p),{valuePropName:"checked",name:"requireSymbol",children:(0,t.jsx)(Lr.Z,{children:"Require symbol"})})),(0,t.jsx)(O.Z.Item,(0,ee.Z)((0,N.Z)({},p),{children:(0,t.jsx)(M.Z,{type:"primary",icon:(0,t.jsx)(Hr.Z,{}),htmlType:"submit"})}))]}))})]})},dt="Unable to get plugins",pt="Unable to update system",ht=function(){var e=(0,a.Z)((function(e,n,r,t){var a,i,o,u,l;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),a={},[4,Gr.Z.update([(a.key="defaultplugins",a.type="array",a.method=r?"append":"remove",a.value=n.key,a)])];case 1:return s.sent(),i=(null===e||void 0===e?void 0:e.defaultplugins)||[],o=i.indexOf(n.key),r&&-1===o&&i.push(n.key),r||-1===o||i.splice(o,1),u={},t.mutateSystem((u.defaultplugins=i,u)),[3,3];case 2:return l=s.sent(),(0,Z.lt)(pt,l),[3,3];case 3:return[2]}}))}));return function(n,r,t,a){return e.apply(this,arguments)}}(),ft=function(){var e=(0,u.useRef)(null),n=(0,u.useState)(),r=n[0],o=n[1],l=(0,u.useState)(),c=l[0],d=l[1],p=(0,i.Z)(Gr.Z.useSystem(),2),h=p[0],f=p[1],m=f.mutateSystem,g=f.loadingSystem;(0,u.useEffect)((function(){xn.Z.completeList().then((function(e){o(e)})).catch((function(e){(0,Z.lt)(dt,e)}))}),[]);var v=[{title:"Category",dataIndex:"category",key:"category"},{title:"Name",dataIndex:"name",key:"name"},{title:"Default enabled",key:"enable",render:function(e){var n,r=null===h||void 0===h||null===(n=h.defaultplugins)||void 0===n?void 0:n.includes(e.key);return(0,t.jsx)(Lr.Z,{checked:r,onChange:function(){var n=(0,a.Z)((function(n){var r;return(0,s.__generator)(this,(function(t){return r={},[2,ht(h,e,n.target.checked,(r.mutateSystem=m,r))]}))}));return function(e){return n.apply(this,arguments)}}()})}}],j=(0,u.useCallback)((function(){var n=e.current;n&&(n.clientHeight>window.innerHeight-n.offsetTop-59?d({y:window.innerHeight-n.offsetTop-59}):d(null))}),[]);return(0,u.useEffect)((function(){return window.addEventListener("resize",j),function(){window.removeEventListener("resize",j)}}),[j]),(0,u.useEffect)((function(){j()}),[r,j]),(0,t.jsx)(Xn.Z,{loading:!r||g,pagination:!1,size:"small",columns:v,dataSource:r,ref:e,scroll:{y:null===c||void 0===c?void 0:c.y}})},mt={label:"Users",key:"users"},gt={label:"Registration",key:"registration"},vt={label:"Plugins",key:"plugins"},jt="Users error",xt=function(){var e=(0,o.useRouter)(),n=e.query.tab,r=(0,i.Z)(Je.Z.useUsers(),2),a=r[0],s=r[1],c=s.addOneUser,p=s.mutateOneUser,h=s.delOneUser,f=s.errorUsers;return(0,u.useEffect)((function(){f&&(0,Z.lt)(jt,f)}),[f]),(0,t.jsxs)(l.Z,{className:"inDashboard Administration",children:[(0,t.jsx)(b.Z,{className:"inDashboard-PageHeader",backIcon:!1,title:(0,t.jsx)(d.Z.Title,{level:2,className:"inDashboard-PageHeader-title",children:"Administration"}),footer:(0,t.jsx)(k.Z,{})}),(0,t.jsx)(l.Z.Content,{children:(0,t.jsxs)(_.Z,{className:"inDashboard-Tabs",type:"card",defaultActiveKey:n||"default",onChange:function(n){return function(e,n){e.replace({pathname:"/dashboard",query:{page:"administration",tab:n}})}(e,n)},children:[(0,t.jsx)(_.Z.TabPane,{tab:mt.label,children:(0,t.jsx)(tt,{users:a,swr:{addOneUser:c,mutateOneUser:p,delOneUser:h}})},mt.key),(0,t.jsx)(_.Z.TabPane,{tab:gt.label,children:(0,t.jsx)(ct,{})},gt.key),(0,t.jsx)(_.Z.TabPane,{tab:vt.label,children:(0,t.jsx)(ft,{})},vt.key)]})})]})},wt=r(95507),Zt=function(){return(0,t.jsx)(ae.Z,{title:"Standard workflow",children:(0,t.jsx)(wt.ZP,{dataSource:["Go to account settings","Fill your first name, last name, change your password if needed","Create an HPC provider, you will need that to run a simulation","Create a new workspace","Create a new project","Upload a geometry (STEP file for 3D or DXF file for 2D)","Select a simulation model","Configure your simulation: geometry, materials, parameters, boundary conditions, depending on your simulation, HPC resource","Run your simulation","Display the results","Depending on your simulation, visualize data","Depending on your simulation, post-process the result"],renderItem:function(e){return(0,t.jsxs)(wt.ZP.Item,{children:[" - ",e]})}})})},yt=function(){return(0,t.jsx)(ae.Z,{title:"Workspace",children:(0,t.jsxs)(d.Z.Text,{children:["The workspace is the place where all the projects are. You can create several workspaces to sort your different projects.",(0,t.jsx)("br",{}),"You can share your workspace with other users or groups throught organizations."]})})},bt=r(54907),kt=function(){return(0,t.jsxs)(ae.Z,{title:"Project",children:[(0,t.jsx)(d.Z.Text,{children:"The project is used to manage geometries and simulation."}),(0,t.jsx)(bt.Z,{children:(0,t.jsx)(bt.Z.Panel,{header:"Archive Project",children:(0,t.jsxs)(d.Z.Text,{children:["You can archive a project to save disk space.",(0,t.jsx)("br",{}),"Once archived, a project is not editable anymore.",(0,t.jsx)("br",{}),"At the archive time, you can download a"," ",(0,t.jsx)("code",{children:".tanatlocarchive"})," file that contains all the data to restore your project later.",(0,t.jsx)("br",{}),"There is several options to manage an archived projects:",(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:"Restore the project from the previously downloaded archive file;"}),(0,t.jsx)("li",{children:"Restore the project from the archive file on the server;"}),(0,t.jsx)("li",{children:"Delete the archive file on the server, in the case you will not be able to restore the project from the server archive file."})]})]})},"archive")})]})},Ot=function(){return(0,t.jsx)(ae.Z,{title:"Account / HPC plugins",children:(0,t.jsxs)(bt.Z,{children:[(0,t.jsxs)(bt.Z.Panel,{header:"Local plugin",children:[(0,t.jsx)(d.Z.Text,{children:"Allow to compute a simulation directly on the frontal server."}),(0,t.jsx)(d.Z.Text,{children:"This plugin is only reserved for test purposes."})]},"local"),(0,t.jsxs)(bt.Z.Panel,{header:"Rescale plugin",children:[(0,t.jsxs)(d.Z.Text,{children:["Allow to compute a simulation on"," ",(0,t.jsx)("a",{href:"https://www.rescale.com/",children:"Rescale"}),"."]}),(0,t.jsx)(d.Z.Text,{children:"You have to fill the following informations:"}),(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:"Name: a name to retrieve your configuration during the simulation parameterization;"}),(0,t.jsxs)("li",{children:["Token: your API token. You can find it in your"," ",(0,t.jsx)("a",{href:"https://platform.rescale.jp/user/settings/api-key/",children:"Rescale account"}),";"]}),(0,t.jsx)("li",{children:"Platform: the platform you use. USA, Europe or Japan;"}),(0,t.jsx)("li",{children:"[Optional] Organization name: the organization you are in;"}),(0,t.jsx)("li",{children:"[Optional] Project id: the financial project identifier;"}),(0,t.jsx)("li",{children:"[Optional] Default walltime: the default value for the run walltime;"}),(0,t.jsx)("li",{children:"[Optional] Additional files: additional files you have to use with your simulations. Generally FreeFEM custom plugins."})]}),(0,t.jsx)(d.Z.Text,{children:"When you save this informations, Tanatloc will check your API key, the available core types, and the available FreeFEM versions."})]},"rescale")]})})},zt=function(){return(0,t.jsxs)(ae.Z,{title:"Administration",children:[(0,t.jsx)(d.Z.Text,{children:"Your need to be an administrator to have acces to this part"}),(0,t.jsxs)(bt.Z,{children:[(0,t.jsx)(bt.Z.Panel,{header:"Users",children:(0,t.jsx)(d.Z.Text,{children:"You can manage users: create, delete or modify informations."})},"users"),(0,t.jsx)(bt.Z.Panel,{header:"Registration",children:(0,t.jsx)(d.Z.Text,{children:"Allow you to enable / disable the signup and to manage the required pattern for passwords."})},"registration")]})]})},_t=function(){return(0,t.jsxs)(ae.Z,{title:"Organization",children:[(0,t.jsx)(d.Z.Text,{children:"Allow you to manage an organization, and associated groups for sharing purpose."}),(0,t.jsxs)(bt.Z,{children:[(0,t.jsx)(bt.Z.Panel,{header:"Users",children:(0,t.jsxs)(d.Z.Text,{children:["Add or remove owners and users.",(0,t.jsx)("br",{}),"Owners and users in an organization can be used to share a workspace or a project."]})},"users"),(0,t.jsx)(bt.Z.Panel,{header:"Groups",children:(0,t.jsxs)(d.Z.Text,{children:["Add, modify or remove groups.",(0,t.jsx)("br",{}),"Groups in an organization can be used to share a workspace or a project."]})},"groups")]})]})},Pt=function(){return(0,t.jsxs)(l.Z,{className:"inDashboard Help",children:[(0,t.jsx)(b.Z,{className:"inDashboard-PageHeader",backIcon:!1,title:(0,t.jsx)(d.Z.Title,{level:2,className:"inDashboard-PageHeader-title",children:"Help"}),footer:(0,t.jsx)(k.Z,{})}),(0,t.jsx)(l.Z.Content,{className:"scroll",children:(0,t.jsxs)(W.Z,{direction:"vertical",className:"full-width",size:20,children:[(0,t.jsx)(Zt,{}),(0,t.jsx)(yt,{}),(0,t.jsx)(kt,{}),(0,t.jsx)(Ot,{}),(0,t.jsx)(_t,{}),(0,t.jsx)(zt,{})]})})]})},Ct="User error",St="Organizations error",Nt="Workspaces error",Tt="Unable to logout",Ut={workspaces:{label:"Workspaces",key:"workspaces"},account:{label:"Account Settings",key:"account"},organizations:{label:"Organizations",key:"organizations"},administration:{label:"Administration",key:"administration"},help:{label:"I Need Help",key:"help"},logout:{label:"Logout",key:"logout"}},Et=function(e,n,r){n===Ut.logout.key?qt(e,r):e.replace({pathname:"/dashboard",query:{page:n}})},qt=function(){var e=(0,a.Z)((function(e,n){var r;return(0,s.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,fn()];case 1:return t.sent(),n(),e.push("/"),[3,3];case 2:return r=t.sent(),(0,Z.lt)(Tt,r),[3,3];case 3:return[2]}}))}));return function(n,r){return e.apply(this,arguments)}}(),It=function(){var e=(0,u.useState)(),n=e[0],r=e[1],a=(0,i.Z)(Je.Z.useUser(),2),s=a[0],j=a[1],b=j.mutateUser,k=j.clearUser,O=j.errorUser,z=j.loadingUser,_=(0,i.Z)(Vn.useOrganizations(),2),P=_[0],C=_[1],S=C.addOneOrganization,N=C.delOneOrganization,T=C.mutateOneOrganization,U=C.errorOrganizations,E=C.loadingOrganizations,q=(0,i.Z)(D.useWorkspaces(),2),I=q[0],R=q[1],A=R.addOneWorkspace,W=R.delOneWorkspace,F=R.mutateOneWorkspace,H=R.errorWorkspaces,L=R.loadingWorkspaces,G=(0,o.useRouter)();(0,u.useEffect)((function(){z||s||G.replace("/")}),[s,z,G]),(0,u.useEffect)((function(){var e=new URLSearchParams(window.location.search).get("page");e?r(e):(r(Ut.workspaces.key),Et(G,Ut.workspaces.key,k))}),[G,k]),(0,u.useEffect)((function(){O&&(0,Z.lt)(Ct,O),U&&(0,Z.lt)(St,U),H&&(0,Z.lt)(Nt,H)}),[O,U,H]);var M="";return M="git-front-8e3f63a",!s||z||E||L?(0,t.jsx)(y.Z,{}):(0,t.jsxs)(l.Z,{className:"Dashboard",children:[(0,t.jsxs)(l.Z.Sider,{theme:"light",width:"256",className:"Dashboard-Sider",children:[(0,t.jsx)("div",{className:"logo",children:(0,t.jsx)("img",{src:"/images/logo.svg",alt:"Tanatloc"})}),(0,t.jsx)(c.Z,{className:"Dashboard-Menu",theme:"light",items:[{key:Ut.workspaces.key,icon:(0,t.jsx)(p.Z,{}),label:Ut.workspaces.label},{key:Ut.account.key,icon:(0,t.jsx)(h.Z,{}),label:Ut.account.label},{key:Ut.organizations.key,icon:(0,t.jsx)(f.Z,{}),label:Ut.organizations.label,className:x()()?"display-none":""},{key:Ut.administration.key,className:s.superuser&&!x()()?"":"display-none",icon:(0,t.jsx)(m.Z,{}),label:Ut.administration.label},{key:Ut.help.key,icon:(0,t.jsx)(g.Z,{}),label:Ut.help.label},{type:"divider"},{key:Ut.logout.key,danger:!0,icon:(0,t.jsx)(v.Z,{}),label:Ut.logout.label,className:x()()?"display-none":""},{key:"version",disabled:!0,className:"version",label:(0,t.jsxs)(d.Z.Text,{className:"text-light",ellipsis:{tooltip:!0},children:["version ",w.i8," ",M&&(0,t.jsxs)(t.Fragment,{children:["(",M,")"]})]})}],onClick:function(e){var n=e.keyPath.pop();r(n),Et(G,n,k)},mode:"inline"})]}),(0,t.jsxs)(l.Z.Content,{className:"no-scroll",children:[n===Ut.workspaces.key&&(0,t.jsx)(Le,{user:{id:s.id},workspaces:I,organizations:P,swr:{addOneWorkspace:A,delOneWorkspace:W,mutateOneWorkspace:F}}),n===Ut.account.key&&(0,t.jsx)(Wn,{user:{email:s.email,firstname:s.firstname,lastname:s.lastname,avatar:s.avatar},swr:{mutateUser:b,clearUser:k}}),n===Ut.organizations.key&&(0,t.jsx)(Dr,{user:{id:s.id},organizations:P,swr:{addOneOrganization:S,delOneOrganization:N,mutateOneOrganization:T,loadingOrganizations:E}}),n===Ut.administration.key&&(0,t.jsx)(xt,{}),n===Ut.help.key&&(0,t.jsx)(Pt,{})]})]})},Rt=function(){return(0,t.jsx)(It,{})}},4147:function(e){"use strict";e.exports={i8:"1.0.0"}}},function(e){e.O(0,[841,880,474,76,595,819,909,40,959,695,892,56,381,331,774,888,179],(function(){return n=40528,e(e.s=n);var n}));var n=e.O();_N_E=n}]);