(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4154],{59261:function(e,l,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/editor",function(){return n(15099)}])},17644:function(e,l,n){"use strict";n.d(l,{ET:function(){return u},GW:function(){return d},Gw:function(){return o},dJ:function(){return s},gc:function(){return a},j1:function(){return r},pj:function(){return c},zX:function(){return i}});var t=n(55190);let i=e=>({type:t.Hp.SETTEMPLATE,value:e}),r=e=>({type:t.Hp.SETMODEL,value:e}),a=e=>({type:t.Hp.SETJSONHIGHLIGHT,value:e}),s=e=>({type:t.Hp.SETTEMPLATEHIGHLIGHT,value:e}),o=e=>({type:t.Hp.SETJSONCURSOR,value:e}),d=e=>({type:t.Hp.SETTEMPLATECURSOR,value:e}),c=e=>({type:t.Hp.SETTEMPLATEVALID,value:e}),u=e=>({type:t.Hp.SETMODELVALID,value:e})},55190:function(e,l,n){"use strict";n.d(l,{Hp:function(){return a},rU:function(){return s}});var t=n(85893),i=n(67294);let r={template:"",model:"",dispatch:()=>void 0,templateValid:!1,modelValid:!1},a={SETTEMPLATE:"SETTEMPLATE",SETMODEL:"SETMODEL",SETJSONHIGHLIGHT:"SETJSONHIGHLIGHT",SETTEMPLATEHIGHLIGHT:"SETTEMPLATEHIGHLIGHT",SETJSONCURSOR:"SETJSONCURSOR",SETTEMPLATECURSOR:"SETTEMPLATECURSOR",SETTEMPLATEVALID:"SETTEMPLATEVALID",SETMODELVALID:"SETMODELVALID"},s=(0,i.createContext)(r),o=(e,l)=>{switch(l.type){case a.SETTEMPLATE:return{...e,template:l.value};case a.SETMODEL:return{...e,model:l.value};case a.SETJSONHIGHLIGHT:return{...e,jsonHighlight:l.value};case a.SETTEMPLATEHIGHLIGHT:return{...e,templateHighlight:l.value};case a.SETJSONCURSOR:return{...e,jsonCursor:l.value};case a.SETTEMPLATECURSOR:return{...e,templateCursor:l.value};case a.SETTEMPLATEVALID:return{...e,templateValid:l.value};case a.SETMODELVALID:return{...e,modelValid:l.value};default:return e}},d=e=>{let{children:l}=e,[n,a]=(0,i.useReducer)(o,r),d=(0,i.useMemo)(()=>({...n,dispatch:a}),[n]);return(0,t.jsx)(s.Provider,{value:d,children:l})};l.ZP=d},15099:function(e,l,n){"use strict";n.r(l),n.d(l,{default:function(){return e9}});var t=n(85893),i=n(11163),r=n(67294),a=n(97183),s=n(68508),o=n(96074),d=n(22850),c=n(26713),u=n(71577),m=n(83062),v=n(11390),h=n(20046),p=n(55190),f=n(51302),x=n(94725),j=n(42661),b=n(3363),g=n(11142),y=n.n(g),w=n(17644),E=n(36642);let S=e=>{if(!e.category)throw Error("missing category");if(!e.name)throw Error("missing name");if(!e.algorithm)throw Error("missing algorithm");if(!e.code)throw Error("missing code");if(!e.version)throw Error("missing version");if(!e.description)throw Error("missing description");if(!e.configuration)throw Error("missing configuration");k(e.configuration.geometry),C(e.configuration.materials),T(e.configuration.parameters),O(e.configuration.initialization),P(e.configuration.boundaryConditions),I(e.configuration.run)},Z=(e,l)=>{if(e){if(!e.index)throw Error("missing configuration."+l+".index");if(!e.title)throw Error("missing configuration."+l+".title")}},k=e=>{if(!e)throw Error("missing configuration.geometry");if(Z(e,"geometry"),void 0===e.meshable)throw Error("missing configuration.geometry.meshable")},C=e=>{if(e){if(Z(e,"materials"),!e.children)throw Error("missing configuration.materials.children");e.children.forEach((e,l)=>{if(!e.label)throw Error("missing configuration.materials.children["+l+"].label");if(!e.name)throw Error("missing configuration.materials.children["+l+"].name");if(!e.htmlEntity)throw Error("missing configuration.materials.children["+l+"].htmlEntity");if(void 0===e.default)throw Error("missing configuration.materials.children["+l+"].default");if(!e.unit)throw Error("missing configuration.materials.children["+l+"].unit")})}},T=e=>{if(!e)throw Error("missing configuration.parameters");Z(e,"parameters"),Object.keys(e).forEach(l=>{if("index"===l||"title"===l||"done"===l)return;let n=e[l];if(!n.label)throw Error("missing configuration.parameters."+l+".label");if(!n.children)throw Error("missing configuration.parameters."+l+".children");N(n,l)})},N=(e,l)=>{e.children.forEach((e,n)=>{if(!e.label)throw Error("missing configuration.parameters."+l+".children["+n+"].label");if(!e.htmlEntity)throw Error("missing configuration.parameters."+l+".children["+n+"].htmlEntity");if(void 0===e.default)throw Error("missing configuration.parameters."+l+".children["+n+"].default")})},O=e=>{e&&Z(e,"initialization")},P=e=>{if(!e)throw Error("missing configuration.boundaryConditions");Z(e,"boundaryConditions"),Object.keys(e).forEach(l=>{if("title"===l||"index"===l||"done"===l)return;let n=e[l];if(!n.label)throw Error("missing configuration.boundaryConditions."+l+".label")})},I=e=>{if(!e)throw Error("missing configuration.run")};var M=n(36294),L=n.n(M);let R=e=>{var l,n,i,a,s,o,d,c,u;let{setName:m}=e,[v,h]=(0,r.useState)({}),{template:f,model:x,dispatch:j}=(0,r.useContext)(p.rU);return(0,E.Z)(()=>{if(!f){h(e=>({...e,template:{status:"wait",err:""},test:{status:"wait"}})),j((0,w.pj)(!1));return}h(e=>{var l;return{...e,template:{status:"finish"},test:{status:(null===(l=e.model)||void 0===l?void 0:l.status)==="finish"?"process":"wait"}}}),j((0,w.pj)(!0))},[f],[j]),(0,E.Z)(()=>{if(!x){h(e=>({...e,model:{status:"wait"},test:{status:"wait"}})),j((0,w.ET)(!1));return}try{let e;try{e=JSON.parse(x)}catch(l){e=y().parse(x),j((0,w.j1)(JSON.stringify(e,null,"	")))}e.name&&m(e.name),S(e),h(e=>{var l;return{...e,model:{status:"finish"},test:{status:(null===(l=e.template)||void 0===l?void 0:l.status)==="finish"?"process":"wait"}}}),j((0,w.ET)(!0))}catch(e){h(l=>({...l,model:{status:"error",err:e.message},test:{status:"wait"}})),j((0,w.ET)(!1))}},[x],[m,j]),(0,t.jsx)("div",{id:"steps",children:(0,t.jsx)(b.Z,{className:L().steps,direction:"vertical",items:[{title:"Check template format",description:null!==(o=null===(l=v.template)||void 0===l?void 0:l.err)&&void 0!==o?o:"EJS + FreeFEM",status:null!==(d=null===(n=v.template)||void 0===n?void 0:n.status)&&void 0!==d?d:"wait"},{title:"Check description format",description:null!==(c=null===(i=v.model)||void 0===i?void 0:null===(a=i.err)||void 0===a?void 0:a.replace(/\./g," > "))&&void 0!==c?c:"JSON",status:null!==(u=null===(s=v.model)||void 0===s?void 0:s.status)&&void 0!==u?u:"wait"}]})})};var J=n(15045),D=n(638),U=n(69677),F=n(86373);let G=(e,l)=>{let n=e.split("\n"),t=l.split("\n"),i=t.map((e,l)=>{if(!n.includes(e))return l}).filter(e=>e);return{begin:i[0],end:i[i.length-1]}};var H=n(14856),_=n.n(H);let W=(e,l,n,t,i)=>{var r,a,s,o,d,c,u;let m;l.includes("include('/blobs/mesh.edp.ejs'")||(eb(l,"<%# Mesh -%>\n<%\nconst mesh = geometry.mesh\nmesh.name = '".concat(e.name,"'\n-%>\n<%- include('/blobs/mesh.edp.ejs', {\n  dimension,\n  mesh\n}) -%>\n"),t,i),i((0,w.dJ)({begin:(null!==(a=null==t?void 0:t.row)&&void 0!==a?a:0)+1,end:(null!==(s=null==t?void 0:t.row)&&void 0!==s?s:0)+9})),i((0,w.GW)({row:(null!==(o=null==t?void 0:t.row)&&void 0!==o?o:0)+9,column:0})));try{m=JSON.parse(n)}catch(e){m={}}let v=JSON.stringify(m,null,"	"),h=Object.keys(null!==(d=m.configuration)&&void 0!==d?d:{}).length;m.configuration={...null!==(c=m.configuration)&&void 0!==c?c:{},geometry:{index:h+1,title:"Geometry",mesh:{name:e.name},...null!==(u=null===(r=m.configuration)||void 0===r?void 0:r.geometry)&&void 0!==u?u:{},meshable:!0}};let p=JSON.stringify(m,null,"	"),f=G(v,p);i((0,w.gc)(f)),i((0,w.Gw)({row:f.end,column:0})),i((0,w.j1)(JSON.stringify(m,null,"	")))},A=()=>{let e=(0,r.useRef)(null),[l,n]=(0,r.useState)(!1),[i,a]=(0,r.useState)(!1),{template:s,model:o,templateCursor:d,dispatch:c}=(0,r.useContext)(p.rU);(0,r.useEffect)(()=>{e.current&&e.current.focus()});let m=(0,r.useCallback)(()=>n(!0),[]),v=(0,r.useCallback)(()=>n(!1),[]),h=(0,r.useCallback)(async e=>{a(!0),W(e,s,o,d,c),a(!1),n(!1)},[s,o,d,c]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(F.ZP,{title:"Mesh",visible:l,loading:i,onOk:h,onCancel:v,children:(0,t.jsx)(D.Z.Item,{name:"name",label:"Name",rules:[{required:!0}],children:(0,t.jsx)(U.Z,{ref:e})})}),(0,t.jsx)(u.ZP,{className:_().fullWidth,onClick:m,children:"Mesh"})]})};var V=n(34041),q=n(27588),z=n(24969);let B=e=>{let{children:l,label:n,errors:i,add:a}=e,s=(0,r.useCallback)(()=>a(),[a]);return(0,t.jsxs)(t.Fragment,{children:[l,(0,t.jsxs)(D.Z.Item,{children:[(0,t.jsxs)(u.ZP,{type:"dashed",onClick:s,style:{width:"60%"},icon:(0,t.jsx)(z.Z,{}),children:["Add ",n]}),(0,t.jsx)(D.Z.ErrorList,{errors:i})]})]})};var X=n(3089);let Y=e=>{let{children:l,field:n,label:i,index:a,remove:s}=e,o=(0,r.useCallback)(()=>s(n.name),[n,s]);return(0,t.jsx)(D.Z.Item,{label:(0,t.jsxs)("div",{children:[(0,t.jsx)(X.Z,{style:{fontSize:"16px",color:"red",marginRight:"10px"},onClick:o}),i," ",a+1]}),children:l},n.key)},K=(e,l,n,t,i)=>{var r,a,s,o,d,c,u,m,v,h;let p;if(!e.materials||!e.materials.length)return;let f=e.materials.map(e=>{let l=q.j[e.symbol],n=l.label,t=l.symbol,i=l.unit;return{label:n,name:t,default:e.default,unit:i}});l.includes("include('/blobs/materials.edp.ejs'")||(eb(l,"<%# Material -%>\n<%- include('/blobs/materials.edp.ejs', {\n  materials\n}) -%>\n",t,i),i((0,w.dJ)({begin:(null!==(o=null==t?void 0:t.row)&&void 0!==o?o:0)+1,end:(null!==(d=null==t?void 0:t.row)&&void 0!==d?d:0)+4})),i((0,w.GW)({row:(null!==(c=null==t?void 0:t.row)&&void 0!==c?c:0)+4,column:0})));try{p=JSON.parse(n)}catch(e){p={}}let x=JSON.stringify(p,null,"	"),j=Object.keys(null!==(u=p.configuration)&&void 0!==u?u:{}).length;p.configuration={...null!==(m=p.configuration)&&void 0!==m?m:{},materials:{index:j+1,title:"Materials",...null!==(v=null===(r=p.configuration)||void 0===r?void 0:r.materials)&&void 0!==v?v:{},children:[...null!==(h=null===(a=p.configuration)||void 0===a?void 0:null===(s=a.materials)||void 0===s?void 0:s.children)&&void 0!==h?h:[],...f.map(e=>({label:e.label,name:e.name,htmlEntity:"formula",default:+e.default,unit:e.unit}))]}};let b=JSON.stringify(p,null,"	"),g=G(x,b);i((0,w.gc)(g)),i((0,w.Gw)({row:g.end,column:0})),i((0,w.j1)(JSON.stringify(p,null,"	")))},Q=()=>{let[e,l]=(0,r.useState)(!1),[n,i]=(0,r.useState)(!1),{template:a,model:s,templateCursor:o,dispatch:d}=(0,r.useContext)(p.rU),c=(0,r.useCallback)(()=>l(!0),[]),m=(0,r.useCallback)(()=>l(!1),[]),v=(0,r.useCallback)(async e=>{i(!0),K(e,a,s,o,d),i(!1),l(!1)},[a,s,o,d]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(F.ZP,{title:"Materials",visible:e,loading:n,onOk:v,onCancel:m,children:(0,t.jsx)(D.Z.List,{name:"materials",children:(e,l,n)=>{let{add:i,remove:r}=l,{errors:a}=n;return(0,t.jsx)(B,{label:"material",add:i,errors:a,children:e.map((e,l)=>(0,t.jsxs)(Y,{label:"Material",field:e,index:l,remove:r,children:[(0,t.jsx)(D.Z.Item,{name:[e.name,"symbol"],label:"Physical parameter",rules:[{required:!0}],children:(0,t.jsx)(V.Z,{options:q.j.map((e,l)=>({label:e.symbol+": "+e.label,value:l}))})}),(0,t.jsx)(D.Z.Item,{name:[e.name,"default"],label:"Default",rules:[{required:!0}],children:(0,t.jsx)(U.Z,{})})]},e.key))})}})}),(0,t.jsx)(u.ZP,{className:_().fullWidth,onClick:c,children:"Materials"})]})},$=(e,l,n,t,i)=>{var r,a,s,o,d,c,u,m,v,h,p,f,x,j;let b;if(!e.options||!e.options.length)return;eb(l,"<%# Finite element space -%>\n<%\nconst finiteElementSpace = parameters.finiteElementSpace.children[0]\nfiniteElementSpace.name = '".concat(e.name,"'\n-%>\n<%- include('/blobs/fespace.edp.ejs', {\n  mesh,\n  finiteElementSpace\n}) -%>\n"),t,i),i((0,w.dJ)({begin:null!==(u=null==t?void 0:t.row)&&void 0!==u?u:0,end:(null!==(m=null==t?void 0:t.row)&&void 0!==m?m:0)+9})),i((0,w.GW)({row:(null!==(v=null==t?void 0:t.row)&&void 0!==v?v:0)+9,column:0}));try{b=JSON.parse(n)}catch(e){b={}}let g=JSON.stringify(b,null,"	"),y=Object.keys(null!==(h=b.configuration)&&void 0!==h?h:{}).length;b.configuration={...null!==(p=b.configuration)&&void 0!==p?p:{},parameters:{index:y+1,title:"Parameters",...null!==(f=null===(r=b.configuration)||void 0===r?void 0:r.parameters)&&void 0!==f?f:{},finiteElementSpace:{advanced:!0,label:"Finite element space",...null!==(x=null===(a=b.configuration)||void 0===a?void 0:null===(s=a.parameters)||void 0===s?void 0:s.finiteElementSpace)&&void 0!==x?x:{},children:[...null!==(j=null===(o=null===(d=b.configuration)||void 0===d?void 0:null===(c=d.parameters)||void 0===c?void 0:c.finiteElementSpace)||void 0===o?void 0:o.children)&&void 0!==j?j:[],{label:"Finite element space label",label2D:"Finite element space label (2D)",htmlEntity:"select",options:e.options,default:e.options[0].value,default2D:e.options[0].value2D}]}}};let E=JSON.stringify(b,null,"	"),S=G(g,E);i((0,w.gc)(S)),i((0,w.Gw)({row:S.end,column:0})),i((0,w.j1)(JSON.stringify(b,null,"	")))},ee=()=>{let e=(0,r.useRef)(null),[l,n]=(0,r.useState)(!1),[i,a]=(0,r.useState)(!1),{template:s,model:o,templateCursor:d,dispatch:c}=(0,r.useContext)(p.rU);(0,r.useEffect)(()=>{e.current&&e.current.focus()});let m=(0,r.useCallback)(()=>n(!0),[]),v=(0,r.useCallback)(()=>n(!1),[]),h=(0,r.useCallback)(async e=>{a(!0),$(e,s,o,d,c),a(!1),n(!1)},[s,o,d,c]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(F.ZP,{title:"Finite element space",visible:l,loading:i,onOk:h,onCancel:v,children:[(0,t.jsx)(D.Z.Item,{name:"name",label:"Name",rules:[{required:!0}],children:(0,t.jsx)(U.Z,{ref:e})}),(0,t.jsx)(D.Z.List,{name:"datas",children:(e,l,n)=>{let{add:i,remove:r}=l,{errors:a}=n;return(0,t.jsx)(B,{label:"finite element space",add:i,errors:a,children:e.map((e,l)=>(0,t.jsxs)(Y,{label:"Option",field:e,index:l,remove:r,children:[(0,t.jsx)(D.Z.Item,{name:[e.name,"label"],label:"Display name",rules:[{required:!0}],children:(0,t.jsx)(U.Z,{placeholder:"P1"})}),(0,t.jsx)(D.Z.Item,{name:[e.name,"value"],label:"Value",rules:[{required:!0}],children:(0,t.jsx)(U.Z,{placeholder:"[P1, P1, P1]"})}),(0,t.jsx)(D.Z.Item,{name:[e.name,"value2D"],label:"Value 2D",rules:[{required:!0}],children:(0,t.jsx)(U.Z,{placeholder:"[P1, P1]"})})]},e.key))})}})]}),(0,t.jsx)(u.ZP,{className:_().fullWidth,onClick:m,children:"Finite element space"})]})},el=(e,l,n)=>{var t,i,r;eb(e,"<%# Headers -%>\n<%- include('/blobs/headers.edp.ejs') -%>\n",l,n),n((0,w.dJ)({begin:(null!==(t=null==l?void 0:l.row)&&void 0!==t?t:0)+1,end:(null!==(i=null==l?void 0:l.row)&&void 0!==i?i:0)+2})),n((0,w.GW)({row:(null!==(r=null==l?void 0:l.row)&&void 0!==r?r:0)+2,column:0}))},en=()=>{let{template:e,templateCursor:l,dispatch:n}=(0,r.useContext)(p.rU),i=(0,r.useCallback)(()=>el(e,l,n),[e,l,n]);return(0,t.jsx)(u.ZP,{className:_().fullWidth,onClick:i,children:"Header"})},et=(e,l,n)=>{var t,i,r;eb(e,"<%# Dimension -%>\n<%- include('/blobs/dimensioning.edp.ejs', {\n    dimension\n}) -%>\n",l,n),n((0,w.dJ)({begin:null!==(t=null==l?void 0:l.row)&&void 0!==t?t:0,end:(null!==(i=null==l?void 0:l.row)&&void 0!==i?i:0)+4})),n((0,w.GW)({row:(null!==(r=null==l?void 0:l.row)&&void 0!==r?r:0)+4,column:0}))},ei=()=>{let{template:e,templateCursor:l,dispatch:n}=(0,r.useContext)(p.rU),i=(0,r.useCallback)(()=>et(e,l,n),[e,l,n]);return(0,t.jsx)(u.ZP,{className:_().fullWidth,onClick:i,children:"Dimension"})},er=(e,l,n,t)=>{var i,r,a;eb(l,"<%# Finite element function -%>\n<%\nconst testFunction = dimension === 2 ? '[".concat(e.test1,", ").concat(e.test2,"]' : '[").concat(e.test1,", ").concat(e.test2,", ").concat(e.test3,"]'\nconst unknownFunction = dimension === 2 ? '[").concat(e.unknown1,", ").concat(e.unknown2,"]' : '[").concat(e.unknown1,", ").concat(e.unknown2,", ").concat(e.unknown3,"]'\n-%>\n<%- include('/blobs/fespaceFunction.edp.ejs', {\n    finiteElementSpace,\n    finiteElementFunction: testFunction\n  }) -%>\n  <%- include('/blobs/fespaceFunction.edp.ejs', {\n    finiteElementSpace,\n    finiteElementFunction: unknownFunction\n}) -%>\n"),n,t),t((0,w.dJ)({begin:null!==(i=null==n?void 0:n.row)&&void 0!==i?i:0,end:(null!==(r=null==n?void 0:n.row)&&void 0!==r?r:0)+13})),t((0,w.GW)({row:(null!==(a=null==n?void 0:n.row)&&void 0!==a?a:0)+13,column:0}))},ea=()=>{let e=(0,r.useRef)(null),[l,n]=(0,r.useState)(!1),[i,a]=(0,r.useState)(!1),{template:s,templateCursor:o,dispatch:c}=(0,r.useContext)(p.rU);(0,r.useEffect)(()=>{e.current&&e.current.focus()});let m=(0,r.useCallback)(()=>n(!0),[]),v=(0,r.useCallback)(()=>n(!1),[]),h=(0,r.useCallback)(async e=>{a(!0),er(e,s,o,c),a(!1),n(!1)},[s,o,c]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(F.ZP,{title:"Finite element function",visible:l,loading:i,onOk:h,onCancel:v,children:[(0,t.jsxs)(D.Z.Item,{label:(0,t.jsx)(d.Z.Text,{strong:!0,children:"Test function"}),children:[(0,t.jsx)(D.Z.Item,{label:"First coordinate",name:"test1",children:(0,t.jsx)(U.Z,{ref:e,placeholder:"Ux"})}),(0,t.jsx)(D.Z.Item,{label:"Second coordinate",name:"test2",children:(0,t.jsx)(U.Z,{placeholder:"Uy"})}),(0,t.jsx)(D.Z.Item,{label:"Third coordinate",name:"test3",children:(0,t.jsx)(U.Z,{placeholder:"Uz"})})]}),(0,t.jsxs)(D.Z.Item,{label:(0,t.jsx)(d.Z.Text,{strong:!0,children:"Unknows function"}),children:[(0,t.jsx)(D.Z.Item,{label:"First coordinate",name:"unknown1",children:(0,t.jsx)(U.Z,{placeholder:"Uhx"})}),(0,t.jsx)(D.Z.Item,{label:"Second coordinate",name:"unknown2",children:(0,t.jsx)(U.Z,{placeholder:"Uhy"})}),(0,t.jsx)(D.Z.Item,{label:"Third coordinate",name:"unknown3",children:(0,t.jsx)(U.Z,{placeholder:"Uhz"})})]})]}),(0,t.jsx)(u.ZP,{className:_().fullWidth,onClick:m,children:"Finite element function"})]})};var es=n(32808);let eo=(e,l,n,t)=>{var i,r,a;let s=e.macros.map(e=>"'"+e+"'").join(", ");eb(l,"<%# Macro -%>\n<%- include('/blobs/macro.edp.ejs', {\n    dimension,\n    type: [".concat(s,"]\n}) -%>\n"),n,t),t((0,w.dJ)({begin:(null!==(i=null==n?void 0:n.row)&&void 0!==i?i:0)+1,end:(null!==(r=null==n?void 0:n.row)&&void 0!==r?r:0)+5})),t((0,w.GW)({row:(null!==(a=null==n?void 0:n.row)&&void 0!==a?a:0)+5,column:0}))},ed=()=>{let[e,l]=(0,r.useState)(!1),[n,i]=(0,r.useState)(!1),{template:a,templateCursor:s,dispatch:o}=(0,r.useContext)(p.rU),d=(0,r.useCallback)(()=>l(!0),[]),c=(0,r.useCallback)(()=>l(!1),[]),m=(0,r.useCallback)(async e=>{i(!0),eo(e,a,s,o),i(!1),l(!1)},[a,s,o]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(F.ZP,{title:"Macros",visible:e,loading:n,onOk:m,onCancel:c,children:(0,t.jsx)(D.Z.Item,{label:"Type",name:"macros",children:(0,t.jsx)(es.Z.Group,{options:[{label:"Scalar gradient",value:"scalarGradient"},{label:"Vectorial divergence",value:"vectorialDivergence"},{label:"Vectorial divergence axisymmetric",value:"vectorialDivergenceRZ"},{label:"Vectorial epsilon",value:"vectorialEpsilon"},{label:"Vectorial gradient",value:"vectorialGradient"},{label:"Vectorial R divergence axisymmetric",value:"vectorialRdivergenceRZ"}],style:{display:"flex",flexDirection:"column"}})})}),(0,t.jsx)(u.ZP,{className:_().fullWidth,onClick:d,children:"Macros"})]})},ec=(e,l,n,t,i)=>{var r,a,s,o,d,c,u,m,v,h,p,f,x,j;let b;eb(l,"<%# Solver -%>\n<% const solver = parameters.solver.children[0].value ?? parameters.solver.children[0].default -%>\n<%- include('/blobs/solver.edp.ejs', {\n    solver\n}) -%>",t,i),i((0,w.dJ)({begin:(null!==(u=null==t?void 0:t.row)&&void 0!==u?u:0)+1,end:(null!==(m=null==t?void 0:t.row)&&void 0!==m?m:0)+5})),i((0,w.GW)({row:(null!==(v=null==t?void 0:t.row)&&void 0!==v?v:0)+5,column:0}));try{b=JSON.parse(n)}catch(e){b={}}let g=JSON.stringify(b,null,"	"),y=Object.keys(null!==(h=b.configuration)&&void 0!==h?h:{}).length;b.configuration={...null!==(p=b.configuration)&&void 0!==p?p:{},parameters:{index:y+1,title:"Parameters",...null!==(f=null===(r=b.configuration)||void 0===r?void 0:r.parameters)&&void 0!==f?f:{},solver:{advanced:!0,label:"Solver",...null!==(x=null===(a=b.configuration)||void 0===a?void 0:null===(s=a.parameters)||void 0===s?void 0:s.solver)&&void 0!==x?x:{},children:[...null!==(j=null===(o=null===(d=b.configuration)||void 0===d?void 0:null===(c=d.parameters)||void 0===c?void 0:c.solver)||void 0===o?void 0:o.children)&&void 0!==j?j:[],{label:"System resolution",htmlEntity:"select",options:e.solvers.map(e=>({label:e,value:e})),default:"MUMPS"}]}}};let E=JSON.stringify(b,null,"	"),S=G(g,E);i((0,w.gc)(S)),i((0,w.Gw)({row:S.end,column:0})),i((0,w.j1)(JSON.stringify(b,null,"	")))},eu=()=>{let[e,l]=(0,r.useState)(!1),[n,i]=(0,r.useState)(!1),{template:a,model:s,templateCursor:o,dispatch:d}=(0,r.useContext)(p.rU),c=(0,r.useCallback)(()=>l(!0),[]),m=(0,r.useCallback)(()=>l(!1),[]),v=(0,r.useCallback)(async e=>{i(!0),ec(e,a,s,o,d),i(!1),l(!1)},[a,s,o,d]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(F.ZP,{title:"Solver",visible:e,loading:n,onOk:v,onCancel:m,children:(0,t.jsx)(D.Z.Item,{name:"solvers",label:"Availables",children:(0,t.jsx)(es.Z.Group,{options:["UMFPCK","CG","Cholesky","Crout","GMRES","LU","sparsesolver","MUMPS"],style:{display:"flex",flexDirection:"column"}})})}),(0,t.jsx)(u.ZP,{className:_().fullWidth,onClick:c,children:"Solver"})]})},em=e=>{var l,n,t,i,r,a,s,o;let d=null===(l=null===(n=e.scalarResults)||void 0===n?void 0:n.map(e=>"'".concat(e.variable,"'")))||void 0===l?void 0:l.join(", "),c=null===(t=null===(i=e.vectorialResults)||void 0===i?void 0:i.map(e=>"dimension === 2 ? ['".concat(e.variable1,"', '").concat(e.variable2,"', '0'] : ['").concat(e.variable1,"', '").concat(e.variable2,"', '").concat(e.variable3,"']")))||void 0===t?void 0:t.join(", "),u=null===(r=null===(a=e.scalarResults)||void 0===a?void 0:a.map(e=>1))||void 0===r?void 0:r.join(", "),m=null===(s=null===(o=e.vectorialResults)||void 0===o?void 0:o.map(e=>1))||void 0===s?void 0:s.join(", ");return{results:(d?d+", ":"")+(null!=c?c:""),order:(u?u+", ":"")+(null!=m?m:"")}},ev=(e,l,n,t,i)=>{var r,a,s,o,d,c,u,m,v,h,p,f,x,j,b,g;let y;if(!e.scalarResults&&!e.vectorialResults||!(null===(r=e.scalarResults)||void 0===r?void 0:r.length)&&!(null===(a=e.vectorialResults)||void 0===a?void 0:a.length))return;let E=em(e);eb(l,"<%# Save -%>\n<%- include('/blobs/save.edp.ejs', {\n    solution: {\n        path: run.resultPath,\n        name: '\"Result\"',\n        mesh: mesh.name,\n        sol: [".concat(E.results,"],\n        dataName: run.results.map(r => r.name),\n        order: [").concat(E.order,"]\n    }\n}) -%>\n"),t,i),i((0,w.dJ)({begin:(null!==(m=null==t?void 0:t.row)&&void 0!==m?m:0)+1,end:(null!==(v=null==t?void 0:t.row)&&void 0!==v?v:0)+11})),i((0,w.GW)({row:(null!==(h=null==t?void 0:t.row)&&void 0!==h?h:0)+11,column:0}));try{y=JSON.parse(n)}catch(e){y={}}let S=JSON.stringify(y,null,"	"),Z=Object.keys(null!==(p=y.configuration)&&void 0!==p?p:{}).length;y.configuration={...null!==(f=y.configuration)&&void 0!==f?f:{},run:{index:Z+1,title:"Run",...null!==(x=null===(s=y.configuration)||void 0===s?void 0:s.run)&&void 0!==x?x:{},results:[...null!==(j=null===(o=y.configuration)||void 0===o?void 0:null===(d=o.run)||void 0===d?void 0:d.results)&&void 0!==j?j:[],...null!==(b=null===(c=e.scalarResults)||void 0===c?void 0:c.map(e=>({name:e.name})))&&void 0!==b?b:[],...null!==(g=null===(u=e.vectorialResults)||void 0===u?void 0:u.map(e=>({name:e.name})))&&void 0!==g?g:[]]}};let k=JSON.stringify(y,null,"	"),C=G(S,k);i((0,w.gc)(C)),i((0,w.Gw)({row:C.end,column:0})),i((0,w.j1)(JSON.stringify(y,null,"	")))},eh=()=>{let[e,l]=(0,r.useState)(!1),[n,i]=(0,r.useState)(!1),{template:a,model:s,templateCursor:o,dispatch:d}=(0,r.useContext)(p.rU),c=(0,r.useCallback)(()=>l(!0),[]),m=(0,r.useCallback)(()=>l(!1),[]),v=(0,r.useCallback)(async e=>{i(!0),ev(e,a,s,o,d),i(!1),l(!1)},[a,s,o,d]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(F.ZP,{title:"Save",visible:e,loading:n,onOk:v,onCancel:m,children:[(0,t.jsx)(D.Z.List,{name:"scalarResults",children:(e,l,n)=>{let{add:i,remove:r}=l,{errors:a}=n;return(0,t.jsx)(B,{label:"scalar result",add:i,errors:a,children:e.map((e,l)=>(0,t.jsxs)(Y,{label:"Scalar result",field:e,index:l,remove:r,children:[(0,t.jsx)(D.Z.Item,{name:[e.name,"name"],label:"Display name",rules:[{required:!0}],children:(0,t.jsx)(U.Z,{})}),(0,t.jsx)(D.Z.Item,{name:[e.name,"variable"],label:"Variable name",rules:[{required:!0}],children:(0,t.jsx)(U.Z,{})})]},e.key))})}}),(0,t.jsx)(D.Z.List,{name:"vectorialResults",children:(e,l,n)=>{let{add:i,remove:r}=l,{errors:a}=n;return(0,t.jsx)(B,{label:"vectorial result",add:i,errors:a,children:e.map((e,l)=>(0,t.jsxs)(Y,{label:"Vectorial result",field:e,index:l,remove:r,children:[(0,t.jsx)(D.Z.Item,{name:[e.name,"name"],label:"Display name",rules:[{required:!0}],children:(0,t.jsx)(U.Z,{})}),(0,t.jsx)(D.Z.Item,{name:[e.name,"variable1"],label:"First component variable name",rules:[{required:!0}],children:(0,t.jsx)(U.Z,{})}),(0,t.jsx)(D.Z.Item,{name:[e.name,"variable2"],label:"Second component variable name",rules:[{required:!0}],children:(0,t.jsx)(U.Z,{})}),(0,t.jsx)(D.Z.Item,{name:[e.name,"variable3"],label:"Third component variable name",rules:[{required:!0}],children:(0,t.jsx)(U.Z,{})})]},e.key))})}})]}),(0,t.jsx)(u.ZP,{className:_().fullWidth,onClick:c,children:"Save"})]})},ep=(e,l,n,t)=>{var i,r,a;e.datas&&e.datas.length&&(eb(l,"<%- include('/blobs/data.edp.ejs', {\n    title: '".concat(e.title,"',\n    path: run.dataPath,\n    fileName: '\"iter_\"+timeIter',\n    dataNames: [").concat(e.datas.map(e=>"'".concat(e.name,"'")).join(", "),"],\n    x: '").concat(e.x,"',\n    ys: [").concat(e.datas.map(e=>"'".concat(e.y,"'")).join(", "),"]\n}) -%>"),n,t),t((0,w.dJ)({begin:null!==(i=null==n?void 0:n.row)&&void 0!==i?i:0,end:(null!==(r=null==n?void 0:n.row)&&void 0!==r?r:0)+8})),t((0,w.GW)({row:(null!==(a=null==n?void 0:n.row)&&void 0!==a?a:0)+8,column:0})))},ef=()=>{let e=(0,r.useRef)(null),[l,n]=(0,r.useState)(!1),[i,a]=(0,r.useState)(!1),{template:s,templateCursor:o,dispatch:d}=(0,r.useContext)(p.rU);(0,r.useEffect)(()=>{e.current&&e.current.focus()});let c=(0,r.useCallback)(()=>n(!1),[]),m=(0,r.useCallback)(()=>n(!0),[]),v=(0,r.useCallback)(async e=>{a(!0),ep(e,s,o,d),a(!1),n(!1)},[s,o,d]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(F.ZP,{title:"Data",visible:l,loading:i,onOk:v,onCancel:c,children:[(0,t.jsx)(D.Z.Item,{label:"Title",name:"title",rules:[{required:!0}],children:(0,t.jsx)(U.Z,{ref:e})}),(0,t.jsx)(D.Z.Item,{label:"X axis variable",name:"x",rules:[{required:!0}],children:(0,t.jsx)(U.Z,{})}),(0,t.jsx)(D.Z.List,{name:"datas",children:(e,l,n)=>{let{add:i,remove:r}=l,{errors:a}=n;return(0,t.jsx)(B,{label:"data",add:i,errors:a,children:e.map((e,l)=>(0,t.jsxs)(Y,{label:"Data",field:e,index:l,remove:r,children:[(0,t.jsx)(D.Z.Item,{name:[e.name,"name"],label:"Display name",rules:[{required:!0}],children:(0,t.jsx)(U.Z,{})}),(0,t.jsx)(D.Z.Item,{name:[e.name,"y"],label:"Y axis variable",rules:[{required:!0}],children:(0,t.jsx)(U.Z,{})})]},e.key))})}})]}),(0,t.jsx)(u.ZP,{className:_().fullWidth,onClick:m,children:"Data"})]})},ex=(e,l,n,t)=>{var i,r,a;eb(l,"<%# Sensors -%>\n<%- helpers.indent(include('/blobs/sensors.edp.ejs', {\n    path: run.dataPath,\n    x: '".concat(e.x,"',\n    sensors: run.sensors\n}), 2) -%>"),n,t),t((0,w.dJ)({begin:(null!==(i=null==n?void 0:n.row)&&void 0!==i?i:0)+1,end:(null!==(r=null==n?void 0:n.row)&&void 0!==r?r:0)+6})),t((0,w.GW)({row:(null!==(a=null==n?void 0:n.row)&&void 0!==a?a:0)+6,column:0}))},ej=()=>{let e=(0,r.useRef)(null),[l,n]=(0,r.useState)(!1),[i,a]=(0,r.useState)(!1),{template:s,templateCursor:o,dispatch:d}=(0,r.useContext)(p.rU);(0,r.useEffect)(()=>{e.current&&e.current.focus()});let c=(0,r.useCallback)(()=>n(!0),[]),m=(0,r.useCallback)(()=>n(!1),[]),v=(0,r.useCallback)(async e=>{a(!0),ex(e,s,o,d),a(!1),n(!1)},[s,o,d]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(F.ZP,{title:"Sensors",visible:l,loading:i,onOk:v,onCancel:m,children:(0,t.jsx)(D.Z.Item,{label:"X axis variable",name:"x",rules:[{required:!0}],children:(0,t.jsx)(U.Z,{ref:e})})}),(0,t.jsx)(u.ZP,{className:_().fullWidth,onClick:c,children:"Sensors"})]})},eb=(e,l,n,t)=>{if(n){let i=n.row,r=e.split("\n"),a=[...r.slice(0,i+1),...l.split("\n"),...r.slice(i+1)];t((0,w.zX)(a.join("\n")))}else t((0,w.zX)(e+l))},eg=()=>(0,t.jsx)("div",{id:"blobs",children:(0,t.jsxs)(J.Z,{style:{overflow:"auto",maxHeight:"calc(100% - 443px)"},children:[(0,t.jsx)(J.Z.Panel,{header:"Head",children:(0,t.jsxs)(c.Z,{direction:"vertical",className:_().fullWidth,children:[(0,t.jsx)(en,{}),(0,t.jsx)(ei,{})]})},"head"),(0,t.jsx)(J.Z.Panel,{header:"Components",children:(0,t.jsxs)(c.Z,{direction:"vertical",className:_().fullWidth,children:[(0,t.jsx)(A,{}),(0,t.jsx)(Q,{}),(0,t.jsx)(ee,{}),(0,t.jsx)(ea,{}),(0,t.jsx)(ed,{}),(0,t.jsx)(eu,{})]})},"components"),(0,t.jsx)(J.Z.Panel,{header:"Results",children:(0,t.jsxs)(c.Z,{direction:"vertical",className:_().fullWidth,children:[(0,t.jsx)(eh,{}),(0,t.jsx)(ef,{}),(0,t.jsx)(ej,{})]})},"results")]})});var ey=n(43008);let ew=e=>{e((0,w.zX)("try{\n<%# Headers -%>\n<%- include('/blobs/headers.edp.ejs') -%>\n\n<%# Dimension -%>\n<%- include('/blobs/dimensioning.edp.ejs', {\n	dimension\n}) -%>\n\n// WRITE YOUR TEMPLATE HERE\n\n} catch(...) {\n	appendError(\"An internal error occurs\");\n	exit(-1);\n}\n")),e((0,w.j1)(JSON.stringify({category:"Category",name:"My new model",algorithm:"Algorithm",code:"FreeFEM",version:"1.0.0",description:"",configuration:{}},null,"	")+"\n"))},eE=()=>{let{dispatch:e}=(0,r.useContext)(p.rU),l=(0,r.useCallback)(()=>ew(e),[e]);return(0,t.jsx)(m.Z,{title:"New model",children:(0,t.jsx)(u.ZP,{icon:(0,t.jsx)(ey.Z,{}),onClick:l,id:"new"})})};var eS=n(44442),eZ=n(15360),ek=n(31545),eC=n(46210),eT={gmsh2D:"gmsh2D.geo.ejs",gmsh3D:"gmsh3D.geo.ejs",poisson:"poisson.edp.ejs",linearElasticity:"linearElasticity.edp.ejs",linearElasticityTime:"linearElasticityTime.edp.ejs",linearElasticityModal:"linearElasticityModal.edp.ejs",stokes:"stokes.edp.ejs",navierStokesTime:"navierStokesTime.edp.ejs",thermicDiffusion:"thermicDiffusion.edp.ejs"},eN=n(9242),eO=n(87782);let eP={delete:"Unable to delete model"},eI=async(e,l,n)=>{try{let t=e.models[l],i=e.templates[l];await j.Z.update([{key:"models",type:"array",method:"remove",value:t},{key:"templates",type:"array",method:"remove",value:i}]);let r=eO.Z.deepCopy(e);r.models=[...r.models.slice(0,l),...r.models.slice(l+1)],r.templates=[...r.templates.slice(0,l),...r.templates.slice(l+1)],await n.mutateUser(r)}catch(e){throw(0,eN.lt)(eP.delete,e),e}},eM=e=>{let{user:l,index:n,swr:i}=e,a=(0,r.useCallback)(async()=>eI(l,n,i),[l,n,i]);return(0,t.jsx)(f.m1,{onDelete:a})},eL={load:"Unable to load current model"},eR=async(e,l)=>{try{l((0,w.j1)(JSON.stringify(e,null,"	")));let n=e.algorithm,t=eT[n],i=await fetch("/templates/"+t),r=await i.text();l((0,w.zX)(r))}catch(e){(0,eN.lt)(eL.load,e)}},eJ=async(e,l,n)=>{try{e.user&&delete e.user,n((0,w.j1)(JSON.stringify(e,null,"	"))),n((0,w.zX)(l))}catch(e){(0,eN.lt)(eL.load,e)}},eD=e=>{let{model:l,setLoading:n,setVisible:i,dispatch:a}=e,s=(0,r.useCallback)(()=>{(async()=>{n(!0);try{await eR(l,a)}finally{n(!1),i(!1)}})()},[l,n,i,a]);return(0,t.jsxs)("div",{className:_().displayFlex,style:{justifyContent:"space-between",alignItems:"center"},children:[l.name,(0,t.jsx)(m.Z,{title:"Open",children:(0,t.jsx)(u.ZP,{onClick:s,icon:(0,t.jsx)(eZ.Z,{})})})]})},eU=e=>{let{user:l,index:n,swr:i,setLoading:a,setVisible:s,dispatch:o}=e,d=(0,r.useMemo)(()=>l.models[n],[l,n]),c=(0,r.useMemo)(()=>l.templates[n],[l,n]),v=(0,r.useCallback)(()=>{(async()=>{a(!0);try{await eJ(d,c,o)}finally{a(!1),s(!1)}})()},[d,c,a,s,o]);return(0,t.jsxs)("div",{className:_().displayFlex,style:{justifyContent:"space-between",alignItems:"center"},children:[d.name,(0,t.jsxs)("div",{children:[(0,t.jsx)(m.Z,{title:"Open",children:(0,t.jsx)(u.ZP,{onClick:v,icon:(0,t.jsx)(eZ.Z,{})})}),(0,t.jsx)(eM,{user:l,index:n,swr:i})]})]})},eF=e=>{let{user:l,swr:n}=e,[i,a]=(0,r.useState)(!1),[s,o]=(0,r.useState)(!1),{dispatch:d}=(0,r.useContext)(p.rU),v=(0,r.useCallback)(()=>a(!0),[]),h=(0,r.useCallback)(()=>a(!1),[]),f=(0,r.useMemo)(()=>eC.Z.map(e=>(0,t.jsx)(eD,{model:e,setLoading:o,setVisible:a,dispatch:d},e.algorithm)),[d]),x=(0,r.useMemo)(()=>l.models.map((e,i)=>(0,t.jsx)(eU,{user:l,index:i,swr:n,setLoading:o,setVisible:a,dispatch:d},e.algorithm)),[l,n,d]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(F.ZP,{title:"Models browser",visible:i,loading:s,onCancel:h,children:(0,t.jsx)(eS.Z,{items:[{key:"models",label:"Tanatloc models",children:(0,t.jsx)(c.Z,{direction:"vertical",className:_().fullWidth,children:f})},{key:"personalModels",label:"My models",children:(0,t.jsx)(c.Z,{direction:"vertical",className:_().fullWidth,children:x})}]})}),(0,t.jsx)(m.Z,{title:"Browse existing models",children:(0,t.jsx)(u.ZP,{icon:(0,t.jsx)(ek.Z,{}),onClick:v,id:"browser"})})]})};var eG=n(39014),eH=n(60219);let e_={json:"Model definition is not valid",check:"Unable to check",save:"Unable to save"},eW=async(e,l,n,t)=>{let i;try{i=JSON.parse(n)}catch(e){(0,eN.lt)(e_.json,e);return}try{let n=e.models.find(e=>e.algorithm===i.algorithm);n?eG.Z.confirm({title:"A model with the same algorithm entry already exists. Do you want to override it?",onOk:async()=>{let n=e.models.findIndex(e=>e.algorithm===i.algorithm);await eA(e,l,i,t,n)}}):await eA(e,l,i,t)}catch(e){(0,eN.lt)(e_.check,e)}},eA=async(e,l,n,t,i)=>{if(void 0===i)try{await j.Z.update([{key:"models",type:"array",method:"append",value:{...n,user:e.id}},{key:"templates",type:"array",method:"append",value:t}]);let i=eO.Z.deepCopy(e);i.models.push(n),await l.mutateUser(i)}catch(e){(0,eN.lt)(e_.save,e)}else try{await j.Z.update([{key:"models",type:"array",method:"set",index:i,value:{...n,user:e.id}},{key:"templates",type:"array",method:"set",index:i,value:t}]);let r=eO.Z.deepCopy(e);r.models[i]=n,await l.mutateUser(r)}catch(e){(0,eN.lt)(e_.save,e)}},eV=e=>{let{user:l,swr:n}=e,[i,a]=(0,r.useState)(!1),[s,o]=(0,r.useState)(!1),{model:d,template:c,templateValid:v,modelValid:h}=(0,r.useContext)(p.rU);(0,r.useEffect)(()=>{v&&h?a(!1):a(!0)},[v,h]);let f=(0,r.useCallback)(()=>{(async()=>{o(!0),await eW(l,n,d,c),o(!1)})()},[l,d,c,n]);return(0,t.jsx)(m.Z,{title:"Save",children:(0,t.jsx)(u.ZP,{disabled:i,loading:s,icon:(0,t.jsx)(eH.Z,{}),onClick:f,id:"save"})})};var eq=n(5152),ez=n.n(eq),eB=n(17157),eX=n.n(eB),eY=n(82826),eK=n(87603);let eQ=e=>{let{onMove:l,onDoubleClick:n}=e,[i,a]=(0,r.useState)(!1),s=(0,r.useCallback)(()=>{a(!0)},[]),o=(0,r.useCallback)(e=>{i&&(e.preventDefault(),l(e.clientX))},[i,l]),d=(0,r.useCallback)(()=>{a(!1)},[]);return(0,r.useEffect)(()=>(window.addEventListener("mousemove",o),window.addEventListener("mouseup",d),()=>{window.removeEventListener("mousemove",o),window.removeEventListener("mouseup",d)})),(0,t.jsxs)("div",{role:"Divider",className:eX().divider,onMouseDown:s,onDoubleClick:n,children:[(0,t.jsx)("div",{className:"circle"}),(0,t.jsx)(eY.Z,{className:"arrowLeft",style:{fontSize:20,fontWeight:"bold"}}),(0,t.jsx)(eK.Z,{className:"arrowRight",style:{fontSize:20,fontWeight:"bold"}})]})},e$=e=>{let{className:l,leftChild:n,rightChild:i}=e,a=(0,r.useRef)(null),[s,o]=(0,r.useState)(),[d,c]=(0,r.useState)(),[u,m]=(0,r.useState)(),v=(0,r.useCallback)(()=>{if(!a.current)return;let e=a.current.getBoundingClientRect();o({left:e.left,width:e.width}),c((e.width-5)/2),m((e.width-5)/2)},[]),h=(0,r.useCallback)(e=>{if(!a.current||!s)return;let l=e-s.left,n=s.width-e+s.left;n<50?(n=0,l=s.width-5):l<50&&(l=0,n=s.width-5),c(l),m(n)},[s]);return(0,r.useEffect)(()=>(window.addEventListener("resize",v),setTimeout(v,500),()=>{window.removeEventListener("resize",v)}),[v]),(0,t.jsxs)("div",{ref:a,className:"".concat(eX().container," ").concat(null!=l?l:""),children:[(0,t.jsx)("div",{style:{width:d},children:n}),(0,t.jsx)(eQ,{onMove:h,onDoubleClick:v}),(0,t.jsx)("div",{style:{width:u},children:i})]})},e0=ez()(()=>Promise.all([n.e(4281),n.e(9742),n.e(2679),n.e(8751)]).then(n.bind(n,68751)).catch(e=>{let l=()=>(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{children:"Unable to load FreeFEM-EJS editor"}),(0,t.jsx)("p",{children:e.message})]});return l}),{loadableGenerated:{webpack:()=>[68751]},ssr:!1}),e1=ez()(()=>Promise.all([n.e(4281),n.e(9742),n.e(8963)]).then(n.bind(n,98963)).catch(e=>{let l=()=>(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{children:"Unable to load JSON editor"}),(0,t.jsx)("p",{children:e.message})]});return l}),{loadableGenerated:{webpack:()=>[98963]},ssr:!1}),e2=()=>(0,t.jsx)(e$,{className:L().code,leftChild:(0,t.jsx)(e0,{}),rightChild:(0,t.jsx)(e1,{})}),e4=[{title:"New",description:"Create your brand new script.",target:()=>document.getElementById("new")},{title:"Code browser",description:"Find one of your previous script or choose a predefined one.",target:()=>document.getElementById("browser")},{title:"Save",description:"Save your script so you can access it later.",target:()=>document.getElementById("save")},{title:"",description:"It checks if you are doing correctly. Keep an eye on these steps to make sure everything is ok.",target:()=>document.getElementById("steps")},{title:"",description:"Write your script here. You can find examples of working scripts by clicking the browse button on top of the JSON editor."},{title:"Blobs",description:"Are you struggling to write your script ? Find some predefined parts of code right here.",target:()=>document.getElementById("blobs")}],e5=()=>{let[e,l]=(0,r.useState)(),[n,b]=(0,r.useState)(!1),g=(0,i.useRouter)(),[y,{loadingUser:w,mutateUser:E}]=j.Z.useUser();(0,r.useEffect)(()=>{(async()=>{w||y||await g.replace("/")})()},[y,w,g]);let S=(0,r.useCallback)(()=>{b(!0)},[]),Z=(0,r.useCallback)(()=>{b(!1)},[]),k=(0,r.useCallback)(()=>{(async()=>{await g.push({pathname:"/dashboard"})})()},[g]);return w||!y?(0,t.jsx)(x.Z,{}):(0,t.jsx)(p.ZP,{children:(0,t.jsxs)(a.Z,{className:L().editor,children:[(0,t.jsxs)(a.Z.Sider,{theme:"light",width:"256",children:[(0,t.jsx)("div",{className:_().logo,children:(0,t.jsx)("img",{src:"/images/logo.svg",alt:"Tanatloc"})}),(0,t.jsx)(s.Z,{mode:"inline",items:[{key:"menu-go-back",disabled:!0,style:{cursor:"unset",margin:"10px 0",paddingLeft:10},label:(0,t.jsx)(f.ks,{onClick:k,children:"Return to dashboard"})},{type:"divider"}]}),(0,t.jsx)(R,{setName:l}),(0,t.jsx)(o.Z,{}),(0,t.jsx)(eg,{})]}),(0,t.jsxs)(a.Z.Content,{className:_().noScroll,children:[(0,t.jsx)(a.Z.Header,{className:L().header,children:(0,t.jsxs)("div",{children:[(0,t.jsx)(d.Z.Text,{strong:!0,children:e}),(0,t.jsxs)(c.Z,{children:[(0,t.jsx)(u.ZP,{onClick:S,children:"Start guide"}),(0,t.jsx)(eE,{}),(0,t.jsx)(eF,{user:{id:y.id,models:y.models,templates:y.templates},swr:{mutateUser:E}}),(0,t.jsx)(eV,{user:{id:y.id,models:y.models},swr:{mutateUser:E}}),(0,t.jsx)(m.Z,{title:"Coming soon",children:(0,t.jsx)(u.ZP,{disabled:!0,icon:(0,t.jsx)(h.Z,{})})})]})]})}),(0,t.jsx)(e2,{}),(0,t.jsx)(v.Z,{open:n,onClose:Z,steps:e4})]})]})})},e3=()=>(0,t.jsx)(e5,{});var e9=e3},17157:function(e){e.exports={container:"sidePanels_container__Oub5c",divider:"sidePanels_divider___9ksR"}},36294:function(e){e.exports={variables:'"@/styles/variables.css"',colorPrimary:"#fad114",editor:"editor_editor__vhC5B",header:"editor_header__EAFxp",steps:"editor_steps__8Zh42",code:"editor_code__MLS9F",codeBlock:"editor_codeBlock__alF_c",tooltip:"editor_tooltip__W20v5"}}},function(e){e.O(0,[5336,1289,2850,4442,5813,2692,3947,1338,8347,9014,4700,9103,3822,4490,7770,8871,9774,2888,179],function(){return e(e.s=59261)}),_N_E=e.O()}]);