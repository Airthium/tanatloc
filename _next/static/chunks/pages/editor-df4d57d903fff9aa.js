(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4154],{31832:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/editor",function(){return t(68723)}])},8571:function(e,n,t){"use strict";t.d(n,{ET:function(){return o},KJ:function(){return a},j1:function(){return s},pj:function(){return l},zX:function(){return i}});var r=t(3580),i=function(e){return{type:r.Hp.SETTEMPLATE,value:e}},s=function(e){return{type:r.Hp.SETMODEL,value:e}},a=function(e){return{type:r.Hp.SETCURSOR,value:e}},l=function(e){return{type:r.Hp.SETTEMPLATEVALID,value:e}},o=function(e){return{type:r.Hp.SETMODELVALID,value:e}}},3580:function(e,n,t){"use strict";t.d(n,{Hp:function(){return o},rU:function(){return c}});var r=t(26042),i=t(69396),s=t(85893),a=t(67294),l={template:"",model:"",dispatch:function(){},templateValid:!1,modelValid:!1},o={SETTEMPLATE:"SETTEMPLATE",SETMODEL:"SETMODEL",SETCURSOR:"SETCURSOR",SETTEMPLATEVALID:"SETTEMPLATEVALID",SETMODELVALID:"SETMODELVALID"},c=(0,a.createContext)(l),u=function(e,n){switch(n.type){case o.SETTEMPLATE:return(0,i.Z)((0,r.Z)({},e),{template:n.value});case o.SETMODEL:return(0,i.Z)((0,r.Z)({},e),{model:n.value});case o.SETCURSOR:return(0,i.Z)((0,r.Z)({},e),{cursor:n.value});case o.SETTEMPLATEVALID:return(0,i.Z)((0,r.Z)({},e),{templateValid:n.value});case o.SETMODELVALID:return(0,i.Z)((0,r.Z)({},e),{modelValid:n.value});default:return e}};n.ZP=function(e){var n=e.children,t=(0,a.useReducer)(u,l),o=t[0],d=t[1];return(0,s.jsx)(c.Provider,{value:(0,i.Z)((0,r.Z)({},o),{dispatch:d}),children:n})}},68723:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return De}});var r=t(85893),i=t(828),s=t(11163),a=t(67294),l=t(13448),o=t(97183),c=t(66516),u=t(27049),d=t(6880),m=t(26713),f=t(84908),h=t(71577),p=t(20046),v=t(41641),x=t(75107),j=t(67169),Z=t(3580),g=t(26042),b=t(69396),y=t(91756),w=t(8571),E=function(e,n){if(e){if(!e.index)throw new Error("missing configuration."+n+".index");if(!e.title)throw new Error("missing configuration."+n+".title")}},S=function(e){if(!e)throw new Error("missing configuration.geometry");if(E(e,"geometry"),void 0===e.meshable)throw new Error("missing configuration.geometry.meshable")},k=function(e){if(e){if(E(e,"materials"),!e.children)throw new Error("missing configuration.materials.children");e.children.forEach((function(e,n){if(!e.label)throw new Error("missing configuration.materials.children["+n+"].label");if(!e.name)throw new Error("missing configuration.materials.children["+n+"].name");if(!e.htmlEntity)throw new Error("missing configuration.materials.children["+n+"].htmlEntity");if(void 0===e.default)throw new Error("missing configuration.materials.children["+n+"].default");if(!e.unit)throw new Error("missing configuration.materials.children["+n+"].unit")}))}},C=function(e){if(!e)throw new Error("missing configuration.parameters");E(e,"parameters"),Object.keys(e).forEach((function(n){if("index"!==n&&"title"!==n&&"done"!==n){var t=e[n];if(!t.label)throw new Error("missing configuration.parameters."+n+".label");if(!t.children)throw new Error("missing configuration.parameters."+n+".children");T(t,n)}}))},T=function(e,n){e.children.forEach((function(e,t){if(!e.label)throw new Error("missing configuration.parameters."+n+".children["+t+"].label");if(!e.htmlEntity)throw new Error("missing configuration.parameters."+n+".children["+t+"].htmlEntity");if(void 0===e.default)throw new Error("missing configuration.parameters."+n+".children["+t+"].default")}))},N=function(e){e&&E(e,"initialization")},I=function(e){if(!e)throw new Error("missing configuration.boundaryConditions");E(e,"boundaryConditions"),Object.keys(e).forEach((function(n){if("title"!==n&&"index"!==n&&"done"!==n&&!e[n].label)throw new Error("missing configuration.boundaryConditions."+n+".label")}))},O=function(e){if(!e)throw new Error("missing configuration.run")},_=function(e){var n,t,i,s,l,o,c,u,d,m,f,p,v,x=e.setName,j=(0,a.useState)({}),E=j[0],T=j[1],_=(0,a.useContext)(Z.rU),D=_.template,P=_.model,U=_.dispatch;return(0,a.useEffect)((function(){if(!D)return T((function(e){return(0,b.Z)((0,g.Z)({},e),{template:{status:"wait",err:""},test:{status:"wait"}})})),void U((0,w.pj)(!1));T((function(e){var n;return(0,b.Z)((0,g.Z)({},e),{template:{status:"finish"},test:{status:"finish"===(null===(n=e.model)||void 0===n?void 0:n.status)?"process":"wait"}})})),U((0,w.pj)(!0))}),[D,U]),(0,a.useEffect)((function(){if(!P)return T((function(e){return(0,b.Z)((0,g.Z)({},e),{model:{status:"wait"},test:{status:"wait"}})})),void U((0,w.ET)(!1));try{var e=JSON.parse(P);e.name&&x(e.name),function(e){if(!e.category)throw new Error("missing category");if(!e.name)throw new Error("missing name");if(!e.algorithm)throw new Error("missing algorithm");if(!e.code)throw new Error("missing code");if(!e.version)throw new Error("missing version");if(!e.description)throw new Error("missing description");if(!e.configuration)throw new Error("missing configuration");S(e.configuration.geometry),k(e.configuration.materials),C(e.configuration.parameters),N(e.configuration.initialization),I(e.configuration.boundaryConditions),O(e.configuration.run)}(e),T((function(e){var n;return(0,b.Z)((0,g.Z)({},e),{model:{status:"finish"},test:{status:"finish"===(null===(n=e.template)||void 0===n?void 0:n.status)?"process":"wait"}})})),U((0,w.ET)(!0))}catch(n){T((function(e){return(0,b.Z)((0,g.Z)({},e),{model:{status:"error",err:n.message},test:{status:"wait"}})})),U((0,w.ET)(!1))}}),[P,x,U]),(0,r.jsxs)(y.Z,{className:"Editor-Steps",direction:"vertical",children:[(0,r.jsx)(y.Z.Step,{title:"Check template format",description:null!==(d=null===(n=E.template)||void 0===n?void 0:n.err)&&void 0!==d?d:"EJS + FreeFEM",status:null!==(m=null===(t=E.template)||void 0===t?void 0:t.status)&&void 0!==m?m:"wait"}),(0,r.jsx)(y.Z.Step,{title:"Check description format",description:null!==(f=null===(i=E.model)||void 0===i||null===(s=i.err)||void 0===s?void 0:s.replace(/\./g," > "))&&void 0!==f?f:"JSON",status:null!==(p=null===(l=E.model)||void 0===l?void 0:l.status)&&void 0!==p?p:"wait"}),(0,r.jsx)(y.Z.Step,{title:"Test template + description",description:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.Z,{disabled:!("finish"===(null===(o=E.template)||void 0===o?void 0:o.status)&&"finish"===(null===(c=E.model)||void 0===c?void 0:c.status)),onClick:console.log,children:"Run"})," ","template on Tanatloc server"]}),status:null!==(v=null===(u=E.test)||void 0===u?void 0:u.status)&&void 0!==v?v:"wait"})]})},D=t(29815),P=t(54907),U=t(47568),F=t(20414),M=t(81579),R=t(69677),L=t(32834),J=function(){var e=(0,a.useState)(!1),n=e[0],t=e[1],i=(0,a.useState)(!1),s=i[0],l=i[1],o=(0,a.useContext)(Z.rU),c=o.template,u=o.model,d=o.cursor,m=o.dispatch;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(L.ZP,{title:"Mesh",visible:n,loading:s,onOk:function(){var e=(0,U.Z)((function(e){return(0,F.__generator)(this,(function(n){return l(!0),function(e,n,t,r,i){var s,a;n.includes("include('/blobs/mesh.edp.ejs'")||(te(n,"<%# Mesh -%>\n<%\nconst mesh = geometry.mesh\nmesh.name = '".concat(e.name,"'\n-%>\n<%- include('/blobs/mesh.edp.ejs', {\n  dimension,\n  mesh\n}) -%>\n"),r,i),i((0,w.KJ)({row:((null===r||void 0===r?void 0:r.row)||0)+9,column:0})));try{a=JSON.parse(t)}catch(o){a={}}var l=Object.keys(a.configuration||{}).length;a.configuration=(0,b.Z)((0,g.Z)({},a.configuration||{}),{geometry:(0,b.Z)((0,g.Z)({index:l+1,title:"Geometry",mesh:{name:e.name}},(null===(s=a.configuration)||void 0===s?void 0:s.geometry)||{}),{meshable:!0})}),i((0,w.j1)(JSON.stringify(a,null,"\t")))}(e,c,u,d,m),l(!1),t(!1),[2]}))}));return function(n){return e.apply(this,arguments)}}(),onCancel:function(){return t(!1)},children:(0,r.jsx)(M.Z.Item,{name:"name",label:"Name",rules:[{required:!0}],children:(0,r.jsx)(R.Z,{})})}),(0,r.jsx)(h.Z,{className:"full-width",onClick:function(){return t(!0)},children:"Mesh"})]})},A=t(40038),V=t(3089),q=t(24969),z=t(47403),H=function(){var e=(0,a.useState)(!1),n=e[0],t=e[1],i=(0,a.useState)(!1),s=i[0],l=i[1],o=(0,a.useContext)(Z.rU),c=o.template,u=o.model,d=o.cursor,m=o.dispatch;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(L.ZP,{title:"Materials",visible:n,loading:s,onOk:function(){var e=(0,U.Z)((function(e){return(0,F.__generator)(this,(function(n){return l(!0),function(e,n,t,r,i){var s,a,l;if(e.materials&&e.materials.length){var o,c=e.materials.map((function(e){var n=z.j[e.symbol],t=n.label,r=n.symbol,i=n.unit;return{label:t,name:r,default:e.default,unit:i}}));n.includes("include('/blobs/materials.edp.ejs'")||(te(n,"<%# Material -%>\n<%- include('/blobs/materials.edp.ejs', {\n  materials\n}) -%>\n",r,i),i((0,w.KJ)({row:((null===r||void 0===r?void 0:r.row)||4)+0,column:0})));try{o=JSON.parse(t)}catch(d){o={}}var u=Object.keys(o.configuration||{}).length;o.configuration=(0,b.Z)((0,g.Z)({},o.configuration||{}),{materials:(0,b.Z)((0,g.Z)({index:u+1,title:"Materials"},(null===(s=o.configuration)||void 0===s?void 0:s.materials)||{}),{children:(0,D.Z)((null===(a=o.configuration)||void 0===a||null===(l=a.materials)||void 0===l?void 0:l.children)||[]).concat((0,D.Z)(c.map((function(e){return{label:e.label,name:e.name,htmlEntity:"formula",default:+e.default,unit:e.unit}}))))})}),i((0,w.j1)(JSON.stringify(o,null,"\t")))}}(e,c,u,d,m),l(!1),t(!1),[2]}))}));return function(n){return e.apply(this,arguments)}}(),onCancel:function(){return t(!1)},children:(0,r.jsx)(M.Z.List,{name:"materials",children:function(e,n,t){var i=n.add,s=n.remove,a=t.errors;return(0,r.jsxs)(r.Fragment,{children:[e.map((function(e,n){return(0,r.jsxs)(M.Z.Item,{label:(0,r.jsxs)("div",{children:[(0,r.jsx)(V.Z,{style:{fontSize:"16px",color:"red",marginRight:"10px"},onClick:function(){return s(e.name)}}),"Material ",n+1]}),children:[(0,r.jsx)(M.Z.Item,{name:[e.name,"symbol"],label:"Physical parameter",rules:[{required:!0}],children:(0,r.jsx)(A.Z,{options:z.j.map((function(e,n){return{label:e.symbol+": "+e.label,value:n}}))})}),(0,r.jsx)(M.Z.Item,{name:[e.name,"default"],label:"Default",rules:[{required:!0}],children:(0,r.jsx)(R.Z,{})})]},e.key)})),(0,r.jsxs)(M.Z.Item,{children:[(0,r.jsx)(h.Z,{type:"dashed",onClick:function(){return i()},style:{width:"60%"},icon:(0,r.jsx)(q.Z,{}),children:"Add material"}),(0,r.jsx)(M.Z.ErrorList,{errors:a})]})]})}})}),(0,r.jsx)(h.Z,{className:"full-width",onClick:function(){return t(!0)},children:"Materials"})]})},K=function(){var e=(0,a.useState)(!1),n=e[0],t=e[1],i=(0,a.useState)(!1),s=i[0],l=i[1],o=(0,a.useContext)(Z.rU),c=o.template,u=o.model,d=o.cursor,m=o.dispatch;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(L.ZP,{title:"Finite element space",visible:n,loading:s,onOk:function(){var e=(0,U.Z)((function(e){return(0,F.__generator)(this,(function(n){return l(!0),function(e,n,t,r,i){var s,a,l,o,c,u;if(e.options&&e.options.length){var d;te(n,"<%# Finite element space -%>\n<%\nconst finiteElementSpace = parameters.finiteElementSpace.children[0]\nfiniteElementSpace.name = '".concat(e.name,"'\n-%>\n<%- include('/blobs/fespace.edp.ejs', {\n  mesh,\n  finiteElementSpace\n}) -%>\n"),r,i),i((0,w.KJ)({row:((null===r||void 0===r?void 0:r.row)||9)+0,column:0}));try{d=JSON.parse(t)}catch(f){d={}}var m=Object.keys(d.configuration||{}).length;d.configuration=(0,b.Z)((0,g.Z)({},d.configuration||{}),{parameters:(0,b.Z)((0,g.Z)({index:m+1,title:"Parameters"},(null===(s=d.configuration)||void 0===s?void 0:s.parameters)||{}),{finiteElementSpace:(0,b.Z)((0,g.Z)({advanced:!0,label:"Finite element space"},(null===(a=d.configuration)||void 0===a||null===(l=a.parameters)||void 0===l?void 0:l.finiteElementSpace)||{}),{children:(0,D.Z)((null===(u=null===(o=d.configuration)||void 0===o||null===(c=o.parameters)||void 0===c?void 0:c.finiteElementSpace)||void 0===u?void 0:u.children)||[]).concat([{label:"Finite element space label",label2D:"Finite element space label (2D)",htmlEntity:"select",options:e.options,default:e.options[0].value,default2D:e.options[0].value2D}])})})}),i((0,w.j1)(JSON.stringify(d,null,"\t")))}}(e,c,u,d,m),l(!1),t(!1),[2]}))}));return function(n){return e.apply(this,arguments)}}(),onCancel:function(){return t(!1)},children:[(0,r.jsx)(M.Z.Item,{name:"name",label:"Name",rules:[{required:!0}],children:(0,r.jsx)(R.Z,{})}),(0,r.jsx)(M.Z.List,{name:"datas",children:function(e,n,t){var i=n.add,s=n.remove,a=t.errors;return(0,r.jsxs)(r.Fragment,{children:[e.map((function(e,n){return(0,r.jsxs)(M.Z.Item,{label:(0,r.jsxs)("div",{children:[(0,r.jsx)(V.Z,{style:{fontSize:"16px",color:"red",marginRight:"10px"},onClick:function(){return s(e.name)}}),"Option ",n+1]}),children:[(0,r.jsx)(M.Z.Item,{name:[e.name,"label"],label:"Display name",rules:[{required:!0}],children:(0,r.jsx)(R.Z,{placeholder:"P1"})}),(0,r.jsx)(M.Z.Item,{name:[e.name,"value"],label:"Value",rules:[{required:!0}],children:(0,r.jsx)(R.Z,{placeholder:"[P1, P1, P1]"})}),(0,r.jsx)(M.Z.Item,{name:[e.name,"value2D"],label:"Value 2D",rules:[{required:!0}],children:(0,r.jsx)(R.Z,{placeholder:"[P1, P1]"})})]},e.key)})),(0,r.jsxs)(M.Z.Item,{children:[(0,r.jsx)(h.Z,{type:"dashed",onClick:function(){return i()},style:{width:"60%"},icon:(0,r.jsx)(q.Z,{}),children:"Add data"}),(0,r.jsx)(M.Z.ErrorList,{errors:a})]})]})}})]}),(0,r.jsx)(h.Z,{className:"full-width",onClick:function(){return t(!0)},children:"Finite element space"})]})},X=function(){var e=(0,a.useContext)(Z.rU),n=e.template,t=e.cursor,i=e.dispatch;return(0,r.jsx)(h.Z,{className:"full-width",onClick:function(){return function(e,n,t){te(e,"<%# Headers -%>\n<%- include('/blobs/headers.edp.ejs') -%>\n",n,t),t((0,w.KJ)({row:((null===n||void 0===n?void 0:n.row)||0)+2,column:0}))}(n,t,i)},children:"Header"})},G=function(){var e=(0,a.useContext)(Z.rU),n=e.template,t=e.cursor,i=e.dispatch;return(0,r.jsx)(h.Z,{className:"full-width",onClick:function(){return function(e,n,t){te(e,"<%# Dimension -%>\n<%- include('/blobs/dimensioning.edp.ejs', {\n    dimension\n}) -%>\n",n,t),t((0,w.KJ)({row:((null===n||void 0===n?void 0:n.row)||0)+4,column:0}))}(n,t,i)},children:"Dimension"})},Y=function(){var e=(0,a.useState)(!1),n=e[0],t=e[1],i=(0,a.useState)(!1),s=i[0],l=i[1],o=(0,a.useContext)(Z.rU),c=o.template,u=o.cursor,m=o.dispatch;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(L.ZP,{title:"Finite element function",visible:n,loading:s,onOk:function(){var e=(0,U.Z)((function(e){return(0,F.__generator)(this,(function(n){return l(!0),function(e,n,t,r){te(n,"<%# Finite element function -%>\n<%\nconst testFunction = dimension === 2 ? '[".concat(e.test1,", ").concat(e.test2,"]' : '[").concat(e.test1,", ").concat(e.test2,", ").concat(e.test3,"]'\nconst unknownFunction = dimension === 2 ? '[").concat(e.unknown1,", ").concat(e.unknown2,"]' : '[").concat(e.unknown1,", ").concat(e.unknown2,", ").concat(e.unknown3,"]'\n-%>\n<%- include('/blobs/fespaceFunction.edp.ejs', {\n    finiteElementSpace,\n    finiteElementFunction: testFunction\n  }) -%>\n  <%- include('/blobs/fespaceFunction.edp.ejs', {\n    finiteElementSpace,\n    finiteElementFunction: unknownFunction\n}) -%>\n"),t,r),r((0,w.KJ)({row:((null===t||void 0===t?void 0:t.row)||9)+0,column:0}))}(e,c,u,m),l(!1),t(!1),[2]}))}));return function(n){return e.apply(this,arguments)}}(),onCancel:function(){return t(!1)},children:[(0,r.jsxs)(M.Z.Item,{label:(0,r.jsx)(d.Z.Text,{strong:!0,children:"Test function"}),children:[(0,r.jsx)(M.Z.Item,{label:"First coordinate",name:"test1",children:(0,r.jsx)(R.Z,{placeholder:"Ux"})}),(0,r.jsx)(M.Z.Item,{label:"Second coordinate",name:"test2",children:(0,r.jsx)(R.Z,{placeholder:"Uy"})}),(0,r.jsx)(M.Z.Item,{label:"Third coordinate",name:"test3",children:(0,r.jsx)(R.Z,{placeholder:"Uz"})})]}),(0,r.jsxs)(M.Z.Item,{label:(0,r.jsx)(d.Z.Text,{strong:!0,children:"Unknows function"}),children:[(0,r.jsx)(M.Z.Item,{label:"First coordinate",name:"unknown1",children:(0,r.jsx)(R.Z,{placeholder:"Uhx"})}),(0,r.jsx)(M.Z.Item,{label:"Second coordinate",name:"unknown2",children:(0,r.jsx)(R.Z,{placeholder:"Uhy"})}),(0,r.jsx)(M.Z.Item,{label:"Third coordinate",name:"unknown3",children:(0,r.jsx)(R.Z,{placeholder:"Uhz"})})]})]}),(0,r.jsx)(h.Z,{className:"full-width",onClick:function(){return t(!0)},children:"Finite element function"})]})},B=t(32808),W=function(){var e=(0,a.useState)(!1),n=e[0],t=e[1],i=(0,a.useState)(!1),s=i[0],l=i[1],o=(0,a.useContext)(Z.rU),c=o.template,u=o.cursor,d=o.dispatch;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(L.ZP,{title:"Macros",visible:n,loading:s,onOk:function(){var e=(0,U.Z)((function(e){return(0,F.__generator)(this,(function(n){return l(!0),function(e,n,t,r){var i=e.macros.map((function(e){return"'"+e+"'"})).join(", ");te(n,"<%# Macro -%>\n<%- include('/blobs/macro.edp.ejs', {\n    dimension,\n    type: [".concat(i,"]\n}) -%>\n"),t,r),r((0,w.KJ)({row:((null===t||void 0===t?void 0:t.row)||5)+0,column:0}))}(e,c,u,d),l(!1),t(!1),[2]}))}));return function(n){return e.apply(this,arguments)}}(),onCancel:function(){return t(!1)},children:(0,r.jsx)(M.Z.Item,{label:"Type",name:"macros",children:(0,r.jsx)(B.Z.Group,{options:[{label:"Scalar gradient",value:"scalarGradient"},{label:"Vectorial divergence",value:"vectorialDivergence"},{label:"Vectorial divergence axisymmetric",value:"vectorialDivergenceRZ"},{label:"Vectorial epsilon",value:"vectorialEpsilon"},{label:"Vectorial gradient",value:"vectorialGradient"},{label:"Vectorial R divergence axisymmetric",value:"vectorialRdivergenceRZ"}],style:{display:"flex",flexDirection:"column"}})})}),(0,r.jsx)(h.Z,{className:"full-width",onClick:function(){return t(!0)},children:"Macros"})]})},Q=function(){var e=(0,a.useState)(!1),n=e[0],t=e[1],i=(0,a.useState)(!1),s=i[0],l=i[1],o=(0,a.useContext)(Z.rU),c=o.template,u=o.model,d=o.cursor,m=o.dispatch;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(L.ZP,{title:"Solver",visible:n,loading:s,onOk:function(){var e=(0,U.Z)((function(e){return(0,F.__generator)(this,(function(n){return l(!0),function(e,n,t,r,i){var s,a,l,o,c,u,d;te(n,"<%# Solver -%>\n<% const solver = parameters.solver.children[0].value ?? parameters.solver.children[0].default -%>\n<%- include('/blobs/solver.edp.ejs', {\n    solver\n}) -%>",r,i),i((0,w.KJ)({row:((null===r||void 0===r?void 0:r.row)||9)+0,column:0}));try{d=JSON.parse(t)}catch(f){d={}}var m=Object.keys(d.configuration||{}).length;d.configuration=(0,b.Z)((0,g.Z)({},d.configuration||{}),{parameters:(0,b.Z)((0,g.Z)({index:m+1,title:"Parameters"},(null===(s=d.configuration)||void 0===s?void 0:s.parameters)||{}),{solver:(0,b.Z)((0,g.Z)({advanced:!0,label:"Solver"},(null===(a=d.configuration)||void 0===a||null===(l=a.parameters)||void 0===l?void 0:l.solver)||{}),{children:(0,D.Z)((null===(u=null===(o=d.configuration)||void 0===o||null===(c=o.parameters)||void 0===c?void 0:c.solver)||void 0===u?void 0:u.children)||[]).concat([{label:"System resolution",htmlEntity:"select",options:e.solvers.map((function(e){return{label:e,value:e}})),default:"MUMPS"}])})})}),i((0,w.j1)(JSON.stringify(d,null,"\t")))}(e,c,u,d,m),l(!1),t(!1),[2]}))}));return function(n){return e.apply(this,arguments)}}(),onCancel:function(){return t(!1)},children:(0,r.jsx)(M.Z.Item,{name:"solvers",label:"Availables",children:(0,r.jsx)(B.Z.Group,{options:["UMFPCK","CG","Cholesky","Crout","GMRES","LU","sparsesolver","MUMPS"],style:{display:"flex",flexDirection:"column"}})})}),(0,r.jsx)(h.Z,{className:"full-width",onClick:function(){return t(!0)},children:"Solver"})]})},$=function(){var e=(0,a.useState)(!1),n=e[0],t=e[1],i=(0,a.useState)(!1),s=i[0],l=i[1],o=(0,a.useContext)(Z.rU),c=o.template,u=o.model,d=o.cursor,m=o.dispatch;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(L.ZP,{title:"Save",visible:n,loading:s,onOk:function(){var e=(0,U.Z)((function(e){return(0,F.__generator)(this,(function(n){return l(!0),function(e,n,t,r,i){var s,a,l,o,c,u,d;if((e.scalarResults||e.vectorialResults)&&((null===(s=e.scalarResults)||void 0===s?void 0:s.length)||(null===(a=e.vectorialResults)||void 0===a?void 0:a.length))){var m,f=function(e){var n,t,r,i,s,a,l,o,c=null===(t=null===(n=e.scalarResults)||void 0===n?void 0:n.map((function(e){return"'".concat(e.variable,"'")})))||void 0===t?void 0:t.join(", "),u=null===(i=null===(r=e.vectorialResults)||void 0===r?void 0:r.map((function(e){return"dimension === 2 ? ['".concat(e.variable1,"', '").concat(e.variable2,"', '0'] : ['").concat(e.variable1,"', '").concat(e.variable2,"', '").concat(e.variable3,"']")})))||void 0===i?void 0:i.join(", "),d=(c?c+", ":"")+(null!==u&&void 0!==u?u:""),m=null===(a=null===(s=e.scalarResults)||void 0===s?void 0:s.map((function(e){return 1})))||void 0===a?void 0:a.join(", "),f=null===(o=null===(l=e.vectorialResults)||void 0===l?void 0:l.map((function(e){return 1})))||void 0===o?void 0:o.join(", ");return{results:d,order:(m?m+", ":"")+(null!==f&&void 0!==f?f:"")}}(e);te(n,"<%# Save -%>\n<%- include('/blobs/save.edp.ejs', {\n    solution: {\n        path: run.resultPath,\n        name: '\"Result\"',\n        mesh: mesh.name,\n        sol: [".concat(f.results,"],\n        dataName: run.results.map(r => r.name),\n        order: [").concat(f.order,"]\n    }\n}) -%>\n"),r,i),i((0,w.KJ)({row:((null===r||void 0===r?void 0:r.row)||4)+0,column:0}));try{m=JSON.parse(t)}catch(v){m={}}var h,p=Object.keys(m.configuration||{}).length;m.configuration=(0,b.Z)((0,g.Z)({},m.configuration||{}),{run:(0,b.Z)((0,g.Z)({index:p+1,title:"Run"},null!==(h=null===(l=m.configuration)||void 0===l?void 0:l.run)&&void 0!==h?h:{}),{results:(0,D.Z)((null===(o=m.configuration)||void 0===o||null===(c=o.run)||void 0===c?void 0:c.results)||[]).concat((0,D.Z)((null===(u=e.scalarResults)||void 0===u?void 0:u.map((function(e){return{name:e.name}})))||[]),(0,D.Z)((null===(d=e.vectorialResults)||void 0===d?void 0:d.map((function(e){return{name:e.name}})))||[]))})}),i((0,w.j1)(JSON.stringify(m,null,"\t")))}}(e,c,u,d,m),l(!1),t(!1),[2]}))}));return function(n){return e.apply(this,arguments)}}(),onCancel:function(){return t(!1)},children:[(0,r.jsx)(M.Z.List,{name:"scalarResults",children:function(e,n,t){var i=n.add,s=n.remove,a=t.errors;return(0,r.jsxs)(r.Fragment,{children:[e.map((function(e,n){return(0,r.jsxs)(M.Z.Item,{label:(0,r.jsxs)("div",{children:[(0,r.jsx)(V.Z,{style:{fontSize:"16px",color:"red",marginRight:"10px"},onClick:function(){return s(e.name)}}),"Scalar result ",n+1]}),children:[(0,r.jsx)(M.Z.Item,{name:[e.name,"name"],label:"Display name",rules:[{required:!0}],children:(0,r.jsx)(R.Z,{})}),(0,r.jsx)(M.Z.Item,{name:[e.name,"variable"],label:"Variable name",rules:[{required:!0}],children:(0,r.jsx)(R.Z,{})})]},e.key)})),(0,r.jsxs)(M.Z.Item,{children:[(0,r.jsx)(h.Z,{type:"dashed",onClick:function(){return i()},style:{width:"60%"},icon:(0,r.jsx)(q.Z,{}),children:"Add scalar result"}),(0,r.jsx)(M.Z.ErrorList,{errors:a})]})]})}}),(0,r.jsx)(M.Z.List,{name:"vectorialResults",children:function(e,n,t){var i=n.add,s=n.remove,a=t.errors;return(0,r.jsxs)(r.Fragment,{children:[e.map((function(e,n){return(0,r.jsxs)(M.Z.Item,{label:(0,r.jsxs)("div",{children:[(0,r.jsx)(V.Z,{style:{fontSize:"16px",color:"red",marginRight:"10px"},onClick:function(){return s(e.name)}}),"Vectorial result ",n+1]}),children:[(0,r.jsx)(M.Z.Item,{name:[e.name,"name"],label:"Display name",rules:[{required:!0}],children:(0,r.jsx)(R.Z,{})}),(0,r.jsx)(M.Z.Item,{name:[e.name,"variable1"],label:"First component variable name",rules:[{required:!0}],children:(0,r.jsx)(R.Z,{})}),(0,r.jsx)(M.Z.Item,{name:[e.name,"variable2"],label:"Second component variable name",rules:[{required:!0}],children:(0,r.jsx)(R.Z,{})}),(0,r.jsx)(M.Z.Item,{name:[e.name,"variable3"],label:"Third component variable name",rules:[{required:!0}],children:(0,r.jsx)(R.Z,{})})]},e.key)})),(0,r.jsxs)(M.Z.Item,{children:[(0,r.jsx)(h.Z,{type:"dashed",onClick:function(){return i()},style:{width:"60%"},icon:(0,r.jsx)(q.Z,{}),children:"Add vectorial result"}),(0,r.jsx)(M.Z.ErrorList,{errors:a})]})]})}})]}),(0,r.jsx)(h.Z,{className:"full-width",onClick:function(){return t(!0)},children:"Save"})]})},ee=function(){var e=(0,a.useState)(!1),n=e[0],t=e[1],i=(0,a.useState)(!1),s=i[0],l=i[1],o=(0,a.useContext)(Z.rU),c=o.template,u=o.cursor,d=o.dispatch;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(L.ZP,{title:"Data",visible:n,loading:s,onOk:function(){var e=(0,U.Z)((function(e){return(0,F.__generator)(this,(function(n){return l(!0),function(e,n,t,r){e.datas&&e.datas.length&&(te(n,"<%- include('/blobs/data.edp.ejs', {\n    path: run.dataPath,\n    fileName: '\"iter_\"+timeIter',\n    dataNames: [".concat(e.datas.map((function(e){return"'".concat(e.name,"'")})).join(", "),"],\n    x: '").concat(e.x,"',\n    ys: [").concat(e.datas.map((function(e){return"'".concat(e.y,"'")})).join(", "),"]\n}) -%>"),t,r),r((0,w.KJ)({row:((null===t||void 0===t?void 0:t.row)||4)+0,column:0})))}(e,c,u,d),l(!1),t(!1),[2]}))}));return function(n){return e.apply(this,arguments)}}(),onCancel:function(){return t(!1)},children:[(0,r.jsx)(M.Z.Item,{label:"X axis variable",name:"x",rules:[{required:!0}],children:(0,r.jsx)(R.Z,{})}),(0,r.jsx)(M.Z.List,{name:"datas",children:function(e,n,t){var i=n.add,s=n.remove,a=t.errors;return(0,r.jsxs)(r.Fragment,{children:[e.map((function(e,n){return(0,r.jsxs)(M.Z.Item,{label:(0,r.jsxs)("div",{children:[(0,r.jsx)(V.Z,{style:{fontSize:"16px",color:"red",marginRight:"10px"},onClick:function(){return s(e.name)}}),"Data ",n+1]}),children:[(0,r.jsx)(M.Z.Item,{name:[e.name,"name"],label:"Display name",rules:[{required:!0}],children:(0,r.jsx)(R.Z,{})}),(0,r.jsx)(M.Z.Item,{name:[e.name,"y"],label:"Y axis variable",rules:[{required:!0}],children:(0,r.jsx)(R.Z,{})})]},e.key)})),(0,r.jsxs)(M.Z.Item,{children:[(0,r.jsx)(h.Z,{type:"dashed",onClick:function(){return i()},style:{width:"60%"},icon:(0,r.jsx)(q.Z,{}),children:"Add data"}),(0,r.jsx)(M.Z.ErrorList,{errors:a})]})]})}})]}),(0,r.jsx)(h.Z,{className:"full-width",onClick:function(){return t(!0)},children:"Data"})]})},ne=function(){var e=(0,a.useState)(!1),n=e[0],t=e[1],i=(0,a.useState)(!1),s=i[0],l=i[1],o=(0,a.useContext)(Z.rU),c=o.template,u=o.cursor,d=o.dispatch;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(L.ZP,{title:"Sensors",visible:n,loading:s,onOk:function(){var e=(0,U.Z)((function(e){return(0,F.__generator)(this,(function(n){return l(!0),function(e,n,t,r){te(n,"<%# Sensors -%>\n<%- helpers.indent(include('/blobs/sensors.edp.ejs', {\n    path: run.dataPath,\n    x: '".concat(e.x,"',\n    sensors: run.sensors\n}), 2) -%>"),t,r),r((0,w.KJ)({row:((null===t||void 0===t?void 0:t.row)||4)+0,column:0}))}(e,c,u,d),l(!1),t(!1),[2]}))}));return function(n){return e.apply(this,arguments)}}(),onCancel:function(){return t(!1)},children:(0,r.jsx)(M.Z.Item,{label:"X axis variable",name:"x",rules:[{required:!0}],children:(0,r.jsx)(R.Z,{})})}),(0,r.jsx)(h.Z,{className:"full-width",onClick:function(){return t(!0)},children:"Sensors"})]})},te=function(e,n,t,r){if(t){var i=t.row,s=(e||"").split("\n"),a=(0,D.Z)(s.slice(0,i+1)).concat((0,D.Z)(n.split("\n")),(0,D.Z)(s.slice(i+1)));r((0,w.zX)(a.join("\n")))}else r((0,w.zX)((e||"")+n))},re=function(){return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(P.Z,{style:{overflow:"auto",maxHeight:"calc(100% - 443px)"},children:[(0,r.jsx)(P.Z.Panel,{header:"Head",children:(0,r.jsxs)(m.Z,{direction:"vertical",className:"full-width",children:[(0,r.jsx)(X,{}),(0,r.jsx)(G,{})]})},"head"),(0,r.jsx)(P.Z.Panel,{header:"Components",children:(0,r.jsxs)(m.Z,{direction:"vertical",className:"full-width",children:[(0,r.jsx)(J,{}),(0,r.jsx)(H,{}),(0,r.jsx)(K,{}),(0,r.jsx)(Y,{}),(0,r.jsx)(W,{}),(0,r.jsx)(Q,{})]})},"components"),(0,r.jsx)(P.Z.Panel,{header:"Results",children:(0,r.jsxs)(m.Z,{direction:"vertical",className:"full-width",children:[(0,r.jsx)($,{}),(0,r.jsx)(ee,{}),(0,r.jsx)(ne,{})]})},"results")]})})},ie=t(43008),se=function(){var e=(0,a.useContext)(Z.rU).dispatch;return(0,r.jsx)(f.Z,{title:"New model",children:(0,r.jsx)(h.Z,{icon:(0,r.jsx)(ie.Z,{}),onClick:function(){return function(e){e((0,w.zX)("try{\n<%# Headers -%>\n<%- include('/blobs/headers.edp.ejs') -%>\n\n<%# Dimension -%>\n<%- include('/blobs/dimensioning.edp.ejs', {\n\tdimension\n}) -%>\n\n// WRITE YOUR TEMPLATE HERE\n\n} catch(...) {\n\tappendError(\"An internal error occurs\");\n\texit(-1);\n}\n")),e((0,w.j1)(JSON.stringify({category:"Category",name:"My new model",algorithm:"Algorithm",code:"FreeFEM",version:"1.0.0",description:"",configuration:{}},null,"\t")+"\n"))}(e)}})})},ae=t(80284),le=t(95591),oe=t(20518),ce={gmsh2D:"gmsh2D.geo.ejs",gmsh3D:"gmsh3D.geo.ejs",poisson:"poisson.edp.ejs",linearElasticity:"linearElasticity.edp.ejs",linearElasticityTime:"linearElasticityTime.edp.ejs",stokes:"stokes.edp.ejs",navierStokesTime:"navierStokesTime.edp.ejs",thermicDiffusion:"thermicDiffusion.edp.ejs"},ue=t(96844),de=t(60877),me="Unable to delete model",fe=function(){var e=(0,U.Z)((function(e,n,t){var r,i,s,a;return(0,F.__generator)(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),r=e.models[n],i=e.templates[n],[4,j.Z.update([{key:"models",type:"array",method:"remove",value:r},{key:"templates",type:"array",method:"remove",value:i}])];case 1:return l.sent(),(s=de.Z.deepCopy(e)).models=(0,D.Z)(s.models.slice(0,n)).concat((0,D.Z)(s.models.slice(n+1))),s.templates=(0,D.Z)(s.templates.slice(0,n)).concat((0,D.Z)(s.templates.slice(n+1))),t.mutateUser(s),[3,3];case 2:throw a=l.sent(),(0,ue.lt)(me,a),a;case 3:return[2]}}))}));return function(n,t,r){return e.apply(this,arguments)}}(),he=function(e){var n=e.user,t=e.index,i=e.swr;return(0,r.jsx)(v.m1,{onDelete:(0,U.Z)((function(){return(0,F.__generator)(this,(function(e){return[2,fe(n,t,i)]}))}))})},pe="Unable to load current model",ve=function(){var e=(0,U.Z)((function(e,n){var t,r,i,s;return(0,F.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),t=oe.Z[e],n((0,w.j1)(JSON.stringify(t,null,"\t"))),r=t.algorithm,[4,fetch("/templates/"+ce[r])];case 1:return[4,a.sent().text()];case 2:return i=a.sent(),n((0,w.zX)(i)),[3,4];case 3:return s=a.sent(),(0,ue.lt)(pe,s),[3,4];case 4:return[2]}}))}));return function(n,t){return e.apply(this,arguments)}}(),xe=function(){var e=(0,U.Z)((function(e,n,t){return(0,F.__generator)(this,(function(r){try{e.user&&delete e.user,t((0,w.j1)(JSON.stringify(e,null,"\t"))),t((0,w.zX)(n))}catch(i){(0,ue.lt)(pe,i)}return[2]}))}));return function(n,t,r){return e.apply(this,arguments)}}(),je=function(e){var n=e.user,t=e.swr,i=(0,a.useState)(!1),s=i[0],l=i[1],o=(0,a.useState)(!1),c=o[0],u=o[1],d=(0,a.useContext)(Z.rU).dispatch;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(L.ZP,{title:"Models browser",visible:s,loading:c,onCancel:function(){return l(!1)},children:(0,r.jsx)(ae.Z,{items:[{key:"models",label:"Tanatloc models",children:(0,r.jsx)(m.Z,{direction:"vertical",className:"full-width",children:oe.Z.map((function(e,n){return(0,r.jsxs)("div",{className:"display-flex",style:{justifyContent:"space-between",alignItems:"center"},children:[e.name,(0,r.jsx)(f.Z,{title:"Open",children:(0,r.jsx)(h.Z,{onClick:(0,U.Z)((function(){return(0,F.__generator)(this,(function(e){switch(e.label){case 0:u(!0),e.label=1;case 1:return e.trys.push([1,,3,4]),[4,ve(n,d)];case 2:return e.sent(),[3,4];case 3:return u(!1),l(!1),[7];case 4:return[2]}}))})),icon:(0,r.jsx)(le.Z,{})})})]},n)}))})},{key:"personalModels",label:"My models",children:(0,r.jsx)(m.Z,{direction:"vertical",className:"full-width",children:n.models.map((function(e,i){return(0,r.jsxs)("div",{className:"display-flex",style:{justifyContent:"space-between",alignItems:"center"},children:[e.name,(0,r.jsxs)("div",{children:[(0,r.jsx)(f.Z,{title:"Open",children:(0,r.jsx)(h.Z,{onClick:(0,U.Z)((function(){return(0,F.__generator)(this,(function(t){switch(t.label){case 0:u(!0),t.label=1;case 1:return t.trys.push([1,,3,4]),[4,xe(e,n.templates[i],d)];case 2:return t.sent(),[3,4];case 3:return u(!1),l(!1),[7];case 4:return[2]}}))})),icon:(0,r.jsx)(le.Z,{})})}),(0,r.jsx)(he,{user:n,index:i,swr:t})]})]},i)}))})}]})}),(0,r.jsx)(f.Z,{title:"Browse existing model",children:(0,r.jsx)(h.Z,{icon:(0,r.jsx)(le.Z,{}),onClick:function(){return l(!0)}})})]})},Ze=t(67040),ge=t(60219),be="Model definition is not valid",ye="Unable to check",we="Unable to save",Ee=function(){var e=(0,U.Z)((function(e,n,t,r){var i,s;return(0,F.__generator)(this,(function(a){switch(a.label){case 0:try{i=JSON.parse(t)}catch(l){return(0,ue.lt)(be,l),[2]}a.label=1;case 1:return a.trys.push([1,5,,6]),e.models.find((function(e){return e.algorithm===i.algorithm}))?(Ze.Z.confirm({title:"A model with the same algorithm entry already exists. Do you want to override it?",onOk:(0,U.Z)((function(){var t;return(0,F.__generator)(this,(function(s){switch(s.label){case 0:return t=e.models.findIndex((function(e){return e.algorithm===i.algorithm})),[4,Se(e,n,i,r,t)];case 1:return s.sent(),[2]}}))}))}),[3,4]):[3,2];case 2:return[4,Se(e,n,i,r)];case 3:a.sent(),a.label=4;case 4:return[3,6];case 5:return s=a.sent(),(0,ue.lt)(ye,s),[3,6];case 6:return[2]}}))}));return function(n,t,r,i){return e.apply(this,arguments)}}(),Se=function(){var e=(0,U.Z)((function(e,n,t,r,i){var s,a,l,o;return(0,F.__generator)(this,(function(c){switch(c.label){case 0:if(void 0!==i)return[3,5];c.label=1;case 1:return c.trys.push([1,3,,4]),[4,j.Z.update([{key:"models",type:"array",method:"append",value:(0,b.Z)((0,g.Z)({},t),{user:e.id})},{key:"templates",type:"array",method:"append",value:r}])];case 2:return c.sent(),(s=de.Z.deepCopy(e)).models.push(t),n.mutateUser(s),[3,4];case 3:return a=c.sent(),(0,ue.lt)(we,a),[3,4];case 4:return[3,8];case 5:return c.trys.push([5,7,,8]),[4,j.Z.update([{key:"models",type:"array",method:"set",index:i,value:(0,b.Z)((0,g.Z)({},t),{user:e.id})},{key:"templates",type:"array",method:"set",index:i,value:r}])];case 6:return c.sent(),(l=de.Z.deepCopy(e)).models[i]=t,n.mutateUser(l),[3,8];case 7:return o=c.sent(),(0,ue.lt)(we,o),[3,8];case 8:return[2]}}))}));return function(n,t,r,i,s){return e.apply(this,arguments)}}(),ke=function(e){var n=e.user,t=e.swr,i=(0,a.useState)(!1),s=i[0],l=i[1],o=(0,a.useState)(!1),c=o[0],u=o[1],d=(0,a.useContext)(Z.rU),m=d.model,p=d.template,v=d.templateValid,x=d.modelValid;return(0,a.useEffect)((function(){l(!v||!x)}),[v,x]),(0,r.jsx)(f.Z,{title:"Save",children:(0,r.jsx)(h.Z,{disabled:s,loading:c,icon:(0,r.jsx)(ge.Z,{}),onClick:(0,U.Z)((function(){return(0,F.__generator)(this,(function(e){switch(e.label){case 0:return u(!0),[4,Ee(n,t,m,p)];case 1:return e.sent(),u(!1),[2]}}))}))})})},Ce=t(5152),Te=t.n(Ce),Ne=Te()((function(){return Promise.all([t.e(6052),t.e(3700),t.e(7238)]).then(t.bind(t,27238))}),{loadableGenerated:{webpack:function(){return[27238]}},ssr:!1}),Ie=Te()((function(){return Promise.all([t.e(6052),t.e(3700),t.e(8219)]).then(t.bind(t,18219))}),{loadableGenerated:{webpack:function(){return[18219]}},ssr:!1}),Oe=function(){return(0,r.jsxs)("div",{className:"Editor-code",children:[(0,r.jsx)(Ne,{}),(0,r.jsx)(Ie,{})]})},_e=function(){var e=(0,a.useState)(),n=e[0],t=e[1],g=(0,s.useRouter)(),b=(0,i.Z)(j.Z.useUser(),2),y=b[0],w=b[1],E=w.loadingUser,S=w.mutateUser;(0,a.useEffect)((function(){E||y||g.replace("/")}),[y,E,g]),(0,a.useEffect)((function(){l.Z.warning({message:"This is a beta version",description:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("br",{}),"- You may encounter unexpected bugs",(0,r.jsx)("br",{}),"- Some features are not totally functionnal"]}),placement:"top",duration:0})}),[]);var k=(0,a.useCallback)((function(){g.push({pathname:"/dashboard"})}),[g]);return E||!y?(0,r.jsx)(x.Z,{}):(0,r.jsx)(Z.ZP,{children:(0,r.jsxs)(o.Z,{className:"Editor",children:[(0,r.jsxs)(o.Z.Sider,{theme:"light",width:"256",children:[(0,r.jsx)("div",{className:"logo",children:(0,r.jsx)("img",{src:"/images/logo.svg",alt:"Tanatloc"})}),(0,r.jsx)(c.Z,{mode:"inline",items:[{key:"menu-go-back",disabled:!0,style:{cursor:"unset",margin:"10px 0",paddingLeft:10},label:(0,r.jsx)(v.ks,{onClick:k,children:"Return to dashboard"})},{type:"divider",className:"Editor-Menu-Divider"}]}),(0,r.jsx)(_,{setName:t}),(0,r.jsx)(u.Z,{}),(0,r.jsx)(re,{})]}),(0,r.jsxs)(o.Z.Content,{className:"no-scroll",children:[(0,r.jsx)(o.Z.Header,{className:"Editor-Header",children:(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,r.jsx)(d.Z.Text,{strong:!0,children:n}),(0,r.jsxs)(m.Z,{children:[(0,r.jsx)(se,{}),(0,r.jsx)(je,{user:{id:y.id,models:y.models,templates:y.templates},swr:{mutateUser:S}}),(0,r.jsx)(ke,{user:{id:y.id,models:y.models},swr:{mutateUser:S}}),(0,r.jsx)(f.Z,{title:"Coming soon",children:(0,r.jsx)(h.Z,{disabled:!0,icon:(0,r.jsx)(p.Z,{})})})]})]})}),(0,r.jsx)(Oe,{})]})]})})},De=function(){return(0,r.jsx)(_e,{})}}},function(e){e.O(0,[7841,6362,1474,1266,1220,7666,6690,7909,1756,7040,3175,3666,1132,6381,4416,9774,2888,179],(function(){return n=31832,e(e.s=n);var n}));var n=e.O();_N_E=n}]);