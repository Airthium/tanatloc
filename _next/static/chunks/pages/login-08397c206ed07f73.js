(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{83236:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return t(69405)}])},10851:function(e,r,t){"use strict";t.d(r,{EQ:function(){return s},kD:function(){return n},x_:function(){return i}});t(83454).env.EMAIL_TOKEN;var n="subscribe",i="passwordRecovery",s="revalidate"},81891:function(e,r,t){"use strict";t.d(r,{H:function(){return o}});var n=t(51438),i=t(28668),s=t(25892),u=t(91224),o=function(e){(0,i.Z)(t,e);var r=(0,u.Z)(t);function t(e){var i;return(0,n.Z)(this,t),(i=r.call(this,e.title)).title=e.title,i.name="APIError",i.render=e.render,i.err=e.err,i.type=e.type||"error",i}return t}((0,s.Z)(Error))},1344:function(e,r,t){"use strict";t.d(r,{x:function(){return a}});var n=t(47568),i=t(26042),s=t(20414),u=t(59134),o=t.n(u)()()?"http://localhost:3000":"",a=function(){var e=(0,n.Z)((function(e){var r,t,n,u,a;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return t={},[4,fetch(o+"/api/login",(t.method="POST",t.headers={"Content-Type":"application/json",Accept:"application/json"},t.body=JSON.stringify({email:e.email,password:e.password}),t))];case 1:return 200!==(r=s.sent()).status?[3,3]:(n=[((u={}).ok=!0,u)],[4,r.json()]);case 2:return[2,i.Z.apply(void 0,n.concat(s.sent()))];case 3:return[2,((a={}).ok=!1,a)]}}))}));return function(r){return e.apply(this,arguments)}}()},69405:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return U}});var n=t(85893),i=t(47568),s=t(828),u=t(20414),o=t(11163),a=t(67294),c=t(97183),l=t(81474),f=t(26713),d=t(6880),p=t(71577),h=t(81579),m=t(69677),y=t(59134),v=t.n(y),w=t(75107),Z=t(96844),b=t(81891),g=t(1344),x=t(67169),j=t(32834),_=t(87492),E=t(10851),k=function(){var e=(0,i.Z)((function(e){var r;return(0,u.__generator)(this,(function(t){switch(t.label){case 0:return r={},[4,(0,_.R)("/api/email",(r.method="PUT",r.body=JSON.stringify({type:E.x_,email:e}),r))];case 1:return t.sent(),[2]}}))}));return function(r){return e.apply(this,arguments)}}(),S={recover:k},T="Unable to recover password",I=function(){var e=(0,i.Z)((function(e){var r;return(0,u.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,S.recover(e.email)];case 1:return t.sent(),(0,Z.Ur)("An email has been send to recover your password","If you entered a valid email"),[3,3];case 2:throw r=t.sent(),(0,Z.lt)(T,r),r;case 3:return[2]}}))}));return function(r){return e.apply(this,arguments)}}(),N=function(){var e=(0,a.useState)(!1),r=e[0],t=e[1],s=(0,a.useState)(!1),o=s[0],c=s[1];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(j.ZP,{title:"Forgot your password ?",visible:r,onCancel:function(){return t(!1)},onOk:function(){var e=(0,i.Z)((function(e){var r;return(0,u.__generator)(this,(function(n){switch(n.label){case 0:c(!0),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,I(e)];case 2:return n.sent(),c(!1),t(!1),[3,4];case 3:throw r=n.sent(),c(!1),r;case 4:return[2]}}))}));return function(r){return e.apply(this,arguments)}}(),loading:o,children:(0,n.jsx)(h.Z.Item,{name:"email",label:"Your email address",rules:[{required:!0,message:"Email is required"}],children:(0,n.jsx)(m.Z,{placeholder:"Email address",autoComplete:"email"})})}),(0,n.jsx)(d.Z.Text,{children:(0,n.jsx)(p.Z,{type:"link",onClick:function(){return t(!0)},children:"Forgot your password ?"})})]})},P="User error",C="Server issue : try again shortly.",O="Incorrect credentials.",q=function(){var e=(0,i.Z)((function(e,r,t){var n,i,s,o,a;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,(0,g.x)(r)];case 1:return n=u.sent(),[3,3];case 2:throw i=u.sent(),s={},new b.H((s.title=C,s.err=i,s));case 3:if(o={},a={},!n.ok)throw new b.H((a.title=O,a.type="warning",a));return t((o.id=n.id,o)),e.push("/dashboard"),[2]}}))}));return function(r,t,n){return e.apply(this,arguments)}}(),R=function(){var e=(0,a.useState)(!1),r=e[0],t=e[1],y=(0,a.useState)(),b=y[0],j=y[1],_=(0,s.Z)(x.Z.useUser(),2),E=_[0],k=_[1],S=k.mutateUser,T=k.errorUser,I=k.loadingUser,C=(0,o.useRouter)();return(0,a.useEffect)((function(){v()()&&(0,g.x)({email:"admin",password:"password"}).then((function(){C.push("/dashboard")})).catch()}),[C]),(0,a.useEffect)((function(){T&&(0,Z.lt)(P,T)}),[T]),(0,a.useEffect)((function(){E&&C.push("/dashboard")}),[E,C]),(0,a.useEffect)((function(){C.prefetch("/signup"),C.prefetch("/dashboard")}),[C]),I||E?(0,n.jsx)(w.Z,{}):(0,n.jsx)(c.Z,{children:(0,n.jsx)(l.Z,{bordered:!1,className:"Login",children:(0,n.jsxs)(f.Z,{direction:"vertical",size:"large",className:"full-width",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(d.Z.Title,{level:1,style:{padding:0,marginBottom:16,fontWeight:500},children:"Log In"}),(0,n.jsxs)(d.Z.Text,{children:["Your first time ?"," ",(0,n.jsx)(p.Z,{type:"link",onClick:function(){return function(e){e.push("/signup")}(C)},children:"Sign up"})]})]}),(0,n.jsxs)(h.Z,{requiredMark:"optional",onFinish:function(){var e=(0,i.Z)((function(e){var r;return(0,u.__generator)(this,(function(n){switch(n.label){case 0:t(!0),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,q(C,e,S)];case 2:return n.sent(),[3,4];case 3:return r=n.sent(),j(r),t(!1),[3,4];case 4:return[2]}}))}));return function(r){return e.apply(this,arguments)}}(),layout:"vertical",children:[(0,n.jsx)(h.Z.Item,{name:"email",label:"Your email address",rules:[{required:!0,message:"Email is required"}],children:(0,n.jsx)(m.Z,{placeholder:"Email address",autoComplete:"email"})}),(0,n.jsx)(h.Z.Item,{name:"password",label:"Your password",rules:[{required:!0,message:"Password is required"}],style:{marginBottom:"14px"},children:(0,n.jsx)(m.Z.Password,{placeholder:"Password",autoComplete:"current-password"})}),(0,n.jsx)(N,{}),(0,n.jsx)(Z.Xq,{error:b}),(0,n.jsx)(h.Z.Item,{className:"Login-submit",children:(0,n.jsx)(p.Z,{type:"primary",loading:r,htmlType:"submit",children:"Log in"})})]})]})})})},U=function(){return(0,n.jsx)(R,{})}},29815:function(e,r,t){"use strict";t.d(r,{Z:function(){return u}});var n=t(20943);var i=t(13375);var s=t(91566);function u(e){return function(e){if(Array.isArray(e))return(0,n.Z)(e)}(e)||(0,i.Z)(e)||(0,s.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},25892:function(e,r,t){"use strict";t.d(r,{Z:function(){return c}});var n=t(44998);function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function s(e,r,t){return s=i()?Reflect.construct:function(e,r,t){var i=[null];i.push.apply(i,r);var s=new(Function.bind.apply(e,i));return t&&(0,n.Z)(s,t.prototype),s},s.apply(null,arguments)}function u(e,r,t){return s.apply(null,arguments)}var o=t(82662);function a(e){var r="function"===typeof Map?new Map:void 0;return a=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof r){if(r.has(e))return r.get(e);r.set(e,i)}function i(){return u(e,arguments,(0,o.Z)(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),(0,n.Z)(i,e)},a(e)}function c(e){return a(e)}}},function(e){e.O(0,[841,362,474,266,220,595,819,909,756,40,201,381,774,888,179],(function(){return r=83236,e(e.s=r);var r}));var r=e.O();_N_E=r}]);