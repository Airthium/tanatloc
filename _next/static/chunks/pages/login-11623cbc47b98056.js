(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3459],{8e4:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:e}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm-32 156c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z",fill:t}},{tag:"path",attrs:{d:"M488 576h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8zm-24 112a48 48 0 1096 0 48 48 0 10-96 0z",fill:e}}]}},name:"exclamation-circle",theme:"twotone"}},90619:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"}},31978:function(e,t,r){"use strict";Object.defineProperty(t,"Z",{enumerable:!0,get:function(){return i}});var n=_interop_require_wildcard(r(67294)),a=_interop_require_default(r(8e4)),l=_interop_require_default(r(92074));function _define_property(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _interop_require_default(e){return e&&e.__esModule?e:{default:e}}function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache=function(e){return e?r:t})(e)}function _interop_require_wildcard(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=a?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(n,l,i):n[l]=e[l]}return n.default=e,r&&r.set(e,n),n}function _object_spread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_define_property(e,t,r[t])})}return e}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _object_spread_props(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var i=n.forwardRef(function(e,t){return n.createElement(l.default,_object_spread_props(_object_spread({},e),{ref:t,icon:a.default}))})},33649:function(e,t,r){"use strict";Object.defineProperty(t,"Z",{enumerable:!0,get:function(){return i}});var n=_interop_require_wildcard(r(67294)),a=_interop_require_default(r(90619)),l=_interop_require_default(r(92074));function _define_property(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _interop_require_default(e){return e&&e.__esModule?e:{default:e}}function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache=function(e){return e?r:t})(e)}function _interop_require_wildcard(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=a?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(n,l,i):n[l]=e[l]}return n.default=e,r&&r.set(e,n),n}function _object_spread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_define_property(e,t,r[t])})}return e}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _object_spread_props(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var i=n.forwardRef(function(e,t){return n.createElement(l.default,_object_spread_props(_object_spread({},e),{ref:t,icon:a.default}))})},91351:function(e,t,r){"use strict";var n=r(75263).default,a=r(64836).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=genPurePanel,t.withPureRenderTheme=withPureRenderTheme;var l=a(r(60869)),i=n(r(67294)),o=n(r(31929));function withPureRenderTheme(e){return function(t){return i.createElement(o.default,{theme:{token:{motion:!1,zIndexPopupBase:0}}},i.createElement(e,Object.assign({},t)))}}function genPurePanel(e,t,r,n){return withPureRenderTheme(function(a){let{prefixCls:s,style:c}=a,u=i.useRef(null),[d,f]=i.useState(0),[p,y]=i.useState(0),[h,_]=(0,l.default)(!1,{value:a.open}),{getPrefixCls:g}=i.useContext(o.ConfigContext),m=g(t||"select",s);i.useEffect(()=>{if(_(!0),"undefined"!=typeof ResizeObserver){let e=new ResizeObserver(e=>{let t=e[0].target;f(t.offsetHeight+8),y(t.offsetWidth)}),t=setInterval(()=>{var n;let a=r?`.${r(m)}`:`.${m}-dropdown`,l=null===(n=u.current)||void 0===n?void 0:n.querySelector(a);l&&(clearInterval(t),e.observe(l))},10);return()=>{clearInterval(t),e.disconnect()}}},[]);let b=Object.assign(Object.assign({},a),{style:Object.assign(Object.assign({},c),{margin:0}),open:h,visible:h,getPopupContainer:()=>u.current});return n&&(b=n(b)),i.createElement("div",{ref:u,style:{paddingBottom:d,position:"relative",minWidth:p}},i.createElement(e,Object.assign({},b)))})}},12065:function(e,t,r){"use strict";var n=r(64836).default,a=r(75263).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(r(67294)),i=n(r(94184)),o=r(40974),s=r(91351),c=r(31929),u=r(80654),d=r(77926),f=n(r(53294)),__rest=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)0>t.indexOf(n[a])&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};t.default=(0,s.withPureRenderTheme)(e=>{let{prefixCls:t,className:r,closeIcon:n,closable:a,type:s,title:p,children:y}=e,h=__rest(e,["prefixCls","className","closeIcon","closable","type","title","children"]),{getPrefixCls:_}=l.useContext(c.ConfigContext),g=_(),m=t||_("modal"),[,b]=(0,f.default)(m),j=`${m}-confirm`,w={};return w=s?{closable:null!=a&&a,title:"",footer:"",children:l.createElement(u.ConfirmContent,Object.assign({},e,{prefixCls:m,confirmPrefixCls:j,rootPrefixCls:g,content:y}))}:{closable:null==a||a,title:p,footer:void 0===e.footer?l.createElement(d.Footer,Object.assign({},e)):e.footer,children:y},l.createElement(o.Panel,Object.assign({prefixCls:m,className:(0,i.default)(b,`${m}-pure-panel`,s&&j,s&&`${j}-${s}`,r)},h,{closeIcon:(0,d.renderCloseIcon)(m,n),closable:a},w))})},56697:function(e,t,r){"use strict";var n=r(64836).default,a=r(75263).default;t.Z=void 0;var l=a(r(28368)),i=n(r(23781)),o=n(r(83663)),s=n(r(12065)),c=n(r(87891));function modalWarn(e){return(0,l.default)((0,l.withWarn)(e))}let u=o.default;u.useModal=c.default,u.info=function(e){return(0,l.default)((0,l.withInfo)(e))},u.success=function(e){return(0,l.default)((0,l.withSuccess)(e))},u.error=function(e){return(0,l.default)((0,l.withError)(e))},u.warning=modalWarn,u.warn=modalWarn,u.confirm=function(e){return(0,l.default)((0,l.withConfirm)(e))},u.destroyAll=function(){for(;i.default.length;){let e=i.default.pop();e&&e()}},u.config=l.modalGlobalConfig,u._InternalPanelDoNotUseOrYouWillBeFired=s.default,t.Z=u},74250:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return r(11703)}])},21390:function(e,t,r){"use strict";r.d(t,{EQ:function(){return s},kD:function(){return i},o3:function(){return l},x_:function(){return o}});var n,a=r(83454);let l=null!==(n=a.env.EMAIL_TOKEN)&&void 0!==n?n:"",i="subscribe",o="passwordRecovery",s="revalidate"},948:function(e,t,r){"use strict";r.d(t,{R:function(){return call},_:function(){return fetcher}});var n=r(59134),a=r.n(n),l=r(83454);let i=l.env.PORT?parseInt(l.env.PORT):3e3,o=a()()?"http://localhost:"+i:"",fetcher=async(e,t)=>{let r=await fetch(o+e,{method:t?"POST":"GET",headers:{accept:"application/json","Content-Type":"application/json"},...t&&{body:t}}),n=r.headers.get("Content-Type");if(!r.ok){let e=Error("An error occured while fetching data.");throw e.info=(null==n?void 0:n.includes("application/json"))&&await r.json(),e.status=r.status,e}return r.json()},call=async(e,t)=>{var r;let n=await fetch(o+e,{...t,method:null!==(r=null==t?void 0:t.method)&&void 0!==r?r:"GET",headers:{...null==t?void 0:t.headers,"Content-Type":"application/json"}}),a=n.headers.get("Content-Type");if(!n.ok){let e=Error("An error occured while fetching data.");throw e.info=(null==a?void 0:a.includes("application/json"))&&await n.json(),e.status=n.status,e}return n}},77547:function(e,t,r){"use strict";r.d(t,{H:function(){return APIError}});let APIError=class APIError extends Error{constructor(e){var t;super(e.title),this.title=e.title,this.name="APIError",this.render=e.render,this.err=e.err,this.type=null!==(t=e.type)&&void 0!==t?t:"error"}}},61552:function(e,t,r){"use strict";r.d(t,{x:function(){return login}});var n=r(59134),a=r.n(n);let l=a()()?"http://localhost:3000":"",login=async e=>{let t=await fetch(l+"/api/login",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({email:e.email,password:e.password})});return 200===t.status?{ok:!0,...await t.json()}:{ok:!1}}},40144:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(59734),a=r(67294),l=r(948);let add=async e=>{let t=await (0,l.R)("/api/user",{method:"POST",headers:{Accept:"application/json"},body:JSON.stringify(e)});return t.json()},update=async e=>{await (0,l.R)("/api/user",{method:"PUT",body:JSON.stringify(e)})},updateById=async(e,t)=>{await (0,l.R)("/api/user/"+e,{method:"PUT",body:JSON.stringify(t)})},del=async()=>{await (0,l.R)("/api/user",{method:"DELETE"})},delById=async e=>{await (0,l.R)("/api/user/"+e,{method:"DELETE"})},check=async e=>{let t=await (0,l.R)("/api/user/check",{method:"POST",headers:{Accept:"application/json"},body:JSON.stringify(e)});return t.json()};var i={useUser:()=>{let{data:e,error:t,mutate:r}=(0,n.ZP)("/api/user",l._),i=null==e?void 0:e.user,o=(0,a.useCallback)(async e=>{await r({user:{...i,...e}})},[i,r]),s=(0,a.useCallback)(async()=>{await r({user:void 0})},[r]);return[i,{mutateUser:o,clearUser:s,errorUser:(null==t?void 0:t.status)===401?void 0:t,loadingUser:(null==t?void 0:t.status)!==401&&!e}]},useUsers:()=>{var e;let{data:t,error:r,mutate:i}=(0,n.ZP)("/api/users",l._),o=null!==(e=null==t?void 0:t.users)&&void 0!==e?e:[],s=(0,a.useCallback)(async e=>{let t=[...o,{...e,authorizedplugins:[]}];await i({users:t})},[o,i]),c=(0,a.useCallback)(async e=>{let t=o.filter(t=>t.id!==e.id);await i({users:t})},[o,i]),u=(0,a.useCallback)(async e=>{let t=o.map(t=>(t.id===e.id&&(t={...t,...e}),t));await i({users:t})},[o,i]);return[o,{addOneUser:s,delOneUser:c,mutateOneUser:u,errorUsers:r,loadingUsers:!t}]},add:add,update:update,updateById:updateById,del:del,delById:delById,check:check}},51274:function(e,t,r){"use strict";r.d(t,{AN:function(){return dialog_delete},ZP:function(){return dialog}});var n=r(85893),a=r(67294),l=r(97538),i=r(56697),o=r(53740),s=r(8061),c=r(54509),u=r(74048),d=r(31978);let f={onOk:"Error while submitting deletion"};var dialog_delete=e=>{let{visible:t,loading:r,title:l,children:p,onCancel:y,onOk:h}=e,{dispatch:_}=(0,a.useContext)(s.uj),g=(0,a.useCallback)(()=>{(async()=>{try{await h()}catch(e){_((0,c.iT)({title:f.onOk,err:e,display:!1}))}})()},[h,_]);return(0,n.jsx)(i.Z,{title:(0,n.jsxs)(o.Z.Text,{ellipsis:{tooltip:!0},children:[l," ",(0,n.jsx)(d.Z,{twoToneColor:"#ff4d4f",style:{marginLeft:"8px"}})]}),okText:"Delete",closable:!1,maskClosable:!1,open:t,cancelButtonProps:{disabled:r},onCancel:y,onOk:g,okButtonProps:{danger:!0,loading:r},children:(0,n.jsx)(u.default,{align:"start",children:(0,n.jsx)("span",{style:{wordBreak:"break-word"},children:p})})})};let p={onOk:"Error while submitting data"};var dialog=e=>{let{visible:t,loading:r,title:u,initialValues:d,cancelButtonText:f,cancelButtonProps:y,okButtonProps:h,okButtonText:_,children:g,onCancel:m,onOk:b}=e,[j,w]=(0,a.useState)(!1),{dispatch:v}=(0,a.useContext)(s.uj),[O]=l.Z.useForm();(0,a.useEffect)(()=>{t&&d&&O.setFieldsValue(d)},[t,d,O]);let x=(0,a.useCallback)(()=>{(async()=>{if(b)try{let e=await O.validateFields();await b(e),O.resetFields()}catch(e){v((0,c.iT)({title:p.onOk,err:e,display:!1}))}})()},[O,b,v]),P=(0,a.useCallback)(e=>{"Shift"===e.key&&w(!0),"Enter"!==e.key||j||(e.stopPropagation(),x())},[j,x]),k=(0,a.useCallback)(e=>{"Shift"===e.key&&w(!1)},[]),C=(0,a.useCallback)(()=>{O.resetFields(),null==m||m()},[O,m]);return(0,n.jsx)(i.Z,{title:(0,n.jsx)(o.Z.Text,{ellipsis:{tooltip:!0},children:u}),open:t,closable:!1,maskClosable:!1,onCancel:C,cancelButtonProps:{...y,disabled:r,style:{display:m?"inline-block":"none"}},cancelText:f,onOk:x,okText:_,okButtonProps:{...h,loading:r,style:{display:b?"inline-block":"none"}},children:(0,n.jsx)(l.Z,{form:O,layout:"vertical",initialValues:d,onKeyDown:P,onKeyUp:k,children:g})})}},40561:function(e,t,r){"use strict";var n=r(85893),a=r(67294),l=r(41664),i=r.n(l),o=r(70302),s=r(16373),c=r(74048),u=r(89552),d=r(94704),f=r(53740),p=r(4851),y=r(33649),h=r(35304),_=r.n(h),g=r(92544),m=r.n(g);let Loading=e=>{let{text:t,status:r,errors:l}=e,[c,h]=(0,a.useState)([]),[g,b]=(0,a.useState)([]);(0,a.useEffect)(()=>{if(!(null==r?void 0:r.length)){h([]);return}let e=r.map((e,t)=>({index:t,status:"finish",icon:0===t?(0,n.jsx)(p.default,{}):void 0,title:e})).filter(e=>e);h(e)},[r]),(0,a.useEffect)(()=>{if(!(null==l?void 0:l.length)){b([]);return}b(l.map(e=>{let t=null;return e.includes("docker: command not found")||e.includes("Is the docker daemon running")?t=(0,n.jsxs)(o.Z,{className:m().errorCard,children:["There is an error with your Docker installation.",(0,n.jsx)("br",{}),"Please verify that Docker is correctly installed and running."]}):(e.includes("EHOSTUNREACH")||e.includes("ENETUNREACH")||e.includes("ETIMEOUT"))&&(t=(0,n.jsxs)(o.Z,{className:m().errorCard,children:["There is an error with your PostgreSQL installation.",(0,n.jsx)("br",{}),'Please verify that postgres Docker container "tanatloc-postgres" is correctly installed and running.']})),(0,n.jsxs)("div",{children:[e,t]},e)}))},[l]);let j=!!(null==r?void 0:r.length)||!!(null==l?void 0:l.length);return(0,n.jsxs)(s.Z,{children:[(0,n.jsx)("div",{className:_().logo,children:(0,n.jsx)("img",{src:"/images/logo.svg",alt:"Tanatloc"})}),(0,n.jsx)(o.Z,{className:m().loading,bodyStyle:{padding:0},title:(0,n.jsx)("div",{className:m().title,children:(null==l?void 0:l.length)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(y.Z,{className:"warning"}),(0,n.jsx)(f.Z.Title,{level:3,style:{margin:"0"},children:"An error occurs"}),(0,n.jsx)(i(),{href:"https://github.com/Airthium/tanatloc/issues/new/choose",target:"_blank",children:"Open an issue"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.default,{size:"large",indicator:(0,n.jsx)(p.default,{})}),null!=t?t:"Loading, please wait..."]})}),children:j?(0,n.jsxs)("div",{className:m().content,children:[g.length?(0,n.jsxs)("div",{className:m().errors,children:[g.map(e=>e),(0,n.jsx)(f.Z.Title,{level:5,children:"Please restart the application"})]}):null,(0,n.jsx)("div",{className:m().status,children:(0,n.jsx)(d.Z,{direction:"vertical",items:c})})]}):null})]})};Loading.Simple=()=>(0,n.jsx)(c.default,{style:{height:"100%",width:"100%",justifyContent:"center",alignItems:"center"},children:(0,n.jsx)(o.Z,{children:(0,n.jsxs)(c.default,{children:[(0,n.jsx)(u.default,{}),"Loading, please wait..."]})})}),t.Z=Loading},11703:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return login_page}});var n=r(85893),a=r(11163),l=r(67294),i=r(65400),o=r.n(i),s=r(70302),c=r(97538),u=r(51024),d=r(16373),f=r(74048),p=r(53740),y=r(59134),h=r.n(y),_=r(8061),g=r(54509),m=r(40561),b=r(27756),j=r(77547),w=r(61552),v=r(40144),O=r(51274),x=r(948),P=r(21390);let recover=async e=>{await (0,x.R)("/api/email",{method:"PUT",body:JSON.stringify({type:P.x_,email:e})})};var k={recover:recover};let C={recover:"Unable to recover password"},_passwordRecover=async(e,t)=>{try{await k.recover(e.email),t((0,g.$E)({title:"An email has been send to recover your password",description:"If you entered a valid email"}))}catch(e){throw t((0,g.iT)({title:C.recover,err:e})),e}};var login_password=()=>{let e=(0,l.useRef)(null),[t,r]=(0,l.useState)(!1),[a,i]=(0,l.useState)(!1),{dispatch:s}=(0,l.useContext)(_.uj);(0,l.useEffect)(()=>{e.current&&e.current.focus()});let d=(0,l.useCallback)(()=>r(!0),[]),f=(0,l.useCallback)(()=>r(!1),[]),y=(0,l.useCallback)(async e=>{i(!0);try{await _passwordRecover(e,s),i(!1),r(!1)}catch(e){throw i(!1),e}},[s]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(O.ZP,{title:"Forgot your password ?",visible:t,onCancel:f,onOk:y,loading:a,children:(0,n.jsx)(c.Z.Item,{name:"email",label:"Your email address",rules:[{required:!0,message:"Email is required"}],children:(0,n.jsx)(u.default,{ref:e,placeholder:"Email address",autoComplete:"email"})})}),(0,n.jsx)(p.Z.Text,{children:(0,n.jsx)(o(),{type:"link",onClick:d,children:"Forgot your password ?"})})]})},E=r(35304),T=r.n(E),S=r(25923),Z=r.n(S);let N={user:"Error while loading user",internal:"Server issue : please try again shortly",credentials:"Incorrect credentials"},_onLogin=async(e,t)=>{let r;try{r=await (0,w.x)(e)}catch(e){throw new j.H({title:N.internal,err:e})}if(r.ok)await t({id:r.id});else throw new j.H({title:N.credentials,type:"warning"})};var components_login=()=>{let e=(0,l.useRef)(0),[t,r]=(0,l.useState)(!1),[i,y]=(0,l.useState)(),{dispatch:j}=(0,l.useContext)(_.uj),[O,{mutateUser:x,errorUser:P,loadingUser:k}]=v.Z.useUser(),C=(0,a.useRouter)();(0,l.useEffect)(()=>{(async()=>{if(h()())try{await (0,w.x)({email:"admin",password:"password"}),await C.push("/dashboard")}catch(e){}})()},[C]),(0,l.useEffect)(()=>{P&&j((0,g.iT)({title:N.user,err:P}))},[P,j]);let E=(0,l.useCallback)(()=>{(async()=>{await C.push("/dashboard")})()},[C]);(0,l.useEffect)(()=>{O&&!e.current&&(e.current++,E())},[O,E]);let S=(0,l.useCallback)(()=>{(async()=>{await C.push("/signup")})()},[C]),R=(0,l.useCallback)(e=>{(async()=>{r(!0);try{await _onLogin(e,x)}catch(e){y(e),r(!1)}})()},[x]);return k||O?(0,n.jsx)(m.Z,{}):(0,n.jsx)(d.Z,{children:(0,n.jsx)(s.Z,{bordered:!1,className:Z().login,children:(0,n.jsxs)(f.default,{direction:"vertical",size:"large",className:T().fullWidth,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(p.Z.Title,{level:1,style:{padding:0,marginBottom:16,fontWeight:500},children:"Log In"}),(0,n.jsxs)(p.Z.Text,{children:["Your first time ?"," ",(0,n.jsx)(o(),{type:"link",onClick:S,children:"Sign up"})]})]}),(0,n.jsxs)(c.Z,{requiredMark:"optional",onFinish:R,layout:"vertical",children:[(0,n.jsx)(c.Z.Item,{name:"email",label:"Your email address",rules:[{required:!0,message:"Email is required"}],children:(0,n.jsx)(u.default,{placeholder:"Email address",autoComplete:"email"})}),(0,n.jsx)(c.Z.Item,{name:"password",label:"Your password",rules:[{required:!0,message:"Password is required"}],style:{marginBottom:"14px"},children:(0,n.jsx)(u.default.Password,{placeholder:"Password",autoComplete:"current-password"})}),(0,n.jsx)(login_password,{}),(0,n.jsx)(b.Xq,{error:i}),(0,n.jsx)(c.Z.Item,{className:Z().submit,children:(0,n.jsx)(o(),{type:"primary",loading:t,htmlType:"submit",children:"Log in"})})]})]})})})},login_page=()=>(0,n.jsx)(components_login,{})},92544:function(e){e.exports={loading:"loading_loading__WR55J",title:"loading_title___LzrV",content:"loading_content__NB5oB",status:"loading_status__3rOKY",errors:"loading_errors__NiPcj",error:"loading_error__3HHUG",errorCard:"loading_errorCard__lZ_jh"}},25923:function(e){e.exports={login:"login_login__BFpy1",submit:"login_submit__f8x_k"}},35304:function(e){e.exports={variables:'"./variables.css"',colorPrimary:"#fad114",textColorDark:"rgba(0, 0, 0, 0.65)",textColorLight:"rgba(0, 0, 0, 0.45)",logo:"styles_logo__a_88m",displayNone:"styles_displayNone__X5JML",displayFlex:"styles_displayFlex__pvl0H",fullWidth:"styles_fullWidth__ig6Zi",fullHeight:"styles_fullHeight__aD1qp",noScroll:"styles_noScroll__jJYvq",scroll:"styles_scroll___zuDw",noBackground:"styles_noBackground__QOpQc",noBorder:"styles_noBorder__T5mw6",noBorderBottom:"styles_noBorderBottom__5ori7",textWhite:"styles_textWhite__yojx2",textLight:"styles_textLight__QglC7",textDark:"styles_textDark__xPmmk",textOrange:"styles_textOrange__TYZ4a",textGreen:"styles_textGreen__M8GsP",textAlignLeft:"styles_textAlignLeft__Da1jw",textAlignCenter:"styles_textAlignCenter__DSN8m",primaryColor:"styles_primaryColor__lHC0K",backgroundPrimary:"styles_backgroundPrimary__5S8pd"}}},function(e){e.O(0,[6373,1350,302,1664,4704,7651,9734,9774,2888,179],function(){return e(e.s=74250)}),_N_E=e.O()}]);