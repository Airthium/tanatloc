(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{40262:function(e,r,t){"use strict";t.d(r,{Z:function(){return u}});var n=t(1413),s=t(67294),a={icon:function(e,r){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:e}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm-32 156c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z",fill:r}},{tag:"path",attrs:{d:"M488 576h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8zm-24 112a48 48 0 1096 0 48 48 0 10-96 0z",fill:e}}]}},name:"exclamation-circle",theme:"twotone"},i=t(42135),o=function(e,r){return s.createElement(i.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:r,icon:a}))};o.displayName="ExclamationCircleTwoTone";var u=s.forwardRef(o)},83236:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return t(69405)}])},10851:function(e,r,t){"use strict";t.d(r,{EQ:function(){return a},kD:function(){return n},x_:function(){return s}});t(83454).env.EMAIL_TOKEN;var n="subscribe",s="passwordRecovery",a="revalidate"},81891:function(e,r,t){"use strict";t.d(r,{H:function(){return o}});var n=t(51438),s=t(28668),a=t(25892),i=t(91224),o=function(e){(0,s.Z)(t,e);var r=(0,i.Z)(t);function t(e){var s;return(0,n.Z)(this,t),(s=r.call(this,e.title)).title=e.title,s.name="APIError",s.render=e.render,s.err=e.err,s.type=e.type||"error",s}return t}((0,a.Z)(Error))},1344:function(e,r,t){"use strict";t.d(r,{x:function(){return u}});var n=t(47568),s=t(26042),a=t(20414),i=t(59134),o=t.n(i)()()?"http://localhost:3000":"",u=function(){var e=(0,n.Z)((function(e){var r,t,n,i,u;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return t={},[4,fetch(o+"/api/login",(t.method="POST",t.headers={"Content-Type":"application/json",Accept:"application/json"},t.body=JSON.stringify({email:e.email,password:e.password}),t))];case 1:return 200!==(r=a.sent()).status?[3,3]:(n=[((i={}).ok=!0,i)],[4,r.json()]);case 2:return[2,s.Z.apply(void 0,n.concat(a.sent()))];case 3:return[2,((u={}).ok=!1,u)]}}))}));return function(r){return e.apply(this,arguments)}}()},69405:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return O}});var n=t(85893),s=t(47568),a=t(828),i=t(20414),o=t(11163),u=t(67294),c=t(97183),l=t(81474),d=t(26713),f=t(6880),h=t(71577),p=t(81579),m=t(69677),v=t(59134),w=t.n(v),y=t(75107),Z=t(96844),g=t(81891),x=t(1344),b=t(67169),j=t(32834),_=t(87492),E=t(10851),k=function(){var e=(0,s.Z)((function(e){var r;return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return r={},[4,(0,_.R)("/api/email",(r.method="PUT",r.body=JSON.stringify({type:E.x_,email:e}),r))];case 1:return t.sent(),[2]}}))}));return function(r){return e.apply(this,arguments)}}(),T={recover:k},N="Unable to recover password",C=function(){var e=(0,s.Z)((function(e){var r;return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,T.recover(e.email)];case 1:return t.sent(),(0,Z.Ur)("An email has been send to recover your password","If you entered a valid email"),[3,3];case 2:throw r=t.sent(),(0,Z.lt)(N,r),r;case 3:return[2]}}))}));return function(r){return e.apply(this,arguments)}}(),I=function(){var e=(0,u.useState)(!1),r=e[0],t=e[1],a=(0,u.useState)(!1),o=a[0],c=a[1];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(j.ZP,{title:"Forgot your password ?",visible:r,onCancel:function(){return t(!1)},onOk:function(){var e=(0,s.Z)((function(e){var r;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:c(!0),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,C(e)];case 2:return n.sent(),c(!1),t(!1),[3,4];case 3:throw r=n.sent(),c(!1),r;case 4:return[2]}}))}));return function(r){return e.apply(this,arguments)}}(),loading:o,children:(0,n.jsx)(p.Z.Item,{name:"email",label:"Your email address",rules:[{required:!0,message:"Email is required"}],children:(0,n.jsx)(m.Z,{placeholder:"Email address",autoComplete:"email"})})}),(0,n.jsx)(f.Z.Text,{children:(0,n.jsx)(h.Z,{type:"link",onClick:function(){return t(!0)},children:"Forgot your password ?"})})]})},S="User error",P="Server issue : try again shortly.",q="Incorrect credentials.",z=function(){var e=(0,s.Z)((function(e,r,t){var n,s,a,o,u;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,(0,x.x)(r)];case 1:return n=i.sent(),[3,3];case 2:throw s=i.sent(),a={},new g.H((a.title=P,a.err=s,a));case 3:if(o={},u={},!n.ok)throw new g.H((u.title=q,u.type="warning",u));return t((o.id=n.id,o)),e.push("/dashboard"),[2]}}))}));return function(r,t,n){return e.apply(this,arguments)}}(),U=function(){var e=(0,u.useState)(!1),r=e[0],t=e[1],v=(0,u.useState)(),g=v[0],j=v[1],_=(0,a.Z)(b.Z.useUser(),2),E=_[0],k=_[1],T=k.mutateUser,N=k.errorUser,C=k.loadingUser,P=(0,o.useRouter)();return(0,u.useEffect)((function(){w()()&&(0,x.x)({email:"admin",password:"password"}).then((function(){P.push("/dashboard")})).catch()}),[P]),(0,u.useEffect)((function(){N&&(0,Z.lt)(S,N)}),[N]),(0,u.useEffect)((function(){E&&P.push("/dashboard")}),[E,P]),(0,u.useEffect)((function(){P.prefetch("/signup"),P.prefetch("/dashboard")}),[P]),C||E?(0,n.jsx)(y.Z,{}):(0,n.jsx)(c.Z,{children:(0,n.jsx)(l.Z,{bordered:!1,className:"Login",children:(0,n.jsxs)(d.Z,{direction:"vertical",size:"large",className:"full-width",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(f.Z.Title,{level:1,style:{padding:0,marginBottom:16,fontWeight:500},children:"Log In"}),(0,n.jsxs)(f.Z.Text,{children:["Your first time ?"," ",(0,n.jsx)(h.Z,{type:"link",onClick:function(){return function(e){e.push("/signup")}(P)},children:"Sign up"})]})]}),(0,n.jsxs)(p.Z,{requiredMark:"optional",onFinish:function(){var e=(0,s.Z)((function(e){var r;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:t(!0),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,z(P,e,T)];case 2:return n.sent(),[3,4];case 3:return r=n.sent(),j(r),t(!1),[3,4];case 4:return[2]}}))}));return function(r){return e.apply(this,arguments)}}(),layout:"vertical",children:[(0,n.jsx)(p.Z.Item,{name:"email",label:"Your email address",rules:[{required:!0,message:"Email is required"}],children:(0,n.jsx)(m.Z,{placeholder:"Email address",autoComplete:"email"})}),(0,n.jsx)(p.Z.Item,{name:"password",label:"Your password",rules:[{required:!0,message:"Password is required"}],style:{marginBottom:"14px"},children:(0,n.jsx)(m.Z.Password,{placeholder:"Password",autoComplete:"current-password"})}),(0,n.jsx)(I,{}),(0,n.jsx)(Z.Xq,{error:g}),(0,n.jsx)(p.Z.Item,{className:"Login-submit",children:(0,n.jsx)(h.Z,{type:"primary",loading:r,htmlType:"submit",children:"Log in"})})]})]})})})},O=function(){return(0,n.jsx)(U,{})}},29815:function(e,r,t){"use strict";t.d(r,{Z:function(){return i}});var n=t(20943);var s=t(13375);var a=t(91566);function i(e){return function(e){if(Array.isArray(e))return(0,n.Z)(e)}(e)||(0,s.Z)(e)||(0,a.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}},function(e){e.O(0,[841,362,474,663,595,819,909,40,695,381,774,888,179],(function(){return r=83236,e(e.s=r);var r}));var r=e.O();_N_E=r}]);