(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3459],{40262:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(1413),a=r(67294),i={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:e}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm-32 156c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z",fill:t}},{tag:"path",attrs:{d:"M488 576h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8zm-24 112a48 48 0 1096 0 48 48 0 10-96 0z",fill:e}}]}},name:"exclamation-circle",theme:"twotone"},l=r(42135),o=function(e,t){return a.createElement(l.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t,icon:i}))};o.displayName="ExclamationCircleTwoTone";var s=a.forwardRef(o)},90420:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(1413),a=r(67294),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"},l=r(42135),o=function(e,t){return a.createElement(l.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t,icon:i}))};o.displayName="EyeInvisibleOutlined";var s=a.forwardRef(o)},99611:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(1413),a=r(67294),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"},l=r(42135),o=function(e,t){return a.createElement(l.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t,icon:i}))};o.displayName="EyeOutlined";var s=a.forwardRef(o)},28058:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(1413),a=r(67294),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"},l=r(42135),o=function(e,t){return a.createElement(l.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t,icon:i}))};o.displayName="WarningOutlined";var s=a.forwardRef(o)},69677:function(e,t,r){"use strict";r.d(t,{Z:function(){return M}});var n=r(94184),a=r.n(n),i=r(67294),l=r(53124),o=r(65223),s=r(47673);let c=e=>{let{getPrefixCls:t,direction:r}=(0,i.useContext)(l.E_),{prefixCls:n,className:c=""}=e,u=t("input-group",n),d=t("input"),[p,f]=(0,s.ZP)(d),m=a()(u,{[`${u}-lg`]:"large"===e.size,[`${u}-sm`]:"small"===e.size,[`${u}-compact`]:e.compact,[`${u}-rtl`]:"rtl"===r},f,c),h=(0,i.useContext)(o.aM),v=(0,i.useMemo)(()=>Object.assign(Object.assign({},h),{isFormItemInput:!1}),[h]);return p(i.createElement("span",{className:m,style:e.style,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onFocus:e.onFocus,onBlur:e.onBlur},i.createElement(o.aM.Provider,{value:v},e.children)))};var u=r(16591),d=r(90420),p=r(99611),f=r(98423),m=r(42550),h=r(72922),v=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)0>t.indexOf(n[a])&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};let y=e=>e?i.createElement(p.Z,null):i.createElement(d.Z,null),g={click:"onClick",hover:"onMouseOver"},Z=i.forwardRef((e,t)=>{let{visibilityToggle:r=!0}=e,n="object"==typeof r&&void 0!==r.visible,[o,s]=(0,i.useState)(()=>!!n&&r.visible),c=(0,i.useRef)(null);i.useEffect(()=>{n&&s(r.visible)},[n,r]);let d=(0,h.Z)(c),p=()=>{let{disabled:t}=e;t||(o&&d(),s(e=>{var t;let n=!e;return"object"==typeof r&&(null===(t=r.onVisibleChange)||void 0===t||t.call(r,n)),n}))},{className:Z,prefixCls:b,inputPrefixCls:w,size:C}=e,E=v(e,["className","prefixCls","inputPrefixCls","size"]),{getPrefixCls:x}=i.useContext(l.E_),O=x("input",w),P=x("input-password",b),k=r&&(t=>{let{action:r="click",iconRender:n=y}=e,a=g[r]||"",l=n(o),s={[a]:p,className:`${t}-icon`,key:"passwordIcon",onMouseDown:e=>{e.preventDefault()},onMouseUp:e=>{e.preventDefault()}};return i.cloneElement(i.isValidElement(l)?l:i.createElement("span",null,l),s)})(P),z=a()(P,Z,{[`${P}-${C}`]:!!C}),M=Object.assign(Object.assign({},(0,f.Z)(E,["suffix","iconRender","visibilityToggle"])),{type:o?"text":"password",className:z,prefixCls:O,suffix:k});return C&&(M.size=C),i.createElement(u.ZP,Object.assign({ref:(0,m.sQ)(t,c)},M))});var b=r(68795),w=r(71577),C=r(97647),E=r(4173),x=r(96159),O=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)0>t.indexOf(n[a])&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};let P=i.forwardRef((e,t)=>{let r;let{prefixCls:n,inputPrefixCls:o,className:s,size:c,suffix:d,enterButton:p=!1,addonAfter:f,loading:h,disabled:v,onSearch:y,onChange:g,onCompositionStart:Z,onCompositionEnd:P}=e,k=O(e,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:z,direction:M}=i.useContext(l.E_),N=i.useContext(C.Z),_=i.useRef(!1),j=z("input-search",n),S=z("input",o),{compactSize:T}=(0,E.ri)(j,M),B=T||c||N,I=i.useRef(null),R=e=>{e&&e.target&&"click"===e.type&&y&&y(e.target.value,e),g&&g(e)},q=e=>{var t;document.activeElement===(null===(t=I.current)||void 0===t?void 0:t.input)&&e.preventDefault()},L=e=>{var t,r;y&&y(null===(r=null===(t=I.current)||void 0===t?void 0:t.input)||void 0===r?void 0:r.value,e)},$=e=>{_.current||h||L(e)},A="boolean"==typeof p?i.createElement(b.Z,null):null,X=`${j}-button`,D=p||{},F=D.type&&!0===D.type.__ANT_BUTTON;r=F||"button"===D.type?(0,x.Tm)(D,Object.assign({onMouseDown:q,onClick:e=>{var t,r;null===(r=null===(t=null==D?void 0:D.props)||void 0===t?void 0:t.onClick)||void 0===r||r.call(t,e),L(e)},key:"enterButton"},F?{className:X,size:B}:{})):i.createElement(w.ZP,{className:X,type:p?"primary":void 0,size:B,disabled:v,key:"enterButton",onMouseDown:q,onClick:L,loading:h,icon:A},p),f&&(r=[r,(0,x.Tm)(f,{key:"addonAfter"})]);let Q=a()(j,{[`${j}-rtl`]:"rtl"===M,[`${j}-${B}`]:!!B,[`${j}-with-button`]:!!p},s),U=e=>{_.current=!0,null==Z||Z(e)},H=e=>{_.current=!1,null==P||P(e)};return i.createElement(u.ZP,Object.assign({ref:(0,m.sQ)(I,t),onPressEnter:$},k,{size:B,onCompositionStart:U,onCompositionEnd:H,prefixCls:S,addonAfter:r,suffix:d,onChange:R,className:Q,disabled:v}))});var k=r(56994);let z=u.ZP;z.Group=c,z.Search=P,z.TextArea=k.Z,z.Password=Z;var M=z},83236:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return r(54290)}])},40287:function(e,t,r){"use strict";r.d(t,{EQ:function(){return o},kD:function(){return i},o3:function(){return a},x_:function(){return l}});var n=r(83454);let a=n.env.EMAIL_TOKEN||"",i="subscribe",l="passwordRecovery",o="revalidate"},4415:function(e,t,r){"use strict";r.d(t,{H:function(){return n}});class n extends Error{constructor(e){super(e.title),this.title=e.title,this.name="APIError",this.render=e.render,this.err=e.err,this.type=e.type||"error"}}},63406:function(e,t,r){"use strict";r.d(t,{x:function(){return l}});var n=r(59134),a=r.n(n);let i=a()()?"http://localhost:3000":"",l=async e=>{let t=await fetch(i+"/api/login",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({email:e.email,password:e.password})});return 200===t.status?{ok:!0,...await t.json()}:{ok:!1}}},54290:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return B}});var n=r(14288),a=r(11163),i=r(67294),l=r(97183),o=r(85813),s=r(26713),c=r(22850),u=r(71577),d=r(96108),p=r(69677),f=r(59134),m=r.n(f),h=r(67641),v=r(12271),y=r(4415),g=r(63406),Z=r(55734),b=r(28345),w=r(11425),C=r(40287);let E=async e=>{await (0,w.R)("/api/email",{method:"PUT",body:JSON.stringify({type:C.x_,email:e})})};var x={recover:E};let O={recover:"Unable to recover password"},P=async e=>{try{await x.recover(e.email),(0,v.Ur)("An email has been send to recover your password","If you entered a valid email")}catch(e){throw(0,v.lt)(O.recover,e),e}},k=()=>{let e=(0,i.useRef)(null),[t,r]=(0,i.useState)(!1),[a,l]=(0,i.useState)(!1);(0,i.useEffect)(()=>{e.current&&e.current.focus()});let o=(0,i.useCallback)(()=>r(!0),[]),s=(0,i.useCallback)(()=>r(!1),[]),f=(0,i.useCallback)(async e=>{l(!0);try{await P(e),l(!1),r(!1)}catch(e){throw l(!1),e}},[]);return(0,n.BX)(n.HY,{children:[(0,n.tZ)(b.ZP,{title:"Forgot your password ?",visible:t,onCancel:s,onOk:f,loading:a,children:(0,n.tZ)(d.Z.Item,{name:"email",label:"Your email address",rules:[{required:!0,message:"Email is required"}],children:(0,n.tZ)(p.Z,{ref:e,placeholder:"Email address",autoComplete:"email"})})}),(0,n.tZ)(c.Z.Text,{children:(0,n.tZ)(u.ZP,{type:"link",onClick:o,children:"Forgot your password ?"})})]})};var z=r(86159),M=r(70917);let N={login:(0,M.iv)({margin:"auto !important",width:"350px"}),submit:(0,M.iv)({marginTop:"32px",button:{width:"100%"}})},_={user:"Error while loading user",internal:"Server issue : please try again shortly",credentials:"Incorrect credentials"},j=async(e,t,r)=>{let n;try{n=await (0,g.x)(t)}catch(e){throw new y.H({title:_.internal,err:e})}if(n.ok)r({id:n.id}),e.push("/dashboard");else throw new y.H({title:_.credentials,type:"warning"})},S=()=>{let[e,t]=(0,i.useState)(!1),[r,f]=(0,i.useState)(),[y,{mutateUser:b,errorUser:w,loadingUser:C}]=Z.Z.useUser(),E=(0,a.useRouter)();(0,i.useEffect)(()=>{m()()&&(0,g.x)({email:"admin",password:"password"}).then(()=>{E.push("/dashboard")}).catch()},[E]),(0,i.useEffect)(()=>{w&&(0,v.lt)(_.user,w)},[w]),(0,i.useEffect)(()=>{y&&E.push("/dashboard")},[y,E]);let x=(0,i.useCallback)(()=>E.push("/signup"),[E]),O=(0,i.useCallback)(async e=>{t(!0);try{await j(E,e,b)}catch(e){f(e),t(!1)}},[E,b]);return C||y?(0,n.tZ)(h.Z,{}):(0,n.tZ)(l.Z,{children:(0,n.tZ)(o.Z,{bordered:!1,css:N.login,children:(0,n.BX)(s.Z,{direction:"vertical",size:"large",css:z.KP.fullWidth,children:[(0,n.BX)("div",{children:[(0,n.tZ)(c.Z.Title,{level:1,style:{padding:0,marginBottom:16,fontWeight:500},children:"Log In"}),(0,n.BX)(c.Z.Text,{children:["Your first time ?"," ",(0,n.tZ)(u.ZP,{type:"link",onClick:x,children:"Sign up"})]})]}),(0,n.BX)(d.Z,{requiredMark:"optional",onFinish:O,layout:"vertical",children:[(0,n.tZ)(d.Z.Item,{name:"email",label:"Your email address",rules:[{required:!0,message:"Email is required"}],children:(0,n.tZ)(p.Z,{placeholder:"Email address",autoComplete:"email"})}),(0,n.tZ)(d.Z.Item,{name:"password",label:"Your password",rules:[{required:!0,message:"Password is required"}],style:{marginBottom:"14px"},children:(0,n.tZ)(p.Z.Password,{placeholder:"Password",autoComplete:"current-password"})}),(0,n.tZ)(k,{}),(0,n.tZ)(v.Xq,{error:r}),(0,n.tZ)(d.Z.Item,{css:N.submit,children:(0,n.tZ)(u.ZP,{type:"primary",loading:e,htmlType:"submit",children:"Log in"})})]})]})})})},T=()=>(0,n.tZ)(S,{});var B=T}},function(e){e.O(0,[5336,4875,992,5813,1577,4234,2969,3624,3363,1417,974,7450,9774,2888,179],function(){return e(e.s=83236)}),_N_E=e.O()}]);