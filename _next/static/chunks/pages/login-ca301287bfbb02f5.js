(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3459],{40262:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(1413),i=r(67294),l={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:e}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm-32 156c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z",fill:t}},{tag:"path",attrs:{d:"M488 576h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8zm-24 112a48 48 0 1096 0 48 48 0 10-96 0z",fill:e}}]}},name:"exclamation-circle",theme:"twotone"},a=r(42135),o=function(e,t){return i.createElement(a.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t,icon:l}))};o.displayName="ExclamationCircleTwoTone";var s=i.forwardRef(o)},90420:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(1413),i=r(67294),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"},a=r(42135),o=function(e,t){return i.createElement(a.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t,icon:l}))};o.displayName="EyeInvisibleOutlined";var s=i.forwardRef(o)},99611:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(1413),i=r(67294),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"},a=r(42135),o=function(e,t){return i.createElement(a.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t,icon:l}))};o.displayName="EyeOutlined";var s=i.forwardRef(o)},28058:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(1413),i=r(67294),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"},a=r(42135),o=function(e,t){return i.createElement(a.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t,icon:l}))};o.displayName="WarningOutlined";var s=i.forwardRef(o)},69677:function(e,t,r){"use strict";r.d(t,{Z:function(){return B}});var n=r(94184),i=r.n(n),l=r(67294),a=r(53124),o=r(65223),s=r(47673);let c=e=>{let{getPrefixCls:t,direction:r}=(0,l.useContext)(a.E_),{prefixCls:n,className:c=""}=e,u=t("input-group",n),d=t("input"),[p,h]=(0,s.ZP)(d),f=i()(u,{[`${u}-lg`]:"large"===e.size,[`${u}-sm`]:"small"===e.size,[`${u}-compact`]:e.compact,[`${u}-rtl`]:"rtl"===r},h,c),m=(0,l.useContext)(o.aM),v=(0,l.useMemo)(()=>Object.assign(Object.assign({},m),{isFormItemInput:!1}),[m]);return p(l.createElement("span",{className:f,style:e.style,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onFocus:e.onFocus,onBlur:e.onBlur},l.createElement(o.aM.Provider,{value:v},e.children)))};var u=r(16591),d=r(90420),p=r(99611),h=r(98423),f=r(42550),m=r(72922),v=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};let Z=e=>e?l.createElement(p.Z,null):l.createElement(d.Z,null),g={click:"onClick",hover:"onMouseOver"},y=l.forwardRef((e,t)=>{let{visibilityToggle:r=!0}=e,n="object"==typeof r&&void 0!==r.visible,[o,s]=(0,l.useState)(()=>!!n&&r.visible),c=(0,l.useRef)(null);l.useEffect(()=>{n&&s(r.visible)},[n,r]);let d=(0,m.Z)(c),p=()=>{let{disabled:t}=e;t||(o&&d(),s(e=>{var t;let n=!e;return"object"==typeof r&&(null===(t=r.onVisibleChange)||void 0===t||t.call(r,n)),n}))},{className:y,prefixCls:b,inputPrefixCls:w,size:C}=e,E=v(e,["className","prefixCls","inputPrefixCls","size"]),{getPrefixCls:k}=l.useContext(a.E_),x=k("input",w),O=k("input-password",b),T=r&&(t=>{let{action:r="click",iconRender:n=Z}=e,i=g[r]||"",a=n(o),s={[i]:p,className:`${t}-icon`,key:"passwordIcon",onMouseDown:e=>{e.preventDefault()},onMouseUp:e=>{e.preventDefault()}};return l.cloneElement(l.isValidElement(a)?a:l.createElement("span",null,a),s)})(O),P=i()(O,y,{[`${O}-${C}`]:!!C}),B=Object.assign(Object.assign({},(0,h.Z)(E,["suffix","iconRender","visibilityToggle"])),{type:o?"text":"password",className:P,prefixCls:x,suffix:T});return C&&(B.size=C),l.createElement(u.ZP,Object.assign({ref:(0,f.sQ)(t,c)},B))});var b=r(68795),w=r(71577),C=r(97647),E=r(4173),k=r(96159),x=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};let O=l.forwardRef((e,t)=>{let r;let{prefixCls:n,inputPrefixCls:o,className:s,size:c,suffix:d,enterButton:p=!1,addonAfter:h,loading:m,disabled:v,onSearch:Z,onChange:g,onCompositionStart:y,onCompositionEnd:O}=e,T=x(e,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:P,direction:B}=l.useContext(a.E_),S=l.useContext(C.Z),j=l.useRef(!1),z=P("input-search",n),N=P("input",o),{compactSize:X}=(0,E.ri)(z,B),_=X||c||S,M=l.useRef(null),R=e=>{e&&e.target&&"click"===e.type&&Z&&Z(e.target.value,e),g&&g(e)},I=e=>{var t;document.activeElement===(null===(t=M.current)||void 0===t?void 0:t.input)&&e.preventDefault()},U=e=>{var t,r;Z&&Z(null===(r=null===(t=M.current)||void 0===t?void 0:t.input)||void 0===r?void 0:r.value,e)},A=e=>{j.current||m||U(e)},L="boolean"==typeof p?l.createElement(b.Z,null):null,H=`${z}-button`,q=p||{},D=q.type&&!0===q.type.__ANT_BUTTON;r=D||"button"===q.type?(0,k.Tm)(q,Object.assign({onMouseDown:I,onClick:e=>{var t,r;null===(r=null===(t=null==q?void 0:q.props)||void 0===t?void 0:t.onClick)||void 0===r||r.call(t,e),U(e)},key:"enterButton"},D?{className:H,size:_}:{})):l.createElement(w.ZP,{className:H,type:p?"primary":void 0,size:_,disabled:v,key:"enterButton",onMouseDown:I,onClick:U,loading:m,icon:L},p),h&&(r=[r,(0,k.Tm)(h,{key:"addonAfter"})]);let F=i()(z,{[`${z}-rtl`]:"rtl"===B,[`${z}-${_}`]:!!_,[`${z}-with-button`]:!!p},s),$=e=>{j.current=!0,null==y||y(e)},Y=e=>{j.current=!1,null==O||O(e)};return l.createElement(u.ZP,Object.assign({ref:(0,f.sQ)(M,t),onPressEnter:A},T,{size:_,onCompositionStart:$,onCompositionEnd:Y,prefixCls:N,addonAfter:r,suffix:d,onChange:R,className:F,disabled:v}))});var T=r(56994);let P=u.ZP;P.Group=c,P.Search=O,P.TextArea=T.Z,P.Password=y;var B=P},83236:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return r(54290)}])},40287:function(e,t,r){"use strict";r.d(t,{EQ:function(){return o},kD:function(){return l},o3:function(){return i},x_:function(){return a}});var n=r(83454);let i=n.env.EMAIL_TOKEN||"",l="subscribe",a="passwordRecovery",o="revalidate"},11425:function(e,t,r){"use strict";r.d(t,{R:function(){return c},_:function(){return s}});var n=r(59134),i=r.n(n),l=r(83454);let a=l.env.PORT?parseInt(l.env.PORT):3e3,o=i()()?"http://localhost:"+a:"",s=async(e,t)=>{let r=await fetch(o+e,{method:t?"POST":"GET",headers:{accept:"application/json","Content-Type":"application/json"},...t&&{body:t}}),n=r.headers.get("Content-Type");if(!r.ok){let e=Error("An error occured while fetching data.");throw e.info=(null==n?void 0:n.includes("application/json"))&&await r.json(),e.status=r.status,e}return r.json()},c=async(e,t)=>{let r=await fetch(o+e,{...t,method:t&&t.method||"GET",headers:{...t&&t.headers,"Content-Type":"application/json"}}),n=r.headers.get("Content-Type");if(!r.ok){let e=Error("An error occured while fetching data.");throw e.info=(null==n?void 0:n.includes("application/json"))&&await r.json(),e.status=r.status,e}return r}},4415:function(e,t,r){"use strict";r.d(t,{H:function(){return n}});class n extends Error{constructor(e){super(e.title),this.title=e.title,this.name="APIError",this.render=e.render,this.err=e.err,this.type=e.type||"error"}}},63406:function(e,t,r){"use strict";r.d(t,{x:function(){return a}});var n=r(59134),i=r.n(n);let l=i()()?"http://localhost:3000":"",a=async e=>{let t=await fetch(l+"/api/login",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({email:e.email,password:e.password})});return 200===t.status?{ok:!0,...await t.json()}:{ok:!1}}},55734:function(e,t,r){"use strict";r.d(t,{Z:function(){return f}});var n=r(59734),i=r(67294),l=r(11425);let a=()=>{let{data:e,error:t,mutate:r}=(0,n.ZP)("/api/user",l._),a=null==e?void 0:e.user,o=(0,i.useCallback)(e=>{r({user:{...a,...e}})},[a,r]),s=(0,i.useCallback)(()=>{r({user:void 0})},[r]);return[a,{mutateUser:o,clearUser:s,errorUser:(null==t?void 0:t.status)===401?void 0:t,loadingUser:(null==t?void 0:t.status)!==401&&!e}]},o=()=>{let{data:e,error:t,mutate:r}=(0,n.ZP)("/api/users",l._),a=(null==e?void 0:e.users)||[],o=(0,i.useCallback)(e=>{let t=[...a,{...e,authorizedplugins:[]}];r({users:t})},[a,r]),s=(0,i.useCallback)(e=>{let t=a.filter(t=>t.id!==e.id);r({users:t})},[a,r]),c=(0,i.useCallback)(e=>{let t=a.map(t=>(t.id===e.id&&(t={...t,...e}),t));r({users:t})},[a,r]);return[a,{addOneUser:o,delOneUser:s,mutateOneUser:c,errorUsers:t,loadingUsers:!e}]},s=async e=>{let t=await (0,l.R)("/api/user",{method:"POST",headers:{Accept:"application/json"},body:JSON.stringify(e)});return t.json()},c=async e=>{await (0,l.R)("/api/user",{method:"PUT",body:JSON.stringify(e)})},u=async(e,t)=>{await (0,l.R)("/api/user/"+e,{method:"PUT",body:JSON.stringify(t)})},d=async()=>{await (0,l.R)("/api/user",{method:"DELETE"})},p=async e=>{await (0,l.R)("/api/user/"+e,{method:"DELETE"})},h=async e=>{let t=await (0,l.R)("/api/user/check",{method:"POST",headers:{Accept:"application/json"},body:JSON.stringify(e)});return t.json()};var f={useUser:a,useUsers:o,add:s,update:c,updateById:u,del:d,delById:p,check:h}},28345:function(e,t,r){"use strict";r.d(t,{AN:function(){return h},ZP:function(){return v}});var n=r(14288),i=r(67294),l=r(96108),a=r(60974),o=r(22850),s=r(12271),c=r(26713),u=r(40262);let d={onOk:"Error while submitting deletion"},p=e=>{let{visible:t,loading:r,title:l,children:p,onCancel:h,onOk:f}=e,m=(0,i.useCallback)(async()=>{try{await f()}catch(e){(0,s.lt)(d.onOk,e,!1)}},[f]);return(0,n.tZ)(a.Z,{title:(0,n.tZ)(o.Z.Text,{ellipsis:{tooltip:!0},children:l}),okText:"Delete",closable:!1,maskClosable:!1,open:t,cancelButtonProps:{disabled:r},onCancel:h,onOk:m,okButtonProps:{danger:!0,loading:r},children:(0,n.BX)(c.Z,{align:"start",children:[(0,n.tZ)(u.Z,{twoToneColor:"#ff4d4f"}),(0,n.tZ)("span",{style:{wordBreak:"break-word"},children:p})]})})};var h=p;let f={onOk:"Error while submitting data"},m=e=>{let{visible:t,loading:r,title:c,initialValues:u,cancelButtonText:d,cancelButtonProps:p,okButtonProps:h,okButtonText:m,children:v,onCancel:Z,onOk:g}=e,[y]=l.Z.useForm();(0,i.useEffect)(()=>{t&&u&&y.setFieldsValue(u)},[t,u,y]);let b=(0,i.useCallback)(async()=>{if(g)try{let e=await y.validateFields();await g(e),y.resetFields()}catch(e){(0,s.lt)(f.onOk,e,!1)}},[y,g]),w=(0,i.useCallback)(e=>{13===e.keyCode&&b()},[b]),C=(0,i.useCallback)(()=>{y.resetFields(),null==Z||Z()},[y,Z]);return(0,n.tZ)(a.Z,{title:(0,n.tZ)(o.Z.Text,{ellipsis:{tooltip:!0},children:c}),open:t,closable:!1,maskClosable:!1,onCancel:C,cancelButtonProps:{...p,disabled:r,style:{display:Z?"inline-block":"none"}},cancelText:d,onOk:b,okText:m,okButtonProps:{...h,loading:r,style:{display:g?"inline-block":"none"}},children:(0,n.tZ)(l.Z,{form:y,layout:"vertical",initialValues:u,onKeyUp:w,children:v})})};var v=m},12271:function(e,t,r){"use strict";let n,i;r.d(t,{lt:function(){return Z},Xq:function(){return w},Ur:function(){return o}});var l=r(33009);let a=(e,t)=>{l.Z.success({message:e,description:t,duration:10})};var o=a,s=r(14288),c=r(22850),u=r(15045),d=r(26713),p=r(71577),h=r(79074),f=r(60274);h.S1({dsn:"https://3bb27cb32e55433696022ba93cb32430@o394613.ingest.sentry.io/5428383"});let m=[],v=()=>{n&&(l.Z.destroy(n),n=void 0),m.forEach(e=>l.Z.destroy(e)),m.length=0,l.Z.destroy(i),i=void 0};var Z=function(e,t){let r=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if((null==t?void 0:t.message)==="Failed to fetch"){if(!n){let e="server_error";m.push(e),l.Z.error({key:e,message:"Server error",description:"Server is disconnected, please check your internet connection.",duration:0,onClose:()=>{n=void 0}}),n=e}return}if(r){var a,o;let r="error_"+m.length;m.push(r),l.Z.error({key:r,message:e,description:t&&(0,s.BX)(s.HY,{children:[(0,s.tZ)(c.Z.Text,{code:!0,children:t.message}),(t.status||t.info)&&(0,s.tZ)(u.Z,{children:(0,s.tZ)(u.Z.Panel,{header:"More information",children:(0,s.BX)(d.Z,{direction:"vertical",children:[t.status&&(0,s.BX)(c.Z.Text,{children:["Status: ",t.status]}),(null===(a=t.info)||void 0===a?void 0:a.message)&&(0,s.BX)(c.Z.Text,{children:["Description: ",null===(o=t.info)||void 0===o?void 0:o.message]})]})},"information")})]}),duration:0})}if(t&&console.error(t),t&&f.captureException(t),m.length>1&&!i){let e="close_all";l.Z.info({key:e,message:(0,s.tZ)(p.ZP,{type:"primary",onClick:v,children:"Close all"}),description:"Close all error notifications",duration:0,placement:"top"}),i=e}},g=r(96108),y=r(99138);let b=e=>{var t,r;let{error:n}=e;return n?(0,s.tZ)(g.Z.Item,{children:(0,s.tZ)(y.Z,{message:n.render||n.title,type:n.type,showIcon:!0,description:n.err&&(0,s.BX)(s.HY,{children:[n.err.message&&(0,s.BX)(c.Z.Text,{type:"danger",children:["Message: ",(0,s.tZ)("code",{children:n.err.message})]}),n.err.status&&(0,s.BX)(s.HY,{children:[(0,s.tZ)("br",{}),(0,s.BX)(c.Z.Text,{type:"danger",children:["Status: ",(0,s.tZ)("code",{children:n.err.status})]})]}),(null===(t=n.err.info)||void 0===t?void 0:t.message)&&(0,s.BX)(s.HY,{children:[(0,s.tZ)("br",{}),(0,s.BX)(c.Z.Text,{type:"danger",children:["Information: ",(0,s.tZ)("code",{children:null===(r=n.err.info)||void 0===r?void 0:r.message})]})]})]})})}):null};var w=b},67641:function(e,t,r){"use strict";r.d(t,{Z:function(){return g}});var n=r(14288),i=r(67294),l=r(26713),a=r(85813),o=r(57953),s=r(3363),c=r(22850),u=r(97183),d=r(50888),p=r(28058),h=r(86159),f=r(70917);let m={loading:(0,f.iv)({margin:"auto !important",maxWidth:"80%"}),content:(0,f.iv)({maxHeight:"50vh",padding:"20px",overflow:"auto"}),status:(0,f.iv)({marginTop:"10px"}),errors:(0,f.iv)({marginTop:"10px",color:"red","& .ant-card":{margin:"10px 0",borderColor:"red",color:"red"}})},v=()=>(0,n.tZ)(l.Z,{style:{height:"100%",width:"100%",justifyContent:"center",alignItems:"center"},children:(0,n.tZ)(a.Z,{children:(0,n.BX)(l.Z,{children:[(0,n.tZ)(o.Z,{}),"Loading, please wait..."]})})}),Z=e=>{let{text:t,status:r,errors:f}=e,v=(0,i.useRef)(null),[Z,g]=(0,i.useState)(),[y,b]=(0,i.useState)();(0,i.useEffect)(()=>{if(!(null==r?void 0:r.length)){g(void 0);return}g((0,n.tZ)("div",{css:m.status,children:(0,n.tZ)(s.Z,{direction:"vertical",items:r.map((e,t)=>({key:t,status:"finish",icon:t===r.length-1?(0,n.tZ)(d.Z,{}):void 0,title:e})).reverse()})}))},[r,f]),(0,i.useEffect)(()=>{if(!(null==f?void 0:f.length)){b(void 0);return}b((0,n.BX)("div",{css:m.errors,children:[f.map(e=>{let t=null;return e.includes("docker: command not found")||e.includes("Is the docker daemon running")?t=(0,n.BX)(a.Z,{children:["There is an error with your Docker installation.",(0,n.tZ)("br",{}),"Please verify that Docker is correctly installed and running."]}):(e.includes("EHOSTUNREACH")||e.includes("ENETUNREACH")||e.includes("ETIMEOUT"))&&(t=(0,n.BX)(a.Z,{children:["There is an error with your PostgreSQL installation.",(0,n.tZ)("br",{}),'Please verify that postgres Docker container "tanatloc-postgres" is correctly installed and running.']})),(0,n.BX)("div",{children:[e,t]},e)}),(0,n.tZ)(c.Z.Title,{level:5,style:{color:"red"},children:"Please restart the application"})]}))},[f]);let w=!!(null==r?void 0:r.length)||!!(null==f?void 0:f.length);return(0,n.BX)(u.Z,{children:[(0,n.tZ)("div",{css:h.KP.logo,children:(0,n.tZ)("img",{src:"/images/logo.svg",alt:"Tanatloc"})}),(0,n.tZ)(a.Z,{css:m.loading,bodyStyle:{padding:0},title:(0,n.tZ)(l.Z,{children:(null==f?void 0:f.length)?(0,n.BX)(n.HY,{children:[(0,n.tZ)(p.Z,{style:{fontSize:"32px",color:"red"}}),(0,n.tZ)(c.Z.Title,{level:3,css:h.Ml.margin(0),children:"An error occurs"}),(0,n.tZ)("a",{href:"https://github.com/Airthium/tanatloc/issues/new/choose",target:"_blank",rel:"noreferrer",children:"Open an issue"})]}):(0,n.BX)(n.HY,{children:[(0,n.tZ)(o.Z,{size:"large",indicator:(0,n.tZ)(d.Z,{})}),null!=t?t:"Loading, please wait..."]})}),children:w?(0,n.BX)("div",{ref:v,css:m.content,children:[y,Z]}):null})]})};Z.Simple=v;var g=Z},54290:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return _}});var n=r(14288),i=r(11163),l=r(67294),a=r(97183),o=r(85813),s=r(26713),c=r(22850),u=r(71577),d=r(96108),p=r(69677),h=r(59134),f=r.n(h),m=r(67641),v=r(12271),Z=r(4415),g=r(63406),y=r(55734),b=r(28345),w=r(11425),C=r(40287);let E=async e=>{await (0,w.R)("/api/email",{method:"PUT",body:JSON.stringify({type:C.x_,email:e})})};var k={recover:E};let x={recover:"Unable to recover password"},O=async e=>{try{await k.recover(e.email),(0,v.Ur)("An email has been send to recover your password","If you entered a valid email")}catch(e){throw(0,v.lt)(x.recover,e),e}},T=()=>{let e=(0,l.useRef)(null),[t,r]=(0,l.useState)(!1),[i,a]=(0,l.useState)(!1);(0,l.useEffect)(()=>{e.current&&e.current.focus()});let o=(0,l.useCallback)(()=>r(!0),[]),s=(0,l.useCallback)(()=>r(!1),[]),h=(0,l.useCallback)(async e=>{a(!0);try{await O(e),a(!1),r(!1)}catch(e){throw a(!1),e}},[]);return(0,n.BX)(n.HY,{children:[(0,n.tZ)(b.ZP,{title:"Forgot your password ?",visible:t,onCancel:s,onOk:h,loading:i,children:(0,n.tZ)(d.Z.Item,{name:"email",label:"Your email address",rules:[{required:!0,message:"Email is required"}],children:(0,n.tZ)(p.Z,{ref:e,placeholder:"Email address",autoComplete:"email"})})}),(0,n.tZ)(c.Z.Text,{children:(0,n.tZ)(u.ZP,{type:"link",onClick:o,children:"Forgot your password ?"})})]})};var P=r(86159),B=r(70917);let S={login:(0,B.iv)({margin:"auto !important",width:"350px"}),submit:(0,B.iv)({marginTop:"32px",button:{width:"100%"}})},j={user:"Error while loading user",internal:"Server issue : please try again shortly",credentials:"Incorrect credentials"},z=async(e,t,r)=>{let n;try{n=await (0,g.x)(t)}catch(e){throw new Z.H({title:j.internal,err:e})}if(n.ok)r({id:n.id}),e.push("/dashboard");else throw new Z.H({title:j.credentials,type:"warning"})},N=()=>{let[e,t]=(0,l.useState)(!1),[r,h]=(0,l.useState)(),[Z,{mutateUser:b,errorUser:w,loadingUser:C}]=y.Z.useUser(),E=(0,i.useRouter)();(0,l.useEffect)(()=>{f()()&&(0,g.x)({email:"admin",password:"password"}).then(()=>{E.push("/dashboard")}).catch()},[E]),(0,l.useEffect)(()=>{w&&(0,v.lt)(j.user,w)},[w]),(0,l.useEffect)(()=>{Z&&E.push("/dashboard")},[Z,E]);let k=(0,l.useCallback)(()=>E.push("/signup"),[E]),x=(0,l.useCallback)(async e=>{t(!0);try{await z(E,e,b)}catch(e){h(e),t(!1)}},[E,b]);return C||Z?(0,n.tZ)(m.Z,{}):(0,n.tZ)(a.Z,{children:(0,n.tZ)(o.Z,{bordered:!1,css:S.login,children:(0,n.BX)(s.Z,{direction:"vertical",size:"large",css:P.KP.fullWidth,children:[(0,n.BX)("div",{children:[(0,n.tZ)(c.Z.Title,{level:1,style:{padding:0,marginBottom:16,fontWeight:500},children:"Log In"}),(0,n.BX)(c.Z.Text,{children:["Your first time ?"," ",(0,n.tZ)(u.ZP,{type:"link",onClick:k,children:"Sign up"})]})]}),(0,n.BX)(d.Z,{requiredMark:"optional",onFinish:x,layout:"vertical",children:[(0,n.tZ)(d.Z.Item,{name:"email",label:"Your email address",rules:[{required:!0,message:"Email is required"}],children:(0,n.tZ)(p.Z,{placeholder:"Email address",autoComplete:"email"})}),(0,n.tZ)(d.Z.Item,{name:"password",label:"Your password",rules:[{required:!0,message:"Password is required"}],style:{marginBottom:"14px"},children:(0,n.tZ)(p.Z.Password,{placeholder:"Password",autoComplete:"current-password"})}),(0,n.tZ)(T,{}),(0,n.tZ)(v.Xq,{error:r}),(0,n.tZ)(d.Z.Item,{css:S.submit,children:(0,n.tZ)(u.ZP,{type:"primary",loading:e,htmlType:"submit",children:"Log in"})})]})]})})})},X=()=>(0,n.tZ)(N,{});var _=X}},function(e){e.O(0,[5336,4875,992,9502,5813,1577,4234,4702,3624,3363,974,954,9774,2888,179],function(){return e(e.s=83236)}),_N_E=e.O()}]);