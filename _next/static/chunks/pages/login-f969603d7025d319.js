(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3459],{40262:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(87462),s=r(67294),l={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:e}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm-32 156c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z",fill:t}},{tag:"path",attrs:{d:"M488 576h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8zm-24 112a48 48 0 1096 0 48 48 0 10-96 0z",fill:e}}]}},name:"exclamation-circle",theme:"twotone"},a=r(84089),i=s.forwardRef(function(e,t){return s.createElement(a.Z,(0,n.Z)({},e,{ref:t,icon:l}))})},90420:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(87462),s=r(67294),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"},a=r(84089),i=s.forwardRef(function(e,t){return s.createElement(a.Z,(0,n.Z)({},e,{ref:t,icon:l}))})},99611:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(87462),s=r(67294),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"},a=r(84089),i=s.forwardRef(function(e,t){return s.createElement(a.Z,(0,n.Z)({},e,{ref:t,icon:l}))})},28058:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(87462),s=r(67294),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"},a=r(84089),i=s.forwardRef(function(e,t){return s.createElement(a.Z,(0,n.Z)({},e,{ref:t,icon:l}))})},69677:function(e,t,r){"use strict";r.d(t,{Z:function(){return O}});var n=r(94184),s=r.n(n),l=r(67294),a=r(53124),i=r(65223),o=r(47673),c=r(82586),u=r(90420),d=r(99611),p=r(98423),h=r(42550),f=r(72922),m=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)0>t.indexOf(n[s])&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};let g=e=>e?l.createElement(d.Z,null):l.createElement(u.Z,null),y={click:"onClick",hover:"onMouseOver"},x=l.forwardRef((e,t)=>{let{visibilityToggle:r=!0}=e,n="object"==typeof r&&void 0!==r.visible,[i,o]=(0,l.useState)(()=>!!n&&r.visible),u=(0,l.useRef)(null);l.useEffect(()=>{n&&o(r.visible)},[n,r]);let d=(0,f.Z)(u),x=()=>{let{disabled:t}=e;t||(i&&d(),o(e=>{var t;let n=!e;return"object"==typeof r&&(null===(t=r.onVisibleChange)||void 0===t||t.call(r,n)),n}))},{className:v,prefixCls:j,inputPrefixCls:_,size:b}=e,w=m(e,["className","prefixCls","inputPrefixCls","size"]),{getPrefixCls:Z}=l.useContext(a.E_),C=Z("input",_),k=Z("input-password",j),E=r&&(t=>{let{action:r="click",iconRender:n=g}=e,s=y[r]||"",a=n(i),o={[s]:x,className:`${t}-icon`,key:"passwordIcon",onMouseDown:e=>{e.preventDefault()},onMouseUp:e=>{e.preventDefault()}};return l.cloneElement(l.isValidElement(a)?a:l.createElement("span",null,a),o)})(k),O=s()(k,v,{[`${k}-${b}`]:!!b}),T=Object.assign(Object.assign({},(0,p.Z)(w,["suffix","iconRender","visibilityToggle"])),{type:i?"text":"password",className:O,prefixCls:C,suffix:E});return b&&(T.size=b),l.createElement(c.Z,Object.assign({ref:(0,h.sQ)(t,u)},T))});var v=r(68795),j=r(96159),_=r(71577),b=r(98675),w=r(4173),Z=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)0>t.indexOf(n[s])&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};let C=l.forwardRef((e,t)=>{let r;let{prefixCls:n,inputPrefixCls:i,className:o,size:u,suffix:d,enterButton:p=!1,addonAfter:f,loading:m,disabled:g,onSearch:y,onChange:x,onCompositionStart:C,onCompositionEnd:k}=e,E=Z(e,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:O,direction:T}=l.useContext(a.E_),P=l.useRef(!1),S=O("input-search",n),N=O("input",i),{compactSize:z}=(0,w.ri)(S,T),B=(0,b.Z)(e=>{var t;return null!==(t=null!=z?z:u)&&void 0!==t?t:e}),A=l.useRef(null),R=e=>{var t;document.activeElement===(null===(t=A.current)||void 0===t?void 0:t.input)&&e.preventDefault()},U=e=>{var t,r;y&&y(null===(r=null===(t=A.current)||void 0===t?void 0:t.input)||void 0===r?void 0:r.value,e)},M="boolean"==typeof p?l.createElement(v.Z,null):null,I=`${S}-button`,L=p||{},F=L.type&&!0===L.type.__ANT_BUTTON;r=F||"button"===L.type?(0,j.Tm)(L,Object.assign({onMouseDown:R,onClick:e=>{var t,r;null===(r=null===(t=null==L?void 0:L.props)||void 0===t?void 0:t.onClick)||void 0===r||r.call(t,e),U(e)},key:"enterButton"},F?{className:I,size:B}:{})):l.createElement(_.ZP,{className:I,type:p?"primary":void 0,size:B,disabled:g,key:"enterButton",onMouseDown:R,onClick:U,loading:m,icon:M},p),f&&(r=[r,(0,j.Tm)(f,{key:"addonAfter"})]);let D=s()(S,{[`${S}-rtl`]:"rtl"===T,[`${S}-${B}`]:!!B,[`${S}-with-button`]:!!p},o);return l.createElement(c.Z,Object.assign({ref:(0,h.sQ)(A,t),onPressEnter:e=>{P.current||m||U(e)}},E,{size:B,onCompositionStart:e=>{P.current=!0,null==C||C(e)},onCompositionEnd:e=>{P.current=!1,null==k||k(e)},prefixCls:N,addonAfter:r,suffix:d,onChange:e=>{e&&e.target&&"click"===e.type&&y&&y(e.target.value,e),x&&x(e)},className:D,disabled:g}))});var k=r(22913);let E=c.Z;E.Group=e=>{let{getPrefixCls:t,direction:r}=(0,l.useContext)(a.E_),{prefixCls:n,className:c=""}=e,u=t("input-group",n),d=t("input"),[p,h]=(0,o.ZP)(d),f=s()(u,{[`${u}-lg`]:"large"===e.size,[`${u}-sm`]:"small"===e.size,[`${u}-compact`]:e.compact,[`${u}-rtl`]:"rtl"===r},h,c),m=(0,l.useContext)(i.aM),g=(0,l.useMemo)(()=>Object.assign(Object.assign({},m),{isFormItemInput:!1}),[m]);return p(l.createElement("span",{className:f,style:e.style,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onFocus:e.onFocus,onBlur:e.onBlur},l.createElement(i.aM.Provider,{value:g},e.children)))},E.Search=C,E.TextArea=k.Z,E.Password=x;var O=E},74250:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return r(17651)}])},96542:function(e,t,r){"use strict";r.d(t,{EQ:function(){return o},kD:function(){return a},o3:function(){return l},x_:function(){return i}});var n,s=r(83454);let l=null!==(n=s.env.EMAIL_TOKEN)&&void 0!==n?n:"",a="subscribe",i="passwordRecovery",o="revalidate"},83755:function(e,t,r){"use strict";r.d(t,{R:function(){return c},_:function(){return o}});var n=r(59134),s=r.n(n),l=r(83454);let a=l.env.PORT?parseInt(l.env.PORT):3e3,i=s()()?"http://localhost:"+a:"",o=async(e,t)=>{let r=await fetch(i+e,{method:t?"POST":"GET",headers:{accept:"application/json","Content-Type":"application/json"},...t&&{body:t}}),n=r.headers.get("Content-Type");if(!r.ok){let e=Error("An error occured while fetching data.");throw e.info=(null==n?void 0:n.includes("application/json"))&&await r.json(),e.status=r.status,e}return r.json()},c=async(e,t)=>{var r;let n=await fetch(i+e,{...t,method:null!==(r=null==t?void 0:t.method)&&void 0!==r?r:"GET",headers:{...null==t?void 0:t.headers,"Content-Type":"application/json"}}),s=n.headers.get("Content-Type");if(!n.ok){let e=Error("An error occured while fetching data.");throw e.info=(null==s?void 0:s.includes("application/json"))&&await n.json(),e.status=n.status,e}return n}},93659:function(e,t,r){"use strict";r.d(t,{H:function(){return n}});class n extends Error{constructor(e){var t;super(e.title),this.title=e.title,this.name="APIError",this.render=e.render,this.err=e.err,this.type=null!==(t=e.type)&&void 0!==t?t:"error"}}},52228:function(e,t,r){"use strict";r.d(t,{x:function(){return a}});var n=r(59134),s=r.n(n);let l=s()()?"http://localhost:3000":"",a=async e=>{let t=await fetch(l+"/api/login",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({email:e.email,password:e.password})});return 200===t.status?{ok:!0,...await t.json()}:{ok:!1}}},42661:function(e,t,r){"use strict";r.d(t,{Z:function(){return p}});var n=r(59734),s=r(67294),l=r(83755);let a=async e=>{let t=await (0,l.R)("/api/user",{method:"POST",headers:{Accept:"application/json"},body:JSON.stringify(e)});return t.json()},i=async e=>{await (0,l.R)("/api/user",{method:"PUT",body:JSON.stringify(e)})},o=async(e,t)=>{await (0,l.R)("/api/user/"+e,{method:"PUT",body:JSON.stringify(t)})},c=async()=>{await (0,l.R)("/api/user",{method:"DELETE"})},u=async e=>{await (0,l.R)("/api/user/"+e,{method:"DELETE"})},d=async e=>{let t=await (0,l.R)("/api/user/check",{method:"POST",headers:{Accept:"application/json"},body:JSON.stringify(e)});return t.json()};var p={useUser:()=>{let{data:e,error:t,mutate:r}=(0,n.ZP)("/api/user",l._),a=null==e?void 0:e.user,i=(0,s.useCallback)(async e=>{await r({user:{...a,...e}})},[a,r]),o=(0,s.useCallback)(async()=>{await r({user:void 0})},[r]);return[a,{mutateUser:i,clearUser:o,errorUser:(null==t?void 0:t.status)===401?void 0:t,loadingUser:(null==t?void 0:t.status)!==401&&!e}]},useUsers:()=>{var e;let{data:t,error:r,mutate:a}=(0,n.ZP)("/api/users",l._),i=null!==(e=null==t?void 0:t.users)&&void 0!==e?e:[],o=(0,s.useCallback)(async e=>{let t=[...i,{...e,authorizedplugins:[]}];await a({users:t})},[i,a]),c=(0,s.useCallback)(async e=>{let t=i.filter(t=>t.id!==e.id);await a({users:t})},[i,a]),u=(0,s.useCallback)(async e=>{let t=i.map(t=>(t.id===e.id&&(t={...t,...e}),t));await a({users:t})},[i,a]);return[i,{addOneUser:o,delOneUser:c,mutateOneUser:u,errorUsers:r,loadingUsers:!t}]},add:a,update:i,updateById:o,del:c,delById:u,check:d}},86373:function(e,t,r){"use strict";r.d(t,{AN:function(){return p},ZP:function(){return f}});var n=r(85893),s=r(67294),l=r(638),a=r(39014),i=r(22850),o=r(9242),c=r(26713),u=r(40262);let d={onOk:"Error while submitting deletion"};var p=e=>{let{visible:t,loading:r,title:l,children:p,onCancel:h,onOk:f}=e,m=(0,s.useCallback)(()=>{(async()=>{try{await f()}catch(e){(0,o.lt)(d.onOk,e,!1)}})()},[f]);return(0,n.jsx)(a.Z,{title:(0,n.jsx)(i.Z.Text,{ellipsis:{tooltip:!0},children:l}),okText:"Delete",closable:!1,maskClosable:!1,open:t,cancelButtonProps:{disabled:r},onCancel:h,onOk:m,okButtonProps:{danger:!0,loading:r},children:(0,n.jsxs)(c.Z,{align:"start",children:[(0,n.jsx)(u.Z,{twoToneColor:"#ff4d4f"}),(0,n.jsx)("span",{style:{wordBreak:"break-word"},children:p})]})})};let h={onOk:"Error while submitting data"};var f=e=>{let{visible:t,loading:r,title:c,initialValues:u,cancelButtonText:d,cancelButtonProps:p,okButtonProps:f,okButtonText:m,children:g,onCancel:y,onOk:x}=e,[v]=l.Z.useForm();(0,s.useEffect)(()=>{t&&u&&v.setFieldsValue(u)},[t,u,v]);let j=(0,s.useCallback)(()=>{(async()=>{if(x)try{let e=await v.validateFields();await x(e),v.resetFields()}catch(e){(0,o.lt)(h.onOk,e,!1)}})()},[v,x]),_=(0,s.useCallback)(e=>{13===e.keyCode&&j()},[j]),b=(0,s.useCallback)(()=>{v.resetFields(),null==y||y()},[v,y]);return(0,n.jsx)(a.Z,{title:(0,n.jsx)(i.Z.Text,{ellipsis:{tooltip:!0},children:c}),open:t,closable:!1,maskClosable:!1,onCancel:b,cancelButtonProps:{...p,disabled:r,style:{display:y?"inline-block":"none"}},cancelText:d,onOk:j,okText:m,okButtonProps:{...f,loading:r,style:{display:x?"inline-block":"none"}},children:(0,n.jsx)(l.Z,{form:v,layout:"vertical",initialValues:u,onKeyUp:_,children:g})})}},9242:function(e,t,r){"use strict";let n,s;r.d(t,{lt:function(){return g},Xq:function(){return v},Ur:function(){return a}});var l=r(33009),a=(e,t)=>{l.Z.success({message:e,description:t,duration:10})},i=r(85893),o=r(22850),c=r(15045),u=r(26713),d=r(71577),p=r(79074),h=r(83009);p.S1({dsn:"https://3bb27cb32e55433696022ba93cb32430@o394613.ingest.sentry.io/5428383"});let f=[],m=()=>{n&&(l.Z.destroy(n),n=void 0),f.forEach(e=>l.Z.destroy(e)),f.length=0,l.Z.destroy(s),s=void 0};var g=function(e,t){let r=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if((null==t?void 0:t.message)==="Failed to fetch"){if(!n){let e="server_error";f.push(e),l.Z.error({key:e,message:"Server error",description:"Server is disconnected, please check your internet connection.",duration:0,onClose:()=>{n=void 0}}),n=e}return}if(r){var a,p;let r="error_"+f.length;f.push(r),l.Z.error({key:r,message:e,description:t&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Z.Text,{code:!0,children:t.message}),(t.status||t.info)&&(0,i.jsx)(c.Z,{children:(0,i.jsx)(c.Z.Panel,{header:"More information",children:(0,i.jsxs)(u.Z,{direction:"vertical",children:[t.status&&(0,i.jsxs)(o.Z.Text,{children:["Status: ",t.status]}),(null===(a=t.info)||void 0===a?void 0:a.message)&&(0,i.jsxs)(o.Z.Text,{children:["Description: ",null===(p=t.info)||void 0===p?void 0:p.message]})]})},"information")})]}),duration:0})}if(t&&console.error(t),t&&h.captureException(t),f.length>1&&!s){let e="close_all";l.Z.info({key:e,message:(0,i.jsx)(d.ZP,{type:"primary",onClick:m,children:"Close all"}),description:"Close all error notifications",duration:0,placement:"top"}),s=e}},y=r(638),x=r(99138),v=e=>{var t,r,n;let{error:s}=e;return s?(0,i.jsx)(y.Z.Item,{children:(0,i.jsx)(x.Z,{message:null!==(n=s.render)&&void 0!==n?n:s.title,type:s.type,showIcon:!0,description:s.err&&(0,i.jsxs)(i.Fragment,{children:[s.err.message&&(0,i.jsxs)(o.Z.Text,{type:"danger",children:["Message: ",(0,i.jsx)("code",{children:s.err.message})]}),s.err.status&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("br",{}),(0,i.jsxs)(o.Z.Text,{type:"danger",children:["Status: ",(0,i.jsx)("code",{children:s.err.status})]})]}),(null===(t=s.err.info)||void 0===t?void 0:t.message)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("br",{}),(0,i.jsxs)(o.Z.Text,{type:"danger",children:["Information: ",(0,i.jsx)("code",{children:null===(r=s.err.info)||void 0===r?void 0:r.message})]})]})]})})}):null}},94725:function(e,t,r){"use strict";var n=r(85893),s=r(67294),l=r(41664),a=r.n(l),i=r(26713),o=r(85813),c=r(57953),u=r(97183),d=r(22850),p=r(3363),h=r(50888),f=r(28058),m=r(14856),g=r.n(m),y=r(80108),x=r.n(y);let v=e=>{let{text:t,status:r,errors:l}=e,[i,m]=(0,s.useState)([]),[y,v]=(0,s.useState)([]);(0,s.useEffect)(()=>{if(!(null==r?void 0:r.length)){m([]);return}let e=r.map((e,t)=>({index:t,status:"finish",icon:0===t?(0,n.jsx)(h.Z,{}):void 0,title:e})).filter(e=>e);m(e)},[r]),(0,s.useEffect)(()=>{if(!(null==l?void 0:l.length)){v([]);return}v(l.map(e=>{let t=null;return e.includes("docker: command not found")||e.includes("Is the docker daemon running")?t=(0,n.jsxs)(o.Z,{className:x().errorCard,children:["There is an error with your Docker installation.",(0,n.jsx)("br",{}),"Please verify that Docker is correctly installed and running."]}):(e.includes("EHOSTUNREACH")||e.includes("ENETUNREACH")||e.includes("ETIMEOUT"))&&(t=(0,n.jsxs)(o.Z,{className:x().errorCard,children:["There is an error with your PostgreSQL installation.",(0,n.jsx)("br",{}),'Please verify that postgres Docker container "tanatloc-postgres" is correctly installed and running.']})),(0,n.jsxs)("div",{children:[e,t]},e)}))},[l]);let j=!!(null==r?void 0:r.length)||!!(null==l?void 0:l.length);return(0,n.jsxs)(u.Z,{children:[(0,n.jsx)("div",{className:g().logo,children:(0,n.jsx)("img",{src:"/images/logo.svg",alt:"Tanatloc"})}),(0,n.jsx)(o.Z,{className:x().loading,bodyStyle:{padding:0},title:(0,n.jsx)("div",{className:x().title,children:(null==l?void 0:l.length)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.Z,{className:"warning"}),(0,n.jsx)(d.Z.Title,{level:3,style:{margin:"0"},children:"An error occurs"}),(0,n.jsx)(a(),{href:"https://github.com/Airthium/tanatloc/issues/new/choose",target:"_blank",children:"Open an issue"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.Z,{size:"large",indicator:(0,n.jsx)(h.Z,{})}),null!=t?t:"Loading, please wait..."]})}),children:j?(0,n.jsxs)("div",{className:x().content,children:[y.length?(0,n.jsxs)("div",{className:x().errors,children:[y.map(e=>e),(0,n.jsx)(d.Z.Title,{level:5,children:"Please restart the application"})]}):null,(0,n.jsx)("div",{className:x().status,children:(0,n.jsx)(p.Z,{direction:"vertical",items:i})})]}):null})]})};v.Simple=()=>(0,n.jsx)(i.Z,{style:{height:"100%",width:"100%",justifyContent:"center",alignItems:"center"},children:(0,n.jsx)(o.Z,{children:(0,n.jsxs)(i.Z,{children:[(0,n.jsx)(c.Z,{}),"Loading, please wait..."]})})}),t.Z=v},17651:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return A}});var n=r(85893),s=r(11163),l=r(67294),a=r(97183),i=r(85813),o=r(26713),c=r(22850),u=r(71577),d=r(638),p=r(69677),h=r(59134),f=r.n(h),m=r(94725),g=r(9242),y=r(93659),x=r(52228),v=r(42661),j=r(86373),_=r(83755),b=r(96542);let w=async e=>{await (0,_.R)("/api/email",{method:"PUT",body:JSON.stringify({type:b.x_,email:e})})};var Z={recover:w};let C={recover:"Unable to recover password"},k=async e=>{try{await Z.recover(e.email),(0,g.Ur)("An email has been send to recover your password","If you entered a valid email")}catch(e){throw(0,g.lt)(C.recover,e),e}};var E=()=>{let e=(0,l.useRef)(null),[t,r]=(0,l.useState)(!1),[s,a]=(0,l.useState)(!1);(0,l.useEffect)(()=>{e.current&&e.current.focus()});let i=(0,l.useCallback)(()=>r(!0),[]),o=(0,l.useCallback)(()=>r(!1),[]),h=(0,l.useCallback)(async e=>{a(!0);try{await k(e),a(!1),r(!1)}catch(e){throw a(!1),e}},[]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(j.ZP,{title:"Forgot your password ?",visible:t,onCancel:o,onOk:h,loading:s,children:(0,n.jsx)(d.Z.Item,{name:"email",label:"Your email address",rules:[{required:!0,message:"Email is required"}],children:(0,n.jsx)(p.Z,{ref:e,placeholder:"Email address",autoComplete:"email"})})}),(0,n.jsx)(c.Z.Text,{children:(0,n.jsx)(u.ZP,{type:"link",onClick:i,children:"Forgot your password ?"})})]})},O=r(14856),T=r.n(O),P=r(33510),S=r.n(P);let N={user:"Error while loading user",internal:"Server issue : please try again shortly",credentials:"Incorrect credentials"},z=async(e,t,r)=>{let n;try{n=await (0,x.x)(t)}catch(e){throw new y.H({title:N.internal,err:e})}if(n.ok)await r({id:n.id}),await e.push("/dashboard").catch();else throw new y.H({title:N.credentials,type:"warning"})};var B=()=>{let[e,t]=(0,l.useState)(!1),[r,h]=(0,l.useState)(),[y,{mutateUser:j,errorUser:_,loadingUser:b}]=v.Z.useUser(),w=(0,s.useRouter)();(0,l.useEffect)(()=>{(async()=>{if(f()())try{await (0,x.x)({email:"admin",password:"password"}),await w.push("/dashboard")}catch(e){}})()},[w]),(0,l.useEffect)(()=>{_&&(0,g.lt)(N.user,_)},[_]),(0,l.useEffect)(()=>{(async()=>{y&&await w.push("/dashboard")})()},[y,w]);let Z=(0,l.useCallback)(()=>{(async()=>{await w.push("/signup")})()},[w]),C=(0,l.useCallback)(e=>{(async()=>{t(!0);try{await z(w,e,j)}catch(e){h(e),t(!1)}})()},[w,j]);return b||y?(0,n.jsx)(m.Z,{}):(0,n.jsx)(a.Z,{children:(0,n.jsx)(i.Z,{bordered:!1,className:S().login,children:(0,n.jsxs)(o.Z,{direction:"vertical",size:"large",className:T().fullWidth,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(c.Z.Title,{level:1,style:{padding:0,marginBottom:16,fontWeight:500},children:"Log In"}),(0,n.jsxs)(c.Z.Text,{children:["Your first time ?"," ",(0,n.jsx)(u.ZP,{type:"link",onClick:Z,children:"Sign up"})]})]}),(0,n.jsxs)(d.Z,{requiredMark:"optional",onFinish:C,layout:"vertical",children:[(0,n.jsx)(d.Z.Item,{name:"email",label:"Your email address",rules:[{required:!0,message:"Email is required"}],children:(0,n.jsx)(p.Z,{placeholder:"Email address",autoComplete:"email"})}),(0,n.jsx)(d.Z.Item,{name:"password",label:"Your password",rules:[{required:!0,message:"Password is required"}],style:{marginBottom:"14px"},children:(0,n.jsx)(p.Z.Password,{placeholder:"Password",autoComplete:"current-password"})}),(0,n.jsx)(E,{}),(0,n.jsx)(g.Xq,{error:r}),(0,n.jsx)(d.Z.Item,{className:S().submit,children:(0,n.jsx)(u.ZP,{type:"primary",loading:e,htmlType:"submit",children:"Log in"})})]})]})})})},A=()=>(0,n.jsx)(B,{})},80108:function(e){e.exports={loading:"loading_loading__JrCmd",title:"loading_title__ESacg",content:"loading_content__NuP8g",status:"loading_status__UhnSG",errors:"loading_errors__j2ZIA",error:"loading_error__p5Dww",errorCard:"loading_errorCard__BCfHX"}},33510:function(e){e.exports={login:"login_login__TAPkJ",submit:"login_submit__Pm0XC"}},14856:function(e){e.exports={variables:'"./variables.css"',colorPrimary:"#fad114",textColorDark:"rgba(0, 0, 0, 0.65)",textColorLight:"rgba(0, 0, 0, 0.45)",logo:"styles_logo__9fFr_",displayNone:"styles_displayNone__RJhEW",displayFlex:"styles_displayFlex__KZAtX",fullWidth:"styles_fullWidth__RSmL9",fullHeight:"styles_fullHeight__OH8_r",noScroll:"styles_noScroll__SbIOd",scroll:"styles_scroll__fB2wo",noBackground:"styles_noBackground__yOr7G",noBorder:"styles_noBorder__jtLOx",noBorderBottom:"styles_noBorderBottom__RAWEg",textWhite:"styles_textWhite__LKtl2",textLight:"styles_textLight__T2MUY",textDark:"styles_textDark__Ae4VK",textOrange:"styles_textOrange__94tCV",textGreen:"styles_textGreen__rD4Yj",textAlignLeft:"styles_textAlignLeft__jTX8x",textAlignCenter:"styles_textAlignCenter__4U96c",primaryColor:"styles_primaryColor__OdDJf",backgroundPrimary:"styles_backgroundPrimary__3E7Ss"}}},function(e){e.O(0,[5336,9391,5813,8027,2441,3363,9014,1417,9774,2888,179],function(){return e(e.s=74250)}),_N_E=e.O()}]);