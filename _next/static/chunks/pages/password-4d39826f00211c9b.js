(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[322],{33124:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/password",function(){return n(38149)}])},15479:function(e,r,n){"use strict";n.d(r,{JT:function(){return i},ah:function(){return a},nq:function(){return s},tE:function(){return o},yL:function(){return t}});n(83454).env.AUTH_SECRET||new Array(33).join("a");var t=6,s=16,i=!0,o=!0,a=!0},10851:function(e,r,n){"use strict";n.d(r,{EQ:function(){return i},kD:function(){return t},x_:function(){return s}});n(83454).env.EMAIL_TOKEN;var t="subscribe",s="passwordRecovery",i="revalidate"},87492:function(e,r,n){"use strict";n.d(r,{R:function(){return h},_:function(){return f}});var t=n(47568),s=n(26042),i=n(69396),o=n(20414),a=n(59134),u=n.n(a),c=n(83454),l=c.env.PORT?parseInt(c.env.PORT):3e3,d=u()()?"http://localhost:"+l:"",f=function(){var e=(0,t.Z)((function(e,r){var n,t,i,a;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return[4,fetch(d+e,(0,s.Z)({method:r?"POST":"GET",headers:{accept:"application/json","Content-Type":"application/json"}},r&&{body:r}))];case 1:return n=o.sent(),t=n.headers.get("Content-Type"),n.ok?[3,4]:(i=new Error("An error occured while fetching data."),(a=null===t||void 0===t?void 0:t.includes("application/json"))?[4,n.json()]:[3,3]);case 2:a=o.sent(),o.label=3;case 3:throw i.info=a,i.status=n.status,i;case 4:return[2,n.json()]}}))}));return function(r,n){return e.apply(this,arguments)}}(),h=function(){var e=(0,t.Z)((function(e,r){var n,t,a,u;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return[4,fetch(d+e,(0,i.Z)((0,s.Z)({},r),{method:r&&r.method||"GET",headers:(0,i.Z)((0,s.Z)({},r&&r.headers),{"Content-Type":"application/json"})}))];case 1:return n=o.sent(),t=n.headers.get("Content-Type"),n.ok?[3,4]:(a=new Error("An error occured while fetching data."),(u=null===t||void 0===t?void 0:t.includes("application/json"))?[4,n.json()]:[3,3]);case 2:u=o.sent(),o.label=3;case 3:throw a.info=u,a.status=n.status,a;case 4:return[2,n]}}))}));return function(r,n){return e.apply(this,arguments)}}()},81891:function(e,r,n){"use strict";n.d(r,{H:function(){return a}});var t=n(51438),s=n(28668),i=n(25892),o=n(91224),a=function(e){(0,s.Z)(n,e);var r=(0,o.Z)(n);function n(e){var s;return(0,t.Z)(this,n),(s=r.call(this,e.title)).title=e.title,s.name="APIError",s.render=e.render,s.err=e.err,s.type=e.type||"error",s}return n}((0,i.Z)(Error))},1741:function(e,r,n){"use strict";n.d(r,{Z:function(){return u}});var t=n(47568),s=n(20414),i=n(87492),o=function(){var e=(0,t.Z)((function(e,r){return(0,s.__generator)(this,(function(n){switch(n.label){case 0:return[4,(0,i.R)("/api/link",{method:"POST",headers:{Accept:"application/json"},body:JSON.stringify({id:e,data:r})})];case 1:return[2,n.sent().json()]}}))}));return function(r,n){return e.apply(this,arguments)}}(),a=function(){var e=(0,t.Z)((function(e,r){return(0,s.__generator)(this,(function(n){switch(n.label){case 0:return[4,(0,i.R)("/api/link",{method:"PUT",body:JSON.stringify({id:e,data:r})})];case 1:return n.sent(),[2]}}))}));return function(r,n){return e.apply(this,arguments)}}(),u={get:o,process:a}},36574:function(e,r,n){"use strict";n.d(r,{Z:function(){return d}});var t=n(26042),s=n(8100),i=n(67294),o=n(87492),a=n(47568),u=n(20414),c=function(){var e=(0,a.Z)((function(e){return(0,u.__generator)(this,(function(r){switch(r.label){case 0:return[4,(0,o.R)("/api/system",{method:"PUT",body:JSON.stringify(e)})];case 1:return r.sent(),[2]}}))}));return function(r){return e.apply(this,arguments)}}(),l={useSystem:function(){var e=(0,s.ZP)("/api/system",o._),r=e.data,n=e.error,a=e.mutate,u=!r,c=(null===r||void 0===r?void 0:r.system)||{},l=(0,i.useCallback)((function(e){a({system:(0,t.Z)({},c,e)})}),[c,a]);return[c,{mutateSystem:l,errorSystem:n,loadingSystem:u}]},update:c},d=l},51986:function(e,r,n){"use strict";n.d(r,{o:function(){return y}});var t=n(828),s=n(85893),i=n(81579),o=n(69677),a=n(15479),u=n(36574),c="Please enter a password",l=function(e){return"Your password is too small (minimum "+e+" characters)"},d=function(e){return"Your password is too long (maximum "+e+" characters)"},f="Your password must contain a letter",h="Your password must contain a number",p="Your password must contain a symbol",m=function(e,r){return-1!==e.search(r)},v=function(e,r,n){(function(e,r){var n,t;return!(null!==(t=null===e||void 0===e||null===(n=e.password)||void 0===n?void 0:n.requireLetter)&&void 0!==t?t:a.JT)||m(r,/[a-zA-Z]/)})(e,r)||n.push(f),function(e,r){var n,t;return!(null!==(t=null===e||void 0===e||null===(n=e.password)||void 0===n?void 0:n.requireNumber)&&void 0!==t?t:a.tE)||m(r,/\d/)}(e,r)||n.push(h),function(e,r){var n,t;return!(null!==(t=null===e||void 0===e||null===(n=e.password)||void 0===n?void 0:n.requireSymbol)&&void 0!==t?t:a.ah)||m(r,/[!@#$%^&*(){}[\]<>?/|.:;_-]/)}(e,r)||n.push(p)},y=function(e){var r,n,f,h,p=e.labelCol,m=e.wrapperCol,y=e.name,g=e.label,Z=e.inputPlaceholder,w=e.inputAutoComplete,j=e.edit,x=e.style,b=e.required,_=e.className,P=(0,t.Z)(u.Z.useSystem(),1)[0],T=null!==(f=null===P||void 0===P||null===(r=P.password)||void 0===r?void 0:r.min)&&void 0!==f?f:a.yL,E=null!==(h=null===P||void 0===P||null===(n=P.password)||void 0===n?void 0:n.max)&&void 0!==h?h:a.nq;return(0,s.jsx)(i.Z.Item,{className:_,labelCol:p,wrapperCol:m,name:y||"password",label:g||"Password",rules:[function(){return{validator:function(e,r){var n=[];return j&&"******"===r?Promise.resolve():r?(function(e,r,n,t){(function(e,r){return!(r.length<e)})(e,n)||t.push(l(e)),function(e,r){return!(r.length>e)}(r,n)||t.push(d(r))}(T,E,r,n),v(P,r,n),n.length?Promise.reject(n):Promise.resolve()):Promise.reject(c)}}},{required:!!b,message:""}],style:x,children:(0,s.jsx)(o.Z.Password,{placeholder:Z,autoComplete:w})})}},96844:function(e,r,n){"use strict";n.d(r,{lt:function(){return y},Xq:function(){return w},Ur:function(){return s}});var t=n(13448),s=function(e,r){t.Z.success({message:e,description:r,duration:10})},i=n(85893),o=n(6880),a=n(54907),u=n(26713),c=n(71577),l=n(79074),d=n(60274);l.S1({dsn:"https://3bb27cb32e55433696022ba93cb32430@o394613.ingest.sentry.io/5428383"});var f,h,p=d,m=[],v=function(){f&&(t.Z.close(f),f=void 0),m.forEach((function(e){return t.Z.close(e)})),m.length=0,t.Z.close(h),h=void 0},y=function(e,r){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if("Failed to fetch"!==(null===r||void 0===r?void 0:r.message)){if(n){var s,l,d="error_"+m.length;m.push(d),t.Z.error({key:d,message:e,description:r&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Z.Text,{code:!0,children:r.message}),(r.status||r.info)&&(0,i.jsx)(a.Z,{children:(0,i.jsx)(a.Z.Panel,{header:"More information",children:(0,i.jsxs)(u.Z,{direction:"vertical",children:[r.status&&(0,i.jsxs)(o.Z.Text,{children:["Status: ",r.status]}),(null===(s=r.info)||void 0===s?void 0:s.message)&&(0,i.jsxs)(o.Z.Text,{children:["Description: ",null===(l=r.info)||void 0===l?void 0:l.message]})]})},"information")})]}),duration:0})}if(r&&console.error(r),r&&p.captureException(r),m.length>1&&!h){var y="close_all";t.Z.info({key:y,message:(0,i.jsx)(c.Z,{type:"primary",onClick:v,children:"Close all"}),description:"Close all error notifications",duration:0,placement:"top"}),h=y}}else if(!f){var g="server_error";m.push(g),t.Z.error({key:g,message:"Server error",description:"Server is disconnected, please check your internet connection.",duration:0,onClose:function(){f=void 0}}),f=g}},g=n(81579),Z=n(14670),w=function(e){var r,n,t=e.error;return t?(0,i.jsx)(g.Z.Item,{children:(0,i.jsx)(Z.Z,{message:t.render||t.title,type:t.type,showIcon:!0,description:t.err&&(0,i.jsxs)(i.Fragment,{children:[t.err.message&&(0,i.jsxs)(o.Z.Text,{type:"danger",children:["Message: ",(0,i.jsx)("code",{children:t.err.message})]}),t.err.status&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("br",{}),(0,i.jsxs)(o.Z.Text,{type:"danger",children:["Status: ",(0,i.jsx)("code",{children:t.err.status})]})]}),(null===(r=t.err.info)||void 0===r?void 0:r.message)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("br",{}),(0,i.jsxs)(o.Z.Text,{type:"danger",children:["Information: ",(0,i.jsx)("code",{children:null===(n=t.err.info)||void 0===n?void 0:n.message})]})]})]})})}):null}},38149:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return E}});var t=n(85893),s=n(47568),i=n(20414),o=n(67294),a=n(11163),u=n(97183),c=n(81474),l=n(11382),d=n(26713),f=n(6880),h=n(81579),p=n(69677),m=n(71577),v=n(10851),y=n(51986),g=n(96844),Z=n(81891),w=n(1741),j="Wrong link",x="Incorrect data",b="Internal error, please try again later",_="Passwords mismatch",P=function(){var e=(0,s.Z)((function(e,r,n,t){var s;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:if(t.email!==r)throw new Z.H({title:x});i.label=1;case 1:return i.trys.push([1,3,,4]),[4,w.Z.process(n,{email:t.email,password:t.password})];case 2:return i.sent(),e.push("/login"),[3,4];case 3:throw s=i.sent(),new Z.H({title:b,err:s});case 4:return[2]}}))}));return function(r,n,t,s){return e.apply(this,arguments)}}(),T=function(){var e=(0,o.useState)(!0),r=e[0],n=e[1],Z=(0,o.useState)(),x=Z[0],T=Z[1],E=(0,o.useState)(!1),S=E[0],C=E[1],k=(0,o.useState)(),N=k[0],q=k[1],I=(0,a.useRouter)(),O=I.query.id;return(0,o.useEffect)((function(){O&&w.Z.get(O,["type","email"]).then((function(e){e.type===v.x_?(T(e.email),n(!1)):(0,g.lt)(j)})).catch((function(e){return(0,g.lt)(b,e)}))}),[O]),r?(0,t.jsx)(u.Z,{children:(0,t.jsxs)(c.Z,{bordered:!1,className:"Signup",children:[(0,t.jsx)(l.Z,{})," Loading..."]})}):(0,t.jsx)(u.Z,{children:(0,t.jsx)(c.Z,{bordered:!1,className:"Signup",children:(0,t.jsxs)(d.Z,{direction:"vertical",size:"large",className:"full-width",children:[(0,t.jsx)("div",{children:(0,t.jsx)(f.Z.Title,{level:1,style:{padding:0,marginBottom:16,fontWeight:500},children:"Password recovery"})}),(0,t.jsxs)(h.Z,{requiredMark:"optional",onFinish:function(){var e=(0,s.Z)((function(e){var r;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:C(!0),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,P(I,x,O,e)];case 2:return n.sent(),[3,4];case 3:return r=n.sent(),q(r),C(!1),[3,4];case 4:return[2]}}))}));return function(r){return e.apply(this,arguments)}}(),layout:"vertical",children:[(0,t.jsx)(h.Z.Item,{name:"email",label:"Enter your email address",rules:[{required:!0,message:"Email is required"}],children:(0,t.jsx)(p.Z,{placeholder:"Email address",autoComplete:"email"})}),(0,t.jsx)(y.o,{name:"password",label:"Choose your password",inputPlaceholder:"Password",style:{marginBottom:"14px"}}),(0,t.jsx)(h.Z.Item,{name:"passwordConfirmation",label:"Confirm your password",rules:[{required:!0,message:"Password confirmation is required"},function(e){var r=e.getFieldValue;return{validator:function(e,n){return n&&r("password")!==n?Promise.reject(_):Promise.resolve()}}}],style:{marginBottom:"14px"},children:(0,t.jsx)(p.Z.Password,{placeholder:"Password"})}),(0,t.jsx)(g.Xq,{error:N}),(0,t.jsx)(h.Z.Item,{className:"Signup-submit",children:(0,t.jsx)(m.Z,{type:"primary",loading:S,htmlType:"submit",children:"Finish"})})]})]})})})},E=function(){return(0,t.jsx)(T,{})}}},function(e){e.O(0,[841,362,474,266,220,666,690,909,695,774,888,179],(function(){return r=33124,e(e.s=r);var r}));var r=e.O();_N_E=r}]);