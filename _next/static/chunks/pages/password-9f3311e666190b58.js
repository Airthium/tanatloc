(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[322],{90420:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return icons_EyeInvisibleOutlined}});var objectSpread2=__webpack_require__(1413),react=__webpack_require__(67294),asn_EyeInvisibleOutlined={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"},AntdIcon=__webpack_require__(42135),EyeInvisibleOutlined_EyeInvisibleOutlined=function(props,ref){return react.createElement(AntdIcon.Z,(0,objectSpread2.Z)((0,objectSpread2.Z)({},props),{},{ref:ref,icon:asn_EyeInvisibleOutlined}))};EyeInvisibleOutlined_EyeInvisibleOutlined.displayName="EyeInvisibleOutlined";var icons_EyeInvisibleOutlined=react.forwardRef(EyeInvisibleOutlined_EyeInvisibleOutlined)},99611:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return icons_EyeOutlined}});var objectSpread2=__webpack_require__(1413),react=__webpack_require__(67294),asn_EyeOutlined={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"},AntdIcon=__webpack_require__(42135),EyeOutlined_EyeOutlined=function(props,ref){return react.createElement(AntdIcon.Z,(0,objectSpread2.Z)((0,objectSpread2.Z)({},props),{},{ref:ref,icon:asn_EyeOutlined}))};EyeOutlined_EyeOutlined.displayName="EyeOutlined";var icons_EyeOutlined=react.forwardRef(EyeOutlined_EyeOutlined)},69677:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return input}});var esm_extends=__webpack_require__(87462),defineProperty=__webpack_require__(4942),classnames=__webpack_require__(94184),classnames_default=__webpack_require__.n(classnames),react=__webpack_require__(67294),context=__webpack_require__(53124),form_context=__webpack_require__(65223),Input=__webpack_require__(16591),slicedToArray=__webpack_require__(97685),esm_typeof=__webpack_require__(71002),EyeInvisibleOutlined=__webpack_require__(90420),EyeOutlined=__webpack_require__(99611),omit=__webpack_require__(98423),es_ref=__webpack_require__(42550),useRemovePasswordTimeout=__webpack_require__(72922),__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&0>e.indexOf(p)&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++)0>e.indexOf(p[i])&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]]);return t},defaultIconRender=function(visible){return visible?react.createElement(EyeOutlined.Z,null):react.createElement(EyeInvisibleOutlined.Z,null)},ActionMap={click:"onClick",hover:"onMouseOver"},Password=react.forwardRef(function(props,ref){var _props$visibilityTogg=props.visibilityToggle,visibilityToggle=void 0===_props$visibilityTogg||_props$visibilityTogg,visibilityControlled="object"===(0,esm_typeof.Z)(visibilityToggle)&&void 0!==visibilityToggle.visible,_useState=(0,react.useState)(function(){return!!visibilityControlled&&visibilityToggle.visible}),_useState2=(0,slicedToArray.Z)(_useState,2),visible=_useState2[0],setVisible=_useState2[1],inputRef=(0,react.useRef)(null);react.useEffect(function(){visibilityControlled&&setVisible(visibilityToggle.visible)},[visibilityControlled,visibilityToggle]);var removePasswordTimeout=(0,useRemovePasswordTimeout.Z)(inputRef),onVisibleChange=function(){props.disabled||(visible&&removePasswordTimeout(),setVisible(function(prevState){var _a,newState=!prevState;return"object"===(0,esm_typeof.Z)(visibilityToggle)&&(null===(_a=visibilityToggle.onVisibleChange)||void 0===_a||_a.call(visibilityToggle,newState)),newState}))},getIcon=function(prefixCls){var _iconProps,_props$action=props.action,_props$iconRender=props.iconRender,iconTrigger=ActionMap[void 0===_props$action?"click":_props$action]||"",icon=(void 0===_props$iconRender?defaultIconRender:_props$iconRender)(visible),iconProps=(_iconProps={},(0,defineProperty.Z)(_iconProps,iconTrigger,onVisibleChange),(0,defineProperty.Z)(_iconProps,"className","".concat(prefixCls,"-icon")),(0,defineProperty.Z)(_iconProps,"key","passwordIcon"),(0,defineProperty.Z)(_iconProps,"onMouseDown",function(e){e.preventDefault()}),(0,defineProperty.Z)(_iconProps,"onMouseUp",function(e){e.preventDefault()}),_iconProps);return react.cloneElement(react.isValidElement(icon)?icon:react.createElement("span",null,icon),iconProps)};return react.createElement(context.C,null,function(_ref){var getPrefixCls=_ref.getPrefixCls,className=props.className,customizePrefixCls=props.prefixCls,customizeInputPrefixCls=props.inputPrefixCls,size=props.size,restProps=__rest(props,["className","prefixCls","inputPrefixCls","size"]),inputPrefixCls=getPrefixCls("input",customizeInputPrefixCls),prefixCls=getPrefixCls("input-password",customizePrefixCls),suffixIcon=visibilityToggle&&getIcon(prefixCls),inputClassName=classnames_default()(prefixCls,className,(0,defineProperty.Z)({},"".concat(prefixCls,"-").concat(size),!!size)),omittedProps=(0,esm_extends.Z)((0,esm_extends.Z)({},(0,omit.Z)(restProps,["suffix","iconRender","visibilityToggle"])),{type:visible?"text":"password",className:inputClassName,prefixCls:inputPrefixCls,suffix:suffixIcon});return size&&(omittedProps.size=size),react.createElement(Input.ZP,(0,esm_extends.Z)({ref:(0,es_ref.sQ)(ref,inputRef)},omittedProps))})}),SearchOutlined=__webpack_require__(68795),es_button=__webpack_require__(71577),SizeContext=__webpack_require__(97647),Compact=__webpack_require__(4173),reactNode=__webpack_require__(96159),Search_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&0>e.indexOf(p)&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++)0>e.indexOf(p[i])&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]]);return t},Search=react.forwardRef(function(props,ref){var _classNames,button,customizePrefixCls=props.prefixCls,customizeInputPrefixCls=props.inputPrefixCls,className=props.className,customizeSize=props.size,suffix=props.suffix,_props$enterButton=props.enterButton,enterButton=void 0!==_props$enterButton&&_props$enterButton,addonAfter=props.addonAfter,loading=props.loading,disabled=props.disabled,customOnSearch=props.onSearch,customOnChange=props.onChange,onCompositionStart=props.onCompositionStart,onCompositionEnd=props.onCompositionEnd,restProps=Search_rest(props,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),_React$useContext=react.useContext(context.E_),getPrefixCls=_React$useContext.getPrefixCls,direction=_React$useContext.direction,contextSize=react.useContext(SizeContext.Z),composedRef=react.useRef(!1),prefixCls=getPrefixCls("input-search",customizePrefixCls),inputPrefixCls=getPrefixCls("input",customizeInputPrefixCls),size=(0,Compact.ri)(prefixCls,direction).compactSize||customizeSize||contextSize,inputRef=react.useRef(null),onMouseDown=function(e){var _a;document.activeElement===(null===(_a=inputRef.current)||void 0===_a?void 0:_a.input)&&e.preventDefault()},onSearch=function(e){var _a,_b;customOnSearch&&customOnSearch(null===(_b=null===(_a=inputRef.current)||void 0===_a?void 0:_a.input)||void 0===_b?void 0:_b.value,e)},searchIcon="boolean"==typeof enterButton?react.createElement(SearchOutlined.Z,null):null,btnClassName="".concat(prefixCls,"-button"),enterButtonAsElement=enterButton||{},isAntdButton=enterButtonAsElement.type&&!0===enterButtonAsElement.type.__ANT_BUTTON;button=isAntdButton||"button"===enterButtonAsElement.type?(0,reactNode.Tm)(enterButtonAsElement,(0,esm_extends.Z)({onMouseDown:onMouseDown,onClick:function(e){var _a,_b;null===(_b=null===(_a=null==enterButtonAsElement?void 0:enterButtonAsElement.props)||void 0===_a?void 0:_a.onClick)||void 0===_b||_b.call(_a,e),onSearch(e)},key:"enterButton"},isAntdButton?{className:btnClassName,size:size}:{})):react.createElement(es_button.Z,{className:btnClassName,type:enterButton?"primary":void 0,size:size,disabled:disabled,key:"enterButton",onMouseDown:onMouseDown,onClick:onSearch,loading:loading,icon:searchIcon},enterButton),addonAfter&&(button=[button,(0,reactNode.Tm)(addonAfter,{key:"addonAfter"})]);var cls=classnames_default()(prefixCls,(_classNames={},(0,defineProperty.Z)(_classNames,"".concat(prefixCls,"-rtl"),"rtl"===direction),(0,defineProperty.Z)(_classNames,"".concat(prefixCls,"-").concat(size),!!size),(0,defineProperty.Z)(_classNames,"".concat(prefixCls,"-with-button"),!!enterButton),_classNames),className);return react.createElement(Input.ZP,(0,esm_extends.Z)({ref:(0,es_ref.sQ)(inputRef,ref),onPressEnter:function(e){composedRef.current||onSearch(e)}},restProps,{size:size,onCompositionStart:function(e){composedRef.current=!0,null==onCompositionStart||onCompositionStart(e)},onCompositionEnd:function(e){composedRef.current=!1,null==onCompositionEnd||onCompositionEnd(e)},prefixCls:inputPrefixCls,addonAfter:button,suffix:suffix,onChange:function(e){e&&e.target&&"click"===e.type&&customOnSearch&&customOnSearch(e.target.value,e),customOnChange&&customOnChange(e)},className:cls,disabled:disabled}))}),TextArea=__webpack_require__(3008),input_Input=Input.ZP;input_Input.Group=function(props){var _classNames,_useContext=(0,react.useContext)(context.E_),getPrefixCls=_useContext.getPrefixCls,direction=_useContext.direction,customizePrefixCls=props.prefixCls,_props$className=props.className,prefixCls=getPrefixCls("input-group",customizePrefixCls),cls=classnames_default()(prefixCls,(_classNames={},(0,defineProperty.Z)(_classNames,"".concat(prefixCls,"-lg"),"large"===props.size),(0,defineProperty.Z)(_classNames,"".concat(prefixCls,"-sm"),"small"===props.size),(0,defineProperty.Z)(_classNames,"".concat(prefixCls,"-compact"),props.compact),(0,defineProperty.Z)(_classNames,"".concat(prefixCls,"-rtl"),"rtl"===direction),_classNames),void 0===_props$className?"":_props$className),formItemContext=(0,react.useContext)(form_context.aM),groupFormItemContext=(0,react.useMemo)(function(){return(0,esm_extends.Z)((0,esm_extends.Z)({},formItemContext),{isFormItemInput:!1})},[formItemContext]);return react.createElement("span",{className:cls,style:props.style,onMouseEnter:props.onMouseEnter,onMouseLeave:props.onMouseLeave,onFocus:props.onFocus,onBlur:props.onBlur},react.createElement(form_context.aM.Provider,{value:groupFormItemContext},props.children))},input_Input.Search=Search,input_Input.TextArea=TextArea.Z,input_Input.Password=Password;var input=input_Input},33124:function(__unused_webpack_module,__unused_webpack_exports,__webpack_require__){(window.__NEXT_P=window.__NEXT_P||[]).push(["/password",function(){return __webpack_require__(74562)}])},37404:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{JT:function(){return REQUIRE_LETTER},ah:function(){return REQUIRE_SYMBOL},nq:function(){return MAX_SIZE},tE:function(){return REQUIRE_NUMBER},yL:function(){return MIN_SIZE}}),__webpack_require__(83454).env.AUTH_SECRET||Array(33).join("a");let MIN_SIZE=6,MAX_SIZE=16,REQUIRE_LETTER=!0,REQUIRE_NUMBER=!0,REQUIRE_SYMBOL=!0},40287:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{EQ:function(){return REVALIDATE},kD:function(){return SUBSCRIBE},x_:function(){return PASSWORD_RECOVERY}}),__webpack_require__(83454).env.EMAIL_TOKEN;let SUBSCRIBE="subscribe",PASSWORD_RECOVERY="passwordRecovery",REVALIDATE="revalidate"},11425:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{R:function(){return call},_:function(){return fetcher}});var is_electron__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(59134),is_electron__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(is_electron__WEBPACK_IMPORTED_MODULE_0__),process=__webpack_require__(83454);let port=process.env.PORT?parseInt(process.env.PORT):3e3,base=is_electron__WEBPACK_IMPORTED_MODULE_0___default()()?"http://localhost:"+port:"",fetcher=async(url,payload)=>{let response=await fetch(base+url,{method:payload?"POST":"GET",headers:{accept:"application/json","Content-Type":"application/json"},...payload&&{body:payload}}),contentType=response.headers.get("Content-Type");if(!response.ok){let error=Error("An error occured while fetching data.");throw error.info=(null==contentType?void 0:contentType.includes("application/json"))&&await response.json(),error.status=response.status,error}return response.json()},call=async(route,param)=>{let response=await fetch(base+route,{...param,method:param&&param.method||"GET",headers:{...param&&param.headers,"Content-Type":"application/json"}}),contentType=response.headers.get("Content-Type");if(!response.ok){let error=Error("An error occured while fetching data.");throw error.info=(null==contentType?void 0:contentType.includes("application/json"))&&await response.json(),error.status=response.status,error}return response}},4415:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{H:function(){return APIError}});class APIError extends Error{constructor(params){super(params.title),this.title=params.title,this.name="APIError",this.render=params.render,this.err=params.err,this.type=params.type||"error"}}},26554:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return api_link}});var call=__webpack_require__(11425);let get=async(id,data)=>{let response=await (0,call.R)("/api/link",{method:"POST",headers:{Accept:"application/json"},body:JSON.stringify({id,data})});return response.json()},process=async(id,data)=>{await (0,call.R)("/api/link",{method:"PUT",body:JSON.stringify({id,data})})};var api_link={get:get,process:process}},92288:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return system}});var dist=__webpack_require__(8100),react=__webpack_require__(67294),call=__webpack_require__(11425);let useSystem=()=>{let{data,error,mutate}=(0,dist.ZP)("/api/system",call._),system=(null==data?void 0:data.system)||{},localMutate=(0,react.useCallback)(update=>{mutate({system:{...system,...update}})},[system,mutate]);return[system,{mutateSystem:localMutate,errorSystem:error,loadingSystem:!data}]},update=async data=>{await (0,call.R)("/api/system",{method:"PUT",body:JSON.stringify(data)})};var system={useSystem:useSystem,update:update}},47455:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{o:function(){return input_password}});var jsx_runtime=__webpack_require__(85893),es_form=__webpack_require__(81579),input=__webpack_require__(69677),auth=__webpack_require__(37404),api_system=__webpack_require__(92288);let errors={password:"Please enter a password",passwordTooSmall:min=>"Your password is too small (minimum "+min+" characters)",passwordTooLong:max=>"Your password is too long (maximum "+max+" characters)",passwordRequireLetter:"Your password must contain a letter",passwordRequireNumber:"Your password must contain a number",passwordRequireSymbol:"Your password must contain a symbol"},checkMin=(passwordMinSize,value)=>!(value.length<passwordMinSize),checkMax=(passwordMaxSize,value)=>!(value.length>passwordMaxSize),checkRegex=(value,regex)=>-1!==value.search(regex),requireLetter=(system,value)=>{var ref,ref1;return(null!==(ref1=null==system?void 0:null===(ref=system.password)||void 0===ref?void 0:ref.requireLetter)&&void 0!==ref1?!ref1:!auth.JT)||checkRegex(value,/[a-zA-Z]/)},requireNumber=(system,value)=>{var ref,ref1;return(null!==(ref1=null==system?void 0:null===(ref=system.password)||void 0===ref?void 0:ref.requireNumber)&&void 0!==ref1?!ref1:!auth.tE)||checkRegex(value,/\d/)},requireSymbol=(system,value)=>{var ref,ref1;return(null!==(ref1=null==system?void 0:null===(ref=system.password)||void 0===ref?void 0:ref.requireSymbol)&&void 0!==ref1?!ref1:!auth.ah)||checkRegex(value,/[!@#$%^&*(){}[\]<>?/|.:;_-]/)},checkSize=(passwordMinSize,passwordMaxSize,value,err)=>{checkMin(passwordMinSize,value)||err.push(errors.passwordTooSmall(passwordMinSize)),checkMax(passwordMaxSize,value)||err.push(errors.passwordTooLong(passwordMaxSize))},checkFormat=(system,value,err)=>{requireLetter(system,value)||err.push(errors.passwordRequireLetter),requireNumber(system,value)||err.push(errors.passwordRequireNumber),requireSymbol(system,value)||err.push(errors.passwordRequireSymbol)},PasswordItem=param=>{var ref,ref1,ref2,ref3;let{labelCol,wrapperCol,name,label,inputPlaceholder,inputAutoComplete,edit,style,required,className}=param,[system]=api_system.Z.useSystem(),passwordMinSize=null!==(ref2=null==system?void 0:null===(ref=system.password)||void 0===ref?void 0:ref.min)&&void 0!==ref2?ref2:auth.yL,passwordMaxSize=null!==(ref3=null==system?void 0:null===(ref1=system.password)||void 0===ref1?void 0:ref1.max)&&void 0!==ref3?ref3:auth.nq;return(0,jsx_runtime.jsx)(es_form.Z.Item,{className:className,labelCol:labelCol,wrapperCol:wrapperCol,name:name||"password",label:label||"Password",rules:[()=>({validator(_,value){let err=[];return edit&&"******"===value?Promise.resolve():value?(checkSize(passwordMinSize,passwordMaxSize,value,err),checkFormat(system,value,err),err.length)?Promise.reject(err):Promise.resolve():Promise.reject(errors.password)}}),{required:!!required,message:""}],style:style,children:(0,jsx_runtime.jsx)(input.Z.Password,{placeholder:inputPlaceholder,autoComplete:inputAutoComplete})})};var input_password=PasswordItem},67582:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";let serverNotification,closeNotification;__webpack_require__.d(__webpack_exports__,{lt:function(){return error},Xq:function(){return form_error},Ur:function(){return success}});var notification=__webpack_require__(13448);let SuccessNotification=(title,subTitle)=>{notification.Z.success({message:title,description:subTitle,duration:10})};var success=SuccessNotification,jsx_runtime=__webpack_require__(85893),typography=__webpack_require__(6880),collapse=__webpack_require__(54907),space=__webpack_require__(26713),es_button=__webpack_require__(71577),sdk=__webpack_require__(79074),esm=__webpack_require__(60274);sdk.S1({dsn:"https://3bb27cb32e55433696022ba93cb32430@o394613.ingest.sentry.io/5428383"});let opened=[],closeAll=()=>{serverNotification&&(notification.Z.close(serverNotification),serverNotification=void 0),opened.forEach(notif=>notification.Z.close(notif)),opened.length=0,notification.Z.close(closeNotification),closeNotification=void 0};var error=function(title,err){let display=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if((null==err?void 0:err.message)==="Failed to fetch"){if(!serverNotification){let key="server_error";opened.push(key),notification.Z.error({key,message:"Server error",description:"Server is disconnected, please check your internet connection.",duration:0,onClose(){serverNotification=void 0}}),serverNotification=key}return}if(display){var ref,ref1;let key1="error_"+opened.length;opened.push(key1),notification.Z.error({key:key1,message:title,description:err&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(typography.Z.Text,{code:!0,children:err.message}),(err.status||err.info)&&(0,jsx_runtime.jsx)(collapse.Z,{children:(0,jsx_runtime.jsx)(collapse.Z.Panel,{header:"More information",children:(0,jsx_runtime.jsxs)(space.Z,{direction:"vertical",children:[err.status&&(0,jsx_runtime.jsxs)(typography.Z.Text,{children:["Status: ",err.status]}),(null===(ref=err.info)||void 0===ref?void 0:ref.message)&&(0,jsx_runtime.jsxs)(typography.Z.Text,{children:["Description: ",null===(ref1=err.info)||void 0===ref1?void 0:ref1.message]})]})},"information")})]}),duration:0})}if(err&&console.error(err),err&&esm.captureException(err),opened.length>1&&!closeNotification){let key2="close_all";notification.Z.info({key:key2,message:(0,jsx_runtime.jsx)(es_button.Z,{type:"primary",onClick:closeAll,children:"Close all"}),description:"Close all error notifications",duration:0,placement:"top"}),closeNotification=key2}},es_form=__webpack_require__(81579),es_alert=__webpack_require__(14670);let FormError=param=>{var ref,ref1;let{error}=param;return error?(0,jsx_runtime.jsx)(es_form.Z.Item,{children:(0,jsx_runtime.jsx)(es_alert.Z,{message:error.render||error.title,type:error.type,showIcon:!0,description:error.err&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[error.err.message&&(0,jsx_runtime.jsxs)(typography.Z.Text,{type:"danger",children:["Message: ",(0,jsx_runtime.jsx)("code",{children:error.err.message})]}),error.err.status&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("br",{}),(0,jsx_runtime.jsxs)(typography.Z.Text,{type:"danger",children:["Status: ",(0,jsx_runtime.jsx)("code",{children:error.err.status})]})]}),(null===(ref=error.err.info)||void 0===ref?void 0:ref.message)&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("br",{}),(0,jsx_runtime.jsxs)(typography.Z.Text,{type:"danger",children:["Information: ",(0,jsx_runtime.jsx)("code",{children:null===(ref1=error.err.info)||void 0===ref1?void 0:ref1.message})]})]})]})})}):null};var form_error=FormError},74562:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return pages_password}});var jsx_runtime=__webpack_require__(85893),react=__webpack_require__(67294),next_router=__webpack_require__(11163),layout=__webpack_require__(97183),card=__webpack_require__(81474),spin=__webpack_require__(11382),space=__webpack_require__(26713),typography=__webpack_require__(6880),es_form=__webpack_require__(81579),input=__webpack_require__(69677),es_button=__webpack_require__(71577),email=__webpack_require__(40287),assets_input=__webpack_require__(47455),notification=__webpack_require__(67582),error=__webpack_require__(4415),api_link=__webpack_require__(26554);let errors={wrongLink:"Wrong link",incorrect:"Incorrect data",internal:"Internal error, please try again shortly",passwordMismatch:"Passwords mismatch"},onFinish=async(router,linkEmail,id,values)=>{if(values.email!==linkEmail)throw new error.H({title:errors.incorrect});try{await api_link.Z.process(id,{email:values.email,password:values.password}),router.push("/login")}catch(err){throw new error.H({title:errors.internal,err})}},PasswordRecovery=()=>{let[checking,setChecking]=(0,react.useState)(!0),[linkEmail,setLinkEmail]=(0,react.useState)(),[loading,setLoading]=(0,react.useState)(!1),[formError,setFormError]=(0,react.useState)(),router=(0,next_router.useRouter)(),{id}=router.query;return((0,react.useEffect)(()=>{id&&api_link.Z.get(id,["type","email"]).then(res=>{res.type===email.x_?(setLinkEmail(res.email),setChecking(!1)):(0,notification.lt)(errors.wrongLink)}).catch(err=>(0,notification.lt)(errors.internal,err))},[id]),checking)?(0,jsx_runtime.jsx)(layout.Z,{children:(0,jsx_runtime.jsxs)(card.Z,{bordered:!1,className:"Signup",children:[(0,jsx_runtime.jsx)(spin.Z,{})," Loading..."]})}):(0,jsx_runtime.jsx)(layout.Z,{children:(0,jsx_runtime.jsx)(card.Z,{bordered:!1,className:"Signup",children:(0,jsx_runtime.jsxs)(space.Z,{direction:"vertical",size:"large",className:"full-width",children:[(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)(typography.Z.Title,{level:1,style:{padding:0,marginBottom:16,fontWeight:500},children:"Password recovery"})}),(0,jsx_runtime.jsxs)(es_form.Z,{requiredMark:"optional",async onFinish(values){setLoading(!0);try{await onFinish(router,linkEmail,id,values)}catch(err){setFormError(err),setLoading(!1)}},layout:"vertical",children:[(0,jsx_runtime.jsx)(es_form.Z.Item,{name:"email",label:"Enter your email address",rules:[{required:!0,message:"Email is required"}],children:(0,jsx_runtime.jsx)(input.Z,{placeholder:"Email address",autoComplete:"email"})}),(0,jsx_runtime.jsx)(assets_input.o,{name:"password",label:"Choose your password",inputPlaceholder:"Password",style:{marginBottom:"14px"}}),(0,jsx_runtime.jsx)(es_form.Z.Item,{name:"passwordConfirmation",label:"Confirm your password",rules:[{required:!0,message:"Password confirmation is required"},param=>{let{getFieldValue}=param;return{validator:(_,value)=>value&&getFieldValue("password")!==value?Promise.reject(errors.passwordMismatch):Promise.resolve()}}],style:{marginBottom:"14px"},children:(0,jsx_runtime.jsx)(input.Z.Password,{placeholder:"Password"})}),(0,jsx_runtime.jsx)(notification.Xq,{error:formError}),(0,jsx_runtime.jsx)(es_form.Z.Item,{className:"Signup-submit",children:(0,jsx_runtime.jsx)(es_button.Z,{type:"primary",loading:loading,htmlType:"submit",children:"Finish"})})]})]})})})},Password=()=>(0,jsx_runtime.jsx)(PasswordRecovery,{});var pages_password=Password}},function(__webpack_require__){__webpack_require__.O(0,[305,362,474,266,495,347,690,650,774,888,179],function(){return __webpack_require__(__webpack_require__.s=33124)}),_N_E=__webpack_require__.O()}]);