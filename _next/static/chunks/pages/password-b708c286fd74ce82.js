(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8322],{47839:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/password",function(){return r(18476)}])},59141:function(e,t,r){"use strict";var s;r.d(t,{JT:function(){return n},ah:function(){return l},nq:function(){return a},tE:function(){return i},yL:function(){return o}}),null!==(s=r(83454).env.AUTH_SECRET)&&void 0!==s||Array(33).join("a");let o=6,a=16,n=!0,i=!0,l=!0},21390:function(e,t,r){"use strict";r.d(t,{EQ:function(){return l},kD:function(){return n},o3:function(){return a},x_:function(){return i}});var s,o=r(83454);let a=null!==(s=o.env.EMAIL_TOKEN)&&void 0!==s?s:"",n="subscribe",i="passwordRecovery",l="revalidate"},948:function(e,t,r){"use strict";r.d(t,{R:function(){return u},_:function(){return l}});var s=r(59134),o=r.n(s),a=r(83454);let n=a.env.PORT?parseInt(a.env.PORT):3e3,i=o()()?"http://localhost:"+n:"",l=async(e,t)=>{let r=await fetch(i+e,{method:t?"POST":"GET",headers:{accept:"application/json","Content-Type":"application/json"},...t&&{body:t}}),s=r.headers.get("Content-Type");if(!r.ok){let e=Error("An error occured while fetching data.");throw e.info=(null==s?void 0:s.includes("application/json"))&&await r.json(),e.status=r.status,e}return r.json()},u=async(e,t)=>{var r;let s=await fetch(i+e,{...t,method:null!==(r=null==t?void 0:t.method)&&void 0!==r?r:"GET",headers:{...null==t?void 0:t.headers,"Content-Type":"application/json"}}),o=s.headers.get("Content-Type");if(!s.ok){let e=Error("An error occured while fetching data.");throw e.info=(null==o?void 0:o.includes("application/json"))&&await s.json(),e.status=s.status,e}return s}},77547:function(e,t,r){"use strict";r.d(t,{H:function(){return s}});class s extends Error{constructor(e){var t;super(e.title),this.title=e.title,this.name="APIError",this.render=e.render,this.err=e.err,this.type=null!==(t=e.type)&&void 0!==t?t:"error"}}},84526:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var s=r(948);let o=async(e,t)=>{let r=await (0,s.R)("/api/link",{method:"POST",headers:{Accept:"application/json"},body:JSON.stringify({id:e,data:t})});return r.json()},a=async(e,t)=>{await (0,s.R)("/api/link",{method:"PUT",body:JSON.stringify({id:e,data:t})})};var n={get:o,process:a}},751:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var s=r(59734),o=r(67294),a=r(948);let n=async e=>{await (0,a.R)("/api/system",{method:"PUT",body:JSON.stringify(e)})};var i={useSystem:()=>{var e;let{data:t,error:r,mutate:n}=(0,s.ZP)("/api/system",a._),i=null!==(e=null==t?void 0:t.system)&&void 0!==e?e:{},l=(0,o.useCallback)(async e=>{await n({system:{...i,...e}})},[i,n]);return[i,{mutateSystem:l,errorSystem:r,loadingSystem:!t}]},update:n}},55798:function(e,t,r){"use strict";r.d(t,{o:function(){return w}});var s=r(85893),o=r(97538),a=r(51024),n=r(59141),i=r(751);let l={password:"Please enter a password",passwordTooSmall:e=>"Your password is too small (minimum "+e+" characters)",passwordTooLong:e=>"Your password is too long (maximum "+e+" characters)",passwordRequireLetter:"Your password must contain a letter",passwordRequireNumber:"Your password must contain a number",passwordRequireSymbol:"Your password must contain a symbol"},u=(e,t)=>!(t.length<e),d=(e,t)=>!(t.length>e),c=(e,t)=>-1!==e.search(t),p=(e,t)=>{var r,s;return(null!==(s=null==e?void 0:null===(r=e.password)||void 0===r?void 0:r.requireLetter)&&void 0!==s?!s:!n.JT)||c(t,/[a-zA-Z]/)},m=(e,t)=>{var r,s;return(null!==(s=null==e?void 0:null===(r=e.password)||void 0===r?void 0:r.requireNumber)&&void 0!==s?!s:!n.tE)||c(t,/\d/)},y=(e,t)=>{var r,s;return(null!==(s=null==e?void 0:null===(r=e.password)||void 0===r?void 0:r.requireSymbol)&&void 0!==s?!s:!n.ah)||c(t,/[!@#$%^&*(){}[\]<>?/|.:;_-]/)},h=(e,t,r,s)=>{u(e,r)||s.push(l.passwordTooSmall(e)),d(t,r)||s.push(l.passwordTooLong(t))},_=(e,t,r)=>{p(e,t)||r.push(l.passwordRequireLetter),m(e,t)||r.push(l.passwordRequireNumber),y(e,t)||r.push(l.passwordRequireSymbol)};var w=e=>{var t,r,u,d;let{labelCol:c,wrapperCol:p,name:m,label:y,inputPlaceholder:w,inputAutoComplete:v,edit:f,style:g,required:x}=e,[j]=i.Z.useSystem(),b=null!==(u=null==j?void 0:null===(t=j.password)||void 0===t?void 0:t.min)&&void 0!==u?u:n.yL,P=null!==(d=null==j?void 0:null===(r=j.password)||void 0===r?void 0:r.max)&&void 0!==d?d:n.nq;return(0,s.jsx)(o.Z.Item,{labelCol:c,wrapperCol:p,name:null!=m?m:"password",label:null!=y?y:"Password",rules:[()=>({validator(e,t){let r=[];return f&&"******"===t?Promise.resolve():t?(h(b,P,t,r),_(j,t,r),r.length)?Promise.reject(r):Promise.resolve():Promise.reject(l.password)}}),{required:!!x,message:""}],style:g,children:(0,s.jsx)(a.default.Password,{placeholder:w,autoComplete:v})})}},18476:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return E}});var s=r(85893),o=r(67294),a=r(11163),n=r(65400),i=r.n(n),l=r(70302),u=r(97538),d=r(51024),c=r(16373),p=r(74048),m=r(89552),y=r(53740),h=r(21390),_=r(8061),w=r(54509),v=r(55798),f=r(5821),g=r(77547),x=r(84526),j=r(35304),b=r.n(j),P=r(72441),T=r.n(P);let C={wrongLink:"Wrong link",incorrect:"Incorrect data",internal:"Internal error, please try again shortly",passwordMismatch:"Passwords mismatch"},S=async(e,t,r,s)=>{if(s.email!==t)throw new g.H({title:C.incorrect});try{await x.Z.process(r,{email:s.email,password:s.password}),await e.push("/login").catch()}catch(e){throw new g.H({title:C.internal,err:e})}};var k=()=>{let[e,t]=(0,o.useState)(!0),[r,n]=(0,o.useState)(),[g,j]=(0,o.useState)(!1),[P,k]=(0,o.useState)(),{dispatch:E}=(0,o.useContext)(_.uj),q=(0,a.useRouter)(),{id:N}=q.query;(0,o.useEffect)(()=>{(async()=>{if(N)try{let e=await x.Z.get(N,["type","email"]);e.type===h.x_?(n(e.email),t(!1)):E((0,w.iT)({title:C.wrongLink}))}catch(e){E((0,w.iT)({title:C.internal,err:e}))}})()},[N,E]);let Z=(0,o.useCallback)(e=>{(async()=>{j(!0);try{await S(q,r,N,e)}catch(e){k(e),j(!1)}})()},[q,r,N]);return e?(0,s.jsx)(c.Z,{children:(0,s.jsxs)(l.Z,{bordered:!1,className:T().password,children:[(0,s.jsx)(m.default,{})," Loading..."]})}):(0,s.jsx)(c.Z,{children:(0,s.jsx)(l.Z,{bordered:!1,className:T().password,children:(0,s.jsxs)(p.default,{direction:"vertical",size:"large",className:b().fullWidth,children:[(0,s.jsx)("div",{children:(0,s.jsx)(y.Z.Title,{level:1,style:{padding:0,marginBottom:16,fontWeight:500},children:"Password recovery"})}),(0,s.jsxs)(u.Z,{requiredMark:"optional",onFinish:Z,layout:"vertical",children:[(0,s.jsx)(u.Z.Item,{name:"email",label:"Enter your email address",rules:[{required:!0,message:"Email is required"}],children:(0,s.jsx)(d.default,{placeholder:"Email address",autoComplete:"email"})}),(0,s.jsx)(v.o,{name:"password",label:"Choose your password",inputPlaceholder:"Password",style:{marginBottom:"14px"}}),(0,s.jsx)(u.Z.Item,{name:"passwordConfirmation",label:"Confirm your password",rules:[{required:!0,message:"Password confirmation is required"},e=>{let{getFieldValue:t}=e;return{validator:(e,r)=>r&&t("password")!==r?Promise.reject(C.passwordMismatch):Promise.resolve()}}],style:{marginBottom:"14px"},children:(0,s.jsx)(d.default.Password,{placeholder:"Password"})}),(0,s.jsx)(f.Xq,{error:P}),(0,s.jsx)(u.Z.Item,{className:T().submit,children:(0,s.jsx)(i(),{type:"primary",loading:g,htmlType:"submit",children:"Finish"})})]})]})})})},E=()=>(0,s.jsx)(k,{})},72441:function(e){e.exports={password:"password_password__ju1vM",submit:"password_submit__bQX9G"}},35304:function(e){e.exports={variables:'"./variables.css"',colorPrimary:"#fad114",textColorDark:"rgba(0, 0, 0, 0.65)",textColorLight:"rgba(0, 0, 0, 0.45)",logo:"styles_logo__a_88m",displayNone:"styles_displayNone__X5JML",displayFlex:"styles_displayFlex__pvl0H",fullWidth:"styles_fullWidth__ig6Zi",fullHeight:"styles_fullHeight__aD1qp",noScroll:"styles_noScroll__jJYvq",scroll:"styles_scroll___zuDw",noBackground:"styles_noBackground__QOpQc",noBorder:"styles_noBorder__T5mw6",noBorderBottom:"styles_noBorderBottom__5ori7",textWhite:"styles_textWhite__yojx2",textLight:"styles_textLight__QglC7",textDark:"styles_textDark__xPmmk",textOrange:"styles_textOrange__TYZ4a",textGreen:"styles_textGreen__M8GsP",textAlignLeft:"styles_textAlignLeft__Da1jw",textAlignCenter:"styles_textAlignCenter__DSN8m",primaryColor:"styles_primaryColor__lHC0K",backgroundPrimary:"styles_backgroundPrimary__5S8pd"}}},function(e){e.O(0,[6373,9003,1350,302,1024,9734,9774,2888,179],function(){return e(e.s=47839)}),_N_E=e.O()}]);