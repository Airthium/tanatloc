{"ast":null,"code":"import \"antd/lib/layout/style\";\nimport _Layout from \"antd/lib/layout\";\nimport \"antd/lib/card/style\";\nimport _Card from \"antd/lib/card\";\nimport \"antd/lib/space/style\";\nimport _Space from \"antd/lib/space\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/checkbox/style\";\nimport _Checkbox from \"antd/lib/checkbox\";\nimport \"antd/lib/form/style\";\nimport _Form from \"antd/lib/form\";\nimport \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nimport \"antd/lib/message/style\";\nimport _message from \"antd/lib/message\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useRouter } from 'next/router';\nimport { useState } from 'react';\nimport login from '../src/lib/api/user/login';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { login as reduxLogin } from '../store/auth/action';\nconst errors = {\n  BAD_CREDENTIALS: 'Bad credentials. Please check your username and password'\n}; // Login page\n\nexport default (() => {\n  // State\n  const {\n    0: checking,\n    1: setChecking\n  } = useState(false); // Router\n\n  const router = useRouter(); // Redux\n\n  const dispatch = useDispatch(); // Check user\n\n  const {\n    user\n  } = useSelector(store => store.auth);\n\n  if (false && user.id) {\n    // Go to dashboard\n    router.push('/dashboard');\n  } // On login\n\n\n  const onLogin = async values => {\n    // State\n    setChecking(true); // Check\n\n    const check = await login(values); // Authorized or not\n\n    if (check.authorized) {\n      dispatch(reduxLogin({\n        username: values.username,\n        id: check.id\n      }));\n      router.push('/dashboard');\n    } else {\n      _message.error(errors.BAD_CREDENTIALS);\n\n      setChecking(false);\n    }\n  }; // Render\n\n\n  return __jsx(_Layout, null, __jsx(_Card, {\n    className: \"Login\"\n  }, __jsx(_Space, {\n    direction: \"vertical\",\n    size: \"large\"\n  }, __jsx(\"img\", {\n    src: \"banner.png\"\n  }), __jsx(_Form, {\n    initialValues: {\n      remember: true\n    },\n    onFinish: onLogin\n  }, __jsx(_Form.Item, {\n    name: \"username\",\n    rules: [{\n      required: true,\n      message: 'Please fill your Username!'\n    }]\n  }, __jsx(_Input, {\n    placeholder: \"username\",\n    autoComplete: \"username\"\n  })), __jsx(_Form.Item, {\n    name: \"password\",\n    rules: [{\n      required: true,\n      message: 'Please fill your Password!'\n    }]\n  }, __jsx(_Input.Password, {\n    placeholder: \"password\",\n    autoComplete: \"current-password\"\n  })), __jsx(_Form.Item, null, __jsx(_Form.Item, {\n    name: \"remember\",\n    valuePropName: \"checked\",\n    noStyle: true\n  }, __jsx(_Checkbox, null, \"remember me\")), __jsx(\"a\", {\n    className: \"Login-forgot\",\n    href: \"\"\n  }, \"forgot password\")), __jsx(_Form.Item, {\n    className: \"Login-submit\"\n  }, __jsx(_Button, {\n    type: \"primary\",\n    loading: checking,\n    htmlType: \"submit\"\n  }, \"Log in\"), __jsx(\"a\", {\n    href: \"\"\n  }, \"or register now!\"))))));\n});","map":null,"metadata":{},"sourceType":"module"}