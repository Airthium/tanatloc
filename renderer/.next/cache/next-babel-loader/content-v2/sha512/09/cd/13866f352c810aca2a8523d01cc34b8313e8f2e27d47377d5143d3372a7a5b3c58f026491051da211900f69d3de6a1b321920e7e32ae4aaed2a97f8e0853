{"ast":null,"code":"import _Card from \"antd/lib/card\";\nimport _Row from \"antd/lib/row\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _Button from \"antd/lib/button\";\nimport _Col from \"antd/lib/col\";\nimport _Typography from \"antd/lib/typography\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useState } from 'react';\nimport { DeleteOutlined } from '@ant-design/icons';\nimport { Error } from '../../assets/notification';\nimport { DeleteDialog } from '../../assets/dialog';\nimport UserAPI from '../../../../src/api/user';\nimport logout from '../../../../src/api/logout';\n/**\n * Errors account/delete\n * @memberof module:renderer/components/account\n */\n\nconst errors = {\n  delError: 'Unable to delete the user'\n};\n/**\n * Delete account\n * @memberof module:renderer/components/account\n */\n\nconst Delete = () => {\n  // State\n  const {\n    0: visible,\n    1: setVisible\n  } = useState(false);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const [, {\n    mutateUser\n  }] = UserAPI.useUser();\n  /**\n   * Handle delete\n   */\n\n  const handleDelete = async () => {\n    setLoading(true);\n\n    try {\n      // Delete\n      await UserAPI.del(); // Logout\n\n      await logout(); // Mutate\n\n      mutateUser({});\n    } catch (err) {\n      Error(errors.delError, err);\n    } finally {\n      setLoading(false);\n    }\n  };\n  /**\n   * Render\n   */\n\n\n  return /*#__PURE__*/_jsx(_Card, {\n    className: \"Vertical-gutter\",\n    bodyStyle: {\n      padding: '0 24px',\n      minHeight: '48px'\n    },\n    children: /*#__PURE__*/_jsxs(_Row, {\n      align: \"middle\",\n      children: [/*#__PURE__*/_jsx(_Col, {\n        span: 4,\n        children: /*#__PURE__*/_jsx(_Typography.Title, {\n          level: 5,\n          style: {\n            padding: '16px 0',\n            margin: 0,\n            fontWeight: 500\n          },\n          children: \"Delete your account\"\n        })\n      }), /*#__PURE__*/_jsx(_Col, {\n        span: 20,\n        children: /*#__PURE__*/_jsx(_Row, {\n          children: /*#__PURE__*/_jsxs(_Col, {\n            offset: 5,\n            children: [/*#__PURE__*/_jsx(_Button, {\n              icon: /*#__PURE__*/_jsx(DeleteOutlined, {}),\n              type: \"danger\",\n              onClick: () => setVisible(true),\n              children: \"Delete your account\"\n            }), /*#__PURE__*/_jsx(DeleteDialog, {\n              visible: visible,\n              onCancel: () => setVisible(false),\n              onOk: handleDelete,\n              loading: loading,\n              children: \"This action cannot be undone. If you delete your account, you will permanently lose your workspaces and projects.\"\n            })]\n          })\n        })\n      })]\n    })\n  });\n};\n\nexport default Delete;","map":null,"metadata":{},"sourceType":"module"}