{"ast":null,"code":"import _Space from \"antd/lib/space\";\nimport _Button from \"antd/lib/button\";\nimport _Input from \"antd/lib/input\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/simon/Documents/Git/Airthium/tanatloc-ssr/renderer/components/assets/formula/index.js\";\n\n/** @module renderer/components/assets/formula */\nimport { useState, useEffect } from 'react';\nimport { SaveOutlined } from '@ant-design/icons';\nconst saveDelay = 1000;\n/**\n * Formula\n * @param {Object} props Props\n */\n\nconst Formula = ({\n  defaultValue,\n  onChange,\n  unit\n}) => {\n  // State\n  const {\n    0: internalValue,\n    1: setInternalValue\n  } = useState(defaultValue);\n  const {\n    0: autoSave,\n    1: setAutoSave\n  } = useState(false);\n  const {\n    0: disabled,\n    1: setDisabled\n  } = useState(true);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false); // Units LaTeX\n\n  useEffect(() => {\n    var _window$MathJax;\n\n    (_window$MathJax = window.MathJax) === null || _window$MathJax === void 0 ? void 0 : _window$MathJax.typeset();\n  }, [unit]);\n  /**\n   * On input change\n   * @param {Object} event Event\n   */\n\n  const onInputChange = event => {\n    const currentValue = event.target.value;\n    setInternalValue(currentValue);\n    setDisabled(false);\n    onChangeDelayed(currentValue);\n  };\n  /**\n   * On change (delayed)\n   * @param {string} value Value\n   */\n\n\n  const onChangeDelayed = value => {\n    if (autoSave) clearTimeout(autoSave);\n    const id = setTimeout(() => {\n      setLoading(true);\n      onChange(value);\n      setLoading(false);\n      setDisabled(true);\n    }, saveDelay);\n    setAutoSave(id);\n  };\n  /**\n   * Render\n   */\n\n\n  return /*#__PURE__*/_jsxDEV(_Space, {\n    children: [/*#__PURE__*/_jsxDEV(_Input, {\n      value: internalValue,\n      onChange: onInputChange,\n      addonAfter: unit\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(_Button, {\n      disabled: disabled,\n      loading: loading,\n      icon: /*#__PURE__*/_jsxDEV(SaveOutlined, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 59\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n};\n\nexport default Formula;","map":{"version":3,"sources":["/home/simon/Documents/Git/Airthium/tanatloc-ssr/renderer/components/assets/formula/index.js"],"names":["useState","useEffect","SaveOutlined","saveDelay","Formula","defaultValue","onChange","unit","internalValue","setInternalValue","autoSave","setAutoSave","disabled","setDisabled","loading","setLoading","window","MathJax","typeset","onInputChange","event","currentValue","target","value","onChangeDelayed","clearTimeout","id","setTimeout"],"mappings":";;;;;;AAAA;AAEA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AAEA,SAASC,YAAT,QAA6B,mBAA7B;AAEA,MAAMC,SAAS,GAAG,IAAlB;AAEA;AACA;AACA;AACA;;AACA,MAAMC,OAAO,GAAG,CAAC;AAAEC,EAAAA,YAAF;AAAgBC,EAAAA,QAAhB;AAA0BC,EAAAA;AAA1B,CAAD,KAAsC;AACpD;AACA,QAAM;AAAA,OAACC,aAAD;AAAA,OAAgBC;AAAhB,MAAoCT,QAAQ,CAACK,YAAD,CAAlD;AACA,QAAM;AAAA,OAACK,QAAD;AAAA,OAAWC;AAAX,MAA0BX,QAAQ,CAAC,KAAD,CAAxC;AACA,QAAM;AAAA,OAACY,QAAD;AAAA,OAAWC;AAAX,MAA0Bb,QAAQ,CAAC,IAAD,CAAxC;AACA,QAAM;AAAA,OAACc,OAAD;AAAA,OAAUC;AAAV,MAAwBf,QAAQ,CAAC,KAAD,CAAtC,CALoD,CAOpD;;AACAC,EAAAA,SAAS,CAAC,MAAM;AAAA;;AACd,uBAAAe,MAAM,CAACC,OAAP,oEAAgBC,OAAhB;AACD,GAFQ,EAEN,CAACX,IAAD,CAFM,CAAT;AAIA;AACF;AACA;AACA;;AACE,QAAMY,aAAa,GAAIC,KAAD,IAAW;AAC/B,UAAMC,YAAY,GAAGD,KAAK,CAACE,MAAN,CAAaC,KAAlC;AACAd,IAAAA,gBAAgB,CAACY,YAAD,CAAhB;AACAR,IAAAA,WAAW,CAAC,KAAD,CAAX;AAEAW,IAAAA,eAAe,CAACH,YAAD,CAAf;AACD,GAND;AAQA;AACF;AACA;AACA;;;AACE,QAAMG,eAAe,GAAID,KAAD,IAAW;AACjC,QAAIb,QAAJ,EAAce,YAAY,CAACf,QAAD,CAAZ;AACd,UAAMgB,EAAE,GAAGC,UAAU,CAAC,MAAM;AAC1BZ,MAAAA,UAAU,CAAC,IAAD,CAAV;AACAT,MAAAA,QAAQ,CAACiB,KAAD,CAAR;AACAR,MAAAA,UAAU,CAAC,KAAD,CAAV;AACAF,MAAAA,WAAW,CAAC,IAAD,CAAX;AACD,KALoB,EAKlBV,SALkB,CAArB;AAMAQ,IAAAA,WAAW,CAACe,EAAD,CAAX;AACD,GATD;AAWA;AACF;AACA;;;AACE,sBACE;AAAA,4BACE;AAAO,MAAA,KAAK,EAAElB,aAAd;AAA6B,MAAA,QAAQ,EAAEW,aAAvC;AAAsD,MAAA,UAAU,EAAEZ;AAAlE;AAAA;AAAA;AAAA;AAAA,YADF,eAEE;AAAQ,MAAA,QAAQ,EAAEK,QAAlB;AAA4B,MAAA,OAAO,EAAEE,OAArC;AAA8C,MAAA,IAAI,eAAE,QAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAApD;AAAA;AAAA;AAAA;AAAA,YAFF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAMD,CAhDD;;AAkDA,eAAeV,OAAf","sourcesContent":["/** @module renderer/components/assets/formula */\n\nimport { useState, useEffect } from 'react'\nimport { Button, Input, Space } from 'antd'\nimport { SaveOutlined } from '@ant-design/icons'\n\nconst saveDelay = 1000\n\n/**\n * Formula\n * @param {Object} props Props\n */\nconst Formula = ({ defaultValue, onChange, unit }) => {\n  // State\n  const [internalValue, setInternalValue] = useState(defaultValue)\n  const [autoSave, setAutoSave] = useState(false)\n  const [disabled, setDisabled] = useState(true)\n  const [loading, setLoading] = useState(false)\n\n  // Units LaTeX\n  useEffect(() => {\n    window.MathJax?.typeset()\n  }, [unit])\n\n  /**\n   * On input change\n   * @param {Object} event Event\n   */\n  const onInputChange = (event) => {\n    const currentValue = event.target.value\n    setInternalValue(currentValue)\n    setDisabled(false)\n\n    onChangeDelayed(currentValue)\n  }\n\n  /**\n   * On change (delayed)\n   * @param {string} value Value\n   */\n  const onChangeDelayed = (value) => {\n    if (autoSave) clearTimeout(autoSave)\n    const id = setTimeout(() => {\n      setLoading(true)\n      onChange(value)\n      setLoading(false)\n      setDisabled(true)\n    }, saveDelay)\n    setAutoSave(id)\n  }\n\n  /**\n   * Render\n   */\n  return (\n    <Space>\n      <Input value={internalValue} onChange={onInputChange} addonAfter={unit} />\n      <Button disabled={disabled} loading={loading} icon={<SaveOutlined />} />\n    </Space>\n  )\n}\n\nexport default Formula\n"]},"metadata":{},"sourceType":"module"}