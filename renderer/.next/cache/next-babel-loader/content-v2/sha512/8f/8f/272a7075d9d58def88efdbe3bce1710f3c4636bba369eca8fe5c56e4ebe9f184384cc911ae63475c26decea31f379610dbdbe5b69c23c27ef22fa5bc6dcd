{"ast":null,"code":"import _Space from \"antd/lib/space\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _Button from \"antd/lib/button\";\nimport _Input from \"antd/lib/input\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\n/** @module renderer/components/assets/formula */\nimport { useState, useEffect } from 'react';\nimport { SaveOutlined } from '@ant-design/icons';\nvar saveDelay = 1000;\n/**\n * Formula\n * @param {Object} props Props\n */\n\nvar Formula = function Formula(_ref) {\n  var defaultValue = _ref.defaultValue,\n      onChange = _ref.onChange,\n      unit = _ref.unit;\n\n  // State\n  var _useState = useState(defaultValue),\n      internalValue = _useState[0],\n      setInternalValue = _useState[1];\n\n  var _useState2 = useState(false),\n      autoSave = _useState2[0],\n      setAutoSave = _useState2[1];\n\n  var _useState3 = useState(true),\n      disabled = _useState3[0],\n      setDisabled = _useState3[1];\n\n  var _useState4 = useState(false),\n      loading = _useState4[0],\n      setLoading = _useState4[1]; // Units LaTeX\n\n\n  useEffect(function () {\n    var _window$MathJax;\n\n    (_window$MathJax = window.MathJax) === null || _window$MathJax === void 0 ? void 0 : _window$MathJax.typeset();\n  }, [unit]);\n  /**\n   * On input change\n   * @param {Object} event Event\n   */\n\n  var onInputChange = function onInputChange(event) {\n    var currentValue = event.target.value;\n    setInternalValue(currentValue);\n    setDisabled(false);\n    onChangeDelayed(currentValue);\n  };\n  /**\n   * On change (delayed)\n   * @param {string} value Value\n   */\n\n\n  var onChangeDelayed = function onChangeDelayed(value) {\n    if (autoSave) clearTimeout(autoSave);\n    var id = setTimeout(function () {\n      setLoading(true);\n      onChange(value);\n      setLoading(false);\n      setDisabled(true);\n    }, saveDelay);\n    setAutoSave(id);\n  };\n  /**\n   * Render\n   */\n\n\n  return /*#__PURE__*/_jsxs(_Space, {\n    children: [/*#__PURE__*/_jsx(_Input, {\n      value: internalValue,\n      onChange: onInputChange,\n      addonAfter: unit\n    }), /*#__PURE__*/_jsx(_Button, {\n      disabled: disabled,\n      loading: loading,\n      icon: /*#__PURE__*/_jsx(SaveOutlined, {})\n    })]\n  });\n};\n\nexport default Formula;","map":null,"metadata":{},"sourceType":"module"}