{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport _Button from \"antd/lib/button\";\nimport _Modal from \"antd/lib/modal\";\nimport _InputNumber from \"antd/lib/input-number\";\nimport _Radio from \"antd/lib/radio\";\nimport _Table from \"antd/lib/table\";\nimport _Space from \"antd/lib/space\";\nimport _Typography from \"antd/lib/typography\";\nimport _Avatar from \"antd/lib/avatar\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/simon/Documents/Git/Airthium/tanatloc-ssr/renderer/plugin/rescale/renderer/index.js\";\nimport { useState, useEffect } from 'react';\nimport { SelectOutlined } from '@ant-design/icons';\n\nconst Rescale = ({\n  data\n}) => {\n  // State\n  const {\n    0: visible,\n    1: setVisible\n  } = useState(false);\n  const {\n    0: step,\n    1: setStep\n  } = useState(1);\n  const {\n    0: selected,\n    1: setSelected\n  } = useState();\n  const {\n    0: lowPriority,\n    1: setLowPriority\n  } = useState(true);\n  const {\n    0: coresError,\n    1: setCoresError\n  } = useState();\n  const {\n    0: numberOfCores,\n    1: setNumberOfCores\n  } = useState(); // Data\n\n  data.coreTypes.forEach(d => {\n    d.key = d.name;\n  });\n  const columns = [{\n    title: 'Name',\n    dataIndex: 'name',\n    key: 'name',\n    render: (text, record) => /*#__PURE__*/_jsxDEV(_Space, {\n      children: /*#__PURE__*/_jsxDEV(_Space, {\n        direction: \"vertical\",\n        children: [/*#__PURE__*/_jsxDEV(_Space, {\n          children: [/*#__PURE__*/_jsxDEV(_Avatar, {\n            style: {\n              marginRight: '-20px',\n              background: 'linear-gradient(to right,' + record.color + ', rgba(255, 255, 255, 0))',\n              opacity: 0.5\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 37,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(_Typography.Text, {\n            strong: true,\n            children: text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 36,\n          columnNumber: 13\n        }, this), record.processorInfo]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 9\n    }, this)\n  }, {\n    title: 'Cores',\n    dataIndex: 'cores',\n    key: 'cores',\n    render: cores => cores.join(', ')\n  }, {\n    title: 'Memory',\n    dataIndex: 'memory',\n    key: 'memory',\n    render: text => text / 1000 + ' Go'\n  }, {\n    title: 'Pro Price',\n    dataIndex: 'price',\n    key: 'price'\n  }, {\n    title: 'Price',\n    dataIndex: 'lowPriorityPrice',\n    key: 'lowPriorityPrice'\n  }]; // Extend cores\n\n  useEffect(() => {\n    const max = selected === null || selected === void 0 ? void 0 : selected.cores[(selected === null || selected === void 0 ? void 0 : selected.cores.length) - 1];\n    console.log(max);\n  }, [selected]);\n  /**\n   * On row change\n   * @param {string} selectedRowKeys key\n   * @param {Object} selectedRows Seleced\n   */\n\n  const onRowChange = (selectedRowKeys, selectedRows) => {\n    setSelected(selectedRows[0]);\n  };\n  /**\n   * On ok\n   */\n\n\n  const onOk = () => {\n    if (step === 1) {\n      setNumberOfCores(selected.cores[0]);\n      setStep(step + 1);\n    }\n  };\n  /**\n   * On cores change\n   * @param {number} value Value\n   */\n\n\n  const onCoresChange = value => {\n    if (!selected.cores.includes(value)) {\n      setCoresError(true);\n      setNumberOfCores(value);\n    } else {\n      setCoresError(false);\n      setNumberOfCores(value);\n    }\n  };\n\n  const onCoresStep = (value, info) => {\n    if (info.type === 'up') {\n      const sorted = selected.cores.filter(c => c >= value);\n      if (sorted.length) onCoresChange(sorted[0]);else {//TODO not good\n        // onCoresChange(numberOfCores + selected.cores[selected.cores.length - 1])\n      }\n    } else {\n      // down\n      const sorted = selected.cores.filter(c => c <= value);\n      if (sorted.length) onCoresChange(sorted.pop());else {//TODO\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(_Modal, {\n      title: \"Rescale plugin\",\n      visible: visible,\n      onCancel: () => setVisible(false),\n      okText: \"Next\",\n      okButtonProps: {\n        disabled: step === 1 && !selected\n      },\n      onOk: onOk,\n      width: step === 1 && 'auto',\n      children: [step === 1 && /*#__PURE__*/_jsxDEV(_Space, {\n        direction: \"vertical\",\n        children: [/*#__PURE__*/_jsxDEV(_Typography.Text, {\n          strong: true,\n          children: \"Select a coretype:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(_Table, {\n          dataSource: data.coreTypes,\n          columns: columns,\n          rowSelection: {\n            type: 'radio',\n            onChange: onRowChange\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 11\n      }, this), step === 2 && /*#__PURE__*/_jsxDEV(_Space, {\n        children: [/*#__PURE__*/_jsxDEV(_Space, {\n          direction: \"vertical\",\n          children: [/*#__PURE__*/_jsxDEV(_Radio.Group, {\n            onChange: e => setLowPriority(e.target.value),\n            value: lowPriority,\n            children: [/*#__PURE__*/_jsxDEV(_Radio, {\n              value: false,\n              children: \"On-Demand Pro\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(_Radio, {\n              value: true,\n              children: \"On-Demand\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(_Typography.Text, {\n            strong: true,\n            children: \"Number of cores:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(_InputNumber, {\n            min: selected.cores[0],\n            max: 1000,\n            value: numberOfCores,\n            onChange: onCoresChange,\n            onStep: onCoresStep,\n            style: {\n              border: coresError && '1px solid red'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(_Space, {\n          direction: \"vertical\",\n          children: [/*#__PURE__*/_jsxDEV(_Typography.Text, {\n            strong: true,\n            children: \"Informations:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(_Typography.Text, {\n            children: [selected.name, \" Core (x\", numberOfCores, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(_Typography.Text, {\n            children: [\"Price:\", ' ', numberOfCores * (lowPriority ? selected.lowPriorityPrice : selected.price), ' ', \"/ hour\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(_Space, {\n      children: [/*#__PURE__*/_jsxDEV(_Typography.Text, {\n        children: [\"More information on\", ' ', /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"https://www.rescale.com/infrastructure/\",\n          target: \"_blank\",\n          children: \"Rescale website\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this), \".\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(_Button, {\n        onClick: () => setVisible(true),\n        icon: /*#__PURE__*/_jsxDEV(SelectOutlined, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 56\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\nexport default Rescale;\n{\n  /* <Space>\n                <Space direction=\"vertical\">\n                  {plugin.configuration.name.value}\n                  <Form>\n                    {Object.keys(plugin.inUseConfiguration).map((key) => {\n                      const item = plugin.inUseConfiguration[key]\n                      console.log(item)\n                      if (item.type === 'label')\n                        return (\n                          <div\n                            dangerouslySetInnerHTML={{ __html: item.label }}\n                          />\n                        )\n                      else if (item.type === 'number')\n                        return (\n                          <Form.Item htmlFor={key} label={item.label}>\n                            <InputNumber id={key} defaultValue={item.default} />\n                          </Form.Item>\n                        )\n                      else if (item.type === 'select')\n                        return (\n                          <Form.Item label={item.label}>\n                            <Select id={key} options={item.options} />\n                          </Form.Item>\n                        )\n                      else if (item.type === 'radio')\n                        return (\n                          <Form.Item label={item.label} htmlFor={key}>\n                            <Radio.Group id={key}>\n                              {item.options.map((o) => (\n                                <Radio value={o.value}>{o.label}</Radio>\n                              ))}\n                            </Radio.Group>\n                          </Form.Item>\n                        )\n                    })}\n                  </Form>\n                </Space>\n                <Button type=\"primary\" icon={<SelectOutlined />} />\n              </Space> */\n}","map":{"version":3,"sources":["/home/simon/Documents/Git/Airthium/tanatloc-ssr/renderer/plugin/rescale/renderer/index.js"],"names":["useState","useEffect","SelectOutlined","Rescale","data","visible","setVisible","step","setStep","selected","setSelected","lowPriority","setLowPriority","coresError","setCoresError","numberOfCores","setNumberOfCores","coreTypes","forEach","d","key","name","columns","title","dataIndex","render","text","record","marginRight","background","color","opacity","processorInfo","cores","join","max","length","console","log","onRowChange","selectedRowKeys","selectedRows","onOk","onCoresChange","value","includes","onCoresStep","info","type","sorted","filter","c","pop","disabled","onChange","e","target","border","lowPriorityPrice","price"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react'\nimport {\n  Avatar,\n  Button,\n  InputNumber,\n  Modal,\n  Radio,\n  Space,\n  Table,\n  Typography\n} from 'antd'\nimport { SelectOutlined } from '@ant-design/icons'\n\nconst Rescale = ({ data }) => {\n  // State\n  const [visible, setVisible] = useState(false)\n  const [step, setStep] = useState(1)\n  const [selected, setSelected] = useState()\n  const [lowPriority, setLowPriority] = useState(true)\n  const [coresError, setCoresError] = useState()\n  const [numberOfCores, setNumberOfCores] = useState()\n\n  // Data\n  data.coreTypes.forEach((d) => {\n    d.key = d.name\n  })\n\n  const columns = [\n    {\n      title: 'Name',\n      dataIndex: 'name',\n      key: 'name',\n      render: (text, record) => (\n        <Space>\n          <Space direction=\"vertical\">\n            <Space>\n              <Avatar\n                style={{\n                  marginRight: '-20px',\n                  background:\n                    'linear-gradient(to right,' +\n                    record.color +\n                    ', rgba(255, 255, 255, 0))',\n                  opacity: 0.5\n                }}\n              />\n              <Typography.Text strong={true}>{text}</Typography.Text>\n            </Space>\n            {record.processorInfo}\n          </Space>\n        </Space>\n      )\n    },\n    {\n      title: 'Cores',\n      dataIndex: 'cores',\n      key: 'cores',\n      render: (cores) => cores.join(', ')\n    },\n    {\n      title: 'Memory',\n      dataIndex: 'memory',\n      key: 'memory',\n      render: (text) => text / 1000 + ' Go'\n    },\n    {\n      title: 'Pro Price',\n      dataIndex: 'price',\n      key: 'price'\n    },\n    {\n      title: 'Price',\n      dataIndex: 'lowPriorityPrice',\n      key: 'lowPriorityPrice'\n    }\n  ]\n\n  // Extend cores\n  useEffect(() => {\n    const max = selected?.cores[selected?.cores.length - 1]\n    console.log(max)\n  }, [selected])\n\n  /**\n   * On row change\n   * @param {string} selectedRowKeys key\n   * @param {Object} selectedRows Seleced\n   */\n  const onRowChange = (selectedRowKeys, selectedRows) => {\n    setSelected(selectedRows[0])\n  }\n\n  /**\n   * On ok\n   */\n  const onOk = () => {\n    if (step === 1) {\n      setNumberOfCores(selected.cores[0])\n      setStep(step + 1)\n    }\n  }\n\n  /**\n   * On cores change\n   * @param {number} value Value\n   */\n  const onCoresChange = (value) => {\n    if (!selected.cores.includes(value)) {\n      setCoresError(true)\n      setNumberOfCores(value)\n    } else {\n      setCoresError(false)\n      setNumberOfCores(value)\n    }\n  }\n\n  const onCoresStep = (value, info) => {\n    if (info.type === 'up') {\n      const sorted = selected.cores.filter((c) => c >= value)\n\n      if (sorted.length) onCoresChange(sorted[0])\n      else {\n        //TODO not good\n        // onCoresChange(numberOfCores + selected.cores[selected.cores.length - 1])\n      }\n    } else {\n      // down\n      const sorted = selected.cores.filter((c) => c <= value)\n\n      if (sorted.length) onCoresChange(sorted.pop())\n      else {\n        //TODO\n      }\n    }\n  }\n\n  return (\n    <>\n      <Modal\n        title=\"Rescale plugin\"\n        visible={visible}\n        onCancel={() => setVisible(false)}\n        okText=\"Next\"\n        okButtonProps={{\n          disabled: step === 1 && !selected\n        }}\n        onOk={onOk}\n        width={step === 1 && 'auto'}\n      >\n        {step === 1 && (\n          <Space direction=\"vertical\">\n            <Typography.Text strong={true}>Select a coretype:</Typography.Text>\n            <Table\n              dataSource={data.coreTypes}\n              columns={columns}\n              rowSelection={{\n                type: 'radio',\n                onChange: onRowChange\n              }}\n            />\n          </Space>\n        )}\n        {step === 2 && (\n          <Space>\n            <Space direction=\"vertical\">\n              <Radio.Group\n                onChange={(e) => setLowPriority(e.target.value)}\n                value={lowPriority}\n              >\n                <Radio value={false}>On-Demand Pro</Radio>\n                <Radio value={true}>On-Demand</Radio>\n              </Radio.Group>\n              <Typography.Text strong={true}>Number of cores:</Typography.Text>\n              <InputNumber\n                min={selected.cores[0]}\n                max={1000}\n                value={numberOfCores}\n                onChange={onCoresChange}\n                onStep={onCoresStep}\n                style={{ border: coresError && '1px solid red' }}\n              />\n            </Space>\n            <Space direction=\"vertical\">\n              <Typography.Text strong={true}>Informations:</Typography.Text>\n              <Typography.Text>\n                {selected.name} Core (x{numberOfCores})\n              </Typography.Text>\n              <Typography.Text>\n                Price:{' '}\n                {numberOfCores *\n                  (lowPriority\n                    ? selected.lowPriorityPrice\n                    : selected.price)}{' '}\n                / hour\n              </Typography.Text>\n            </Space>\n          </Space>\n        )}\n      </Modal>\n      <Space>\n        <Typography.Text>\n          More information on{' '}\n          <a href=\"https://www.rescale.com/infrastructure/\" target=\"_blank\">\n            Rescale website\n          </a>\n          .\n        </Typography.Text>\n        <Button onClick={() => setVisible(true)} icon={<SelectOutlined />} />\n      </Space>\n    </>\n  )\n}\n\nexport default Rescale\n\n{\n  /* <Space>\n                <Space direction=\"vertical\">\n                  {plugin.configuration.name.value}\n                  <Form>\n                    {Object.keys(plugin.inUseConfiguration).map((key) => {\n                      const item = plugin.inUseConfiguration[key]\n                      console.log(item)\n                      if (item.type === 'label')\n                        return (\n                          <div\n                            dangerouslySetInnerHTML={{ __html: item.label }}\n                          />\n                        )\n                      else if (item.type === 'number')\n                        return (\n                          <Form.Item htmlFor={key} label={item.label}>\n                            <InputNumber id={key} defaultValue={item.default} />\n                          </Form.Item>\n                        )\n                      else if (item.type === 'select')\n                        return (\n                          <Form.Item label={item.label}>\n                            <Select id={key} options={item.options} />\n                          </Form.Item>\n                        )\n                      else if (item.type === 'radio')\n                        return (\n                          <Form.Item label={item.label} htmlFor={key}>\n                            <Radio.Group id={key}>\n                              {item.options.map((o) => (\n                                <Radio value={o.value}>{o.label}</Radio>\n                              ))}\n                            </Radio.Group>\n                          </Form.Item>\n                        )\n                    })}\n                  </Form>\n                </Space>\n                <Button type=\"primary\" icon={<SelectOutlined />} />\n              </Space> */\n}\n"]},"metadata":{},"sourceType":"module"}