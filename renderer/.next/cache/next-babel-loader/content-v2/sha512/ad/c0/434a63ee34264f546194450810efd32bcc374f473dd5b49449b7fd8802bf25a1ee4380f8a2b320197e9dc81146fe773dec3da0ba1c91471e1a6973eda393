{"ast":null,"code":"import _Space from \"antd/lib/space\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _Button from \"antd/lib/button\";\nimport _Input from \"antd/lib/input\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\n/** @module renderer/components/assets/formula */\nimport { useState, useEffect } from 'react';\nimport { SaveOutlined } from '@ant-design/icons';\nconst saveDelay = 1000;\n/**\n * Formula\n * @param {Object} props Props\n */\n\nconst Formula = ({\n  defaultValue,\n  onChange,\n  unit\n}) => {\n  // State\n  const {\n    0: internalValue,\n    1: setInternalValue\n  } = useState(defaultValue);\n  const {\n    0: autoSave,\n    1: setAutoSave\n  } = useState(false);\n  const {\n    0: disabled,\n    1: setDisabled\n  } = useState(true);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false); // Units LaTeX\n\n  useEffect(() => {\n    var _window$MathJax;\n\n    (_window$MathJax = window.MathJax) === null || _window$MathJax === void 0 ? void 0 : _window$MathJax.typeset();\n  }, [unit]);\n  /**\n   * On input change\n   * @param {Object} event Event\n   */\n\n  const onInputChange = event => {\n    const currentValue = event.target.value;\n    setInternalValue(currentValue);\n    setDisabled(false);\n    onChangeDelayed(currentValue);\n  };\n  /**\n   * On change (delayed)\n   * @param {string} value Value\n   */\n\n\n  const onChangeDelayed = value => {\n    if (autoSave) clearTimeout(autoSave);\n    const id = setTimeout(() => {\n      setLoading(true);\n      onChange(value);\n      setLoading(false);\n      setDisabled(true);\n    }, saveDelay);\n    setAutoSave(id);\n  };\n  /**\n   * Render\n   */\n\n\n  return /*#__PURE__*/_jsxs(_Space, {\n    children: [/*#__PURE__*/_jsx(_Input, {\n      value: internalValue,\n      onChange: onInputChange,\n      addonAfter: unit\n    }), /*#__PURE__*/_jsx(_Button, {\n      disabled: disabled,\n      loading: loading,\n      icon: /*#__PURE__*/_jsx(SaveOutlined, {})\n    })]\n  });\n};\n\nexport default Formula;","map":null,"metadata":{},"sourceType":"module"}