{"ast":null,"code":"import _Space from \"antd/lib/space\";\nimport _Button from \"antd/lib/button\";\nimport _Input from \"antd/lib/input\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/simon/Documents/Git/Airthium/tanatloc-ssr/renderer/components/assets/formula/index.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\n/** @module renderer/components/assets/formula */\nimport { useState, useEffect } from 'react';\nimport { SaveOutlined } from '@ant-design/icons';\nvar saveDelay = 1000;\n/**\n * Formula\n * @param {Object} props Props\n */\n\nvar Formula = function Formula(_ref) {\n  _s();\n\n  var defaultValue = _ref.defaultValue,\n      onChange = _ref.onChange,\n      unit = _ref.unit;\n\n  // State\n  var _useState = useState(defaultValue),\n      internalValue = _useState[0],\n      setInternalValue = _useState[1];\n\n  var _useState2 = useState(false),\n      autoSave = _useState2[0],\n      setAutoSave = _useState2[1];\n\n  var _useState3 = useState(true),\n      disabled = _useState3[0],\n      setDisabled = _useState3[1];\n\n  var _useState4 = useState(false),\n      loading = _useState4[0],\n      setLoading = _useState4[1]; // Units LaTeX\n\n\n  useEffect(function () {\n    var _window$MathJax;\n\n    (_window$MathJax = window.MathJax) === null || _window$MathJax === void 0 ? void 0 : _window$MathJax.typeset();\n  }, [unit]);\n  /**\n   * On input change\n   * @param {Object} event Event\n   */\n\n  var onInputChange = function onInputChange(event) {\n    var currentValue = event.target.value;\n    setInternalValue(currentValue);\n    setDisabled(false);\n    onChangeDelayed(currentValue);\n  };\n  /**\n   * On change (delayed)\n   * @param {string} value Value\n   */\n\n\n  var onChangeDelayed = function onChangeDelayed(value) {\n    if (autoSave) clearTimeout(autoSave);\n    var id = setTimeout(function () {\n      setLoading(true);\n      onChange(value);\n      setLoading(false);\n      setDisabled(true);\n    }, saveDelay);\n    setAutoSave(id);\n  };\n  /**\n   * Render\n   */\n\n\n  return /*#__PURE__*/_jsxDEV(_Space, {\n    children: [/*#__PURE__*/_jsxDEV(_Input, {\n      value: internalValue,\n      onChange: onInputChange,\n      addonAfter: unit\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(_Button, {\n      disabled: disabled,\n      loading: loading,\n      icon: /*#__PURE__*/_jsxDEV(SaveOutlined, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 59\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(Formula, \"4qne1acskYDUeze/3nvAexSJyF4=\");\n\n_c = Formula;\nexport default Formula;\n\nvar _c;\n\n$RefreshReg$(_c, \"Formula\");","map":{"version":3,"sources":["/home/simon/Documents/Git/Airthium/tanatloc-ssr/renderer/components/assets/formula/index.js"],"names":["useState","useEffect","SaveOutlined","saveDelay","Formula","defaultValue","onChange","unit","internalValue","setInternalValue","autoSave","setAutoSave","disabled","setDisabled","loading","setLoading","window","MathJax","typeset","onInputChange","event","currentValue","target","value","onChangeDelayed","clearTimeout","id","setTimeout"],"mappings":";;;;;;;;;AAAA;AAEA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AAEA,SAASC,YAAT,QAA6B,mBAA7B;AAEA,IAAMC,SAAS,GAAG,IAAlB;AAEA;AACA;AACA;AACA;;AACA,IAAMC,OAAO,GAAG,SAAVA,OAAU,OAAsC;AAAA;;AAAA,MAAnCC,YAAmC,QAAnCA,YAAmC;AAAA,MAArBC,QAAqB,QAArBA,QAAqB;AAAA,MAAXC,IAAW,QAAXA,IAAW;;AACpD;AADoD,kBAEVP,QAAQ,CAACK,YAAD,CAFE;AAAA,MAE7CG,aAF6C;AAAA,MAE9BC,gBAF8B;;AAAA,mBAGpBT,QAAQ,CAAC,KAAD,CAHY;AAAA,MAG7CU,QAH6C;AAAA,MAGnCC,WAHmC;;AAAA,mBAIpBX,QAAQ,CAAC,IAAD,CAJY;AAAA,MAI7CY,QAJ6C;AAAA,MAInCC,WAJmC;;AAAA,mBAKtBb,QAAQ,CAAC,KAAD,CALc;AAAA,MAK7Cc,OAL6C;AAAA,MAKpCC,UALoC,kBAOpD;;;AACAd,EAAAA,SAAS,CAAC,YAAM;AAAA;;AACd,uBAAAe,MAAM,CAACC,OAAP,oEAAgBC,OAAhB;AACD,GAFQ,EAEN,CAACX,IAAD,CAFM,CAAT;AAIA;AACF;AACA;AACA;;AACE,MAAMY,aAAa,GAAG,SAAhBA,aAAgB,CAACC,KAAD,EAAW;AAC/B,QAAMC,YAAY,GAAGD,KAAK,CAACE,MAAN,CAAaC,KAAlC;AACAd,IAAAA,gBAAgB,CAACY,YAAD,CAAhB;AACAR,IAAAA,WAAW,CAAC,KAAD,CAAX;AAEAW,IAAAA,eAAe,CAACH,YAAD,CAAf;AACD,GAND;AAQA;AACF;AACA;AACA;;;AACE,MAAMG,eAAe,GAAG,SAAlBA,eAAkB,CAACD,KAAD,EAAW;AACjC,QAAIb,QAAJ,EAAce,YAAY,CAACf,QAAD,CAAZ;AACd,QAAMgB,EAAE,GAAGC,UAAU,CAAC,YAAM;AAC1BZ,MAAAA,UAAU,CAAC,IAAD,CAAV;AACAT,MAAAA,QAAQ,CAACiB,KAAD,CAAR;AACAR,MAAAA,UAAU,CAAC,KAAD,CAAV;AACAF,MAAAA,WAAW,CAAC,IAAD,CAAX;AACD,KALoB,EAKlBV,SALkB,CAArB;AAMAQ,IAAAA,WAAW,CAACe,EAAD,CAAX;AACD,GATD;AAWA;AACF;AACA;;;AACE,sBACE;AAAA,4BACE;AAAO,MAAA,KAAK,EAAElB,aAAd;AAA6B,MAAA,QAAQ,EAAEW,aAAvC;AAAsD,MAAA,UAAU,EAAEZ;AAAlE;AAAA;AAAA;AAAA;AAAA,aADF,eAEE;AAAQ,MAAA,QAAQ,EAAEK,QAAlB;AAA4B,MAAA,OAAO,EAAEE,OAArC;AAA8C,MAAA,IAAI,eAAE,QAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAApD;AAAA;AAAA;AAAA;AAAA,aAFF;AAAA;AAAA;AAAA;AAAA;AAAA,WADF;AAMD,CAhDD;;GAAMV,O;;KAAAA,O;AAkDN,eAAeA,OAAf","sourcesContent":["/** @module renderer/components/assets/formula */\n\nimport { useState, useEffect } from 'react'\nimport { Button, Input, Space } from 'antd'\nimport { SaveOutlined } from '@ant-design/icons'\n\nconst saveDelay = 1000\n\n/**\n * Formula\n * @param {Object} props Props\n */\nconst Formula = ({ defaultValue, onChange, unit }) => {\n  // State\n  const [internalValue, setInternalValue] = useState(defaultValue)\n  const [autoSave, setAutoSave] = useState(false)\n  const [disabled, setDisabled] = useState(true)\n  const [loading, setLoading] = useState(false)\n\n  // Units LaTeX\n  useEffect(() => {\n    window.MathJax?.typeset()\n  }, [unit])\n\n  /**\n   * On input change\n   * @param {Object} event Event\n   */\n  const onInputChange = (event) => {\n    const currentValue = event.target.value\n    setInternalValue(currentValue)\n    setDisabled(false)\n\n    onChangeDelayed(currentValue)\n  }\n\n  /**\n   * On change (delayed)\n   * @param {string} value Value\n   */\n  const onChangeDelayed = (value) => {\n    if (autoSave) clearTimeout(autoSave)\n    const id = setTimeout(() => {\n      setLoading(true)\n      onChange(value)\n      setLoading(false)\n      setDisabled(true)\n    }, saveDelay)\n    setAutoSave(id)\n  }\n\n  /**\n   * Render\n   */\n  return (\n    <Space>\n      <Input value={internalValue} onChange={onInputChange} addonAfter={unit} />\n      <Button disabled={disabled} loading={loading} icon={<SaveOutlined />} />\n    </Space>\n  )\n}\n\nexport default Formula\n"]},"metadata":{},"sourceType":"module"}