{"ast":null,"code":"import _Card from \"antd/lib/card\";\nimport _Row from \"antd/lib/row\";\nimport _Button from \"antd/lib/button\";\nimport _Col from \"antd/lib/col\";\nimport _Typography from \"antd/lib/typography\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/home/simon/Documents/Git/Airthium/tanatloc-ssr/renderer/components/account/delete/index.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport { useState } from 'react';\nimport { DeleteOutlined } from '@ant-design/icons';\nimport { Error } from '../../assets/notification';\nimport { DeleteDialog } from '../../assets/dialog';\nimport UserAPI from '../../../../src/api/user';\nimport logout from '../../../../src/api/logout';\n/**\n * Errors account/delete\n * @memberof module:renderer/components/account\n */\n\nvar errors = {\n  delError: 'Unable to delete the user'\n};\n/**\n * Delete account\n * @memberof module:renderer/components/account\n */\n\nvar Delete = function Delete() {\n  _s();\n\n  // State\n  var _useState = useState(false),\n      visible = _useState[0],\n      setVisible = _useState[1];\n\n  var _useState2 = useState(false),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _UserAPI$useUser = UserAPI.useUser(),\n      _UserAPI$useUser2 = _slicedToArray(_UserAPI$useUser, 2),\n      mutateUser = _UserAPI$useUser2[1].mutateUser;\n  /**\n   * Handle delete\n   */\n\n\n  var handleDelete = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setLoading(true);\n              _context.prev = 1;\n              _context.next = 4;\n              return UserAPI.del();\n\n            case 4:\n              _context.next = 6;\n              return logout();\n\n            case 6:\n              // Mutate\n              mutateUser({});\n              _context.next = 12;\n              break;\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](1);\n              Error(errors.delError, _context.t0);\n\n            case 12:\n              _context.prev = 12;\n              setLoading(false);\n              return _context.finish(12);\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 9, 12, 15]]);\n    }));\n\n    return function handleDelete() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  /**\n   * Render\n   */\n\n\n  return /*#__PURE__*/_jsxDEV(_Card, {\n    className: \"Vertical-gutter\",\n    bodyStyle: {\n      padding: '0 24px',\n      minHeight: '48px'\n    },\n    children: /*#__PURE__*/_jsxDEV(_Row, {\n      align: \"middle\",\n      children: [/*#__PURE__*/_jsxDEV(_Col, {\n        span: 4,\n        children: /*#__PURE__*/_jsxDEV(_Typography.Title, {\n          level: 5,\n          style: {\n            padding: '16px 0',\n            margin: 0,\n            fontWeight: 500\n          },\n          children: \"Delete your account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(_Col, {\n        span: 20,\n        children: /*#__PURE__*/_jsxDEV(_Row, {\n          children: /*#__PURE__*/_jsxDEV(_Col, {\n            offset: 5,\n            children: [/*#__PURE__*/_jsxDEV(_Button, {\n              icon: /*#__PURE__*/_jsxDEV(DeleteOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 77,\n                columnNumber: 23\n              }, _this),\n              type: \"danger\",\n              onClick: function onClick() {\n                return setVisible(true);\n              },\n              children: \"Delete your account\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(DeleteDialog, {\n              visible: visible,\n              onCancel: function onCancel() {\n                return setVisible(false);\n              },\n              onOk: handleDelete,\n              loading: loading,\n              children: \"This action cannot be undone. If you delete your account, you will permanently lose your workspaces and projects.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(Delete, \"v1gWoKIi4Wh0KHhoE9r/RQT4HxA=\", false, function () {\n  return [UserAPI.useUser];\n});\n\n_c = Delete;\nexport default Delete;\n\nvar _c;\n\n$RefreshReg$(_c, \"Delete\");","map":{"version":3,"sources":["/home/simon/Documents/Git/Airthium/tanatloc-ssr/renderer/components/account/delete/index.js"],"names":["useState","DeleteOutlined","Error","DeleteDialog","UserAPI","logout","errors","delError","Delete","visible","setVisible","loading","setLoading","useUser","mutateUser","handleDelete","del","padding","minHeight","margin","fontWeight"],"mappings":"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","sourcesContent":["import { useState } from 'react'\nimport { Button, Card, Row, Col, Typography } from 'antd'\n\nimport { DeleteOutlined } from '@ant-design/icons'\n\nimport { Error } from '../../assets/notification'\nimport { DeleteDialog } from '../../assets/dialog'\n\nimport UserAPI from '../../../../src/api/user'\nimport logout from '../../../../src/api/logout'\n\n/**\n * Errors account/delete\n * @memberof module:renderer/components/account\n */\nconst errors = {\n  delError: 'Unable to delete the user'\n}\n\n/**\n * Delete account\n * @memberof module:renderer/components/account\n */\nconst Delete = () => {\n  // State\n  const [visible, setVisible] = useState(false)\n  const [loading, setLoading] = useState(false)\n\n  const [, { mutateUser }] = UserAPI.useUser()\n\n  /**\n   * Handle delete\n   */\n  const handleDelete = async () => {\n    setLoading(true)\n    try {\n      // Delete\n      await UserAPI.del()\n\n      // Logout\n      await logout()\n\n      // Mutate\n      mutateUser({})\n    } catch (err) {\n      Error(errors.delError, err)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  /**\n   * Render\n   */\n  return (\n    <Card\n      className=\"Vertical-gutter\"\n      bodyStyle={{\n        padding: '0 24px',\n        minHeight: '48px'\n      }}\n    >\n      <Row align=\"middle\">\n        <Col span={4}>\n          <Typography.Title\n            level={5}\n            style={{ padding: '16px 0', margin: 0, fontWeight: 500 }}\n          >\n            Delete your account\n          </Typography.Title>\n        </Col>\n\n        <Col span={20}>\n          <Row>\n            <Col offset={5}>\n              <Button\n                icon={<DeleteOutlined />}\n                type=\"danger\"\n                onClick={() => setVisible(true)}\n              >\n                Delete your account\n              </Button>\n              <DeleteDialog\n                visible={visible}\n                onCancel={() => setVisible(false)}\n                onOk={handleDelete}\n                loading={loading}\n              >\n                This action cannot be undone. If you delete your account, you\n                will permanently lose your workspaces and projects.\n              </DeleteDialog>\n            </Col>\n          </Row>\n        </Col>\n      </Row>\n    </Card>\n  )\n}\n\nexport default Delete\n"]},"metadata":{},"sourceType":"module"}